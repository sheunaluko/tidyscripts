
import * as jpeg from 'jpeg-js' ; 

//  - - https://github.com/flexdinesh/browser-or-node/blob/master/src/index.js

/**
 * Returns true if the code is executing in the browser 
 */
export function is_browser() {

    return ( typeof window !== "undefined" && typeof window.document !== "undefined" ) 
} 

/**
 * Returns true if the code is executing in node  
 */
export function is_node() {
    return ( typeof process !== "undefined" &&  process.versions != null &&   process.versions.node != null ) 
} 


  



var json_retriever : any = null ;
/**
 * Set the json_retriever function. 
 */
export function set_json_retriever( f : any ) {  json_retriever =  f ; } 
/**
 * Abstraction over the IO request function 
 */
export async function retrieve_json( url : string ) {
    return await json_retriever(url) 
}



var image_retriever : any = null ;
/**
 * Set the image_retriever function. 
 */
export function set_image_retriever( f : any ) {  image_retriever =  f ; } 
/**
 * Abstraction over the image request function 
 */
export async function retrieve_image( url : string ) {
    return await image_retriever(url) 
}


export async function get_jpeg( url : string) {
    let blob = await retrieve_image(url) ;
    return jpeg.decode( await blob.arrayBuffer() , {useTArray : true} ) ; 
} 

export function hiya() {
    console.log("!!! hiya") 
} 
