/*! For license information please see tidyscripts_web_umd.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.tidyscripts_web=t():e.tidyscripts_web=t()}(this,(()=>(()=>{var e={499:(e,t)=>{var r={611:(e,t)=>{var r={5811:(e,t,r)=>{e=r.nmd(e);const n=(e=0)=>t=>`[${38+e};5;${t}m`,i=(e=0)=>(t,r,n)=>`[${38+e};2;${t};${r};${n}m`;Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(const[r,n]of Object.entries(t)){for(const[r,i]of Object.entries(n))t[r]={open:`[${i[0]}m`,close:`[${i[1]}m`},n[r]=t[r],e.set(i[0],i[1]);Object.defineProperty(t,r,{value:n,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="[39m",t.bgColor.close="[49m",t.color.ansi256=n(),t.color.ansi16m=i(),t.bgColor.ansi256=n(10),t.bgColor.ansi16m=i(10),Object.defineProperties(t,{rgbToAnsi256:{value:(e,t,r)=>e===t&&t===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value:e=>{const t=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(e.toString(16));if(!t)return[0,0,0];let{colorString:r}=t.groups;3===r.length&&(r=r.split("").map((e=>e+e)).join(""));const n=Number.parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},enumerable:!1},hexToAnsi256:{value:e=>t.rgbToAnsi256(...t.hexToRgb(e)),enumerable:!1}}),t}})},8837:e=>{const t=/[\p{Lu}]/u,r=/[\p{Ll}]/u,n=/^[\p{Lu}](?![\p{Lu}])/gu,i=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,a=new RegExp("^"+s.source),o=new RegExp(s.source+i.source,"gu"),u=new RegExp("\\d+"+i.source,"gu"),c=(e,i)=>{if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");if(i={pascalCase:!1,preserveConsecutiveUppercase:!1,...i},0===(e=Array.isArray(e)?e.map((e=>e.trim())).filter((e=>e.length)).join("-"):e.trim()).length)return"";const s=!1===i.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(i.locale),c=!1===i.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(i.locale);return 1===e.length?i.pascalCase?c(e):s(e):(e!==s(e)&&(e=((e,n,i)=>{let s=!1,a=!1,o=!1;for(let u=0;u<e.length;u++){const c=e[u];s&&t.test(c)?(e=e.slice(0,u)+"-"+e.slice(u),s=!1,o=a,a=!0,u++):a&&o&&r.test(c)?(e=e.slice(0,u-1)+"-"+e.slice(u-1),o=a,a=!1,s=!0):(s=n(c)===c&&i(c)!==c,o=a,a=i(c)===c&&n(c)!==c)}return e})(e,s,c)),e=e.replace(a,""),e=i.preserveConsecutiveUppercase?((e,t)=>(n.lastIndex=0,e.replace(n,(e=>t(e)))))(e,s):s(e),i.pascalCase&&(e=c(e.charAt(0))+e.slice(1)),((e,t)=>(o.lastIndex=0,u.lastIndex=0,e.replace(o,((e,r)=>t(r))).replace(u,(e=>t(e)))))(e,c))};e.exports=c,e.exports.default=c},5011:(e,t,r)=>{r(411).zodToJsonSchema},3846:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultOptions=t.defaultOptions=void 0,t.defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1},t.getDefaultOptions=e=>"string"==typeof e?Object.assign(Object.assign({},t.defaultOptions),{name:e}):Object.assign(Object.assign({},t.defaultOptions),e)},3520:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRefs=void 0;const n=r(3846);t.getRefs=e=>{const t=(0,n.getDefaultOptions)(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return Object.assign(Object.assign({},t),{currentPath:r,propertyPath:void 0,seen:[]})}},8702:(e,t)=>{function r(e,t,r,n){(null==n?void 0:n.errorMessages)&&r&&(e.errorMessage=Object.assign(Object.assign({},e.errorMessage),{[t]:r}))}Object.defineProperty(t,"__esModule",{value:!0}),t.setResponseValueAndErrors=t.addErrorMessage=void 0,t.addErrorMessage=r,t.setResponseValueAndErrors=function(e,t,n,i,s){e[t]=n,r(e,t,i,s)}},7605:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseDef=void 0;const n=r(6750),i=r(2672),s=r(3515),a=r(6502),o=r(3812),u=r(6757),c=r(6624),l=r(3208),d=r(6811),h=r(9261),f=r(4134),p=r(3689),m=r(5078),g=r(3079),y=r(9911),v=r(4312),_=r(4198),b=r(8724),w=r(1055),A=r(3729),E=r(2308),k=r(7044),x=r(7425),T=r(632),P=r(5136),S=r(962),I=r(5876),O=r(690),C=r(709),N=r(7988);function M(e,t){const r=t.seen.find((t=>Object.is(t.def,e)));if(r)return R(r,t);const n={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.push(n);const i=D(e,e.typeName,t);return i&&B(e,i),n.jsonSchema=i,i}t.parseDef=M;const R=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:0===e.path.length?"":1===e.path.length?`${e.path[0]}/`:e.path.join("/")};case"relative":return{$ref:j(t.currentPath,e.path)};case"none":return e.path.length<t.currentPath.length&&e.path.every(((e,r)=>t.currentPath[r]===e))?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):e.jsonSchema}},j=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},D=(e,t,r)=>{switch(t){case n.ZodFirstPartyTypeKind.ZodString:return(0,S.parseStringDef)(e,r);case n.ZodFirstPartyTypeKind.ZodNumber:return(0,w.parseNumberDef)(e,r);case n.ZodFirstPartyTypeKind.ZodObject:return(0,A.parseObjectDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBigInt:return(0,a.parseBigintDef)();case n.ZodFirstPartyTypeKind.ZodBoolean:return(0,o.parseBooleanDef)();case n.ZodFirstPartyTypeKind.ZodDate:return(0,l.parseDateDef)();case n.ZodFirstPartyTypeKind.ZodUndefined:return(0,O.parseUndefinedDef)();case n.ZodFirstPartyTypeKind.ZodNull:return(0,_.parseNullDef)(r);case n.ZodFirstPartyTypeKind.ZodArray:return(0,s.parseArrayDef)(e,r);case n.ZodFirstPartyTypeKind.ZodUnion:case n.ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return(0,C.parseUnionDef)(e,r);case n.ZodFirstPartyTypeKind.ZodIntersection:return(0,p.parseIntersectionDef)(e,r);case n.ZodFirstPartyTypeKind.ZodTuple:return(0,I.parseTupleDef)(e,r);case n.ZodFirstPartyTypeKind.ZodRecord:return(0,T.parseRecordDef)(e,r);case n.ZodFirstPartyTypeKind.ZodLiteral:return(0,m.parseLiteralDef)(e,r);case n.ZodFirstPartyTypeKind.ZodEnum:return(0,f.parseEnumDef)(e);case n.ZodFirstPartyTypeKind.ZodNativeEnum:return(0,y.parseNativeEnumDef)(e);case n.ZodFirstPartyTypeKind.ZodNullable:return(0,b.parseNullableDef)(e,r);case n.ZodFirstPartyTypeKind.ZodOptional:return(0,E.parseOptionalDef)(e,r);case n.ZodFirstPartyTypeKind.ZodMap:return(0,g.parseMapDef)(e,r);case n.ZodFirstPartyTypeKind.ZodSet:return(0,P.parseSetDef)(e,r);case n.ZodFirstPartyTypeKind.ZodLazy:return M(e.getter()._def,r);case n.ZodFirstPartyTypeKind.ZodPromise:return(0,x.parsePromiseDef)(e,r);case n.ZodFirstPartyTypeKind.ZodNaN:case n.ZodFirstPartyTypeKind.ZodNever:return(0,v.parseNeverDef)();case n.ZodFirstPartyTypeKind.ZodEffects:return(0,h.parseEffectsDef)(e,r);case n.ZodFirstPartyTypeKind.ZodAny:return(0,i.parseAnyDef)();case n.ZodFirstPartyTypeKind.ZodUnknown:return(0,N.parseUnknownDef)();case n.ZodFirstPartyTypeKind.ZodDefault:return(0,d.parseDefaultDef)(e,r);case n.ZodFirstPartyTypeKind.ZodBranded:return(0,u.parseBrandedDef)(e,r);case n.ZodFirstPartyTypeKind.ZodCatch:return(0,c.parseCatchDef)(e,r);case n.ZodFirstPartyTypeKind.ZodPipeline:return(0,k.parsePipelineDef)(e,r);case n.ZodFirstPartyTypeKind.ZodFunction:case n.ZodFirstPartyTypeKind.ZodVoid:case n.ZodFirstPartyTypeKind.ZodSymbol:default:return}},B=(e,t)=>(e.description&&(t.description=e.description),t)},2672:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseAnyDef=void 0,t.parseAnyDef=function(){return{}}},3515:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseArrayDef=void 0;const n=r(6750),i=r(8702),s=r(7605);t.parseArrayDef=function(e,t){var r,a;const o={type:"array"};return(null===(a=null===(r=e.type)||void 0===r?void 0:r._def)||void 0===a?void 0:a.typeName)!==n.ZodFirstPartyTypeKind.ZodAny&&(o.items=(0,s.parseDef)(e.type._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"items"]}))),e.minLength&&(0,i.setResponseValueAndErrors)(o,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&(0,i.setResponseValueAndErrors)(o,"maxItems",e.maxLength.value,e.maxLength.message,t),o}},6502:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseBigintDef=void 0,t.parseBigintDef=function(){return{type:"integer",format:"int64"}}},3812:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseBooleanDef=void 0,t.parseBooleanDef=function(){return{type:"boolean"}}},6757:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseBrandedDef=void 0;const n=r(7605);t.parseBrandedDef=function(e,t){return(0,n.parseDef)(e.type._def,t)}},6624:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseCatchDef=void 0;const n=r(7605);t.parseCatchDef=(e,t)=>(0,n.parseDef)(e.innerType._def,t)},3208:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseDateDef=void 0,t.parseDateDef=function(){return{type:"string",format:"date-time"}}},6811:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseDefaultDef=void 0;const n=r(7605);t.parseDefaultDef=function(e,t){return Object.assign(Object.assign({},(0,n.parseDef)(e.innerType._def,t)),{default:e.defaultValue()})}},9261:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseEffectsDef=void 0;const n=r(7605);t.parseEffectsDef=function(e,t){return"input"===t.effectStrategy?(0,n.parseDef)(e.schema._def,t):{}}},4134:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseEnumDef=void 0,t.parseEnumDef=function(e){return{type:"string",enum:e.values}}},3689:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseIntersectionDef=void 0;const n=r(7605);t.parseIntersectionDef=function(e,t){const r=[(0,n.parseDef)(e.left._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"allOf","0"]})),(0,n.parseDef)(e.right._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"allOf","1"]}))].filter((e=>!!e));return r.length?{allOf:r}:void 0}},5078:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseLiteralDef=void 0,t.parseLiteralDef=function(e,t){const r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}},3079:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseMapDef=void 0;const n=r(7605);t.parseMapDef=function(e,t){return{type:"array",maxItems:125,items:{type:"array",items:[(0,n.parseDef)(e.keyType._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"items","items","0"]}))||{},(0,n.parseDef)(e.valueType._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"items","items","1"]}))||{}],minItems:2,maxItems:2}}}},9911:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseNativeEnumDef=void 0,t.parseNativeEnumDef=function(e){const t=e.values,r=Object.keys(e.values).filter((e=>"number"!=typeof t[t[e]])).map((e=>t[e])),n=Array.from(new Set(r.map((e=>typeof e))));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}},4312:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseNeverDef=void 0,t.parseNeverDef=function(){return{not:{}}}},4198:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseNullDef=void 0,t.parseNullDef=function(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}},8724:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseNullableDef=void 0;const n=r(7605),i=r(709);t.parseNullableDef=function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:i.primitiveMappings[e.innerType._def.typeName],nullable:!0}:{type:[i.primitiveMappings[e.innerType._def.typeName],"null"]};const r=(0,n.parseDef)(e.innerType._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"anyOf","0"]}));return r?"openApi3"===t.target?Object.assign(Object.assign({},r),{nullable:!0}):{anyOf:[r,{type:"null"}]}:void 0}},1055:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseNumberDef=void 0;const n=r(8702);t.parseNumberDef=function(e,t){const r={type:"number"};if(!e.checks)return r;for(const i of e.checks)switch(i.kind){case"int":r.type="integer",(0,n.addErrorMessage)(r,"type",i.message,t);break;case"min":"jsonSchema7"===t.target?i.inclusive?(0,n.setResponseValueAndErrors)(r,"minimum",i.value,i.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMinimum",i.value,i.message,t):(i.inclusive||(r.exclusiveMinimum=!0),(0,n.setResponseValueAndErrors)(r,"minimum",i.value,i.message,t));break;case"max":"jsonSchema7"===t.target?i.inclusive?(0,n.setResponseValueAndErrors)(r,"maximum",i.value,i.message,t):(0,n.setResponseValueAndErrors)(r,"exclusiveMaximum",i.value,i.message,t):(i.inclusive||(r.exclusiveMaximum=!0),(0,n.setResponseValueAndErrors)(r,"maximum",i.value,i.message,t));break;case"multipleOf":(0,n.setResponseValueAndErrors)(r,"multipleOf",i.value,i.message,t)}return r}},3729:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseObjectDef=void 0;const n=r(7605);t.parseObjectDef=function(e,t){var r;const i=Object.assign(Object.assign({type:"object"},Object.entries(e.shape()).reduce(((e,[r,i])=>{if(void 0===i||void 0===i._def)return e;const s=(0,n.parseDef)(i._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"properties",r],propertyPath:[...t.currentPath,"properties",r]}));return void 0===s?e:{properties:Object.assign(Object.assign({},e.properties),{[r]:s}),required:i.isOptional()?e.required:[...e.required,r]}}),{properties:{},required:[]})),{additionalProperties:"ZodNever"===e.catchall._def.typeName?"passthrough"===e.unknownKeys:null===(r=(0,n.parseDef)(e.catchall._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"additionalProperties"]})))||void 0===r||r});return i.required.length||delete i.required,i}},2308:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseOptionalDef=void 0;const n=r(7605);t.parseOptionalDef=(e,t)=>{var r;if(t.currentPath.toString()===(null===(r=t.propertyPath)||void 0===r?void 0:r.toString()))return(0,n.parseDef)(e.innerType._def,t);const i=(0,n.parseDef)(e.innerType._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"anyOf","1"]}));return i?{anyOf:[{not:{}},i]}:{}}},7044:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parsePipelineDef=void 0;const n=r(7605);t.parsePipelineDef=(e,t)=>{const r=(0,n.parseDef)(e.in._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"allOf","0"]}));return{allOf:[r,(0,n.parseDef)(e.out._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"allOf",r?"1":"0"]}))].filter((e=>void 0!==e))}}},7425:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parsePromiseDef=void 0;const n=r(7605);t.parsePromiseDef=function(e,t){return(0,n.parseDef)(e.type._def,t)}},632:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseRecordDef=void 0;const n=r(6750),i=r(7605),s=r(962);t.parseRecordDef=function(e,t){var r,a,o;const u={type:"object",additionalProperties:(0,i.parseDef)(e.valueType._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"additionalProperties"]}))||{}};if((null===(r=e.keyType)||void 0===r?void 0:r._def.typeName)===n.ZodFirstPartyTypeKind.ZodString&&(null===(a=e.keyType._def.checks)||void 0===a?void 0:a.length)){const r=Object.entries((0,s.parseStringDef)(e.keyType._def,t)).reduce(((e,[t,r])=>"type"===t?e:Object.assign(Object.assign({},e),{[t]:r})),{});return Object.assign(Object.assign({},u),{propertyNames:r})}return(null===(o=e.keyType)||void 0===o?void 0:o._def.typeName)===n.ZodFirstPartyTypeKind.ZodEnum?Object.assign(Object.assign({},u),{propertyNames:{enum:e.keyType._def.values}}):u}},5136:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseSetDef=void 0;const n=r(8702),i=r(7605);t.parseSetDef=function(e,t){const r={type:"array",items:(0,i.parseDef)(e.valueType._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"items"]}))};return e.minSize&&(0,n.setResponseValueAndErrors)(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&(0,n.setResponseValueAndErrors)(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}},962:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseStringDef=void 0;const n=r(8702);t.parseStringDef=function(e,t){const r={type:"string"};if(e.checks)for(const a of e.checks)switch(a.kind){case"min":(0,n.setResponseValueAndErrors)(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t);break;case"max":(0,n.setResponseValueAndErrors)(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t);break;case"email":(0,n.setResponseValueAndErrors)(r,"format","email",a.message,t);break;case"url":(0,n.setResponseValueAndErrors)(r,"format","uri",a.message,t);break;case"uuid":(0,n.setResponseValueAndErrors)(r,"format","uuid",a.message,t);break;case"regex":s(r,a.regex.source,a.message,t);break;case"cuid":s(r,"^c[^\\s-]{8,}$",a.message,t);break;case"cuid2":s(r,"^[a-z][a-z0-9]*$",a.message,t);break;case"startsWith":s(r,"^"+i(a.value),a.message,t);break;case"endsWith":s(r,i(a.value)+"$",a.message,t);break;case"trim":break;case"datetime":(0,n.setResponseValueAndErrors)(r,"format","date-time",a.message,t);break;case"length":(0,n.setResponseValueAndErrors)(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,a.value):a.value,a.message,t),(0,n.setResponseValueAndErrors)(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,a.value):a.value,a.message,t)}return r};const i=e=>Array.from(e).map((e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`)).join(""),s=(e,t,r,i)=>{var s;e.pattern||(null===(s=e.allOf)||void 0===s?void 0:s.some((e=>e.pattern)))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push(Object.assign({pattern:e.pattern},e.errorMessage&&i.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}})),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push(Object.assign({pattern:t},r&&i.errorMessages&&{errorMessage:{pattern:r}}))):(0,n.setResponseValueAndErrors)(e,"pattern",t,r,i)}},5876:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseTupleDef=void 0;const n=r(7605);t.parseTupleDef=function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map(((e,r)=>(0,n.parseDef)(e._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"items",`${r}`]})))).reduce(((e,t)=>void 0===t?e:[...e,t]),[]),additionalItems:(0,n.parseDef)(e.rest._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"additionalItems"]}))}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map(((e,r)=>(0,n.parseDef)(e._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"items",`${r}`]})))).reduce(((e,t)=>void 0===t?e:[...e,t]),[])}}},690:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseUndefinedDef=void 0,t.parseUndefinedDef=function(){return{not:{}}}},709:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnionDef=t.primitiveMappings=void 0;const n=r(7605);t.primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},t.parseUnionDef=function(e,r){if("openApi3"===r.target)return i(e,r);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every((e=>e._def.typeName in t.primitiveMappings&&(!e._def.checks||!e._def.checks.length)))){const e=n.reduce(((e,r)=>{const n=t.primitiveMappings[r._def.typeName];return n&&!e.includes(n)?[...e,n]:e}),[]);return{type:e.length>1?e:e[0]}}if(n.every((e=>"ZodLiteral"===e._def.typeName))){const e=n.reduce(((e,t)=>{const r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}}),[]);if(e.length===n.length){const t=e.filter(((e,t,r)=>r.indexOf(e)===t));return{type:t.length>1?t:t[0],enum:n.reduce(((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value]),[])}}}else if(n.every((e=>"ZodEnum"===e._def.typeName)))return{type:"string",enum:n.reduce(((e,t)=>[...e,...t._def.values.filter((t=>!e.includes(t)))]),[])};return i(e,r)};const i=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map(((e,r)=>(0,n.parseDef)(e._def,Object.assign(Object.assign({},t),{currentPath:[...t.currentPath,"anyOf",`${r}`]})))).filter((e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0)));return r.length?{anyOf:r}:void 0}},7988:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnknownDef=void 0,t.parseUnknownDef=function(){return{}}},411:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.zodToJsonSchema=void 0;const n=r(7605),i=r(3520);t.zodToJsonSchema=(e,t)=>{var r;const s=(0,i.getRefs)(t),a="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce(((e,[t,r])=>{var i;return Object.assign(Object.assign({},e),{[t]:null!==(i=(0,n.parseDef)(r._def,Object.assign(Object.assign({},s),{currentPath:[...s.basePath,s.definitionPath,t]})))&&void 0!==i?i:{}})}),{}):void 0,o="string"==typeof t?t:null==t?void 0:t.name,u=null!==(r=(0,n.parseDef)(e._def,void 0===o?s:Object.assign(Object.assign({},s),{currentPath:[...s.basePath,s.definitionPath,o]})))&&void 0!==r?r:{},c=void 0===o?a?Object.assign(Object.assign({},u),{[s.definitionPath]:a}):u:{$ref:[..."relative"===s.$refStrategy?[]:s.basePath,s.definitionPath,o].join("/"),[s.definitionPath]:Object.assign(Object.assign({},a),{[o]:u})};return"jsonSchema7"===s.target&&(c.$schema="http://json-schema.org/draft-07/schema#"),c}},8202:function(e){!function(t){function r(e){return parseInt(e)===e}function n(e){if(!r(e.length))return!1;for(var t=0;t<e.length;t++)if(!r(e[t])||e[t]<0||e[t]>255)return!1;return!0}function i(e,t){if(e.buffer&&ArrayBuffer.isView(e)&&"Uint8Array"===e.name)return t&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!n(e))throw new Error("Array contains invalid value: "+e);return new Uint8Array(e)}if(r(e.length)&&n(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function s(e){return new Uint8Array(e)}function a(e,t,r,n,i){null==n&&null==i||(e=e.slice?e.slice(n,i):Array.prototype.slice.call(e,n,i)),t.set(e,r)}var o,u={toBytes:function(e){var t=[],r=0;for(e=encodeURI(e);r<e.length;){var n=e.charCodeAt(r++);37===n?(t.push(parseInt(e.substr(r,2),16)),r+=2):t.push(n)}return i(t)},fromBytes:function(e){for(var t=[],r=0;r<e.length;){var n=e[r];n<128?(t.push(String.fromCharCode(n)),r++):n>191&&n<224?(t.push(String.fromCharCode((31&n)<<6|63&e[r+1])),r+=2):(t.push(String.fromCharCode((15&n)<<12|(63&e[r+1])<<6|63&e[r+2])),r+=3)}return t.join("")}},c=(o="0123456789abcdef",{toBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},fromBytes:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(o[(240&n)>>4]+o[15&n])}return t.join("")}}),l={16:10,24:12,32:14},d=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],h=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],f=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],p=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],m=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],g=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],y=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],v=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],_=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],b=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],w=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],A=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],E=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],k=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],x=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function T(e){for(var t=[],r=0;r<e.length;r+=4)t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);return t}var P=function(e){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:i(e,!0)}),this._prepare()};P.prototype._prepare=function(){var e=l[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var r,n=4*(e+1),i=this.key.length/4,s=T(this.key);for(t=0;t<i;t++)r=t>>2,this._Ke[r][t%4]=s[t],this._Kd[e-r][t%4]=s[t];for(var a,o=0,u=i;u<n;){if(a=s[i-1],s[0]^=h[a>>16&255]<<24^h[a>>8&255]<<16^h[255&a]<<8^h[a>>24&255]^d[o]<<24,o+=1,8!=i)for(t=1;t<i;t++)s[t]^=s[t-1];else{for(t=1;t<i/2;t++)s[t]^=s[t-1];for(a=s[i/2-1],s[i/2]^=h[255&a]^h[a>>8&255]<<8^h[a>>16&255]<<16^h[a>>24&255]<<24,t=i/2+1;t<i;t++)s[t]^=s[t-1]}for(t=0;t<i&&u<n;)c=u>>2,f=u%4,this._Ke[c][f]=s[t],this._Kd[e-c][f]=s[t++],u++}for(var c=1;c<e;c++)for(var f=0;f<4;f++)a=this._Kd[c][f],this._Kd[c][f]=A[a>>24&255]^E[a>>16&255]^k[a>>8&255]^x[255&a]},P.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,r=[0,0,0,0],n=T(e),i=0;i<4;i++)n[i]^=this._Ke[0][i];for(var a=1;a<t;a++){for(i=0;i<4;i++)r[i]=p[n[i]>>24&255]^m[n[(i+1)%4]>>16&255]^g[n[(i+2)%4]>>8&255]^y[255&n[(i+3)%4]]^this._Ke[a][i];n=r.slice()}var o,u=s(16);for(i=0;i<4;i++)o=this._Ke[t][i],u[4*i]=255&(h[n[i]>>24&255]^o>>24),u[4*i+1]=255&(h[n[(i+1)%4]>>16&255]^o>>16),u[4*i+2]=255&(h[n[(i+2)%4]>>8&255]^o>>8),u[4*i+3]=255&(h[255&n[(i+3)%4]]^o);return u},P.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,r=[0,0,0,0],n=T(e),i=0;i<4;i++)n[i]^=this._Kd[0][i];for(var a=1;a<t;a++){for(i=0;i<4;i++)r[i]=v[n[i]>>24&255]^_[n[(i+3)%4]>>16&255]^b[n[(i+2)%4]>>8&255]^w[255&n[(i+1)%4]]^this._Kd[a][i];n=r.slice()}var o,u=s(16);for(i=0;i<4;i++)o=this._Kd[t][i],u[4*i]=255&(f[n[i]>>24&255]^o>>24),u[4*i+1]=255&(f[n[(i+3)%4]>>16&255]^o>>16),u[4*i+2]=255&(f[n[(i+2)%4]>>8&255]^o>>8),u[4*i+3]=255&(f[255&n[(i+1)%4]]^o);return u};var S=function(e){if(!(this instanceof S))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new P(e)};S.prototype.encrypt=function(e){if((e=i(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=s(e.length),r=s(16),n=0;n<e.length;n+=16)a(e,r,0,n,n+16),a(r=this._aes.encrypt(r),t,n);return t},S.prototype.decrypt=function(e){if((e=i(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=s(e.length),r=s(16),n=0;n<e.length;n+=16)a(e,r,0,n,n+16),a(r=this._aes.decrypt(r),t,n);return t};var I=function(e,t){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=s(16);this._lastCipherblock=i(t,!0),this._aes=new P(e)};I.prototype.encrypt=function(e){if((e=i(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=s(e.length),r=s(16),n=0;n<e.length;n+=16){a(e,r,0,n,n+16);for(var o=0;o<16;o++)r[o]^=this._lastCipherblock[o];this._lastCipherblock=this._aes.encrypt(r),a(this._lastCipherblock,t,n)}return t},I.prototype.decrypt=function(e){if((e=i(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=s(e.length),r=s(16),n=0;n<e.length;n+=16){a(e,r,0,n,n+16),r=this._aes.decrypt(r);for(var o=0;o<16;o++)t[n+o]=r[o]^this._lastCipherblock[o];a(e,this._lastCipherblock,0,n,n+16)}return t};var O=function(e,t,r){if(!(this instanceof O))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=s(16);r||(r=1),this.segmentSize=r,this._shiftRegister=i(t,!0),this._aes=new P(e)};O.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t,r=i(e,!0),n=0;n<r.length;n+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++)r[n+s]^=t[s];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(r,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r},O.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t,r=i(e,!0),n=0;n<r.length;n+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var s=0;s<this.segmentSize;s++)r[n+s]^=t[s];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(e,this._shiftRegister,16-this.segmentSize,n,n+this.segmentSize)}return r};var C=function(e,t){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=s(16);this._lastPrecipher=i(t,!0),this._lastPrecipherIndex=16,this._aes=new P(e)};C.prototype.encrypt=function(e){for(var t=i(e,!0),r=0;r<t.length;r++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[r]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},C.prototype.decrypt=C.prototype.encrypt;var N=function(e){if(!(this instanceof N))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"==typeof e?(this._counter=s(16),this.setValue(e)):this.setBytes(e)};N.prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");for(var t=15;t>=0;--t)this._counter[t]=e%256,e>>=8},N.prototype.setBytes=function(e){if(16!=(e=i(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},N.prototype.increment=function(){for(var e=15;e>=0;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}};var M=function(e,t){if(!(this instanceof M))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof N||(t=new N(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new P(e)};M.prototype.encrypt=function(e){for(var t=i(e,!0),r=0;r<t.length;r++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[r]^=this._remainingCounter[this._remainingCounterIndex++];return t},M.prototype.decrypt=M.prototype.encrypt;var R={AES:P,Counter:N,ModeOfOperation:{ecb:S,cbc:I,cfb:O,ofb:C,ctr:M},utils:{hex:c,utf8:u},padding:{pkcs7:{pad:function(e){var t=16-(e=i(e,!0)).length%16,r=s(e.length+t);a(e,r);for(var n=e.length;n<r.length;n++)r[n]=t;return r},strip:function(e){if((e=i(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(t>16)throw new Error("PKCS#7 padding byte out of range");for(var r=e.length-t,n=0;n<t;n++)if(e[r+n]!==t)throw new Error("PKCS#7 invalid padding byte");var o=s(r);return a(e,o,0,0,r),o}}},_arrayTest:{coerceArray:i,createArray:s,copyArray:a}};e.exports=R}()},5766:(e,t)=>{t.byteLength=function(e){var t=o(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,s=o(e),a=s[0],u=s[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,u)),l=0,d=u>0?a-4:a;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===u&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t),1===u&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],a=16383,o=0,c=n-i;o<c;o+=a)s.push(u(e,o,o+a>c?c:o+a));return 1===i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=s[a],n[s.charCodeAt(a)]=a;function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,n){for(var i,s,a=[],o=t;o<n;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},1273:e=>{for(var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",r={},n=0;n<32;n++){var i=t.charAt(n);if(void 0!==r[i])throw new TypeError(i+" is ambiguous");r[i]=n}function s(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function a(e){for(var t=1,r=0;r<e.length;++r){var n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=s(t)^n>>5}for(t=s(t),r=0;r<e.length;++r){var i=e.charCodeAt(r);t=s(t)^31&i}return t}function o(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var n=e.toLowerCase(),i=e.toUpperCase();if(e!==n&&e!==i)return"Mixed-case string "+e;var o=(e=n).lastIndexOf("1");if(-1===o)return"No separator character for "+e;if(0===o)return"Missing prefix for "+e;var u=e.slice(0,o),c=e.slice(o+1);if(c.length<6)return"Data too short";var l=a(u);if("string"==typeof l)return l;for(var d=[],h=0;h<c.length;++h){var f=c.charAt(h),p=r[f];if(void 0===p)return"Unknown character "+f;l=s(l)^p,h+6>=c.length||d.push(p)}return 1!==l?"Invalid checksum for "+e:{prefix:u,words:d}}function u(e,t,r,n){for(var i=0,s=0,a=(1<<r)-1,o=[],u=0;u<e.length;++u)for(i=i<<t|e[u],s+=t;s>=r;)s-=r,o.push(i>>s&a);if(n)s>0&&o.push(i<<r-s&a);else{if(s>=t)return"Excess padding";if(i<<r-s&a)return"Non-zero padding"}return o}e.exports={decodeUnsafe:function(){var e=o.apply(null,arguments);if("object"==typeof e)return e},decode:function(e){var t=o.apply(null,arguments);if("object"==typeof t)return t;throw new Error(t)},encode:function(e,r,n){if(n=n||90,e.length+7+r.length>n)throw new TypeError("Exceeds length limit");var i=a(e=e.toLowerCase());if("string"==typeof i)throw new Error(i);for(var o=e+"1",u=0;u<r.length;++u){var c=r[u];if(c>>5!=0)throw new Error("Non 5-bit word");i=s(i)^c,o+=t.charAt(c)}for(u=0;u<6;++u)i=s(i);for(i^=1,u=0;u<6;++u)o+=t.charAt(i>>5*(5-u)&31);return o},toWordsUnsafe:function(e){var t=u(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=u(e,8,5,!0);if(Array.isArray(t))return t;throw new Error(t)},fromWordsUnsafe:function(e){var t=u(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=u(e,5,8,!1);if(Array.isArray(t))return t;throw new Error(t)}}},4244:function(e,t,r){var n;!function(i){var s,a=1e6,o="[big.js] ",u=o+"Invalid ",c=u+"decimal places",l=u+"rounding mode",d=o+"Division by zero",h={},f=void 0,p=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function m(e,t,r,n){var i=e.c,s=e.e+t+1;if(s<i.length){if(1===r)n=i[s]>=5;else if(2===r)n=i[s]>5||5==i[s]&&(n||s<0||i[s+1]!==f||1&i[s-1]);else if(3===r)n=n||!!i[0];else if(n=!1,0!==r)throw Error(l);if(s<1)i.length=1,n?(e.e=-t,i[0]=1):i[0]=e.e=0;else{if(i.length=s--,n)for(;++i[s]>9;)i[s]=0,s--||(++e.e,i.unshift(1));for(s=i.length;!i[--s];)i.pop()}}else if(r<0||r>3||r!==~~r)throw Error(l);return e}function g(e,t,r,n){var i,s,o=e.constructor,l=!e.c[0];if(r!==f){if(r!==~~r||r<(3==t)||r>a)throw Error(3==t?u+"precision":c);for(r=n-(e=new o(e)).e,e.c.length>++n&&m(e,r,o.RM),2==t&&(n=e.e+r+1);e.c.length<n;)e.c.push(0)}if(i=e.e,r=(s=e.c.join("")).length,2!=t&&(1==t||3==t&&n<=i||i<=o.NE||i>=o.PE))s=s.charAt(0)+(r>1?"."+s.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)s="0"+s;s="0."+s}else if(i>0)if(++i>r)for(i-=r;i--;)s+="0";else i<r&&(s=s.slice(0,i)+"."+s.slice(i));else r>1&&(s=s.charAt(0)+"."+s.slice(1));return e.s<0&&(!l||4==t)?"-"+s:s}h.abs=function(){var e=new this.constructor(this);return e.s=1,e},h.cmp=function(e){var t,r=this,n=r.c,i=(e=new r.constructor(e)).c,s=r.s,a=e.s,o=r.e,u=e.e;if(!n[0]||!i[0])return n[0]?s:i[0]?-a:0;if(s!=a)return s;if(t=s<0,o!=u)return o>u^t?1:-1;for(a=(o=n.length)<(u=i.length)?o:u,s=-1;++s<a;)if(n[s]!=i[s])return n[s]>i[s]^t?1:-1;return o==u?0:o>u^t?1:-1},h.div=function(e){var t=this,r=t.constructor,n=t.c,i=(e=new r(e)).c,s=t.s==e.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>a)throw Error(c);if(!i[0])throw Error(d);if(!n[0])return new r(0*s);var u,l,h,p,g,y=i.slice(),v=u=i.length,_=n.length,b=n.slice(0,u),w=b.length,A=e,E=A.c=[],k=0,x=o+(A.e=t.e-e.e)+1;for(A.s=s,s=x<0?0:x,y.unshift(0);w++<u;)b.push(0);do{for(h=0;h<10;h++){if(u!=(w=b.length))p=u>w?1:-1;else for(g=-1,p=0;++g<u;)if(i[g]!=b[g]){p=i[g]>b[g]?1:-1;break}if(!(p<0))break;for(l=w==u?i:y;w;){if(b[--w]<l[w]){for(g=w;g&&!b[--g];)b[g]=9;--b[g],b[w]+=10}b[w]-=l[w]}for(;!b[0];)b.shift()}E[k++]=p?h:++h,b[0]&&p?b[w]=n[v]||0:b=[n[v]]}while((v++<_||b[0]!==f)&&s--);return E[0]||1==k||(E.shift(),A.e--),k>x&&m(A,o,r.RM,b[0]!==f),A},h.eq=function(e){return!this.cmp(e)},h.gt=function(e){return this.cmp(e)>0},h.gte=function(e){return this.cmp(e)>-1},h.lt=function(e){return this.cmp(e)<0},h.lte=function(e){return this.cmp(e)<1},h.minus=h.sub=function(e){var t,r,n,i,s=this,a=s.constructor,o=s.s,u=(e=new a(e)).s;if(o!=u)return e.s=-u,s.plus(e);var c=s.c.slice(),l=s.e,d=e.c,h=e.e;if(!c[0]||!d[0])return d[0]?(e.s=-u,e):new a(c[0]?s:0);if(o=l-h){for((i=o<0)?(o=-o,n=c):(h=l,n=d),n.reverse(),u=o;u--;)n.push(0);n.reverse()}else for(r=((i=c.length<d.length)?c:d).length,o=u=0;u<r;u++)if(c[u]!=d[u]){i=c[u]<d[u];break}if(i&&(n=c,c=d,d=n,e.s=-e.s),(u=(r=d.length)-(t=c.length))>0)for(;u--;)c[t++]=0;for(u=t;r>o;){if(c[--r]<d[r]){for(t=r;t&&!c[--t];)c[t]=9;--c[t],c[r]+=10}c[r]-=d[r]}for(;0===c[--u];)c.pop();for(;0===c[0];)c.shift(),--h;return c[0]||(e.s=1,c=[h=0]),e.c=c,e.e=h,e},h.mod=function(e){var t,r=this,n=r.constructor,i=r.s,s=(e=new n(e)).s;if(!e.c[0])throw Error(d);return r.s=e.s=1,t=1==e.cmp(r),r.s=i,e.s=s,t?new n(r):(i=n.DP,s=n.RM,n.DP=n.RM=0,r=r.div(e),n.DP=i,n.RM=s,this.minus(r.times(e)))},h.plus=h.add=function(e){var t,r=this,n=r.constructor,i=r.s,s=(e=new n(e)).s;if(i!=s)return e.s=-s,r.minus(e);var a=r.e,o=r.c,u=e.e,c=e.c;if(!o[0]||!c[0])return c[0]?e:new n(o[0]?r:0*i);if(o=o.slice(),i=a-u){for(i>0?(u=a,t=c):(i=-i,t=o),t.reverse();i--;)t.push(0);t.reverse()}for(o.length-c.length<0&&(t=c,c=o,o=t),i=c.length,s=0;i;o[i]%=10)s=(o[--i]=o[i]+c[i]+s)/10|0;for(s&&(o.unshift(s),++u),i=o.length;0===o[--i];)o.pop();return e.c=o,e.e=u,e},h.pow=function(e){var t=this,r=new t.constructor(1),n=r,i=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(u+"exponent");for(i&&(e=-e);1&e&&(n=n.times(t)),e>>=1;)t=t.times(t);return i?r.div(n):n},h.round=function(e,t){var r=this.constructor;if(e===f)e=0;else if(e!==~~e||e<-a||e>a)throw Error(c);return m(new r(this),e,t===f?r.RM:t)},h.sqrt=function(){var e,t,r,n=this,i=n.constructor,s=n.s,a=n.e,u=new i(.5);if(!n.c[0])return new i(n);if(s<0)throw Error(o+"No square root");0===(s=Math.sqrt(n+""))||s===1/0?((t=n.c.join("")).length+a&1||(t+="0"),a=((a+1)/2|0)-(a<0||1&a),e=new i(((s=Math.sqrt(t))==1/0?"1e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+a)):e=new i(s),a=e.e+(i.DP+=4);do{r=e,e=u.times(r.plus(n.div(r)))}while(r.c.slice(0,a).join("")!==e.c.slice(0,a).join(""));return m(e,i.DP-=4,i.RM)},h.times=h.mul=function(e){var t,r=this,n=r.constructor,i=r.c,s=(e=new n(e)).c,a=i.length,o=s.length,u=r.e,c=e.e;if(e.s=r.s==e.s?1:-1,!i[0]||!s[0])return new n(0*e.s);for(e.e=u+c,a<o&&(t=i,i=s,s=t,c=a,a=o,o=c),t=new Array(c=a+o);c--;)t[c]=0;for(u=o;u--;){for(o=0,c=a+u;c>u;)o=t[c]+s[u]*i[c-u-1]+o,t[c--]=o%10,o=o/10|0;t[c]=(t[c]+o)%10}for(o?++e.e:t.shift(),u=t.length;!t[--u];)t.pop();return e.c=t,e},h.toExponential=function(e){return g(this,1,e,e)},h.toFixed=function(e){return g(this,2,e,this.e+e)},h.toPrecision=function(e){return g(this,3,e,e-1)},h.toString=function(){return g(this)},h.valueOf=h.toJSON=function(){return g(this,4)},s=function e(){function t(r){var n=this;if(!(n instanceof t))return r===f?e():new t(r);r instanceof t?(n.s=r.s,n.e=r.e,n.c=r.c.slice()):function(e,t){var r,n,i;if(0===t&&1/t<0)t="-0";else if(!p.test(t+=""))throw Error(u+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),i=t.length,n=0;n<i&&"0"==t.charAt(n);)++n;if(n==i)e.c=[e.e=0];else{for(;i>0&&"0"==t.charAt(--i););for(e.e=r-n-1,e.c=[],r=0;n<=i;)e.c[r++]=+t.charAt(n++)}}(n,r),n.constructor=t}return t.prototype=h,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.version="5.2.2",t}(),s.default=s.Big=s,void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)}()},2197:function(e,t,r){!function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var a;"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(3196).Buffer}catch(e){}function o(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function u(e,t,r){var n=o(e,r);return r-1>=t&&(n|=o(e,r-1)<<4),n}function c(e,t,r,i){for(var s=0,a=0,o=Math.min(e.length,r),u=t;u<o;u++){var c=e.charCodeAt(u)-48;s*=i,a=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&a<i,"Invalid character"),s+=a}return s}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,a,o=0;if("be"===r)for(i=e.length-1,s=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);else if("le"===r)for(i=0,s=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,(o+=24)>=26&&(o-=26,s++);return this._strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,a=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=u(e,t,n)<<s,this.words[a]|=67108863&i,s>=18?(s-=18,a+=1,this.words[a]|=i>>>26):s+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=u(e,t,n)<<s,this.words[a]|=67108863&i,s>=18?(s-=18,a+=1,this.words[a]|=i>>>26):s+=8;this._strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var s=e.length-r,a=s%n,o=Math.min(s,s-a)+r,u=0,l=r;l<o;l+=n)u=c(e,l,l+n,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var d=1;for(u=c(e,l,e.length,t),l=0;l<a;l++)d*=t;this.imuln(d),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){l(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch(e){s.prototype.inspect=d}else s.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],s=0|t.words[0],a=i*s,o=67108863&a,u=a/67108864|0;r.words[0]=o;for(var c=1;c<n;c++){for(var l=u>>>26,d=67108863&u,h=Math.min(c,t.length-1),f=Math.max(0,c-e.length+1);f<=h;f++){var p=c-f|0;l+=(a=(i=0|e.words[p])*(s=0|t.words[f])+d)/67108864|0,d=67108863&a}r.words[c]=0|d,u=0|l}return 0!==u?r.words[c]=0|u:r.length--,r._strip()}s.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,s=0,a=0;a<this.length;a++){var o=this.words[a],u=(16777215&(o<<i|s)).toString(16);s=o>>>24-i&16777215,(i+=2)>=26&&(i-=26,a--),r=0!==s||a!==this.length-1?h[6-u.length]+u+r:u+r}for(0!==s&&(r=s.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=f[e],l=p[e];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modrn(l).toString(e);r=(d=d.idivn(l)).isZero()?m+r:h[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(a,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var a=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,s);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,i),a},s.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,s=0;i<this.length;i++){var a=this.words[i]<<s|n;e[r++]=255&a,r<e.length&&(e[r++]=a>>8&255),r<e.length&&(e[r++]=a>>16&255),6===s?(r<e.length&&(e[r++]=a>>24&255),n=0,s=0):(n=a>>>24,s+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,s=0;i<this.length;i++){var a=this.words[i]<<s|n;e[r--]=255&a,r>=0&&(e[r--]=a>>8&255),r>=0&&(e[r--]=a>>16&255),6===s?(r>=0&&(e[r--]=a>>24&255),n=0,s=0):(n=a>>>24,s+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},s.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)t=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&t,i=t>>>26;for(;0!==i&&s<r.length;s++)t=(0|r.words[s])+i,this.words[s]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var s=0,a=0;a<n.length;a++)s=(t=(0|r.words[a])-(0|n.words[a])+s)>>26,this.words[a]=67108863&t;for(;0!==s&&a<r.length;a++)s=(t=(0|r.words[a])+s)>>26,this.words[a]=67108863&t;if(0===s&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var g=function(e,t,r){var n,i,s,a=e.words,o=t.words,u=r.words,c=0,l=0|a[0],d=8191&l,h=l>>>13,f=0|a[1],p=8191&f,m=f>>>13,g=0|a[2],y=8191&g,v=g>>>13,_=0|a[3],b=8191&_,w=_>>>13,A=0|a[4],E=8191&A,k=A>>>13,x=0|a[5],T=8191&x,P=x>>>13,S=0|a[6],I=8191&S,O=S>>>13,C=0|a[7],N=8191&C,M=C>>>13,R=0|a[8],j=8191&R,D=R>>>13,B=0|a[9],L=8191&B,U=B>>>13,F=0|o[0],Z=8191&F,q=F>>>13,z=0|o[1],$=8191&z,K=z>>>13,H=0|o[2],G=8191&H,V=H>>>13,W=0|o[3],J=8191&W,Q=W>>>13,Y=0|o[4],X=8191&Y,ee=Y>>>13,te=0|o[5],re=8191&te,ne=te>>>13,ie=0|o[6],se=8191&ie,ae=ie>>>13,oe=0|o[7],ue=8191&oe,ce=oe>>>13,le=0|o[8],de=8191&le,he=le>>>13,fe=0|o[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(c+(n=Math.imul(d,Z))|0)+((8191&(i=(i=Math.imul(d,q))+Math.imul(h,Z)|0))<<13)|0;c=((s=Math.imul(h,q))+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(p,Z),i=(i=Math.imul(p,q))+Math.imul(m,Z)|0,s=Math.imul(m,q);var ye=(c+(n=n+Math.imul(d,$)|0)|0)+((8191&(i=(i=i+Math.imul(d,K)|0)+Math.imul(h,$)|0))<<13)|0;c=((s=s+Math.imul(h,K)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,Z),i=(i=Math.imul(y,q))+Math.imul(v,Z)|0,s=Math.imul(v,q),n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(m,$)|0,s=s+Math.imul(m,K)|0;var ve=(c+(n=n+Math.imul(d,G)|0)|0)+((8191&(i=(i=i+Math.imul(d,V)|0)+Math.imul(h,G)|0))<<13)|0;c=((s=s+Math.imul(h,V)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(b,Z),i=(i=Math.imul(b,q))+Math.imul(w,Z)|0,s=Math.imul(w,q),n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,K)|0)+Math.imul(v,$)|0,s=s+Math.imul(v,K)|0,n=n+Math.imul(p,G)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(m,G)|0,s=s+Math.imul(m,V)|0;var _e=(c+(n=n+Math.imul(d,J)|0)|0)+((8191&(i=(i=i+Math.imul(d,Q)|0)+Math.imul(h,J)|0))<<13)|0;c=((s=s+Math.imul(h,Q)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(E,Z),i=(i=Math.imul(E,q))+Math.imul(k,Z)|0,s=Math.imul(k,q),n=n+Math.imul(b,$)|0,i=(i=i+Math.imul(b,K)|0)+Math.imul(w,$)|0,s=s+Math.imul(w,K)|0,n=n+Math.imul(y,G)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(v,G)|0,s=s+Math.imul(v,V)|0,n=n+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Q)|0)+Math.imul(m,J)|0,s=s+Math.imul(m,Q)|0;var be=(c+(n=n+Math.imul(d,X)|0)|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(h,X)|0))<<13)|0;c=((s=s+Math.imul(h,ee)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(T,Z),i=(i=Math.imul(T,q))+Math.imul(P,Z)|0,s=Math.imul(P,q),n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(k,$)|0,s=s+Math.imul(k,K)|0,n=n+Math.imul(b,G)|0,i=(i=i+Math.imul(b,V)|0)+Math.imul(w,G)|0,s=s+Math.imul(w,V)|0,n=n+Math.imul(y,J)|0,i=(i=i+Math.imul(y,Q)|0)+Math.imul(v,J)|0,s=s+Math.imul(v,Q)|0,n=n+Math.imul(p,X)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,X)|0,s=s+Math.imul(m,ee)|0;var we=(c+(n=n+Math.imul(d,re)|0)|0)+((8191&(i=(i=i+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;c=((s=s+Math.imul(h,ne)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(I,Z),i=(i=Math.imul(I,q))+Math.imul(O,Z)|0,s=Math.imul(O,q),n=n+Math.imul(T,$)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(P,$)|0,s=s+Math.imul(P,K)|0,n=n+Math.imul(E,G)|0,i=(i=i+Math.imul(E,V)|0)+Math.imul(k,G)|0,s=s+Math.imul(k,V)|0,n=n+Math.imul(b,J)|0,i=(i=i+Math.imul(b,Q)|0)+Math.imul(w,J)|0,s=s+Math.imul(w,Q)|0,n=n+Math.imul(y,X)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(v,X)|0,s=s+Math.imul(v,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(m,re)|0,s=s+Math.imul(m,ne)|0;var Ae=(c+(n=n+Math.imul(d,se)|0)|0)+((8191&(i=(i=i+Math.imul(d,ae)|0)+Math.imul(h,se)|0))<<13)|0;c=((s=s+Math.imul(h,ae)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(N,Z),i=(i=Math.imul(N,q))+Math.imul(M,Z)|0,s=Math.imul(M,q),n=n+Math.imul(I,$)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(O,$)|0,s=s+Math.imul(O,K)|0,n=n+Math.imul(T,G)|0,i=(i=i+Math.imul(T,V)|0)+Math.imul(P,G)|0,s=s+Math.imul(P,V)|0,n=n+Math.imul(E,J)|0,i=(i=i+Math.imul(E,Q)|0)+Math.imul(k,J)|0,s=s+Math.imul(k,Q)|0,n=n+Math.imul(b,X)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(w,X)|0,s=s+Math.imul(w,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(v,re)|0,s=s+Math.imul(v,ne)|0,n=n+Math.imul(p,se)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(m,se)|0,s=s+Math.imul(m,ae)|0;var Ee=(c+(n=n+Math.imul(d,ue)|0)|0)+((8191&(i=(i=i+Math.imul(d,ce)|0)+Math.imul(h,ue)|0))<<13)|0;c=((s=s+Math.imul(h,ce)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(j,Z),i=(i=Math.imul(j,q))+Math.imul(D,Z)|0,s=Math.imul(D,q),n=n+Math.imul(N,$)|0,i=(i=i+Math.imul(N,K)|0)+Math.imul(M,$)|0,s=s+Math.imul(M,K)|0,n=n+Math.imul(I,G)|0,i=(i=i+Math.imul(I,V)|0)+Math.imul(O,G)|0,s=s+Math.imul(O,V)|0,n=n+Math.imul(T,J)|0,i=(i=i+Math.imul(T,Q)|0)+Math.imul(P,J)|0,s=s+Math.imul(P,Q)|0,n=n+Math.imul(E,X)|0,i=(i=i+Math.imul(E,ee)|0)+Math.imul(k,X)|0,s=s+Math.imul(k,ee)|0,n=n+Math.imul(b,re)|0,i=(i=i+Math.imul(b,ne)|0)+Math.imul(w,re)|0,s=s+Math.imul(w,ne)|0,n=n+Math.imul(y,se)|0,i=(i=i+Math.imul(y,ae)|0)+Math.imul(v,se)|0,s=s+Math.imul(v,ae)|0,n=n+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,s=s+Math.imul(m,ce)|0;var ke=(c+(n=n+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;c=((s=s+Math.imul(h,he)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(L,Z),i=(i=Math.imul(L,q))+Math.imul(U,Z)|0,s=Math.imul(U,q),n=n+Math.imul(j,$)|0,i=(i=i+Math.imul(j,K)|0)+Math.imul(D,$)|0,s=s+Math.imul(D,K)|0,n=n+Math.imul(N,G)|0,i=(i=i+Math.imul(N,V)|0)+Math.imul(M,G)|0,s=s+Math.imul(M,V)|0,n=n+Math.imul(I,J)|0,i=(i=i+Math.imul(I,Q)|0)+Math.imul(O,J)|0,s=s+Math.imul(O,Q)|0,n=n+Math.imul(T,X)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(P,X)|0,s=s+Math.imul(P,ee)|0,n=n+Math.imul(E,re)|0,i=(i=i+Math.imul(E,ne)|0)+Math.imul(k,re)|0,s=s+Math.imul(k,ne)|0,n=n+Math.imul(b,se)|0,i=(i=i+Math.imul(b,ae)|0)+Math.imul(w,se)|0,s=s+Math.imul(w,ae)|0,n=n+Math.imul(y,ue)|0,i=(i=i+Math.imul(y,ce)|0)+Math.imul(v,ue)|0,s=s+Math.imul(v,ce)|0,n=n+Math.imul(p,de)|0,i=(i=i+Math.imul(p,he)|0)+Math.imul(m,de)|0,s=s+Math.imul(m,he)|0;var xe=(c+(n=n+Math.imul(d,pe)|0)|0)+((8191&(i=(i=i+Math.imul(d,me)|0)+Math.imul(h,pe)|0))<<13)|0;c=((s=s+Math.imul(h,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(L,$),i=(i=Math.imul(L,K))+Math.imul(U,$)|0,s=Math.imul(U,K),n=n+Math.imul(j,G)|0,i=(i=i+Math.imul(j,V)|0)+Math.imul(D,G)|0,s=s+Math.imul(D,V)|0,n=n+Math.imul(N,J)|0,i=(i=i+Math.imul(N,Q)|0)+Math.imul(M,J)|0,s=s+Math.imul(M,Q)|0,n=n+Math.imul(I,X)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(O,X)|0,s=s+Math.imul(O,ee)|0,n=n+Math.imul(T,re)|0,i=(i=i+Math.imul(T,ne)|0)+Math.imul(P,re)|0,s=s+Math.imul(P,ne)|0,n=n+Math.imul(E,se)|0,i=(i=i+Math.imul(E,ae)|0)+Math.imul(k,se)|0,s=s+Math.imul(k,ae)|0,n=n+Math.imul(b,ue)|0,i=(i=i+Math.imul(b,ce)|0)+Math.imul(w,ue)|0,s=s+Math.imul(w,ce)|0,n=n+Math.imul(y,de)|0,i=(i=i+Math.imul(y,he)|0)+Math.imul(v,de)|0,s=s+Math.imul(v,he)|0;var Te=(c+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((s=s+Math.imul(m,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(L,G),i=(i=Math.imul(L,V))+Math.imul(U,G)|0,s=Math.imul(U,V),n=n+Math.imul(j,J)|0,i=(i=i+Math.imul(j,Q)|0)+Math.imul(D,J)|0,s=s+Math.imul(D,Q)|0,n=n+Math.imul(N,X)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(M,X)|0,s=s+Math.imul(M,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(O,re)|0,s=s+Math.imul(O,ne)|0,n=n+Math.imul(T,se)|0,i=(i=i+Math.imul(T,ae)|0)+Math.imul(P,se)|0,s=s+Math.imul(P,ae)|0,n=n+Math.imul(E,ue)|0,i=(i=i+Math.imul(E,ce)|0)+Math.imul(k,ue)|0,s=s+Math.imul(k,ce)|0,n=n+Math.imul(b,de)|0,i=(i=i+Math.imul(b,he)|0)+Math.imul(w,de)|0,s=s+Math.imul(w,he)|0;var Pe=(c+(n=n+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,me)|0)+Math.imul(v,pe)|0))<<13)|0;c=((s=s+Math.imul(v,me)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(L,J),i=(i=Math.imul(L,Q))+Math.imul(U,J)|0,s=Math.imul(U,Q),n=n+Math.imul(j,X)|0,i=(i=i+Math.imul(j,ee)|0)+Math.imul(D,X)|0,s=s+Math.imul(D,ee)|0,n=n+Math.imul(N,re)|0,i=(i=i+Math.imul(N,ne)|0)+Math.imul(M,re)|0,s=s+Math.imul(M,ne)|0,n=n+Math.imul(I,se)|0,i=(i=i+Math.imul(I,ae)|0)+Math.imul(O,se)|0,s=s+Math.imul(O,ae)|0,n=n+Math.imul(T,ue)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(P,ue)|0,s=s+Math.imul(P,ce)|0,n=n+Math.imul(E,de)|0,i=(i=i+Math.imul(E,he)|0)+Math.imul(k,de)|0,s=s+Math.imul(k,he)|0;var Se=(c+(n=n+Math.imul(b,pe)|0)|0)+((8191&(i=(i=i+Math.imul(b,me)|0)+Math.imul(w,pe)|0))<<13)|0;c=((s=s+Math.imul(w,me)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(L,X),i=(i=Math.imul(L,ee))+Math.imul(U,X)|0,s=Math.imul(U,ee),n=n+Math.imul(j,re)|0,i=(i=i+Math.imul(j,ne)|0)+Math.imul(D,re)|0,s=s+Math.imul(D,ne)|0,n=n+Math.imul(N,se)|0,i=(i=i+Math.imul(N,ae)|0)+Math.imul(M,se)|0,s=s+Math.imul(M,ae)|0,n=n+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(O,ue)|0,s=s+Math.imul(O,ce)|0,n=n+Math.imul(T,de)|0,i=(i=i+Math.imul(T,he)|0)+Math.imul(P,de)|0,s=s+Math.imul(P,he)|0;var Ie=(c+(n=n+Math.imul(E,pe)|0)|0)+((8191&(i=(i=i+Math.imul(E,me)|0)+Math.imul(k,pe)|0))<<13)|0;c=((s=s+Math.imul(k,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(L,re),i=(i=Math.imul(L,ne))+Math.imul(U,re)|0,s=Math.imul(U,ne),n=n+Math.imul(j,se)|0,i=(i=i+Math.imul(j,ae)|0)+Math.imul(D,se)|0,s=s+Math.imul(D,ae)|0,n=n+Math.imul(N,ue)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(M,ue)|0,s=s+Math.imul(M,ce)|0,n=n+Math.imul(I,de)|0,i=(i=i+Math.imul(I,he)|0)+Math.imul(O,de)|0,s=s+Math.imul(O,he)|0;var Oe=(c+(n=n+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,me)|0)+Math.imul(P,pe)|0))<<13)|0;c=((s=s+Math.imul(P,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(L,se),i=(i=Math.imul(L,ae))+Math.imul(U,se)|0,s=Math.imul(U,ae),n=n+Math.imul(j,ue)|0,i=(i=i+Math.imul(j,ce)|0)+Math.imul(D,ue)|0,s=s+Math.imul(D,ce)|0,n=n+Math.imul(N,de)|0,i=(i=i+Math.imul(N,he)|0)+Math.imul(M,de)|0,s=s+Math.imul(M,he)|0;var Ce=(c+(n=n+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(O,pe)|0))<<13)|0;c=((s=s+Math.imul(O,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(L,ue),i=(i=Math.imul(L,ce))+Math.imul(U,ue)|0,s=Math.imul(U,ce),n=n+Math.imul(j,de)|0,i=(i=i+Math.imul(j,he)|0)+Math.imul(D,de)|0,s=s+Math.imul(D,he)|0;var Ne=(c+(n=n+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,me)|0)+Math.imul(M,pe)|0))<<13)|0;c=((s=s+Math.imul(M,me)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(L,de),i=(i=Math.imul(L,he))+Math.imul(U,de)|0,s=Math.imul(U,he);var Me=(c+(n=n+Math.imul(j,pe)|0)|0)+((8191&(i=(i=i+Math.imul(j,me)|0)+Math.imul(D,pe)|0))<<13)|0;c=((s=s+Math.imul(D,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863;var Re=(c+(n=Math.imul(L,pe))|0)+((8191&(i=(i=Math.imul(L,me))+Math.imul(U,pe)|0))<<13)|0;return c=((s=Math.imul(U,me))+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,u[0]=ge,u[1]=ye,u[2]=ve,u[3]=_e,u[4]=be,u[5]=we,u[6]=Ae,u[7]=Ee,u[8]=ke,u[9]=xe,u[10]=Te,u[11]=Pe,u[12]=Se,u[13]=Ie,u[14]=Oe,u[15]=Ce,u[16]=Ne,u[17]=Me,u[18]=Re,0!==c&&(u[19]=c,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var a=i;i=0;for(var o=67108863&n,u=Math.min(s,t.length-1),c=Math.max(0,s-e.length+1);c<=u;c++){var l=s-c,d=(0|e.words[l])*(0|t.words[c]),h=67108863&d;o=67108863&(h=h+o|0),i+=(a=(a=a+(d/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}r.words[s]=o,n=a,a=i}return 0!==n?r.words[s]=n:r.length--,r._strip()}function v(e,t,r){return y(e,t,r)}function _(e,t){this.x=e,this.y=t}Math.imul||(g=m),s.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?g(this,e,t):r<63?m(this,e,t):r<1024?y(this,e,t):v(this,e,t)},_.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},_.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},_.prototype.permute=function(e,t,r,n,i,s){for(var a=0;a<s;a++)n[a]=t[e[a]],i[a]=r[e[a]]},_.prototype.transform=function(e,t,r,n,i,s){this.permute(s,e,t,r,n,i);for(var a=1;a<i;a<<=1)for(var o=a<<1,u=Math.cos(2*Math.PI/o),c=Math.sin(2*Math.PI/o),l=0;l<i;l+=o)for(var d=u,h=c,f=0;f<a;f++){var p=r[l+f],m=n[l+f],g=r[l+f+a],y=n[l+f+a],v=d*g-h*y;y=d*y+h*g,g=v,r[l+f]=p+g,n[l+f]=m+y,r[l+f+a]=p-g,n[l+f+a]=m-y,f!==o&&(v=u*d-c*h,h=u*h+c*d,d=v)}},_.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},_.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},_.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},_.prototype.convert13b=function(e,t,r,i){for(var s=0,a=0;a<t;a++)s+=0|e[a],r[2*a]=8191&s,s>>>=13,r[2*a+1]=8191&s,s>>>=13;for(a=2*t;a<i;++a)r[a]=0;n(0===s),n(0==(-8192&s))},_.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},_.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),s=this.stub(n),a=new Array(n),o=new Array(n),u=new Array(n),c=new Array(n),l=new Array(n),d=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,a,n),this.convert13b(t.words,t.length,c,n),this.transform(a,s,o,u,n,i),this.transform(c,s,l,d,n,i);for(var f=0;f<n;f++){var p=o[f]*l[f]-u[f]*d[f];u[f]=o[f]*d[f]+u[f]*l[f],o[f]=p}return this.conjugate(o,u,n),this.transform(o,u,h,s,n,i),this.conjugate(h,s,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),v(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var s=(0|this.words[i])*e,a=(67108863&s)+(67108863&r);r>>=26,r+=s/67108864|0,r+=a>>>26,this.words[i]=67108863&a}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var o=this.words[t]&s,u=(0|this.words[t])-o<<r;this.words[t]=u|a,a=o>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},s.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var s=e%26,a=Math.min((e-s)/26,this.length),o=67108863^67108863>>>s<<s,u=r;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var d=0|this.words[c];this.words[c]=l<<26-s|d>>>s,l=d&o}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},s.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var i,s,a=e.length+r;this._expand(a);var o=0;for(i=0;i<e.length;i++){s=(0|this.words[i+r])+o;var u=(0|e.words[i])*t;o=((s-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)o=(s=(0|this.words[i+r])+o)>>26,this.words[i+r]=67108863&s;if(0===o)return this._strip();for(n(-1===o),o=0,i=0;i<this.length;i++)o=(s=-(0|this.words[i])+o)>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,a=0|i.words[i.length-1];0!=(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var o,u=n.length-i.length;if("mod"!==t){(o=new s(null)).length=u+1,o.words=new Array(o.length);for(var c=0;c<o.length;c++)o.words[c]=0}var l=n.clone()._ishlnsubmul(i,1,u);0===l.negative&&(n=l,o&&(o.words[u]=1));for(var d=u-1;d>=0;d--){var h=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);for(h=Math.min(h/a|0,67108863),n._ishlnsubmul(i,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);o&&(o.words[d]=h)}return o&&o._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:o||null,mod:n}},s.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(i=o.div.neg()),"div"!==t&&(a=o.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(a=o.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:o.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,a,o},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,s=this.length-1;s>=0;s--)i=(r*i+(0|this.words[s]))%e;return t?-i:i},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*r;this.words[i]=s/e|0,r=s%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new s(1),a=new s(0),o=new s(0),u=new s(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;0==(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(d)),i.iushrn(1),a.iushrn(1);for(var p=0,m=1;0==(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(o.isOdd()||u.isOdd())&&(o.iadd(l),u.isub(d)),o.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(o),a.isub(u)):(r.isub(t),o.isub(i),u.isub(a))}return{a:o,b:u,gcd:r.iushln(c)}},s.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,a=new s(1),o=new s(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var d=0,h=1;0==(r.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(r.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(o)):(r.isub(t),o.isub(a))}return(i=0===t.cmpn(1)?a:o).cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var s=t;t=r,r=s}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,a=r;0!==s&&a<this.length;a++){var o=0|this.words[a];s=(o+=s)>>>26,o&=67108863,this.words[a]=o}return 0!==s&&(this.words[a]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new T(e)},s.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function P(e){T.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},i(A,w),A.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=s&r,i=10;i<e.length;i++){var a=0|e.words[i];e.words[i-10]=(a&r)<<4|s>>>22,s=a}s>>>=22,e.words[i-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},A.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(E,w),i(k,w),i(x,w),x.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(b[e])return b[e];var t;if("k256"===e)t=new A;else if("p224"===e)t=new E;else if("p192"===e)t=new k;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new x}return b[e]=t,t},T.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},T.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},T.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},T.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},T.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},T.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},T.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},T.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},T.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},T.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},T.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},T.prototype.isqr=function(e){return this.imul(e,e.clone())},T.prototype.sqr=function(e){return this.mul(e,e)},T.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var o=new s(1).toRed(this),u=o.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new s(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var d=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=a;0!==f.cmp(o);){for(var m=f,g=0;0!==m.cmp(o);g++)m=m.redSqr();n(g<p);var y=this.pow(d,new s(1).iushln(p-g-1));h=h.redMul(y),d=y.redSqr(),f=f.redMul(d),p=g}return h},T.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},T.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],a=0,o=0,u=t.bitLength()%26;for(0===u&&(u=26),n=t.length-1;n>=0;n--){for(var c=t.words[n],l=u-1;l>=0;l--){var d=c>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==d||0!==a?(a<<=1,a|=d,(4==++o||0===n&&0===l)&&(i=this.mul(i,r[a]),o=0,a=0)):o=0}u=26}return i},T.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},T.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new P(e)},i(P,T),P.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},P.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},P.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},P.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},P.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},8852:e=>{e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");return t=void 0===t?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}},7374:function(e,t,r){var n;!function(i){var s,a=1e9,o={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},u=!0,c="[DecimalError] ",l=c+"Invalid argument: ",d=c+"Exponent out of range: ",h=Math.floor,f=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m=1e7,g=7,y=9007199254740991,v=h(y/g),_={};function b(e,t){var r,n,i,s,a,o,c,l,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),u?O(t,h):t;if(c=e.d,l=t.d,a=e.e,i=t.e,c=c.slice(),s=a-i){for(s<0?(n=c,s=-s,o=l.length):(n=l,i=a,o=c.length),s>(o=(a=Math.ceil(h/g))>o?a+1:o+1)&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for((o=c.length)-(s=l.length)<0&&(s=o,n=l,l=c,c=n),r=0;s;)r=(c[--s]=c[s]+l[s]+r)/m|0,c[s]%=m;for(r&&(c.unshift(r),++i),o=c.length;0==c[--o];)c.pop();return t.d=c,t.e=i,u?O(t,h):t}function w(e,t,r){if(e!==~~e||e<t||e>r)throw Error(l+e)}function A(e){var t,r,n,i=e.length-1,s="",a=e[0];if(i>0){for(s+=a,t=1;t<i;t++)n=e[t]+"",(r=g-n.length)&&(s+=P(r)),s+=n;a=e[t],(r=g-(n=a+"").length)&&(s+=P(r))}else if(0===a)return"0";for(;a%10==0;)a/=10;return s+a}_.absoluteValue=_.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},_.comparedTo=_.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,r=(n=s.d.length)<(i=e.d.length)?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1},_.decimalPlaces=_.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*g;if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},_.dividedBy=_.div=function(e){return E(this,new this.constructor(e))},_.dividedToIntegerBy=_.idiv=function(e){var t=this.constructor;return O(E(this,new t(e),0,1),t.precision)},_.equals=_.eq=function(e){return!this.cmp(e)},_.exponent=function(){return x(this)},_.greaterThan=_.gt=function(e){return this.cmp(e)>0},_.greaterThanOrEqualTo=_.gte=function(e){return this.cmp(e)>=0},_.isInteger=_.isint=function(){return this.e>this.d.length-2},_.isNegative=_.isneg=function(){return this.s<0},_.isPositive=_.ispos=function(){return this.s>0},_.isZero=function(){return 0===this.s},_.lessThan=_.lt=function(e){return this.cmp(e)<0},_.lessThanOrEqualTo=_.lte=function(e){return this.cmp(e)<1},_.logarithm=_.log=function(e){var t,r=this,n=r.constructor,i=n.precision,a=i+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(s))throw Error(c+"NaN");if(r.s<1)throw Error(c+(r.s?"NaN":"-Infinity"));return r.eq(s)?new n(0):(u=!1,t=E(S(r,a),S(e,a),a),u=!0,O(t,i))},_.minus=_.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?C(t,e):b(t,(e.s=-e.s,e))},_.modulo=_.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(!(e=new n(e)).s)throw Error(c+"NaN");return r.s?(u=!1,t=E(r,e,0,1).times(e),u=!0,r.minus(t)):O(new n(r),i)},_.naturalExponential=_.exp=function(){return k(this)},_.naturalLogarithm=_.ln=function(){return S(this)},_.negated=_.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},_.plus=_.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?b(t,e):C(t,(e.s=-e.s,e))},_.precision=_.sd=function(e){var t,r,n,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(l+e);if(t=x(i)+1,r=(n=i.d.length-1)*g+1,n=i.d[n]){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},_.squareRoot=_.sqrt=function(){var e,t,r,n,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(c+"NaN")}for(e=x(o),u=!1,0==(i=Math.sqrt(+o))||i==1/0?(((t=A(o.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=h((e+1)/2)-(e<0||e%2),n=new l(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new l(i.toString()),i=a=(r=l.precision)+3;;)if(n=(s=n).plus(E(o,s,a+2)).times(.5),A(s.d).slice(0,a)===(t=A(n.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&"4999"==t){if(O(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if("9999"!=t)break;a+=4}return u=!0,O(n,r)},_.times=_.mul=function(e){var t,r,n,i,s,a,o,c,l,d=this,h=d.constructor,f=d.d,p=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,r=d.e+e.e,(c=f.length)<(l=p.length)&&(s=f,f=p,p=s,a=c,c=l,l=a),s=[],n=a=c+l;n--;)s.push(0);for(n=l;--n>=0;){for(t=0,i=c+n;i>n;)o=s[i]+p[n]*f[i-n-1]+t,s[i--]=o%m|0,t=o/m|0;s[i]=(s[i]+t)%m|0}for(;!s[--a];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,u?O(e,h.precision):e},_.toDecimalPlaces=_.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(w(e,0,a),void 0===t?t=n.rounding:w(t,0,8),O(r,e+x(r)+1,t))},_.toExponential=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=N(n,!0):(w(e,0,a),void 0===t?t=i.rounding:w(t,0,8),r=N(n=O(new i(n),e+1,t),!0,e+1)),r},_.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return void 0===e?N(i):(w(e,0,a),void 0===t?t=s.rounding:w(t,0,8),r=N((n=O(new s(i),e+x(i)+1,t)).abs(),!1,e+x(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)},_.toInteger=_.toint=function(){var e=this,t=e.constructor;return O(new t(e),x(e)+1,t.rounding)},_.toNumber=function(){return+this},_.toPower=_.pow=function(e){var t,r,n,i,a,o,l=this,d=l.constructor,f=+(e=new d(e));if(!e.s)return new d(s);if(!(l=new d(l)).s){if(e.s<1)throw Error(c+"Infinity");return l}if(l.eq(s))return l;if(n=d.precision,e.eq(s))return O(l,n);if(o=(t=e.e)>=(r=e.d.length-1),a=l.s,o){if((r=f<0?-f:f)<=y){for(i=new d(s),t=Math.ceil(n/g+4),u=!1;r%2&&M((i=i.times(l)).d,t),0!==(r=h(r/2));)M((l=l.times(l)).d,t);return u=!0,e.s<0?new d(s).div(i):O(i,n)}}else if(a<0)throw Error(c+"NaN");return a=a<0&&1&e.d[Math.max(t,r)]?-1:1,l.s=1,u=!1,i=e.times(S(l,n+12)),u=!0,(i=k(i)).s=a,i},_.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return void 0===e?n=N(i,(r=x(i))<=s.toExpNeg||r>=s.toExpPos):(w(e,1,a),void 0===t?t=s.rounding:w(t,0,8),n=N(i=O(new s(i),e,t),e<=(r=x(i))||r<=s.toExpNeg,e)),n},_.toSignificantDigits=_.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(w(e,1,a),void 0===t?t=r.rounding:w(t,0,8)),O(new r(this),e,t)},_.toString=_.valueOf=_.val=_.toJSON=function(){var e=this,t=x(e),r=e.constructor;return N(e,t<=r.toExpNeg||t>=r.toExpPos)};var E=function(){function e(e,t){var r,n=0,i=e.length;for(e=e.slice();i--;)r=e[i]*t+n,e[i]=r%m|0,n=r/m|0;return n&&e.unshift(n),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*m+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,i,s,a){var o,u,l,d,h,f,p,y,v,_,b,w,A,E,k,T,P,S,I=n.constructor,C=n.s==i.s?1:-1,N=n.d,M=i.d;if(!n.s)return new I(n);if(!i.s)throw Error(c+"Division by zero");for(u=n.e-i.e,P=M.length,k=N.length,y=(p=new I(C)).d=[],l=0;M[l]==(N[l]||0);)++l;if(M[l]>(N[l]||0)&&--u,(w=null==s?s=I.precision:a?s+(x(n)-x(i))+1:s)<0)return new I(0);if(w=w/g+2|0,l=0,1==P)for(d=0,M=M[0],w++;(l<k||d)&&w--;l++)A=d*m+(N[l]||0),y[l]=A/M|0,d=A%M|0;else{for((d=m/(M[0]+1)|0)>1&&(M=e(M,d),N=e(N,d),P=M.length,k=N.length),E=P,_=(v=N.slice(0,P)).length;_<P;)v[_++]=0;(S=M.slice()).unshift(0),T=M[0],M[1]>=m/2&&++T;do{d=0,(o=t(M,v,P,_))<0?(b=v[0],P!=_&&(b=b*m+(v[1]||0)),(d=b/T|0)>1?(d>=m&&(d=m-1),1==(o=t(h=e(M,d),v,f=h.length,_=v.length))&&(d--,r(h,P<f?S:M,f))):(0==d&&(o=d=1),h=M.slice()),(f=h.length)<_&&h.unshift(0),r(v,h,_),-1==o&&(o=t(M,v,P,_=v.length))<1&&(d++,r(v,P<_?S:M,_)),_=v.length):0===o&&(d++,v=[0]),y[l++]=d,o&&v[0]?v[_++]=N[E]||0:(v=[N[E]],_=1)}while((E++<k||void 0!==v[0])&&w--)}return y[0]||y.shift(),p.e=u,O(p,a?s+x(p)+1:s)}}();function k(e,t){var r,n,i,a,o,c=0,l=0,h=e.constructor,p=h.precision;if(x(e)>16)throw Error(d+x(e));if(!e.s)return new h(s);for(null==t?(u=!1,o=p):o=t,a=new h(.03125);e.abs().gte(.1);)e=e.times(a),l+=5;for(o+=Math.log(f(2,l))/Math.LN10*2+5|0,r=n=i=new h(s),h.precision=o;;){if(n=O(n.times(e),o),r=r.times(++c),A((a=i.plus(E(n,r,o))).d).slice(0,o)===A(i.d).slice(0,o)){for(;l--;)i=O(i.times(i),o);return h.precision=p,null==t?(u=!0,O(i,p)):i}i=a}}function x(e){for(var t=e.e*g,r=e.d[0];r>=10;r/=10)t++;return t}function T(e,t,r){if(t>e.LN10.sd())throw u=!0,r&&(e.precision=r),Error(c+"LN10 precision limit exceeded");return O(new e(e.LN10),t)}function P(e){for(var t="";e--;)t+="0";return t}function S(e,t){var r,n,i,a,o,l,d,h,f,p=1,m=e,g=m.d,y=m.constructor,v=y.precision;if(m.s<1)throw Error(c+(m.s?"NaN":"-Infinity"));if(m.eq(s))return new y(0);if(null==t?(u=!1,h=v):h=t,m.eq(10))return null==t&&(u=!0),T(y,h);if(h+=10,y.precision=h,n=(r=A(g)).charAt(0),a=x(m),!(Math.abs(a)<15e14))return d=T(y,h+2,v).times(a+""),m=S(new y(n+"."+r.slice(1)),h-10).plus(d),y.precision=v,null==t?(u=!0,O(m,v)):m;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=A((m=m.times(e)).d)).charAt(0),p++;for(a=x(m),n>1?(m=new y("0."+r),a++):m=new y(n+"."+r.slice(1)),l=o=m=E(m.minus(s),m.plus(s),h),f=O(m.times(m),h),i=3;;){if(o=O(o.times(f),h),A((d=l.plus(E(o,new y(i),h))).d).slice(0,h)===A(l.d).slice(0,h))return l=l.times(2),0!==a&&(l=l.plus(T(y,h+2,v).times(a+""))),l=E(l,new y(p),h),y.precision=v,null==t?(u=!0,O(l,v)):l;l=d,i+=2}}function I(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(n,i)){if(i-=n,r=r-n-1,e.e=h(r/g),e.d=[],n=(r+1)%g,r<0&&(n+=g),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=g;n<i;)e.d.push(+t.slice(n,n+=g));t=t.slice(n),n=g-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),u&&(e.e>v||e.e<-v))throw Error(d+r)}else e.s=0,e.e=0,e.d=[0];return e}function O(e,t,r){var n,i,s,a,o,c,l,p,y=e.d;for(a=1,s=y[0];s>=10;s/=10)a++;if((n=t-a)<0)n+=g,i=t,l=y[p=0];else{if((p=Math.ceil((n+1)/g))>=(s=y.length))return e;for(l=s=y[p],a=1;s>=10;s/=10)a++;i=(n%=g)-g+a}if(void 0!==r&&(o=l/(s=f(10,a-i-1))%10|0,c=t<0||void 0!==y[p+1]||l%s,c=r<4?(o||c)&&(0==r||r==(e.s<0?3:2)):o>5||5==o&&(4==r||c||6==r&&(n>0?i>0?l/f(10,a-i):0:y[p-1])%10&1||r==(e.s<0?8:7))),t<1||!y[0])return c?(s=x(e),y.length=1,t=t-s-1,y[0]=f(10,(g-t%g)%g),e.e=h(-t/g)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(0==n?(y.length=p,s=1,p--):(y.length=p+1,s=f(10,g-n),y[p]=i>0?(l/f(10,a-i)%f(10,i)|0)*s:0),c)for(;;){if(0==p){(y[0]+=s)==m&&(y[0]=1,++e.e);break}if(y[p]+=s,y[p]!=m)break;y[p--]=0,s=1}for(n=y.length;0===y[--n];)y.pop();if(u&&(e.e>v||e.e<-v))throw Error(d+x(e));return e}function C(e,t){var r,n,i,s,a,o,c,l,d,h,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),u?O(t,p):t;if(c=e.d,h=t.d,n=t.e,l=e.e,c=c.slice(),a=l-n){for((d=a<0)?(r=c,a=-a,o=h.length):(r=h,n=l,o=c.length),a>(i=Math.max(Math.ceil(p/g),o)+2)&&(a=i,r.length=1),r.reverse(),i=a;i--;)r.push(0);r.reverse()}else{for((d=(i=c.length)<(o=h.length))&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){d=c[i]<h[i];break}a=0}for(d&&(r=c,c=h,h=r,t.s=-t.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>a;){if(c[--i]<h[i]){for(s=i;s&&0===c[--s];)c[s]=m-1;--c[s],c[i]+=m}c[i]-=h[i]}for(;0===c[--o];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=n,u?O(t,p):t):new f(0)}function N(e,t,r){var n,i=x(e),s=A(e.d),a=s.length;return t?(r&&(n=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+P(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+P(-i-1)+s,r&&(n=r-a)>0&&(s+=P(n))):i>=a?(s+=P(i+1-a),r&&(n=r-i-1)>0&&(s=s+"."+P(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(s+="."),s+=P(n))),e.s<0?"-"+s:s}function M(e,t){if(e.length>t)return e.length=t,!0}function R(e){if(!e||"object"!=typeof e)throw Error(c+"Object expected");var t,r,n,i=["precision",1,a,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(n=e[r=i[t]])){if(!(h(n)===n&&n>=i[t+1]&&n<=i[t+2]))throw Error(l+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(l+r+": "+n);this[r]=new this(n)}return this}o=function e(t){var r,n,i;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(l+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):I(t,e.toString())}if("string"!=typeof e)throw Error(l+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(l+e);I(t,e)}if(s.prototype=_,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=R,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<i.length;)t.hasOwnProperty(n=i[r++])||(t[n]=this[n]);return s.config(t),s}(o),o.default=o.Decimal=o,s=new o(1),void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}()},161:e=>{var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new i(n,s||e,a),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],o]:e._events[u].push(o):(e._events[u]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=new Array(s);i<s;i++)a[i]=n[i].fn;return a},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,s,a){var o=r?r+e:e;if(!this._events[o])return!1;var u,c,l=this._events[o],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,s),!0;case 6:return l.fn.call(l.context,t,n,i,s,a),!0}for(c=1,u=new Array(d-1);c<d;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),d){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,i);break;default:if(!u)for(h=1,u=new Array(d-1);h<d;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||a(this,s);else{for(var u=0,c=[],l=o.length;u<l;u++)(o[u].fn!==t||i&&!o[u].once||n&&o[u].context!==n)&&c.push(o[u]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},4485:(e,t,r)=>{var n=t;n.utils=r(212),n.common=r(4495),n.sha=r(5530),n.ripemd=r(1396),n.hmac=r(5047),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},4495:(e,t,r)=>{var n=r(212),i=r(9561);function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=s,s.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},s.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},s.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,s=8;s<this.padLength;s++)n[i++]=0;return n}},5047:(e,t,r)=>{var n=r(212),i=r(9561);function s(e,t,r){if(!(this instanceof s))return new s(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r))}e.exports=s,s.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},s.prototype.update=function(e,t){return this.inner.update(e,t),this},s.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},1396:(e,t,r)=>{var n=r(212),i=r(4495),s=n.rotl32,a=n.sum32,o=n.sum32_3,u=n.sum32_4,c=i.BlockHash;function l(){if(!(this instanceof l))return new l;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function h(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function f(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}n.inherits(l,c),t.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],c=this.h[3],l=this.h[4],v=r,_=n,b=i,w=c,A=l,E=0;E<80;E++){var k=a(s(u(r,d(E,n,i,c),e[p[E]+t],h(E)),g[E]),l);r=l,l=c,c=s(i,10),i=n,n=k,k=a(s(u(v,d(79-E,_,b,w),e[m[E]+t],f(E)),y[E]),A),v=A,A=w,w=s(b,10),b=_,_=k}k=o(this.h[1],i,w),this.h[1]=o(this.h[2],c,A),this.h[2]=o(this.h[3],l,v),this.h[3]=o(this.h[4],r,_),this.h[4]=o(this.h[0],n,b),this.h[0]=k},l.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},5530:(e,t,r)=>{t.sha1=r(5079),t.sha224=r(3823),t.sha256=r(8032),t.sha384=r(5328),t.sha512=r(168)},5079:(e,t,r)=>{var n=r(212),i=r(4495),s=r(713),a=n.rotl32,o=n.sum32,u=n.sum32_5,c=s.ft_1,l=i.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(h,l),e.exports=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=a(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],s=this.h[1],l=this.h[2],h=this.h[3],f=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),m=u(a(i,5),c(p,s,l,h),f,r[n],d[p]);f=h,h=l,l=a(s,30),s=i,i=m}this.h[0]=o(this.h[0],i),this.h[1]=o(this.h[1],s),this.h[2]=o(this.h[2],l),this.h[3]=o(this.h[3],h),this.h[4]=o(this.h[4],f)},h.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},3823:(e,t,r)=>{var n=r(212),i=r(8032);function s(){if(!(this instanceof s))return new s;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(s,i),e.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},8032:(e,t,r)=>{var n=r(212),i=r(4495),s=r(713),a=r(9561),o=n.sum32,u=n.sum32_4,c=n.sum32_5,l=s.ch32,d=s.maj32,h=s.s0_256,f=s.s1_256,p=s.g0_256,m=s.g1_256,g=i.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}n.inherits(v,g),e.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=u(m(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],s=this.h[1],g=this.h[2],y=this.h[3],v=this.h[4],_=this.h[5],b=this.h[6],w=this.h[7];for(a(this.k.length===r.length),n=0;n<r.length;n++){var A=c(w,f(v),l(v,_,b),this.k[n],r[n]),E=o(h(i),d(i,s,g));w=b,b=_,_=v,v=o(y,A),y=g,g=s,s=i,i=o(A,E)}this.h[0]=o(this.h[0],i),this.h[1]=o(this.h[1],s),this.h[2]=o(this.h[2],g),this.h[3]=o(this.h[3],y),this.h[4]=o(this.h[4],v),this.h[5]=o(this.h[5],_),this.h[6]=o(this.h[6],b),this.h[7]=o(this.h[7],w)},v.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},5328:(e,t,r)=>{var n=r(212),i=r(168);function s(){if(!(this instanceof s))return new s;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(s,i),e.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},168:(e,t,r)=>{var n=r(212),i=r(4495),s=r(9561),a=n.rotr64_hi,o=n.rotr64_lo,u=n.shr64_hi,c=n.shr64_lo,l=n.sum64,d=n.sum64_hi,h=n.sum64_lo,f=n.sum64_4_hi,p=n.sum64_4_lo,m=n.sum64_5_hi,g=n.sum64_5_lo,y=i.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function b(e,t,r,n,i){var s=e&r^~e&i;return s<0&&(s+=4294967296),s}function w(e,t,r,n,i,s){var a=t&n^~t&s;return a<0&&(a+=4294967296),a}function A(e,t,r,n,i){var s=e&r^e&i^r&i;return s<0&&(s+=4294967296),s}function E(e,t,r,n,i,s){var a=t&n^t&s^n&s;return a<0&&(a+=4294967296),a}function k(e,t){var r=a(e,t,28)^a(t,e,2)^a(t,e,7);return r<0&&(r+=4294967296),r}function x(e,t){var r=o(e,t,28)^o(t,e,2)^o(t,e,7);return r<0&&(r+=4294967296),r}function T(e,t){var r=o(e,t,14)^o(e,t,18)^o(t,e,9);return r<0&&(r+=4294967296),r}function P(e,t){var r=a(e,t,1)^a(e,t,8)^u(e,t,7);return r<0&&(r+=4294967296),r}function S(e,t){var r=o(e,t,1)^o(e,t,8)^c(e,t,7);return r<0&&(r+=4294967296),r}function I(e,t){var r=o(e,t,19)^o(t,e,29)^c(e,t,6);return r<0&&(r+=4294967296),r}n.inherits(_,y),e.exports=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=(g=r[n-4],y=r[n-3],v=void 0,(v=a(g,y,19)^a(y,g,29)^u(g,y,6))<0&&(v+=4294967296),v),s=I(r[n-4],r[n-3]),o=r[n-14],c=r[n-13],l=P(r[n-30],r[n-29]),d=S(r[n-30],r[n-29]),h=r[n-32],m=r[n-31];r[n]=f(i,s,o,c,l,d,h,m),r[n+1]=p(i,s,o,c,l,d,h,m)}var g,y,v},_.prototype._update=function(e,t){this._prepareBlock(e,t);var r,n,i,o=this.W,u=this.h[0],c=this.h[1],f=this.h[2],p=this.h[3],y=this.h[4],v=this.h[5],_=this.h[6],P=this.h[7],S=this.h[8],I=this.h[9],O=this.h[10],C=this.h[11],N=this.h[12],M=this.h[13],R=this.h[14],j=this.h[15];s(this.k.length===o.length);for(var D=0;D<o.length;D+=2){var B=R,L=j,U=(i=void 0,(i=a(r=S,n=I,14)^a(r,n,18)^a(n,r,9))<0&&(i+=4294967296),i),F=T(S,I),Z=b(S,0,O,0,N),q=w(0,I,0,C,0,M),z=this.k[D],$=this.k[D+1],K=o[D],H=o[D+1],G=m(B,L,U,F,Z,q,z,$,K,H),V=g(B,L,U,F,Z,q,z,$,K,H);B=k(u,c),L=x(u,c),U=A(u,0,f,0,y),F=E(0,c,0,p,0,v);var W=d(B,L,U,F),J=h(B,L,U,F);R=N,j=M,N=O,M=C,O=S,C=I,S=d(_,P,G,V),I=h(P,P,G,V),_=y,P=v,y=f,v=p,f=u,p=c,u=d(G,V,W,J),c=h(G,V,W,J)}l(this.h,0,u,c),l(this.h,2,f,p),l(this.h,4,y,v),l(this.h,6,_,P),l(this.h,8,S,I),l(this.h,10,O,C),l(this.h,12,N,M),l(this.h,14,R,j)},_.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},713:(e,t,r)=>{var n=r(212).rotr32;function i(e,t,r){return e&t^~e&r}function s(e,t,r){return e&t^e&r^t&r}function a(e,t,r){return e^t^r}t.ft_1=function(e,t,r,n){return 0===e?i(t,r,n):1===e||3===e?a(t,r,n):2===e?s(t,r,n):void 0},t.ch32=i,t.maj32=s,t.p32=a,t.s0_256=function(e){return n(e,2)^n(e,13)^n(e,22)},t.s1_256=function(e){return n(e,6)^n(e,11)^n(e,25)},t.g0_256=function(e){return n(e,7)^n(e,18)^e>>>3},t.g1_256=function(e){return n(e,17)^n(e,19)^e>>>10}},212:(e,t,r)=>{var n=r(9561),i=r(1285);function s(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1))}function a(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function o(e){return 1===e.length?"0"+e:e}function u(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=i,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var a=e.charCodeAt(i);a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=63&a|128):s(e,i)?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++i)),r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=63&a|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=63&a|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r},t.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=o(e[r].toString(16));return t},t.htonl=a,t.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=a(i)),r+=u(i.toString(16))}return r},t.zero2=o,t.zero8=u,t.join32=function(e,t,r,i){var s=r-t;n(s%4==0);for(var a=new Array(s/4),o=0,u=t;o<a.length;o++,u+=4){var c;c="big"===i?e[u]<<24|e[u+1]<<16|e[u+2]<<8|e[u+3]:e[u+3]<<24|e[u+2]<<16|e[u+1]<<8|e[u],a[o]=c>>>0}return a},t.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var s=e[n];"big"===t?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=255&s):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=255&s)}return r},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,r){return e+t+r>>>0},t.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},t.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},t.sum64=function(e,t,r,n){var i=e[t],s=n+e[t+1]>>>0,a=(s<n?1:0)+r+i;e[t]=a>>>0,e[t+1]=s},t.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},t.sum64_lo=function(e,t,r,n){return t+n>>>0},t.sum64_4_hi=function(e,t,r,n,i,s,a,o){var u=0,c=t;return u+=(c=c+n>>>0)<t?1:0,u+=(c=c+s>>>0)<s?1:0,e+r+i+a+(u+=(c=c+o>>>0)<o?1:0)>>>0},t.sum64_4_lo=function(e,t,r,n,i,s,a,o){return t+n+s+o>>>0},t.sum64_5_hi=function(e,t,r,n,i,s,a,o,u,c){var l=0,d=t;return l+=(d=d+n>>>0)<t?1:0,l+=(d=d+s>>>0)<s?1:0,l+=(d=d+o>>>0)<o?1:0,e+r+i+a+u+(l+=(d=d+c>>>0)<c?1:0)>>>0},t.sum64_5_lo=function(e,t,r,n,i,s,a,o,u,c){return t+n+s+o+c>>>0},t.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},t.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},t.shr64_hi=function(e,t,r){return e>>>r},t.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}},1285:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},3669:(e,t,r)=>{var n;!function(){var i="input is invalid type",s="object"==typeof window,a=s?window:{};a.JS_SHA3_NO_WINDOW&&(s=!1);var o=!s&&"object"==typeof self;!a.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?a=r.g:o&&(a=self);var u=!a.JS_SHA3_NO_COMMON_JS&&e.exports,c=r.amdO,l=!a.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,d="0123456789abcdef".split(""),h=[4,1024,262144,67108864],f=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],m=[224,256,384,512],g=[128,256],y=["hex","buffer","arrayBuffer","array","digest"],v={128:168,256:136};!a.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!l||!a.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var _=function(e,t,r){return function(n){return new R(e,t,e).update(n)[r]()}},b=function(e,t,r){return function(n,i){return new R(e,t,i).update(n)[r]()}},w=function(e,t,r){return function(t,n,i,s){return T["cshake"+e].update(t,n,i,s)[r]()}},A=function(e,t,r){return function(t,n,i,s){return T["kmac"+e].update(t,n,i,s)[r]()}},E=function(e,t,r,n){for(var i=0;i<y.length;++i){var s=y[i];e[s]=t(r,n,s)}return e},k=function(e,t){var r=_(e,t,"hex");return r.create=function(){return new R(e,t,e)},r.update=function(e){return r.create().update(e)},E(r,_,e,t)},x=[{name:"keccak",padding:[1,256,65536,16777216],bits:m,createMethod:k},{name:"sha3",padding:[6,1536,393216,100663296],bits:m,createMethod:k},{name:"shake",padding:[31,7936,2031616,520093696],bits:g,createMethod:function(e,t){var r=b(e,t,"hex");return r.create=function(r){return new R(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},E(r,b,e,t)}},{name:"cshake",padding:h,bits:g,createMethod:function(e,t){var r=v[e],n=w(e,0,"hex");return n.create=function(n,i,s){return i||s?new R(e,t,n).bytepad([i,s],r):T["shake"+e].create(n)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},E(n,w,e,t)}},{name:"kmac",padding:h,bits:g,createMethod:function(e,t){var r=v[e],n=A(e,0,"hex");return n.create=function(n,i,s){return new j(e,t,i).bytepad(["KMAC",s],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},E(n,A,e,t)}}],T={},P=[],S=0;S<x.length;++S)for(var I=x[S],O=I.bits,C=0;C<O.length;++C){var N=I.name+"_"+O[C];if(P.push(N),T[N]=I.createMethod(O[C],I.padding),"sha3"!==I.name){var M=I.name+O[C];P.push(M),T[M]=T[N]}}function R(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function j(e,t,r){R.call(this,e,t,r)}R.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(i);if(null===e)throw new Error(i);if(l&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||l&&ArrayBuffer.isView(e)))throw new Error(i);t=!0}for(var n,s,a=this.blocks,o=this.byteCount,u=e.length,c=this.blockCount,d=0,h=this.s;d<u;){if(this.reset)for(this.reset=!1,a[0]=this.block,n=1;n<c+1;++n)a[n]=0;if(t)for(n=this.start;d<u&&n<o;++d)a[n>>2]|=e[d]<<f[3&n++];else for(n=this.start;d<u&&n<o;++d)(s=e.charCodeAt(d))<128?a[n>>2]|=s<<f[3&n++]:s<2048?(a[n>>2]|=(192|s>>6)<<f[3&n++],a[n>>2]|=(128|63&s)<<f[3&n++]):s<55296||s>=57344?(a[n>>2]|=(224|s>>12)<<f[3&n++],a[n>>2]|=(128|s>>6&63)<<f[3&n++],a[n>>2]|=(128|63&s)<<f[3&n++]):(s=65536+((1023&s)<<10|1023&e.charCodeAt(++d)),a[n>>2]|=(240|s>>18)<<f[3&n++],a[n>>2]|=(128|s>>12&63)<<f[3&n++],a[n>>2]|=(128|s>>6&63)<<f[3&n++],a[n>>2]|=(128|63&s)<<f[3&n++]);if(this.lastByteIndex=n,n>=o){for(this.start=n-o,this.block=a[c],n=0;n<c;++n)h[n]^=a[n];D(h),this.reset=!0}else this.start=n}return this},R.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},R.prototype.encodeString=function(e){var t,r=typeof e;if("string"!==r){if("object"!==r)throw new Error(i);if(null===e)throw new Error(i);if(l&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||l&&ArrayBuffer.isView(e)))throw new Error(i);t=!0}var n=0,s=e.length;if(t)n=s;else for(var a=0;a<e.length;++a){var o=e.charCodeAt(a);o<128?n+=1:o<2048?n+=2:o<55296||o>=57344?n+=3:(o=65536+((1023&o)<<10|1023&e.charCodeAt(++a)),n+=4)}return n+=this.encode(8*n),this.update(e),n},R.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=t-r%t,s=[];return s.length=i,this.update(s),this},R.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];D(n)}},R.prototype.toString=R.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,s=0,a=0,o="";a<n;){for(s=0;s<t&&a<n;++s,++a)e=r[s],o+=d[e>>4&15]+d[15&e]+d[e>>12&15]+d[e>>8&15]+d[e>>20&15]+d[e>>16&15]+d[e>>28&15]+d[e>>24&15];a%t==0&&(D(r),s=0)}return i&&(e=r[s],o+=d[e>>4&15]+d[15&e],i>1&&(o+=d[e>>12&15]+d[e>>8&15]),i>2&&(o+=d[e>>20&15]+d[e>>16&15])),o},R.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,s=0,a=0,o=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(o);for(var u=new Uint32Array(e);a<n;){for(s=0;s<t&&a<n;++s,++a)u[a]=r[s];a%t==0&&D(r)}return i&&(u[s]=r[s],e=e.slice(0,o)),e},R.prototype.buffer=R.prototype.arrayBuffer,R.prototype.digest=R.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,s=this.extraBytes,a=0,o=0,u=[];o<i;){for(a=0;a<r&&o<i;++a,++o)e=o<<2,t=n[a],u[e]=255&t,u[e+1]=t>>8&255,u[e+2]=t>>16&255,u[e+3]=t>>24&255;o%r==0&&D(n)}return s&&(e=o<<2,t=n[a],u[e]=255&t,s>1&&(u[e+1]=t>>8&255),s>2&&(u[e+2]=t>>16&255)),u},j.prototype=new R,j.prototype.finalize=function(){return this.encode(this.outputBits,!0),R.prototype.finalize.call(this)};var D=function(e){var t,r,n,i,s,a,o,u,c,l,d,h,f,m,g,y,v,_,b,w,A,E,k,x,T,P,S,I,O,C,N,M,R,j,D,B,L,U,F,Z,q,z,$,K,H,G,V,W,J,Q,Y,X,ee,te,re,ne,ie,se,ae,oe,ue,ce,le;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],s=e[1]^e[11]^e[21]^e[31]^e[41],a=e[2]^e[12]^e[22]^e[32]^e[42],o=e[3]^e[13]^e[23]^e[33]^e[43],u=e[4]^e[14]^e[24]^e[34]^e[44],c=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(a<<1|o>>>31),r=(f=e[9]^e[19]^e[29]^e[39]^e[49])^(o<<1|a>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(u<<1|c>>>31),r=s^(c<<1|u>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=a^(l<<1|d>>>31),r=o^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=u^(h<<1|f>>>31),r=c^(f<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|s>>>31),r=d^(s<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,m=e[0],g=e[1],G=e[11]<<4|e[10]>>>28,V=e[10]<<4|e[11]>>>28,I=e[20]<<3|e[21]>>>29,O=e[21]<<3|e[20]>>>29,oe=e[31]<<9|e[30]>>>23,ue=e[30]<<9|e[31]>>>23,z=e[40]<<18|e[41]>>>14,$=e[41]<<18|e[40]>>>14,j=e[2]<<1|e[3]>>>31,D=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,v=e[12]<<12|e[13]>>>20,W=e[22]<<10|e[23]>>>22,J=e[23]<<10|e[22]>>>22,C=e[33]<<13|e[32]>>>19,N=e[32]<<13|e[33]>>>19,ce=e[42]<<2|e[43]>>>30,le=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,B=e[14]<<6|e[15]>>>26,L=e[15]<<6|e[14]>>>26,_=e[25]<<11|e[24]>>>21,b=e[24]<<11|e[25]>>>21,Q=e[34]<<15|e[35]>>>17,Y=e[35]<<15|e[34]>>>17,M=e[45]<<29|e[44]>>>3,R=e[44]<<29|e[45]>>>3,x=e[6]<<28|e[7]>>>4,T=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,U=e[26]<<25|e[27]>>>7,F=e[27]<<25|e[26]>>>7,w=e[36]<<21|e[37]>>>11,A=e[37]<<21|e[36]>>>11,X=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,K=e[8]<<27|e[9]>>>5,H=e[9]<<27|e[8]>>>5,P=e[18]<<20|e[19]>>>12,S=e[19]<<20|e[18]>>>12,se=e[29]<<7|e[28]>>>25,ae=e[28]<<7|e[29]>>>25,Z=e[38]<<8|e[39]>>>24,q=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,k=e[49]<<14|e[48]>>>18,e[0]=m^~y&_,e[1]=g^~v&b,e[10]=x^~P&I,e[11]=T^~S&O,e[20]=j^~B&U,e[21]=D^~L&F,e[30]=K^~G&W,e[31]=H^~V&J,e[40]=te^~ne&se,e[41]=re^~ie&ae,e[2]=y^~_&w,e[3]=v^~b&A,e[12]=P^~I&C,e[13]=S^~O&N,e[22]=B^~U&Z,e[23]=L^~F&q,e[32]=G^~W&Q,e[33]=V^~J&Y,e[42]=ne^~se&oe,e[43]=ie^~ae&ue,e[4]=_^~w&E,e[5]=b^~A&k,e[14]=I^~C&M,e[15]=O^~N&R,e[24]=U^~Z&z,e[25]=F^~q&$,e[34]=W^~Q&X,e[35]=J^~Y&ee,e[44]=se^~oe&ce,e[45]=ae^~ue&le,e[6]=w^~E&m,e[7]=A^~k&g,e[16]=C^~M&x,e[17]=N^~R&T,e[26]=Z^~z&j,e[27]=q^~$&D,e[36]=Q^~X&K,e[37]=Y^~ee&H,e[46]=oe^~ce&te,e[47]=ue^~le&re,e[8]=E^~m&y,e[9]=k^~g&v,e[18]=M^~x&P,e[19]=R^~T&S,e[28]=z^~j&B,e[29]=$^~D&L,e[38]=X^~K&G,e[39]=ee^~H&V,e[48]=ce^~te&ne,e[49]=le^~re&ie,e[0]^=p[n],e[1]^=p[n+1]};if(u)e.exports=T;else{for(S=0;S<P.length;++S)a[P[S]]=T[P[S]];c&&(void 0===(n=function(){return T}.call(t,r,t,e))||(e.exports=n))}}()},1484:function(e){e.exports=function(){var e=Math.imul,t=Math.clz32,r=Math.abs,n=Math.max,i=Math.floor;class s extends Array{constructor(e,t){if(super(e),this.sign=t,e>s.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded")}static BigInt(e){var t=Number.isFinite;if("number"==typeof e){if(0===e)return s.__zero();if(s.__isOneDigitInt(e))return 0>e?s.__oneDigit(-e,!0):s.__oneDigit(e,!1);if(!t(e)||i(e)!==e)throw new RangeError("The number "+e+" cannot be converted to BigInt because it is not an integer");return s.__fromDouble(e)}if("string"==typeof e){const t=s.__fromString(e);if(null===t)throw new SyntaxError("Cannot convert "+e+" to a BigInt");return t}if("boolean"==typeof e)return!0===e?s.__oneDigit(1,!1):s.__zero();if("object"==typeof e){if(e.constructor===s)return e;const t=s.__toPrimitive(e);return s.BigInt(t)}throw new TypeError("Cannot convert "+e+" to a BigInt")}toDebugString(){const e=["BigInt["];for(const t of this)e.push((t?(t>>>0).toString(16):t)+", ");return e.push("]"),e.join("")}toString(e=10){if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(e&e-1)?s.__toStringBasePowerOfTwo(this,e):s.__toStringGeneric(this,e,!1)}static toNumber(e){const t=e.length;if(0===t)return 0;if(1===t){const t=e.__unsignedDigit(0);return e.sign?-t:t}const r=e.__digit(t-1),n=s.__clz30(r),i=30*t-n;if(1024<i)return e.sign?-1/0:1/0;let a=i-1,o=r,u=t-1;const c=n+3;let l=32===c?0:o<<c;l>>>=12;const d=c-12;let h=12<=c?0:o<<20+c,f=20+c;for(0<d&&0<u&&(u--,o=e.__digit(u),l|=o>>>30-d,h=o<<d+2,f=d+2);0<f&&0<u;)u--,o=e.__digit(u),h|=30<=f?o<<f-30:o>>>30-f,f-=30;const p=s.__decideRounding(e,f,u,o);if((1===p||0===p&&1==(1&h))&&(h=h+1>>>0,0===h&&(l++,0!=l>>>20&&(l=0,a++,1023<a))))return e.sign?-1/0:1/0;const m=e.sign?-2147483648:0;return a=a+1023<<20,s.__kBitConversionInts[1]=m|a|l,s.__kBitConversionInts[0]=h,s.__kBitConversionDouble[0]}static unaryMinus(e){if(0===e.length)return e;const t=e.__copy();return t.sign=!e.sign,t}static bitwiseNot(e){return e.sign?s.__absoluteSubOne(e).__trim():s.__absoluteAddOne(e,!0)}static exponentiate(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(0===t.length)return s.__oneDigit(1,!1);if(0===e.length)return e;if(1===e.length&&1===e.__digit(0))return e.sign&&0==(1&t.__digit(0))?s.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");let r=t.__unsignedDigit(0);if(1===r)return e;if(r>=s.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===e.length&&2===e.__digit(0)){const t=1+(0|r/30),n=e.sign&&0!=(1&r),i=new s(t,n);i.__initializeDigits();const a=1<<r%30;return i.__setDigit(t-1,a),i}let n=null,i=e;for(0!=(1&r)&&(n=e),r>>=1;0!==r;r>>=1)i=s.multiply(i,i),0!=(1&r)&&(n=null===n?i:s.multiply(n,i));return n}static multiply(e,t){if(0===e.length)return e;if(0===t.length)return t;let r=e.length+t.length;30<=e.__clzmsd()+t.__clzmsd()&&r--;const n=new s(r,e.sign!==t.sign);n.__initializeDigits();for(let r=0;r<e.length;r++)s.__multiplyAccumulate(t,e.__digit(r),n,r);return n.__trim()}static divide(e,t){if(0===t.length)throw new RangeError("Division by zero");if(0>s.__absoluteCompare(e,t))return s.__zero();const r=e.sign!==t.sign,n=t.__unsignedDigit(0);let i;if(1===t.length&&32767>=n){if(1===n)return r===e.sign?e:s.unaryMinus(e);i=s.__absoluteDivSmall(e,n,null)}else i=s.__absoluteDivLarge(e,t,!0,!1);return i.sign=r,i.__trim()}static remainder(e,t){if(0===t.length)throw new RangeError("Division by zero");if(0>s.__absoluteCompare(e,t))return e;const r=t.__unsignedDigit(0);if(1===t.length&&32767>=r){if(1===r)return s.__zero();const t=s.__absoluteModSmall(e,r);return 0===t?s.__zero():s.__oneDigit(t,e.sign)}const n=s.__absoluteDivLarge(e,t,!1,!0);return n.sign=e.sign,n.__trim()}static add(e,t){const r=e.sign;return r===t.sign?s.__absoluteAdd(e,t,r):0<=s.__absoluteCompare(e,t)?s.__absoluteSub(e,t,r):s.__absoluteSub(t,e,!r)}static subtract(e,t){const r=e.sign;return r===t.sign?0<=s.__absoluteCompare(e,t)?s.__absoluteSub(e,t,r):s.__absoluteSub(t,e,!r):s.__absoluteAdd(e,t,r)}static leftShift(e,t){return 0===t.length||0===e.length?e:t.sign?s.__rightShiftByAbsolute(e,t):s.__leftShiftByAbsolute(e,t)}static signedRightShift(e,t){return 0===t.length||0===e.length?e:t.sign?s.__leftShiftByAbsolute(e,t):s.__rightShiftByAbsolute(e,t)}static unsignedRightShift(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}static lessThan(e,t){return 0>s.__compareToBigInt(e,t)}static lessThanOrEqual(e,t){return 0>=s.__compareToBigInt(e,t)}static greaterThan(e,t){return 0<s.__compareToBigInt(e,t)}static greaterThanOrEqual(e,t){return 0<=s.__compareToBigInt(e,t)}static equal(e,t){if(e.sign!==t.sign)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e.__digit(r)!==t.__digit(r))return!1;return!0}static notEqual(e,t){return!s.equal(e,t)}static bitwiseAnd(e,t){if(!e.sign&&!t.sign)return s.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){const r=n(e.length,t.length)+1;let i=s.__absoluteSubOne(e,r);const a=s.__absoluteSubOne(t);return i=s.__absoluteOr(i,a,i),s.__absoluteAddOne(i,!0,i).__trim()}return e.sign&&([e,t]=[t,e]),s.__absoluteAndNot(e,s.__absoluteSubOne(t)).__trim()}static bitwiseXor(e,t){if(!e.sign&&!t.sign)return s.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){const r=n(e.length,t.length),i=s.__absoluteSubOne(e,r),a=s.__absoluteSubOne(t);return s.__absoluteXor(i,a,i).__trim()}const r=n(e.length,t.length)+1;e.sign&&([e,t]=[t,e]);let i=s.__absoluteSubOne(t,r);return i=s.__absoluteXor(i,e,i),s.__absoluteAddOne(i,!0,i).__trim()}static bitwiseOr(e,t){const r=n(e.length,t.length);if(!e.sign&&!t.sign)return s.__absoluteOr(e,t).__trim();if(e.sign&&t.sign){let n=s.__absoluteSubOne(e,r);const i=s.__absoluteSubOne(t);return n=s.__absoluteAnd(n,i,n),s.__absoluteAddOne(n,!0,n).__trim()}e.sign&&([e,t]=[t,e]);let i=s.__absoluteSubOne(t,r);return i=s.__absoluteAndNot(i,e,i),s.__absoluteAddOne(i,!0,i).__trim()}static asIntN(e,t){if(0===t.length)return t;if(0>(e=i(e)))throw new RangeError("Invalid value: not (convertible to) a safe integer");if(0===e)return s.__zero();if(e>=s.__kMaxLengthBits)return t;const r=0|(e+29)/30;if(t.length<r)return t;const n=t.__unsignedDigit(r-1),a=1<<(e-1)%30;if(t.length===r&&n<a)return t;if((n&a)!==a)return s.__truncateToNBits(e,t);if(!t.sign)return s.__truncateAndSubFromPowerOfTwo(e,t,!0);if(0==(n&a-1)){for(let n=r-2;0<=n;n--)if(0!==t.__digit(n))return s.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===r&&n===a?t:s.__truncateToNBits(e,t)}return s.__truncateAndSubFromPowerOfTwo(e,t,!1)}static asUintN(e,t){if(0===t.length)return t;if(0>(e=i(e)))throw new RangeError("Invalid value: not (convertible to) a safe integer");if(0===e)return s.__zero();if(t.sign){if(e>s.__kMaxLengthBits)throw new RangeError("BigInt too big");return s.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=s.__kMaxLengthBits)return t;const r=0|(e+29)/30;if(t.length<r)return t;const n=e%30;if(t.length==r){if(0===n)return t;if(0==t.__digit(r-1)>>>n)return t}return s.__truncateToNBits(e,t)}static ADD(e,t){if(e=s.__toPrimitive(e),t=s.__toPrimitive(t),"string"==typeof e)return"string"!=typeof t&&(t=t.toString()),e+t;if("string"==typeof t)return e.toString()+t;if(e=s.__toNumeric(e),t=s.__toNumeric(t),s.__isBigInt(e)&&s.__isBigInt(t))return s.add(e,t);if("number"==typeof e&&"number"==typeof t)return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}static LT(e,t){return s.__compare(e,t,0)}static LE(e,t){return s.__compare(e,t,1)}static GT(e,t){return s.__compare(e,t,2)}static GE(e,t){return s.__compare(e,t,3)}static EQ(e,t){for(;;){if(s.__isBigInt(e))return s.__isBigInt(t)?s.equal(e,t):s.EQ(t,e);if("number"==typeof e){if(s.__isBigInt(t))return s.__equalToNumber(t,e);if("object"!=typeof t)return e==t;t=s.__toPrimitive(t)}else if("string"==typeof e){if(s.__isBigInt(t))return null!==(e=s.__fromString(e))&&s.equal(e,t);if("object"!=typeof t)return e==t;t=s.__toPrimitive(t)}else if("boolean"==typeof e){if(s.__isBigInt(t))return s.__equalToNumber(t,+e);if("object"!=typeof t)return e==t;t=s.__toPrimitive(t)}else if("symbol"==typeof e){if(s.__isBigInt(t))return!1;if("object"!=typeof t)return e==t;t=s.__toPrimitive(t)}else{if("object"!=typeof e)return e==t;if("object"==typeof t&&t.constructor!==s)return e==t;e=s.__toPrimitive(e)}}}static NE(e,t){return!s.EQ(e,t)}static __zero(){return new s(0,!1)}static __oneDigit(e,t){const r=new s(1,t);return r.__setDigit(0,e),r}__copy(){const e=new s(this.length,this.sign);for(let t=0;t<this.length;t++)e[t]=this[t];return e}__trim(){let e=this.length,t=this[e-1];for(;0===t;)e--,t=this[e-1],this.pop();return 0===e&&(this.sign=!1),this}__initializeDigits(){for(let e=0;e<this.length;e++)this[e]=0}static __decideRounding(e,t,r,n){if(0<t)return-1;let i;if(0>t)i=-t-1;else{if(0===r)return-1;r--,n=e.__digit(r),i=29}let s=1<<i;if(0==(n&s))return-1;if(s-=1,0!=(n&s))return 1;for(;0<r;)if(r--,0!==e.__digit(r))return 1;return 0}static __fromDouble(e){s.__kBitConversionDouble[0]=e;const t=(2047&s.__kBitConversionInts[1]>>>20)-1023,r=1+(0|t/30),n=new s(r,0>e);let i=1048575&s.__kBitConversionInts[1]|1048576,a=s.__kBitConversionInts[0];const o=t%30;let u,c=0;if(20>o){const e=20-o;c=e+32,u=i>>>e,i=i<<32-e|a>>>e,a<<=32-e}else if(20===o)c=32,u=i,i=a,a=0;else{const e=o-20;c=32-e,u=i<<e|a>>>32-e,i=a<<e,a=0}n.__setDigit(r-1,u);for(let e=r-2;0<=e;e--)0<c?(c-=30,u=i>>>2,i=i<<30|a>>>2,a<<=30):u=0,n.__setDigit(e,u);return n.__trim()}static __isWhitespace(e){return!!(13>=e&&9<=e)||(159>=e?32==e:131071>=e?160==e||5760==e:196607>=e?10>=(e&=131071)||40==e||41==e||47==e||95==e||4096==e:65279==e)}static __fromString(e,t=0){let r=0;const n=e.length;let i=0;if(i===n)return s.__zero();let a=e.charCodeAt(i);for(;s.__isWhitespace(a);){if(++i===n)return s.__zero();a=e.charCodeAt(i)}if(43===a){if(++i===n)return null;a=e.charCodeAt(i),r=1}else if(45===a){if(++i===n)return null;a=e.charCodeAt(i),r=-1}if(0===t){if(t=10,48===a){if(++i===n)return s.__zero();if(a=e.charCodeAt(i),88===a||120===a){if(t=16,++i===n)return null;a=e.charCodeAt(i)}else if(79===a||111===a){if(t=8,++i===n)return null;a=e.charCodeAt(i)}else if(66===a||98===a){if(t=2,++i===n)return null;a=e.charCodeAt(i)}}}else if(16===t&&48===a){if(++i===n)return s.__zero();if(a=e.charCodeAt(i),88===a||120===a){if(++i===n)return null;a=e.charCodeAt(i)}}if(0!=r&&10!==t)return null;for(;48===a;){if(++i===n)return s.__zero();a=e.charCodeAt(i)}const o=n-i;let u=s.__kMaxBitsPerChar[t],c=s.__kBitsPerCharTableMultiplier-1;if(o>1073741824/u)return null;const l=u*o+c>>>s.__kBitsPerCharTableShift,d=new s(0|(l+29)/30,!1),h=10>t?t:10,f=10<t?t-10:0;if(0==(t&t-1)){u>>=s.__kBitsPerCharTableShift;const t=[],r=[];let o=!1;do{let s=0,c=0;for(;;){let t;if(a-48>>>0<h)t=a-48;else{if(!((32|a)-97>>>0<f)){o=!0;break}t=(32|a)-87}if(c+=u,s=s<<u|t,++i===n){o=!0;break}if(a=e.charCodeAt(i),30<c+u)break}t.push(s),r.push(c)}while(!o);s.__fillFromParts(d,t,r)}else{d.__initializeDigits();let r=!1,o=0;do{let l=0,p=1;for(;;){let s;if(a-48>>>0<h)s=a-48;else{if(!((32|a)-97>>>0<f)){r=!0;break}s=(32|a)-87}const u=p*t;if(1073741823<u)break;if(p=u,l=l*t+s,o++,++i===n){r=!0;break}a=e.charCodeAt(i)}c=30*s.__kBitsPerCharTableMultiplier-1;const m=0|(u*o+c>>>s.__kBitsPerCharTableShift)/30;d.__inplaceMultiplyAdd(p,l,m)}while(!r)}if(i!==n){if(!s.__isWhitespace(a))return null;for(i++;i<n;i++)if(a=e.charCodeAt(i),!s.__isWhitespace(a))return null}return d.sign=-1==r,d.__trim()}static __fillFromParts(e,t,r){let n=0,i=0,s=0;for(let a=t.length-1;0<=a;a--){const o=t[a],u=r[a];i|=o<<s,s+=u,30===s?(e.__setDigit(n++,i),s=0,i=0):30<s&&(e.__setDigit(n++,1073741823&i),s-=30,i=o>>>u-s)}if(0!==i){if(n>=e.length)throw new Error("implementation bug");e.__setDigit(n++,i)}for(;n<e.length;n++)e.__setDigit(n,0)}static __toStringBasePowerOfTwo(e,t){const r=e.length;let n=t-1;n=(85&n>>>1)+(85&n),n=(51&n>>>2)+(51&n),n=(15&n>>>4)+(15&n);const i=n,a=t-1,o=e.__digit(r-1);let u=0|(30*r-s.__clz30(o)+i-1)/i;if(e.sign&&u++,268435456<u)throw new Error("string too long");const c=Array(u);let l=u-1,d=0,h=0;for(let t=0;t<r-1;t++){const r=e.__digit(t),n=(d|r<<h)&a;c[l--]=s.__kConversionChars[n];const o=i-h;for(d=r>>>o,h=30-o;h>=i;)c[l--]=s.__kConversionChars[d&a],d>>>=i,h-=i}const f=(d|o<<h)&a;for(c[l--]=s.__kConversionChars[f],d=o>>>i-h;0!==d;)c[l--]=s.__kConversionChars[d&a],d>>>=i;if(e.sign&&(c[l--]="-"),-1!=l)throw new Error("implementation bug");return c.join("")}static __toStringGeneric(e,t,r){const n=e.length;if(0===n)return"";if(1===n){let n=e.__unsignedDigit(0).toString(t);return!1===r&&e.sign&&(n="-"+n),n}const i=30*n-s.__clz30(e.__digit(n-1)),a=s.__kMaxBitsPerChar[t]-1;let o=i*s.__kBitsPerCharTableMultiplier;o+=a-1,o=0|o/a;const u=o+1>>1,c=s.exponentiate(s.__oneDigit(t,!1),s.__oneDigit(u,!1));let l,d;const h=c.__unsignedDigit(0);if(1===c.length&&32767>=h){l=new s(e.length,!1),l.__initializeDigits();let r=0;for(let t=2*e.length-1;0<=t;t--){const n=r<<15|e.__halfDigit(t);l.__setHalfDigit(t,0|n/h),r=0|n%h}d=r.toString(t)}else{const r=s.__absoluteDivLarge(e,c,!0,!0);l=r.quotient;const n=r.remainder.__trim();d=s.__toStringGeneric(n,t,!0)}l.__trim();let f=s.__toStringGeneric(l,t,!0);for(;d.length<u;)d="0"+d;return!1===r&&e.sign&&(f="-"+f),f+d}static __unequalSign(e){return e?-1:1}static __absoluteGreater(e){return e?-1:1}static __absoluteLess(e){return e?1:-1}static __compareToBigInt(e,t){const r=e.sign;if(r!==t.sign)return s.__unequalSign(r);const n=s.__absoluteCompare(e,t);return 0<n?s.__absoluteGreater(r):0>n?s.__absoluteLess(r):0}static __compareToNumber(e,t){if(s.__isOneDigitInt(t)){const n=e.sign,i=0>t;if(n!==i)return s.__unequalSign(n);if(0===e.length){if(i)throw new Error("implementation bug");return 0===t?0:-1}if(1<e.length)return s.__absoluteGreater(n);const a=r(t),o=e.__unsignedDigit(0);return o>a?s.__absoluteGreater(n):o<a?s.__absoluteLess(n):0}return s.__compareToDouble(e,t)}static __compareToDouble(e,t){if(t!=t)return t;if(t===1/0)return-1;if(t===-1/0)return 1;const r=e.sign;if(r!==0>t)return s.__unequalSign(r);if(0===t)throw new Error("implementation bug: should be handled elsewhere");if(0===e.length)return-1;s.__kBitConversionDouble[0]=t;const n=2047&s.__kBitConversionInts[1]>>>20;if(2047==n)throw new Error("implementation bug: handled elsewhere");const i=n-1023;if(0>i)return s.__absoluteGreater(r);const a=e.length;let o=e.__digit(a-1);const u=s.__clz30(o),c=30*a-u,l=i+1;if(c<l)return s.__absoluteLess(r);if(c>l)return s.__absoluteGreater(r);let d=1048576|1048575&s.__kBitConversionInts[1],h=s.__kBitConversionInts[0];const f=29-u;if(f!==(0|(c-1)%30))throw new Error("implementation bug");let p,m=0;if(20>f){const e=20-f;m=e+32,p=d>>>e,d=d<<32-e|h>>>e,h<<=32-e}else if(20===f)m=32,p=d,d=h,h=0;else{const e=f-20;m=32-e,p=d<<e|h>>>32-e,d=h<<e,h=0}if(o>>>=0,p>>>=0,o>p)return s.__absoluteGreater(r);if(o<p)return s.__absoluteLess(r);for(let t=a-2;0<=t;t--){0<m?(m-=30,p=d>>>2,d=d<<30|h>>>2,h<<=30):p=0;const n=e.__unsignedDigit(t);if(n>p)return s.__absoluteGreater(r);if(n<p)return s.__absoluteLess(r)}if(0!==d||0!==h){if(0===m)throw new Error("implementation bug");return s.__absoluteLess(r)}return 0}static __equalToNumber(e,t){return s.__isOneDigitInt(t)?0===t?0===e.length:1===e.length&&e.sign===0>t&&e.__unsignedDigit(0)===r(t):0===s.__compareToDouble(e,t)}static __comparisonResultToBool(e,t){return 0===t?0>e:1===t?0>=e:2===t?0<e:3===t?0<=e:void 0}static __compare(e,t,r){if(e=s.__toPrimitive(e),t=s.__toPrimitive(t),"string"==typeof e&&"string"==typeof t)switch(r){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(s.__isBigInt(e)&&"string"==typeof t)return null!==(t=s.__fromString(t))&&s.__comparisonResultToBool(s.__compareToBigInt(e,t),r);if("string"==typeof e&&s.__isBigInt(t))return null!==(e=s.__fromString(e))&&s.__comparisonResultToBool(s.__compareToBigInt(e,t),r);if(e=s.__toNumeric(e),t=s.__toNumeric(t),s.__isBigInt(e)){if(s.__isBigInt(t))return s.__comparisonResultToBool(s.__compareToBigInt(e,t),r);if("number"!=typeof t)throw new Error("implementation bug");return s.__comparisonResultToBool(s.__compareToNumber(e,t),r)}if("number"!=typeof e)throw new Error("implementation bug");if(s.__isBigInt(t))return s.__comparisonResultToBool(s.__compareToNumber(t,e),2^r);if("number"!=typeof t)throw new Error("implementation bug");return 0===r?e<t:1===r?e<=t:2===r?e>t:3===r?e>=t:void 0}__clzmsd(){return s.__clz30(this.__digit(this.length-1))}static __absoluteAdd(e,t,r){if(e.length<t.length)return s.__absoluteAdd(t,e,r);if(0===e.length)return e;if(0===t.length)return e.sign===r?e:s.unaryMinus(e);let n=e.length;(0===e.__clzmsd()||t.length===e.length&&0===t.__clzmsd())&&n++;const i=new s(n,r);let a=0,o=0;for(;o<t.length;o++){const r=e.__digit(o)+t.__digit(o)+a;a=r>>>30,i.__setDigit(o,1073741823&r)}for(;o<e.length;o++){const t=e.__digit(o)+a;a=t>>>30,i.__setDigit(o,1073741823&t)}return o<i.length&&i.__setDigit(o,a),i.__trim()}static __absoluteSub(e,t,r){if(0===e.length)return e;if(0===t.length)return e.sign===r?e:s.unaryMinus(e);const n=new s(e.length,r);let i=0,a=0;for(;a<t.length;a++){const r=e.__digit(a)-t.__digit(a)-i;i=1&r>>>30,n.__setDigit(a,1073741823&r)}for(;a<e.length;a++){const t=e.__digit(a)-i;i=1&t>>>30,n.__setDigit(a,1073741823&t)}return n.__trim()}static __absoluteAddOne(e,t,r=null){const n=e.length;null===r?r=new s(n,t):r.sign=t;let i=1;for(let t=0;t<n;t++){const n=e.__digit(t)+i;i=n>>>30,r.__setDigit(t,1073741823&n)}return 0!=i&&r.__setDigitGrow(n,1),r}static __absoluteSubOne(e,t){const r=e.length,n=new s(t=t||r,!1);let i=1;for(let t=0;t<r;t++){const r=e.__digit(t)-i;i=1&r>>>30,n.__setDigit(t,1073741823&r)}if(0!=i)throw new Error("implementation bug");for(let e=r;e<t;e++)n.__setDigit(e,0);return n}static __absoluteAnd(e,t,r=null){let n=e.length,i=t.length,a=i;if(n<i){a=n;const r=e,s=n;e=t,n=i,t=r,i=s}let o=a;null===r?r=new s(o,!1):o=r.length;let u=0;for(;u<a;u++)r.__setDigit(u,e.__digit(u)&t.__digit(u));for(;u<o;u++)r.__setDigit(u,0);return r}static __absoluteAndNot(e,t,r=null){const n=e.length,i=t.length;let a=i;n<i&&(a=n);let o=n;null===r?r=new s(o,!1):o=r.length;let u=0;for(;u<a;u++)r.__setDigit(u,e.__digit(u)&~t.__digit(u));for(;u<n;u++)r.__setDigit(u,e.__digit(u));for(;u<o;u++)r.__setDigit(u,0);return r}static __absoluteOr(e,t,r=null){let n=e.length,i=t.length,a=i;if(n<i){a=n;const r=e,s=n;e=t,n=i,t=r,i=s}let o=n;null===r?r=new s(o,!1):o=r.length;let u=0;for(;u<a;u++)r.__setDigit(u,e.__digit(u)|t.__digit(u));for(;u<n;u++)r.__setDigit(u,e.__digit(u));for(;u<o;u++)r.__setDigit(u,0);return r}static __absoluteXor(e,t,r=null){let n=e.length,i=t.length,a=i;if(n<i){a=n;const r=e,s=n;e=t,n=i,t=r,i=s}let o=n;null===r?r=new s(o,!1):o=r.length;let u=0;for(;u<a;u++)r.__setDigit(u,e.__digit(u)^t.__digit(u));for(;u<n;u++)r.__setDigit(u,e.__digit(u));for(;u<o;u++)r.__setDigit(u,0);return r}static __absoluteCompare(e,t){const r=e.length-t.length;if(0!=r)return r;let n=e.length-1;for(;0<=n&&e.__digit(n)===t.__digit(n);)n--;return 0>n?0:e.__unsignedDigit(n)>t.__unsignedDigit(n)?1:-1}static __multiplyAccumulate(e,t,r,n){if(0===t)return;const i=32767&t,a=t>>>15;let o=0,u=0;for(let t,c=0;c<e.length;c++,n++){t=r.__digit(n);const l=e.__digit(c),d=32767&l,h=l>>>15,f=s.__imul(d,i),p=s.__imul(d,a),m=s.__imul(h,i);t+=u+f+o,o=t>>>30,t&=1073741823,t+=((32767&p)<<15)+((32767&m)<<15),o+=t>>>30,u=s.__imul(h,a)+(p>>>15)+(m>>>15),r.__setDigit(n,1073741823&t)}for(;0!=o||0!==u;n++){let e=r.__digit(n);e+=o+u,u=0,o=e>>>30,r.__setDigit(n,1073741823&e)}}static __internalMultiplyAdd(e,t,r,n,i){let a=r,o=0;for(let r=0;r<n;r++){const n=e.__digit(r),u=s.__imul(32767&n,t),c=s.__imul(n>>>15,t),l=u+((32767&c)<<15)+o+a;a=l>>>30,o=c>>>15,i.__setDigit(r,1073741823&l)}if(i.length>n)for(i.__setDigit(n++,a+o);n<i.length;)i.__setDigit(n++,0);else if(0!==a+o)throw new Error("implementation bug")}__inplaceMultiplyAdd(e,t,r){r>this.length&&(r=this.length);const n=32767&e,i=e>>>15;let a=0,o=t;for(let e=0;e<r;e++){const t=this.__digit(e),r=32767&t,u=t>>>15,c=s.__imul(r,n),l=s.__imul(r,i),d=s.__imul(u,n);let h=o+c+a;a=h>>>30,h&=1073741823,h+=((32767&l)<<15)+((32767&d)<<15),a+=h>>>30,o=s.__imul(u,i)+(l>>>15)+(d>>>15),this.__setDigit(e,1073741823&h)}if(0!=a||0!==o)throw new Error("implementation bug")}static __absoluteDivSmall(e,t,r=null){null===r&&(r=new s(e.length,!1));let n=0;for(let i,s=2*e.length-1;0<=s;s-=2){i=(n<<15|e.__halfDigit(s))>>>0;const a=0|i/t;n=0|i%t,i=(n<<15|e.__halfDigit(s-1))>>>0;const o=0|i/t;n=0|i%t,r.__setDigit(s>>>1,a<<15|o)}return r}static __absoluteModSmall(e,t){let r=0;for(let n=2*e.length-1;0<=n;n--)r=0|((r<<15|e.__halfDigit(n))>>>0)%t;return r}static __absoluteDivLarge(e,t,r,n){const i=t.__halfDigitLength(),a=t.length,o=e.__halfDigitLength()-i;let u=null;r&&(u=new s(o+2>>>1,!1),u.__initializeDigits());const c=new s(i+2>>>1,!1);c.__initializeDigits();const l=s.__clz15(t.__halfDigit(i-1));0<l&&(t=s.__specialLeftShift(t,l,0));const d=s.__specialLeftShift(e,l,1),h=t.__halfDigit(i-1);let f=0;for(let e,n=o;0<=n;n--){e=32767;const o=d.__halfDigit(n+i);if(o!==h){const r=(o<<15|d.__halfDigit(n+i-1))>>>0;e=0|r/h;let a=0|r%h;const u=t.__halfDigit(i-2),c=d.__halfDigit(n+i-2);for(;s.__imul(e,u)>>>0>(a<<16|c)>>>0&&(e--,a+=h,!(32767<a)););}s.__internalMultiplyAdd(t,e,0,a,c);let l=d.__inplaceSub(c,n,i+1);0!==l&&(l=d.__inplaceAdd(t,n,i),d.__setHalfDigit(n+i,32767&d.__halfDigit(n+i)+l),e--),r&&(1&n?f=e<<15:u.__setDigit(n>>>1,f|e))}if(n)return d.__inplaceRightShift(l),r?{quotient:u,remainder:d}:d;if(r)return u;throw new Error("unreachable")}static __clz15(e){return s.__clz30(e)-15}__inplaceAdd(e,t,r){let n=0;for(let i=0;i<r;i++){const r=this.__halfDigit(t+i)+e.__halfDigit(i)+n;n=r>>>15,this.__setHalfDigit(t+i,32767&r)}return n}__inplaceSub(e,t,r){let n=0;if(1&t){t>>=1;let i=this.__digit(t),s=32767&i,a=0;for(;a<r-1>>>1;a++){const r=e.__digit(a),o=(i>>>15)-(32767&r)-n;n=1&o>>>15,this.__setDigit(t+a,(32767&o)<<15|32767&s),i=this.__digit(t+a+1),s=(32767&i)-(r>>>15)-n,n=1&s>>>15}const o=e.__digit(a),u=(i>>>15)-(32767&o)-n;if(n=1&u>>>15,this.__setDigit(t+a,(32767&u)<<15|32767&s),t+a+1>=this.length)throw new RangeError("out of bounds");0==(1&r)&&(i=this.__digit(t+a+1),s=(32767&i)-(o>>>15)-n,n=1&s>>>15,this.__setDigit(t+e.length,1073709056&i|32767&s))}else{t>>=1;let i=0;for(;i<e.length-1;i++){const r=this.__digit(t+i),s=e.__digit(i),a=(32767&r)-(32767&s)-n;n=1&a>>>15;const o=(r>>>15)-(s>>>15)-n;n=1&o>>>15,this.__setDigit(t+i,(32767&o)<<15|32767&a)}const s=this.__digit(t+i),a=e.__digit(i),o=(32767&s)-(32767&a)-n;n=1&o>>>15;let u=0;0==(1&r)&&(u=(s>>>15)-(a>>>15)-n,n=1&u>>>15),this.__setDigit(t+i,(32767&u)<<15|32767&o)}return n}__inplaceRightShift(e){if(0===e)return;let t=this.__digit(0)>>>e;const r=this.length-1;for(let n=0;n<r;n++){const r=this.__digit(n+1);this.__setDigit(n,1073741823&r<<30-e|t),t=r>>>e}this.__setDigit(r,t)}static __specialLeftShift(e,t,r){const n=e.length,i=new s(n+r,!1);if(0===t){for(let t=0;t<n;t++)i.__setDigit(t,e.__digit(t));return 0<r&&i.__setDigit(n,0),i}let a=0;for(let r=0;r<n;r++){const n=e.__digit(r);i.__setDigit(r,1073741823&n<<t|a),a=n>>>30-t}return 0<r&&i.__setDigit(n,a),i}static __leftShiftByAbsolute(e,t){const r=s.__toShiftAmount(t);if(0>r)throw new RangeError("BigInt too big");const n=0|r/30,i=r%30,a=e.length,o=0!==i&&0!=e.__digit(a-1)>>>30-i,u=a+n+(o?1:0),c=new s(u,e.sign);if(0===i){let t=0;for(;t<n;t++)c.__setDigit(t,0);for(;t<u;t++)c.__setDigit(t,e.__digit(t-n))}else{let t=0;for(let e=0;e<n;e++)c.__setDigit(e,0);for(let r=0;r<a;r++){const s=e.__digit(r);c.__setDigit(r+n,1073741823&s<<i|t),t=s>>>30-i}if(o)c.__setDigit(a+n,t);else if(0!==t)throw new Error("implementation bug")}return c.__trim()}static __rightShiftByAbsolute(e,t){const r=e.length,n=e.sign,i=s.__toShiftAmount(t);if(0>i)return s.__rightShiftByMaximum(n);const a=0|i/30,o=i%30;let u=r-a;if(0>=u)return s.__rightShiftByMaximum(n);let c=!1;if(n)if(0!=(e.__digit(a)&(1<<o)-1))c=!0;else for(let t=0;t<a;t++)if(0!==e.__digit(t)){c=!0;break}c&&0===o&&0==~e.__digit(r-1)&&u++;let l=new s(u,n);if(0===o){l.__setDigit(u-1,0);for(let t=a;t<r;t++)l.__setDigit(t-a,e.__digit(t))}else{let t=e.__digit(a)>>>o;const n=r-a-1;for(let r=0;r<n;r++){const n=e.__digit(r+a+1);l.__setDigit(r,1073741823&n<<30-o|t),t=n>>>o}l.__setDigit(n,t)}return c&&(l=s.__absoluteAddOne(l,!0,l)),l.__trim()}static __rightShiftByMaximum(e){return e?s.__oneDigit(1,!0):s.__zero()}static __toShiftAmount(e){if(1<e.length)return-1;const t=e.__unsignedDigit(0);return t>s.__kMaxLengthBits?-1:t}static __toPrimitive(e,t="default"){if("object"!=typeof e)return e;if(e.constructor===s)return e;if("undefined"!=typeof Symbol&&"symbol"==typeof Symbol.toPrimitive){const r=e[Symbol.toPrimitive];if(r){const e=r(t);if("object"!=typeof e)return e;throw new TypeError("Cannot convert object to primitive value")}}const r=e.valueOf;if(r){const t=r.call(e);if("object"!=typeof t)return t}const n=e.toString;if(n){const t=n.call(e);if("object"!=typeof t)return t}throw new TypeError("Cannot convert object to primitive value")}static __toNumeric(e){return s.__isBigInt(e)?e:+e}static __isBigInt(e){return"object"==typeof e&&null!==e&&e.constructor===s}static __truncateToNBits(e,t){const r=0|(e+29)/30,n=new s(r,t.sign),i=r-1;for(let e=0;e<i;e++)n.__setDigit(e,t.__digit(e));let a=t.__digit(i);if(0!=e%30){const t=32-e%30;a=a<<t>>>t}return n.__setDigit(i,a),n.__trim()}static __truncateAndSubFromPowerOfTwo(e,t,r){var n=Math.min;const i=0|(e+29)/30,a=new s(i,r);let o=0;const u=i-1;let c=0;for(const e=n(u,t.length);o<e;o++){const e=0-t.__digit(o)-c;c=1&e>>>30,a.__setDigit(o,1073741823&e)}for(;o<u;o++)a.__setDigit(o,0|1073741823&-c);let l=u<t.length?t.__digit(u):0;const d=e%30;let h;if(0==d)h=0-l-c,h&=1073741823;else{const e=32-d;l=l<<e>>>e;const t=1<<32-e;h=t-l-c,h&=t-1}return a.__setDigit(u,h),a.__trim()}__digit(e){return this[e]}__unsignedDigit(e){return this[e]>>>0}__setDigit(e,t){this[e]=0|t}__setDigitGrow(e,t){this[e]=0|t}__halfDigitLength(){const e=this.length;return 32767>=this.__unsignedDigit(e-1)?2*e-1:2*e}__halfDigit(e){return 32767&this[e>>>1]>>>15*(1&e)}__setHalfDigit(e,t){const r=e>>>1,n=this.__digit(r),i=1&e?32767&n|t<<15:1073709056&n|32767&t;this.__setDigit(r,i)}static __digitPow(e,t){let r=1;for(;0<t;)1&t&&(r*=e),t>>>=1,e*=e;return r}static __isOneDigitInt(e){return(1073741823&e)===e}}return s.__kMaxLength=33554432,s.__kMaxLengthBits=s.__kMaxLength<<5,s.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],s.__kBitsPerCharTableShift=5,s.__kBitsPerCharTableMultiplier=1<<s.__kBitsPerCharTableShift,s.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],s.__kBitConversionBuffer=new ArrayBuffer(8),s.__kBitConversionDouble=new Float64Array(s.__kBitConversionBuffer),s.__kBitConversionInts=new Int32Array(s.__kBitConversionBuffer),s.__clz30=t?function(e){return t(e)-2}:function(e){var t=Math.LN2,r=Math.log;return 0===e?30:0|29-(0|r(e>>>0)/t)},s.__imul=e||function(e,t){return 0|e*t},s}()},9561:e=>{function t(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}},7866:e=>{e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},978:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(161),i=r(2113),s=r(267),a=()=>{},o=new i.TimeoutError;t.default=class extends n{constructor(e){var t,r,n,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=a,this._resolveIdle=a,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:s.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(r=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==r?r:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(n=e.interval)||void 0===n?void 0:n.toString())&&void 0!==i?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=a,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=a,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise(((r,n)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const s=void 0===this._timeout&&void 0===t.timeout?e():i.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&n(o)}));r(await s)}catch(e){n(e)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},7269:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){let n=0,i=e.length;for(;i>0;){const s=i/2|0;let a=n+s;r(e[a],t)<=0?(n=++a,i-=s+1):i=s}return n}},267:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(7269);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const r={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(r);const i=n.default(this._queue,r,((e,t)=>t.priority-e.priority));this._queue.splice(i,0,r)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},8020:(e,t,r)=>{const n=r(3426),i=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class s extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const a=(e,t)=>new Promise(((r,a)=>{t={onFailedAttempt:()=>{},retries:10,...t};const o=n.operation(t);o.attempt((async n=>{try{r(await e(n))}catch(e){if(!(e instanceof Error))return void a(new TypeError(`Non-error was thrown: "${e}". You should only throw errors.`));if(e instanceof s)o.stop(),a(e.originalError);else if(e instanceof TypeError&&(u=e.message,!i.includes(u)))o.stop(),a(e);else{((e,t,r)=>{const n=r.retries-(t-1);e.attemptNumber=t,e.retriesLeft=n})(e,n,t);try{await t.onFailedAttempt(e)}catch(e){return void a(e)}o.retry(e)||a(o.mainError())}}var u}))}));e.exports=a,e.exports.default=a,e.exports.AbortError=s},3426:(e,t,r)=>{e.exports=r(4831)},4831:(e,t,r)=>{var n=r(8169);t.operation=function(e){var r=t.timeouts(e);return new n(r,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<t.retries;i++)n.push(this.createTimeout(i,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(i,t)),n.sort((function(e,t){return e-t})),n},t.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return Math.min(n,t.maxTimeout)},t.wrap=function(e,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var i in n=[],e)"function"==typeof e[i]&&n.push(i);for(var s=0;s<n.length;s++){var a=n[s],o=e[a];e[a]=function(n){var i=t.operation(r),s=Array.prototype.slice.call(arguments,1),a=s.pop();s.push((function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),a.apply(this,arguments))})),i.attempt((function(){n.apply(e,s)}))}.bind(e,o),e[a].options=r}}},8169:e=>{function t(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),r),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,a=(e[s]||0)+1;e[s]=a,a>=r&&(t=i,r=a)}return t}},2113:(e,t,r)=>{const n=r(7866);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}const s=(e,t,r)=>new Promise(((s,a)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void s(e);const o=setTimeout((()=>{if("function"==typeof r){try{s(r())}catch(e){a(e)}return}const n=r instanceof Error?r:new i("string"==typeof r?r:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),a(n)}),t);n(e.then(s,a),(()=>{clearTimeout(o)}))}));e.exports=s,e.exports.default=s,e.exports.TimeoutError=i},4689:function(e){!function(t){const r=2147483647;function n(e){const t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let r=1779033703,n=3144134277,i=1013904242,s=2773480762,a=1359893119,o=2600822924,u=528734635,c=1541459225;const l=new Uint32Array(64);function d(e){let d=0,h=e.length;for(;h>=64;){let f,p,m,g,y,v=r,_=n,b=i,w=s,A=a,E=o,k=u,x=c;for(p=0;p<16;p++)m=d+4*p,l[p]=(255&e[m])<<24|(255&e[m+1])<<16|(255&e[m+2])<<8|255&e[m+3];for(p=16;p<64;p++)f=l[p-2],g=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,f=l[p-15],y=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,l[p]=(g+l[p-7]|0)+(y+l[p-16]|0)|0;for(p=0;p<64;p++)g=(((A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7))+(A&E^~A&k)|0)+(x+(t[p]+l[p]|0)|0)|0,y=((v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10))+(v&_^v&b^_&b)|0,x=k,k=E,E=A,A=w+g|0,w=b,b=_,_=v,v=g+y|0;r=r+v|0,n=n+_|0,i=i+b|0,s=s+w|0,a=a+A|0,o=o+E|0,u=u+k|0,c=c+x|0,d+=64,h-=64}}d(e);let h,f=e.length%64,p=e.length/536870912|0,m=e.length<<3,g=f<56?56:120,y=e.slice(e.length-f,e.length);for(y.push(128),h=f+1;h<g;h++)y.push(0);return y.push(p>>>24&255),y.push(p>>>16&255),y.push(p>>>8&255),y.push(p>>>0&255),y.push(m>>>24&255),y.push(m>>>16&255),y.push(m>>>8&255),y.push(m>>>0&255),d(y),[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255]}function i(e,t,r){e=e.length<=64?e:n(e);const i=64+t.length+4,s=new Array(i),a=new Array(64);let o,u=[];for(o=0;o<64;o++)s[o]=54;for(o=0;o<e.length;o++)s[o]^=e[o];for(o=0;o<t.length;o++)s[64+o]=t[o];for(o=i-4;o<i;o++)s[o]=0;for(o=0;o<64;o++)a[o]=92;for(o=0;o<e.length;o++)a[o]^=e[o];function c(){for(let e=i-1;e>=i-4;e--){if(s[e]++,s[e]<=255)return;s[e]=0}}for(;r>=32;)c(),u=u.concat(n(a.concat(n(s)))),r-=32;return r>0&&(c(),u=u.concat(n(a.concat(n(s))).slice(0,r))),u}function s(e,t,r,n,i){let s;for(c(e,16*(2*r-1),i,0,16),s=0;s<2*r;s++)u(e,16*s,i,16),o(i,n),c(i,0,e,t+16*s,16);for(s=0;s<r;s++)c(e,t+2*s*16,e,16*s,16);for(s=0;s<r;s++)c(e,t+16*(2*s+1),e,16*(s+r),16)}function a(e,t){return e<<t|e>>>32-t}function o(e,t){c(e,0,t,0,16);for(let e=8;e>0;e-=2)t[4]^=a(t[0]+t[12],7),t[8]^=a(t[4]+t[0],9),t[12]^=a(t[8]+t[4],13),t[0]^=a(t[12]+t[8],18),t[9]^=a(t[5]+t[1],7),t[13]^=a(t[9]+t[5],9),t[1]^=a(t[13]+t[9],13),t[5]^=a(t[1]+t[13],18),t[14]^=a(t[10]+t[6],7),t[2]^=a(t[14]+t[10],9),t[6]^=a(t[2]+t[14],13),t[10]^=a(t[6]+t[2],18),t[3]^=a(t[15]+t[11],7),t[7]^=a(t[3]+t[15],9),t[11]^=a(t[7]+t[3],13),t[15]^=a(t[11]+t[7],18),t[1]^=a(t[0]+t[3],7),t[2]^=a(t[1]+t[0],9),t[3]^=a(t[2]+t[1],13),t[0]^=a(t[3]+t[2],18),t[6]^=a(t[5]+t[4],7),t[7]^=a(t[6]+t[5],9),t[4]^=a(t[7]+t[6],13),t[5]^=a(t[4]+t[7],18),t[11]^=a(t[10]+t[9],7),t[8]^=a(t[11]+t[10],9),t[9]^=a(t[8]+t[11],13),t[10]^=a(t[9]+t[8],18),t[12]^=a(t[15]+t[14],7),t[13]^=a(t[12]+t[15],9),t[14]^=a(t[13]+t[12],13),t[15]^=a(t[14]+t[13],18);for(let r=0;r<16;++r)e[r]+=t[r]}function u(e,t,r,n){for(let i=0;i<n;i++)r[i]^=e[t+i]}function c(e,t,r,n,i){for(;i--;)r[n++]=e[t++]}function l(e){if(!e||"number"!=typeof e.length)return!1;for(let t=0;t<e.length;t++){const r=e[t];if("number"!=typeof r||r%1||r<0||r>=256)return!1}return!0}function d(e,t){if("number"!=typeof e||e%1)throw new Error("invalid "+t);return e}function h(e,t,n,a,o,h,f){if(n=d(n,"N"),a=d(a,"r"),o=d(o,"p"),h=d(h,"dkLen"),0===n||0!=(n&n-1))throw new Error("N must be power of 2");if(n>r/128/a)throw new Error("N too large");if(a>r/128/o)throw new Error("r too large");if(!l(e))throw new Error("password must be an array or buffer");if(e=Array.prototype.slice.call(e),!l(t))throw new Error("salt must be an array or buffer");t=Array.prototype.slice.call(t);let p=i(e,t,128*o*a);const m=new Uint32Array(32*o*a);for(let e=0;e<m.length;e++){const t=4*e;m[e]=(255&p[t+3])<<24|(255&p[t+2])<<16|(255&p[t+1])<<8|(255&p[t+0])<<0}const g=new Uint32Array(64*a),y=new Uint32Array(32*a*n),v=32*a,_=new Uint32Array(16),b=new Uint32Array(16),w=o*n*2;let A,E,k=0,x=null,T=!1,P=0,S=0;const I=f?parseInt(1e3/a):4294967295,O="undefined"!=typeof setImmediate?setImmediate:setTimeout,C=function(){if(T)return f(new Error("cancelled"),k/w);let t;switch(P){case 0:E=32*S*a,c(m,E,g,0,v),P=1,A=0;case 1:t=n-A,t>I&&(t=I);for(let e=0;e<t;e++)c(g,0,y,(A+e)*v,v),s(g,v,a,_,b);if(A+=t,k+=t,f){const e=parseInt(1e3*k/w);if(e!==x){if(T=f(null,k/w),T)break;x=e}}if(A<n)break;A=0,P=2;case 2:t=n-A,t>I&&(t=I);for(let e=0;e<t;e++){const e=g[16*(2*a-1)]&n-1;u(y,e*v,g,v),s(g,v,a,_,b)}if(A+=t,k+=t,f){const e=parseInt(1e3*k/w);if(e!==x){if(T=f(null,k/w),T)break;x=e}}if(A<n)break;if(c(g,0,m,E,v),S++,S<o){P=0;break}p=[];for(let e=0;e<m.length;e++)p.push(m[e]>>0&255),p.push(m[e]>>8&255),p.push(m[e]>>16&255),p.push(m[e]>>24&255);const r=i(e,p,h);return f&&f(null,1,r),r}f&&O(C)};if(!f)for(;;){const e=C();if(null!=e)return e}C()}const f={scrypt:function(e,t,r,n,i,s,a){return new Promise((function(o,u){let c=0;a&&a(0),h(e,t,r,n,i,s,(function(e,t,r){if(e)u(e);else if(r)a&&1!==c&&a(1),o(new Uint8Array(r));else if(a&&t!==c)return c=t,a(t)}))}))},syncScrypt:function(e,t,r,n,i,s){return new Uint8Array(h(e,t,r,n,i,s))}};e.exports=f}()},1243:e=>{e.exports&&(e.exports=function(e){return e.prototype.toFormat=function(e,t,r){if(!this.e&&0!==this.e)return this.toString();var n,i,s,a,o,u,c,l,d,h,f,p,m,g,y,v=this.format||{},_=this.constructor.format||{};if(e!=o?"object"==typeof e?(r=e,e=o):t!=o?"object"==typeof t?(r=t,t=o):"object"!=typeof r&&(r={}):r={}:r={},l=(n=this.toFixed(e,t).split("."))[0],d=n[1],u=(c=this.s<0?l.slice(1):l).length,(h=r.decimalSeparator)==o&&(h=v.decimalSeparator)==o&&(h=_.decimalSeparator)==o&&(h="."),(f=r.groupSeparator)==o&&(f=v.groupSeparator)==o&&(f=_.groupSeparator),f&&((p=r.groupSize)==o&&(p=v.groupSize)==o&&(p=_.groupSize)==o&&(p=0),(m=r.secondaryGroupSize)==o&&(m=v.secondaryGroupSize)==o&&(m=_.secondaryGroupSize)==o&&(m=0),m?(i=+m,u-=s=+p):(i=+p,s=+m),i>0&&u>0)){for(a=u%i||i,l=c.substr(0,a);a<u;a+=i)l+=f+c.substr(a,i);s>0&&(l+=f+c.slice(a)),this.s<0&&(l="-"+l)}return d?((g=r.fractionGroupSeparator)==o&&(g=v.fractionGroupSeparator)==o&&(g=_.fractionGroupSeparator),g&&((y=r.fractionGroupSize)==o&&(y=v.fractionGroupSize)==o&&(y=_.fractionGroupSize)==o&&(y=0),(y=+y)&&(d=d.replace(new RegExp("\\d{"+y+"}\\B","g"),"$&"+g))),l+h+d):l},e.format={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"",fractionGroupSize:0},e})},5809:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ZodError=t.quotelessJson=t.ZodIssueCode=void 0;const n=r(3133);t.ZodIssueCode=n.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),t.quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class i extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){const r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,n.util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}t.ZodError=i,i.create=e=>new i(e)},1909:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMap=t.setErrorMap=t.defaultErrorMap=void 0;const i=n(r(6013));t.defaultErrorMap=i.default;let s=i.default;t.setErrorMap=function(e){s=e},t.getErrorMap=function(){return s}},4474:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(1909),t),i(r(4735),t),i(r(1832),t),i(r(3133),t),i(r(1176),t),i(r(5809),t)},3682:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.errorUtil=void 0,(r=t.errorUtil||(t.errorUtil={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},r.toString=e=>"string"==typeof e?e:null==e?void 0:e.message},4735:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=t.isValid=t.isDirty=t.isAborted=t.OK=t.DIRTY=t.INVALID=t.ParseStatus=t.addIssueToContext=t.EMPTY_PATH=t.makeIssue=void 0;const i=r(1909),s=n(r(6013));t.makeIssue=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],a={...i,path:s};let o="";const u=n.filter((e=>!!e)).slice().reverse();for(const e of u)o=e(a,{data:t,defaultError:o}).message;return{...i,path:s,message:i.message||o}},t.EMPTY_PATH=[],t.addIssueToContext=function(e,r){const n=(0,t.makeIssue)({issueData:r,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,(0,i.getErrorMap)(),s.default].filter((e=>!!e))});e.common.issues.push(n)};class a{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const i of r){if("aborted"===i.status)return t.INVALID;"dirty"===i.status&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const r=[];for(const e of t)r.push({key:await e.key,value:await e.value});return a.mergeObjectSync(e,r)}static mergeObjectSync(e,r){const n={};for(const i of r){const{key:r,value:s}=i;if("aborted"===r.status)return t.INVALID;if("aborted"===s.status)return t.INVALID;"dirty"===r.status&&e.dirty(),"dirty"===s.status&&e.dirty(),"__proto__"===r.value||void 0===s.value&&!i.alwaysSet||(n[r.value]=s.value)}return{status:e.value,value:n}}}t.ParseStatus=a,t.INVALID=Object.freeze({status:"aborted"}),t.DIRTY=e=>({status:"dirty",value:e}),t.OK=e=>({status:"valid",value:e}),t.isAborted=e=>"aborted"===e.status,t.isDirty=e=>"dirty"===e.status,t.isValid=e=>"valid"===e.status,t.isAsync=e=>"undefined"!=typeof Promise&&e instanceof Promise},1832:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},3133:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.getParsedType=t.ZodParsedType=t.objectUtil=t.util=void 0,function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(r=t.util||(t.util={})),(t.objectUtil||(t.objectUtil={})).mergeShapes=(e,t)=>({...e,...t}),t.ZodParsedType=r.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),t.getParsedType=e=>{switch(typeof e){case"undefined":return t.ZodParsedType.undefined;case"string":return t.ZodParsedType.string;case"number":return isNaN(e)?t.ZodParsedType.nan:t.ZodParsedType.number;case"boolean":return t.ZodParsedType.boolean;case"function":return t.ZodParsedType.function;case"bigint":return t.ZodParsedType.bigint;case"symbol":return t.ZodParsedType.symbol;case"object":return Array.isArray(e)?t.ZodParsedType.array:null===e?t.ZodParsedType.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?t.ZodParsedType.promise:"undefined"!=typeof Map&&e instanceof Map?t.ZodParsedType.map:"undefined"!=typeof Set&&e instanceof Set?t.ZodParsedType.set:"undefined"!=typeof Date&&e instanceof Date?t.ZodParsedType.date:t.ZodParsedType.object;default:return t.ZodParsedType.unknown}}},6750:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.z=void 0;const o=s(r(4474));t.z=o,a(r(4474),t),t.default=o},6013:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(3133),i=r(5809);t.default=(e,t)=>{let r;switch(e.code){case i.ZodIssueCode.invalid_type:r=e.received===n.ZodParsedType.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case i.ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,n.util.jsonStringifyReplacer)}`;break;case i.ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${n.util.joinValues(e.keys,", ")}`;break;case i.ZodIssueCode.invalid_union:r="Invalid input";break;case i.ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${n.util.joinValues(e.options)}`;break;case i.ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${n.util.joinValues(e.options)}, received '${e.received}'`;break;case i.ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case i.ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case i.ZodIssueCode.invalid_date:r="Invalid date";break;case i.ZodIssueCode.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:n.util.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case i.ZodIssueCode.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case i.ZodIssueCode.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case i.ZodIssueCode.custom:r="Invalid input";break;case i.ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case i.ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case i.ZodIssueCode.not_finite:r="Number must be finite";break;default:r=t.defaultError,n.util.assertNever(e)}return{message:r}}},1176:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.date=t.boolean=t.bigint=t.array=t.any=t.coerce=t.ZodFirstPartyTypeKind=t.late=t.ZodSchema=t.Schema=t.custom=t.ZodReadonly=t.ZodPipeline=t.ZodBranded=t.BRAND=t.ZodNaN=t.ZodCatch=t.ZodDefault=t.ZodNullable=t.ZodOptional=t.ZodTransformer=t.ZodEffects=t.ZodPromise=t.ZodNativeEnum=t.ZodEnum=t.ZodLiteral=t.ZodLazy=t.ZodFunction=t.ZodSet=t.ZodMap=t.ZodRecord=t.ZodTuple=t.ZodIntersection=t.ZodDiscriminatedUnion=t.ZodUnion=t.ZodObject=t.ZodArray=t.ZodVoid=t.ZodNever=t.ZodUnknown=t.ZodAny=t.ZodNull=t.ZodUndefined=t.ZodSymbol=t.ZodDate=t.ZodBoolean=t.ZodBigInt=t.ZodNumber=t.ZodString=t.ZodType=void 0,t.NEVER=t.void=t.unknown=t.union=t.undefined=t.tuple=t.transformer=t.symbol=t.string=t.strictObject=t.set=t.record=t.promise=t.preprocess=t.pipeline=t.ostring=t.optional=t.onumber=t.oboolean=t.object=t.number=t.nullable=t.null=t.never=t.nativeEnum=t.nan=t.map=t.literal=t.lazy=t.intersection=t.instanceof=t.function=t.enum=t.effect=t.discriminatedUnion=void 0;const n=r(1909),i=r(3682),s=r(4735),a=r(3133),o=r(5809);class u{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const c=(e,t)=>{if((0,s.isValid)(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new o.ZodError(e.common.issues);return this._error=t,this._error}}};function l(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=n?n:t.defaultError}:{message:null!=r?r:t.defaultError},description:i}}class d{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return(0,a.getParsedType)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,a.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new s.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,a.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if((0,s.isAsync)(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,a.getParsedType)(e)},i=this._parseSync({data:e,path:n.path,parent:n});return c(n,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,a.getParsedType)(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await((0,s.isAsync)(n)?n:Promise.resolve(n));return c(r,i)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,n)=>{const i=e(t),s=()=>n.addIssue({code:o.ZodIssueCode.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(s(),!1))):!!i||(s(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1)))}_refinement(e){return new Y({schema:this,typeName:oe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return X.create(this,this._def)}nullable(){return ee.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return M.create(this,this._def)}promise(){return Q.create(this,this._def)}or(e){return D.create([this,e],this._def)}and(e){return F.create(this,e,this._def)}transform(e){return new Y({...l(this._def),schema:this,typeName:oe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new te({...l(this._def),innerType:this,defaultValue:t,typeName:oe.ZodDefault})}brand(){return new ie({typeName:oe.ZodBranded,type:this,...l(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new re({...l(this._def),innerType:this,catchValue:t,typeName:oe.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return se.create(this,e)}readonly(){return ae.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}t.ZodType=d,t.Schema=d,t.ZodSchema=d;const h=/^c[^\s-]{8,}$/i,f=/^[a-z][a-z0-9]*$/,p=/^[0-9A-HJKMNP-TV-Z]{26}$/,m=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,g=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let y;const v=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,_=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;class b extends d{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==a.ZodParsedType.string){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.string,received:t.parsedType}),s.INVALID}const t=new s.ParseStatus;let r;for(const c of this._def.checks)if("min"===c.kind)e.data.length<c.value&&(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),t.dirty());else if("max"===c.kind)e.data.length>c.value&&(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),t.dirty());else if("length"===c.kind){const n=e.data.length>c.value,i=e.data.length<c.value;(n||i)&&(r=this._getOrReturnCtx(e,r),n?(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):i&&(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),t.dirty())}else if("email"===c.kind)g.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"email",code:o.ZodIssueCode.invalid_string,message:c.message}),t.dirty());else if("emoji"===c.kind)y||(y=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),y.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"emoji",code:o.ZodIssueCode.invalid_string,message:c.message}),t.dirty());else if("uuid"===c.kind)m.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"uuid",code:o.ZodIssueCode.invalid_string,message:c.message}),t.dirty());else if("cuid"===c.kind)h.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"cuid",code:o.ZodIssueCode.invalid_string,message:c.message}),t.dirty());else if("cuid2"===c.kind)f.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"cuid2",code:o.ZodIssueCode.invalid_string,message:c.message}),t.dirty());else if("ulid"===c.kind)p.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"ulid",code:o.ZodIssueCode.invalid_string,message:c.message}),t.dirty());else if("url"===c.kind)try{new URL(e.data)}catch(n){r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"url",code:o.ZodIssueCode.invalid_string,message:c.message}),t.dirty()}else"regex"===c.kind?(c.regex.lastIndex=0,c.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"regex",code:o.ZodIssueCode.invalid_string,message:c.message}),t.dirty())):"trim"===c.kind?e.data=e.data.trim():"includes"===c.kind?e.data.includes(c.value,c.position)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),t.dirty()):"toLowerCase"===c.kind?e.data=e.data.toLowerCase():"toUpperCase"===c.kind?e.data=e.data.toUpperCase():"startsWith"===c.kind?e.data.startsWith(c.value)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_string,validation:{startsWith:c.value},message:c.message}),t.dirty()):"endsWith"===c.kind?e.data.endsWith(c.value)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_string,validation:{endsWith:c.value},message:c.message}),t.dirty()):"datetime"===c.kind?((u=c).precision?u.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${u.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${u.precision}}Z$`):0===u.precision?u.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):u.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_string,validation:"datetime",message:c.message}),t.dirty()):"ip"===c.kind?(n=e.data,("v4"!==(i=c.version)&&i||!v.test(n))&&("v6"!==i&&i||!_.test(n))&&(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"ip",code:o.ZodIssueCode.invalid_string,message:c.message}),t.dirty())):a.util.assertNever(c);var n,i,u;return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:o.ZodIssueCode.invalid_string,...i.errorUtil.errToObj(r)})}_addCheck(e){return new b({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...i.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...i.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...i.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...i.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...i.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...i.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...i.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...i.errorUtil.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...i.errorUtil.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...i.errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...i.errorUtil.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...i.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...i.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...i.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...i.errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...i.errorUtil.errToObj(t)})}nonempty(e){return this.min(1,i.errorUtil.errToObj(e))}trim(){return new b({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new b({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new b({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function w(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}t.ZodString=b,b.create=e=>{var t;return new b({checks:[],typeName:oe.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...l(e)})};class A extends d{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==a.ZodParsedType.number){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.number,received:t.parsedType}),s.INVALID}let t;const r=new s.ParseStatus;for(const n of this._def.checks)"int"===n.kind?a.util.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==w(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.not_finite,message:n.message}),r.dirty()):a.util.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,i.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,i.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,i.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,i.errorUtil.toString(t))}setLimit(e,t,r,n){return new A({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:i.errorUtil.toString(n)}]})}_addCheck(e){return new A({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:i.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:i.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:i.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:i.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:i.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:i.errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:i.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:i.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:i.errorUtil.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&a.util.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}t.ZodNumber=A,A.create=e=>new A({checks:[],typeName:oe.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...l(e)});class E extends d{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==a.ZodParsedType.bigint){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.bigint,received:t.parsedType}),s.INVALID}let t;const r=new s.ParseStatus;for(const n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):a.util.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,i.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,i.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,i.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,i.errorUtil.toString(t))}setLimit(e,t,r,n){return new E({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:i.errorUtil.toString(n)}]})}_addCheck(e){return new E({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:i.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:i.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:i.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:i.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:i.errorUtil.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}t.ZodBigInt=E,E.create=e=>{var t;return new E({checks:[],typeName:oe.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...l(e)})};class k extends d{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==a.ZodParsedType.boolean){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.boolean,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}t.ZodBoolean=k,k.create=e=>new k({typeName:oe.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...l(e)});class x extends d{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==a.ZodParsedType.date){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.date,received:t.parsedType}),s.INVALID}if(isNaN(e.data.getTime())){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_date}),s.INVALID}const t=new s.ParseStatus;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):a.util.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new x({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:i.errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:i.errorUtil.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}t.ZodDate=x,x.create=e=>new x({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:oe.ZodDate,...l(e)});class T extends d{_parse(e){if(this._getType(e)!==a.ZodParsedType.symbol){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.symbol,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}t.ZodSymbol=T,T.create=e=>new T({typeName:oe.ZodSymbol,...l(e)});class P extends d{_parse(e){if(this._getType(e)!==a.ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.undefined,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}t.ZodUndefined=P,P.create=e=>new P({typeName:oe.ZodUndefined,...l(e)});class S extends d{_parse(e){if(this._getType(e)!==a.ZodParsedType.null){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.null,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}t.ZodNull=S,S.create=e=>new S({typeName:oe.ZodNull,...l(e)});class I extends d{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,s.OK)(e.data)}}t.ZodAny=I,I.create=e=>new I({typeName:oe.ZodAny,...l(e)});class O extends d{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,s.OK)(e.data)}}t.ZodUnknown=O,O.create=e=>new O({typeName:oe.ZodUnknown,...l(e)});class C extends d{_parse(e){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.never,received:t.parsedType}),s.INVALID}}t.ZodNever=C,C.create=e=>new C({typeName:oe.ZodNever,...l(e)});class N extends d{_parse(e){if(this._getType(e)!==a.ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.void,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}t.ZodVoid=N,N.create=e=>new N({typeName:oe.ZodVoid,...l(e)});class M extends d{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==a.ZodParsedType.array)return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.array,received:t.parsedType}),s.INVALID;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&((0,s.addIssueToContext)(t,{code:e?o.ZodIssueCode.too_big:o.ZodIssueCode.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&((0,s.addIssueToContext)(t,{code:o.ZodIssueCode.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&((0,s.addIssueToContext)(t,{code:o.ZodIssueCode.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>n.type._parseAsync(new u(t,e,t.path,r))))).then((e=>s.ParseStatus.mergeArray(r,e)));const i=[...t.data].map(((e,r)=>n.type._parseSync(new u(t,e,t.path,r))));return s.ParseStatus.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new M({...this._def,minLength:{value:e,message:i.errorUtil.toString(t)}})}max(e,t){return new M({...this._def,maxLength:{value:e,message:i.errorUtil.toString(t)}})}length(e,t){return new M({...this._def,exactLength:{value:e,message:i.errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}function R(e){if(e instanceof j){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=X.create(R(n))}return new j({...e._def,shape:()=>t})}return e instanceof M?new M({...e._def,type:R(e.element)}):e instanceof X?X.create(R(e.unwrap())):e instanceof ee?ee.create(R(e.unwrap())):e instanceof Z?Z.create(e.items.map((e=>R(e)))):e}t.ZodArray=M,M.create=(e,t)=>new M({type:e,minLength:null,maxLength:null,exactLength:null,typeName:oe.ZodArray,...l(t)});class j extends d{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=a.util.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==a.ZodParsedType.object){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.object,received:t.parsedType}),s.INVALID}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),c=[];if(!(this._def.catchall instanceof C&&"strip"===this._def.unknownKeys))for(const e in r.data)i.includes(e)||c.push(e);const l=[];for(const e of i){const t=n[e],i=r.data[e];l.push({key:{status:"valid",value:e},value:t._parse(new u(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof C){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of c)l.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)c.length>0&&((0,s.addIssueToContext)(r,{code:o.ZodIssueCode.unrecognized_keys,keys:c}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of c){const n=r.data[t];l.push({key:{status:"valid",value:t},value:e._parse(new u(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of l){const r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>s.ParseStatus.mergeObjectSync(t,e))):s.ParseStatus.mergeObjectSync(t,l)}get shape(){return this._def.shape()}strict(e){return i.errorUtil.errToObj,new j({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,s,a,o;const u=null!==(a=null===(s=(n=this._def).errorMap)||void 0===s?void 0:s.call(n,t,r).message)&&void 0!==a?a:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=i.errorUtil.errToObj(e).message)&&void 0!==o?o:u}:{message:u}}}:{}})}strip(){return new j({...this._def,unknownKeys:"strip"})}passthrough(){return new j({...this._def,unknownKeys:"passthrough"})}extend(e){return new j({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new j({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:oe.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new j({...this._def,catchall:e})}pick(e){const t={};return a.util.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new j({...this._def,shape:()=>t})}omit(e){const t={};return a.util.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new j({...this._def,shape:()=>t})}deepPartial(){return R(this)}partial(e){const t={};return a.util.objectKeys(this.shape).forEach((r=>{const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()})),new j({...this._def,shape:()=>t})}required(e){const t={};return a.util.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof X;)e=e._def.innerType;t[r]=e}})),new j({...this._def,shape:()=>t})}keyof(){return V(a.util.objectKeys(this.shape))}}t.ZodObject=j,j.create=(e,t)=>new j({shape:()=>e,unknownKeys:"strip",catchall:C.create(),typeName:oe.ZodObject,...l(t)}),j.strictCreate=(e,t)=>new j({shape:()=>e,unknownKeys:"strict",catchall:C.create(),typeName:oe.ZodObject,...l(t)}),j.lazycreate=(e,t)=>new j({shape:e,unknownKeys:"strip",catchall:C.create(),typeName:oe.ZodObject,...l(t)});class D extends d{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new o.ZodError(e.ctx.common.issues)));return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_union,unionErrors:r}),s.INVALID}));{let e;const n=[];for(const i of r){const r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=n.map((e=>new o.ZodError(e)));return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_union,unionErrors:i}),s.INVALID}}get options(){return this._def.options}}t.ZodUnion=D,D.create=(e,t)=>new D({options:e,typeName:oe.ZodUnion,...l(t)});const B=e=>e instanceof H?B(e.schema):e instanceof Y?B(e.innerType()):e instanceof G?[e.value]:e instanceof W?e.options:e instanceof J?Object.keys(e.enum):e instanceof te?B(e._def.innerType):e instanceof P?[void 0]:e instanceof S?[null]:null;class L extends d{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==a.ZodParsedType.object)return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.object,received:t.parsedType}),s.INVALID;const r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):((0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),s.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const r of t){const t=B(r.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(n.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new L({typeName:oe.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...l(r)})}}function U(e,t){const r=(0,a.getParsedType)(e),n=(0,a.getParsedType)(t);if(e===t)return{valid:!0,data:e};if(r===a.ZodParsedType.object&&n===a.ZodParsedType.object){const r=a.util.objectKeys(t),n=a.util.objectKeys(e).filter((e=>-1!==r.indexOf(e))),i={...e,...t};for(const r of n){const n=U(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(r===a.ZodParsedType.array&&n===a.ZodParsedType.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const i=U(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===a.ZodParsedType.date&&n===a.ZodParsedType.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}t.ZodDiscriminatedUnion=L;class F extends d{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if((0,s.isAborted)(e)||(0,s.isAborted)(n))return s.INVALID;const i=U(e.value,n.value);return i.valid?(((0,s.isDirty)(e)||(0,s.isDirty)(n))&&t.dirty(),{status:t.value,value:i.data}):((0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_intersection_types}),s.INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>n(e,t))):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}t.ZodIntersection=F,F.create=(e,t,r)=>new F({left:e,right:t,typeName:oe.ZodIntersection,...l(r)});class Z extends d{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==a.ZodParsedType.array)return(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.array,received:r.parsedType}),s.INVALID;if(r.data.length<this._def.items.length)return(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.INVALID;!this._def.rest&&r.data.length>this._def.items.length&&((0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new u(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(n).then((e=>s.ParseStatus.mergeArray(t,e))):s.ParseStatus.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new Z({...this._def,rest:e})}}t.ZodTuple=Z,Z.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Z({items:e,typeName:oe.ZodTuple,rest:null,...l(t)})};class q extends d{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==a.ZodParsedType.object)return(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.object,received:r.parsedType}),s.INVALID;const n=[],i=this._def.keyType,c=this._def.valueType;for(const e in r.data)n.push({key:i._parse(new u(r,e,r.path,e)),value:c._parse(new u(r,r.data[e],r.path,e))});return r.common.async?s.ParseStatus.mergeObjectAsync(t,n):s.ParseStatus.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new q(t instanceof d?{keyType:e,valueType:t,typeName:oe.ZodRecord,...l(r)}:{keyType:b.create(),valueType:e,typeName:oe.ZodRecord,...l(t)})}}t.ZodRecord=q;class z extends d{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==a.ZodParsedType.map)return(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.map,received:r.parsedType}),s.INVALID;const n=this._def.keyType,i=this._def.valueType,c=[...r.data.entries()].map((([e,t],s)=>({key:n._parse(new u(r,e,r.path,[s,"key"])),value:i._parse(new u(r,t,r.path,[s,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of c){const n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return s.INVALID;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of c){const n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return s.INVALID;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}t.ZodMap=z,z.create=(e,t,r)=>new z({valueType:t,keyType:e,typeName:oe.ZodMap,...l(r)});class $ extends d{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==a.ZodParsedType.set)return(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.set,received:r.parsedType}),s.INVALID;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&((0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&((0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function c(e){const r=new Set;for(const n of e){if("aborted"===n.status)return s.INVALID;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const l=[...r.data.values()].map(((e,t)=>i._parse(new u(r,e,r.path,t))));return r.common.async?Promise.all(l).then((e=>c(e))):c(l)}min(e,t){return new $({...this._def,minSize:{value:e,message:i.errorUtil.toString(t)}})}max(e,t){return new $({...this._def,maxSize:{value:e,message:i.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}t.ZodSet=$,$.create=(e,t)=>new $({valueType:e,minSize:null,maxSize:null,typeName:oe.ZodSet,...l(t)});class K extends d{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==a.ZodParsedType.function)return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.function,received:t.parsedType}),s.INVALID;function r(e,r){return(0,s.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,n.getErrorMap)(),n.defaultErrorMap].filter((e=>!!e)),issueData:{code:o.ZodIssueCode.invalid_arguments,argumentsError:r}})}function i(e,r){return(0,s.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,n.getErrorMap)(),n.defaultErrorMap].filter((e=>!!e)),issueData:{code:o.ZodIssueCode.invalid_return_type,returnTypeError:r}})}const u={errorMap:t.common.contextualErrorMap},c=t.data;if(this._def.returns instanceof Q){const e=this;return(0,s.OK)((async function(...t){const n=new o.ZodError([]),s=await e._def.args.parseAsync(t,u).catch((e=>{throw n.addIssue(r(t,e)),n})),a=await Reflect.apply(c,this,s);return await e._def.returns._def.type.parseAsync(a,u).catch((e=>{throw n.addIssue(i(a,e)),n}))}))}{const e=this;return(0,s.OK)((function(...t){const n=e._def.args.safeParse(t,u);if(!n.success)throw new o.ZodError([r(t,n.error)]);const s=Reflect.apply(c,this,n.data),a=e._def.returns.safeParse(s,u);if(!a.success)throw new o.ZodError([i(s,a.error)]);return a.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new K({...this._def,args:Z.create(e).rest(O.create())})}returns(e){return new K({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new K({args:e||Z.create([]).rest(O.create()),returns:t||O.create(),typeName:oe.ZodFunction,...l(r)})}}t.ZodFunction=K;class H extends d{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}t.ZodLazy=H,H.create=(e,t)=>new H({getter:e,typeName:oe.ZodLazy,...l(t)});class G extends d{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{received:t.data,code:o.ZodIssueCode.invalid_literal,expected:this._def.value}),s.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}function V(e,t){return new W({values:e,typeName:oe.ZodEnum,...l(t)})}t.ZodLiteral=G,G.create=(e,t)=>new G({value:e,typeName:oe.ZodLiteral,...l(t)});class W extends d{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return(0,s.addIssueToContext)(t,{expected:a.util.joinValues(r),received:t.parsedType,code:o.ZodIssueCode.invalid_type}),s.INVALID}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return(0,s.addIssueToContext)(t,{received:t.data,code:o.ZodIssueCode.invalid_enum_value,options:r}),s.INVALID}return(0,s.OK)(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return W.create(e)}exclude(e){return W.create(this.options.filter((t=>!e.includes(t))))}}t.ZodEnum=W,W.create=V;class J extends d{_parse(e){const t=a.util.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==a.ZodParsedType.string&&r.parsedType!==a.ZodParsedType.number){const e=a.util.objectValues(t);return(0,s.addIssueToContext)(r,{expected:a.util.joinValues(e),received:r.parsedType,code:o.ZodIssueCode.invalid_type}),s.INVALID}if(-1===t.indexOf(e.data)){const e=a.util.objectValues(t);return(0,s.addIssueToContext)(r,{received:r.data,code:o.ZodIssueCode.invalid_enum_value,options:e}),s.INVALID}return(0,s.OK)(e.data)}get enum(){return this._def.values}}t.ZodNativeEnum=J,J.create=(e,t)=>new J({values:e,typeName:oe.ZodNativeEnum,...l(t)});class Q extends d{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==a.ZodParsedType.promise&&!1===t.common.async)return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.promise,received:t.parsedType}),s.INVALID;const r=t.parsedType===a.ZodParsedType.promise?t.data:Promise.resolve(t.data);return(0,s.OK)(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}t.ZodPromise=Q,Q.create=(e,t)=>new Q({type:e,typeName:oe.ZodPromise,...l(t)});class Y extends d{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{(0,s.addIssueToContext)(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){const e=n.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?s.INVALID:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?s.INVALID:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!(0,s.isValid)(e))return e;const a=n.transform(e.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>(0,s.isValid)(e)?Promise.resolve(n.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}a.util.assertNever(n)}}t.ZodEffects=Y,t.ZodTransformer=Y,Y.create=(e,t,r)=>new Y({schema:e,typeName:oe.ZodEffects,effect:t,...l(r)}),Y.createWithPreprocess=(e,t,r)=>new Y({schema:t,effect:{type:"preprocess",transform:e},typeName:oe.ZodEffects,...l(r)});class X extends d{_parse(e){return this._getType(e)===a.ZodParsedType.undefined?(0,s.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodOptional=X,X.create=(e,t)=>new X({innerType:e,typeName:oe.ZodOptional,...l(t)});class ee extends d{_parse(e){return this._getType(e)===a.ZodParsedType.null?(0,s.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodNullable=ee,ee.create=(e,t)=>new ee({innerType:e,typeName:oe.ZodNullable,...l(t)});class te extends d{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===a.ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}t.ZodDefault=te,te.create=(e,t)=>new te({innerType:e,typeName:oe.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...l(t)});class re extends d{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return(0,s.isAsync)(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new o.ZodError(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new o.ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}t.ZodCatch=re,re.create=(e,t)=>new re({innerType:e,typeName:oe.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...l(t)});class ne extends d{_parse(e){if(this._getType(e)!==a.ZodParsedType.nan){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.nan,received:t.parsedType}),s.INVALID}return{status:"valid",value:e.data}}}t.ZodNaN=ne,ne.create=e=>new ne({typeName:oe.ZodNaN,...l(e)}),t.BRAND=Symbol("zod_brand");class ie extends d{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}t.ZodBranded=ie;class se extends d{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?s.INVALID:"dirty"===e.status?(t.dirty(),(0,s.DIRTY)(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?s.INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new se({in:e,out:t,typeName:oe.ZodPipeline})}}t.ZodPipeline=se;class ae extends d{_parse(e){const t=this._def.innerType._parse(e);return(0,s.isValid)(t)&&(t.value=Object.freeze(t.value)),t}}var oe;t.ZodReadonly=ae,ae.create=(e,t)=>new ae({innerType:e,typeName:oe.ZodReadonly,...l(t)}),t.custom=(e,t={},r)=>e?I.create().superRefine(((n,i)=>{var s,a;if(!e(n)){const e="function"==typeof t?t(n):"string"==typeof t?{message:t}:t,o=null===(a=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===a||a,u="string"==typeof e?{message:e}:e;i.addIssue({code:"custom",...u,fatal:o})}})):I.create(),t.late={object:j.lazycreate},function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(oe=t.ZodFirstPartyTypeKind||(t.ZodFirstPartyTypeKind={})),t.instanceof=(e,r={message:`Input not instance of ${e.name}`})=>(0,t.custom)((t=>t instanceof e),r);const ue=b.create;t.string=ue;const ce=A.create;t.number=ce;const le=ne.create;t.nan=le;const de=E.create;t.bigint=de;const he=k.create;t.boolean=he;const fe=x.create;t.date=fe;const pe=T.create;t.symbol=pe;const me=P.create;t.undefined=me;const ge=S.create;t.null=ge;const ye=I.create;t.any=ye;const ve=O.create;t.unknown=ve;const _e=C.create;t.never=_e;const be=N.create;t.void=be;const we=M.create;t.array=we;const Ae=j.create;t.object=Ae;const Ee=j.strictCreate;t.strictObject=Ee;const ke=D.create;t.union=ke;const xe=L.create;t.discriminatedUnion=xe;const Te=F.create;t.intersection=Te;const Pe=Z.create;t.tuple=Pe;const Se=q.create;t.record=Se;const Ie=z.create;t.map=Ie;const Oe=$.create;t.set=Oe;const Ce=K.create;t.function=Ce;const Ne=H.create;t.lazy=Ne;const Me=G.create;t.literal=Me;const Re=W.create;t.enum=Re;const je=J.create;t.nativeEnum=je;const De=Q.create;t.promise=De;const Be=Y.create;t.effect=Be,t.transformer=Be;const Le=X.create;t.optional=Le;const Ue=ee.create;t.nullable=Ue;const Fe=Y.createWithPreprocess;t.preprocess=Fe;const Ze=se.create;t.pipeline=Ze,t.ostring=()=>ue().optional(),t.onumber=()=>ce().optional(),t.oboolean=()=>he().optional(),t.coerce={string:e=>b.create({...e,coerce:!0}),number:e=>A.create({...e,coerce:!0}),boolean:e=>k.create({...e,coerce:!0}),bigint:e=>E.create({...e,coerce:!0}),date:e=>x.create({...e,coerce:!0})},t.NEVER=s.INVALID},3196:()=>{}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={id:e,loaded:!1,exports:{}};return r[e].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.amdO={},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var s={};(()=>{i.r(s),i.d(s,{R:()=>e,apis:()=>B,asnc:()=>y,dates:()=>U,fp:()=>r,get_json_from_url:()=>$I,logger:()=>t,midi_encoder:()=>L,trading:()=>o,util:()=>I,web3:()=>k});var e={};i.r(e),i.d(e,{F:()=>F,T:()=>Z,__:()=>q,add:()=>H,addIndex:()=>Q,adjust:()=>ee,all:()=>oe,allPass:()=>Ue,always:()=>Fe,and:()=>Ze,andThen:()=>La,any:()=>ze,anyPass:()=>Ke,ap:()=>Ge,aperture:()=>We,append:()=>Je,apply:()=>Qe,applySpec:()=>tt,applyTo:()=>nt,ascend:()=>it,assoc:()=>ct,assocPath:()=>ut,binary:()=>dt,bind:()=>me,both:()=>mt,call:()=>gt,chain:()=>_t,clamp:()=>bt,clone:()=>kt,collectBy:()=>Tt,comparator:()=>Pt,complement:()=>It,compose:()=>Dt,composeWith:()=>Zt,concat:()=>ur,cond:()=>cr,construct:()=>hr,constructN:()=>dr,converge:()=>fr,count:()=>pr,countBy:()=>vr,curry:()=>lr,curryN:()=>J,dec:()=>_r,defaultTo:()=>br,descend:()=>wr,difference:()=>xr,differenceWith:()=>Pr,dissoc:()=>Or,dissocPath:()=>Ir,divide:()=>Cr,drop:()=>Mr,dropLast:()=>Br,dropLastWhile:()=>Ur,dropRepeats:()=>Kr,dropRepeatsWith:()=>$r,dropWhile:()=>Vr,either:()=>Jr,empty:()=>Yr,endsWith:()=>en,eqBy:()=>rn,eqProps:()=>nn,equals:()=>Gt,evolve:()=>an,filter:()=>ir,find:()=>cn,findIndex:()=>hn,findLast:()=>pn,findLastIndex:()=>gn,flatten:()=>yn,flip:()=>vn,forEach:()=>bn,forEachObjIndexed:()=>An,fromPairs:()=>En,groupBy:()=>kn,groupWith:()=>Tn,gt:()=>Pn,gte:()=>Sn,has:()=>On,hasIn:()=>Cn,hasPath:()=>In,head:()=>Bt,identical:()=>Nn,identity:()=>Ut,ifElse:()=>Mn,inc:()=>Rn,includes:()=>jn,indexBy:()=>Dn,indexOf:()=>Bn,init:()=>Ln,innerJoin:()=>Fn,insert:()=>Zn,insertAll:()=>qn,intersection:()=>Gn,intersperse:()=>Vn,into:()=>ti,invert:()=>ni,invertObj:()=>si,invoker:()=>ai,is:()=>oi,isEmpty:()=>ci,isNil:()=>ot,join:()=>li,juxt:()=>di,keys:()=>Oe,keysIn:()=>hi,last:()=>qr,lastIndexOf:()=>fi,length:()=>mi,lens:()=>yi,lensIndex:()=>bi,lensPath:()=>Ei,lensProp:()=>ki,lift:()=>pt,liftN:()=>ft,lt:()=>xi,lte:()=>Ti,map:()=>Ne,mapAccum:()=>Si,mapAccumRight:()=>Ii,mapObjIndexed:()=>Ci,match:()=>Mi,mathMod:()=>Ri,max:()=>ue,maxBy:()=>ji,mean:()=>Bi,median:()=>Ui,memoizeWith:()=>Zi,mergeAll:()=>qi,mergeDeepLeft:()=>Hi,mergeDeepRight:()=>Gi,mergeDeepWith:()=>Vi,mergeDeepWithKey:()=>Ki,mergeLeft:()=>Ji,mergeRight:()=>Yi,mergeWith:()=>es,mergeWithKey:()=>$i,min:()=>ts,minBy:()=>rs,modify:()=>is,modifyPath:()=>ns,modulo:()=>ss,move:()=>as,multiply:()=>os,nAry:()=>lt,negate:()=>cs,none:()=>ls,not:()=>St,nth:()=>Re,nthArg:()=>ds,o:()=>fs,objOf:()=>Qn,of:()=>ps,omit:()=>gs,on:()=>ys,once:()=>vs,or:()=>Wr,otherwise:()=>bs,over:()=>Es,pair:()=>ks,partial:()=>Ts,partialObject:()=>us,partialRight:()=>Ps,partition:()=>Ss,path:()=>Ai,pathEq:()=>Is,pathOr:()=>Os,pathSatisfies:()=>Cs,paths:()=>wi,pick:()=>Ms,pickAll:()=>js,pickBy:()=>Bs,pipe:()=>Rt,pipeWith:()=>Ft,pluck:()=>De,prepend:()=>Ls,product:()=>Us,project:()=>Zs,promap:()=>$s,prop:()=>je,propEq:()=>Ks,propIs:()=>Hs,propOr:()=>Gs,propSatisfies:()=>Vs,props:()=>Ws,range:()=>Js,reduce:()=>Be,reduceBy:()=>yr,reduceRight:()=>Qs,reduceWhile:()=>Xs,reduced:()=>ea,reject:()=>sr,remove:()=>Sr,repeat:()=>na,replace:()=>sa,reverse:()=>jt,scan:()=>oa,sequence:()=>ca,set:()=>da,slice:()=>Nt,sort:()=>ha,sortBy:()=>fa,sortWith:()=>ma,split:()=>ga,splitAt:()=>va,splitEvery:()=>_a,splitWhen:()=>wa,splitWhenever:()=>Ea,startsWith:()=>xa,subtract:()=>Ta,sum:()=>Di,symmetricDifference:()=>Pa,symmetricDifferenceWith:()=>Sa,tail:()=>Mt,take:()=>jr,takeLast:()=>Xr,takeLastWhile:()=>Ia,takeWhile:()=>Na,tap:()=>ja,test:()=>Ba,thunkify:()=>Co,times:()=>ra,toLower:()=>Ua,toPairs:()=>Fa,toPairsIn:()=>Za,toString:()=>or,toUpper:()=>qa,transduce:()=>za,transpose:()=>Ka,traverse:()=>Ha,trim:()=>Wa,tryCatch:()=>Ja,type:()=>At,unapply:()=>Qa,unary:()=>Ya,uncurryN:()=>Xa,unfold:()=>eo,union:()=>to,unionWith:()=>so,uniq:()=>Hn,uniqBy:()=>Kn,uniqWith:()=>io,unless:()=>oo,unnest:()=>uo,until:()=>co,unwind:()=>ho,update:()=>_i,useWith:()=>Fs,values:()=>Xe,valuesIn:()=>fo,view:()=>go,when:()=>vo,where:()=>_o,whereAny:()=>bo,whereEq:()=>wo,without:()=>Ao,xor:()=>Eo,xprod:()=>ko,zip:()=>To,zipObj:()=>So,zipWith:()=>Oo});var t={};i.r(t),i.d(t,{get_logger:()=>Do,suppress:()=>Ro,unsuppress:()=>jo});var r={};i.r(r),i.d(r,{add:()=>dc,adder:()=>mc,all_false:()=>pu,all_true:()=>hu,any_false:()=>mu,any_is_array:()=>qu,any_true:()=>fu,apply_function_dictionary_to_object:()=>Ac,async_apply_function_dictionary_to_object:()=>Ec,clone:()=>Eu,clone_array:()=>iu,concat:()=>Iu,concat_accross_index:()=>Au,dict_to_list:()=>tu,diff:()=>_c,divide:()=>pc,divider:()=>yc,enumerate:()=>_u,enumermap:()=>Su,equals:()=>bc,filter:()=>Lu,filter_key:()=>Uu,filter_key_equals:()=>Fu,first:()=>su,flat_once:()=>zu,format:()=>lc,fourth:()=>uu,get:()=>Ho,getter:()=>Wo,im_arr_rm:()=>xu,im_push:()=>ku,indexer:()=>du,invert_dictionary:()=>nu,is_array:()=>ec,is_empty:()=>Du,is_empty_array:()=>ju,is_empty_map:()=>Yo,is_empty_string:()=>ic,is_map:()=>nc,is_null:()=>Qu,is_object:()=>rc,is_something:()=>Xu,is_string:()=>tc,is_undefined:()=>Yu,is_zero:()=>Mu,join:()=>oc,joiner:()=>uc,keys:()=>Zo,last:()=>cu,len:()=>Ru,list_to_dict:()=>Wu,make_debouncer:()=>wc,map:()=>vu,map_get:()=>Ou,map_indexed:()=>Uo,map_items:()=>eu,map_over_dic_values:()=>ru,map_prop:()=>bu,map_prop_reduce:()=>wu,map_set:()=>Cu,map_set_im:()=>Nu,merge_dictionaries:()=>Ko,merge_dictionary:()=>$o,multiplier:()=>vc,multiply:()=>fc,nchars:()=>ac,not_empty:()=>Bu,nth:()=>lu,partition:()=>Pu,range:()=>yu,recursive_flat:()=>$u,recursive_flat_remove_empty:()=>Ku,remove_empty:()=>Zu,repeat:()=>gu,second:()=>au,set:()=>Go,set_im:()=>Vo,setter:()=>Jo,setter_im:()=>Qo,shallow_copy:()=>Fo,sort_by_prop:()=>Tu,split:()=>cc,substring:()=>sc,subtract:()=>hc,subtractor:()=>gc,third:()=>ou,update_at:()=>Xo,values:()=>zo,values_cloned:()=>qo,zip:()=>Vu,zip2:()=>Hu,zip_map:()=>Ju});var n={};i.r(n),i.d(n,{MarketTradeType:()=>Gu,PortfolioBalancer:()=>kc});var a={};i.r(a),i.d(a,{BacktestBalancer:()=>xc});var o={};i.r(o),i.d(o,{backtest_balancer:()=>a,portfolio_balancer_lib:()=>n});var u={};i.r(u),i.d(u,{decode:()=>$l,encode:()=>Zl});var c={};i.r(c),i.d(c,{AddressZero:()=>Um,EtherSymbol:()=>Zm,HashZero:()=>Fm,MaxInt256:()=>Md,MaxUint256:()=>Cd,MinInt256:()=>Nd,NegativeOne:()=>Td,One:()=>Sd,Two:()=>Id,WeiPerEther:()=>Od,Zero:()=>Pd});var l={};i.r(l),i.d(l,{AlchemyProvider:()=>Dy,AlchemyWebSocketProvider:()=>jy,AnkrProvider:()=>Fy,BaseProvider:()=>dy,CloudflareProvider:()=>qy,EtherscanProvider:()=>Jy,FallbackProvider:()=>dv,Formatter:()=>Bg,InfuraProvider:()=>gv,InfuraWebSocketProvider:()=>mv,IpcProvider:()=>hv,JsonRpcBatchProvider:()=>yv,JsonRpcProvider:()=>ky,JsonRpcSigner:()=>wy,NodesmithProvider:()=>_v,PocketProvider:()=>Av,Provider:()=>wh,Resolver:()=>uy,StaticJsonRpcProvider:()=>Cy,UrlJsonRpcProvider:()=>Ny,Web3Provider:()=>Tv,WebSocketProvider:()=>Iy,getDefaultProvider:()=>Sv,getNetwork:()=>Wm,isCommunityResourcable:()=>Lg,isCommunityResource:()=>Ug,showThrottleMessage:()=>Zg});var d={};i.r(d),i.d(d,{decode:()=>Jm,encode:()=>Qm});var h={};i.r(h),i.d(h,{AbiCoder:()=>ch,ConstructorFragment:()=>Yd,ErrorFragment:()=>th,EventFragment:()=>Vd,FormatTypes:()=>zd,Fragment:()=>Gd,FunctionFragment:()=>Xd,HDNode:()=>tm,Indexed:()=>mh,Interface:()=>vh,LogDescription:()=>hh,Logger:()=>jc,ParamType:()=>Kd,RLP:()=>u,SigningKey:()=>gf,SupportedAlgorithm:()=>Np,TransactionDescription:()=>fh,TransactionTypes:()=>bf,UnicodeNormalizationForm:()=>nd,Utf8ErrorFuncs:()=>ad,Utf8ErrorReason:()=>id,_TypedDataEncoder:()=>Ip,_fetchData:()=>Og,_toEscapedUtf8String:()=>ld,accessListify:()=>If,arrayify:()=>qc,base58:()=>Cp,base64:()=>d,checkProperties:()=>wl,checkResultErrors:()=>Ol,commify:()=>Xv,computeAddress:()=>xf,computeHmac:()=>Bp,computePublicKey:()=>vf,concat:()=>zc,deepCopy:()=>Tl,defaultAbiCoder:()=>lh,defaultPath:()=>em,defineReadOnly:()=>vl,dnsEncode:()=>Eg,entropyToMnemonic:()=>im,fetchJson:()=>Cg,formatBytes32String:()=>Wv,formatEther:()=>r_,formatUnits:()=>e_,getAccountPath:()=>am,getAddress:()=>Ql,getContractAddress:()=>ed,getCreate2Address:()=>td,getIcapAddress:()=>Xl,getJsonWalletAddress:()=>Mm,getStatic:()=>_l,hashMessage:()=>fp,hexConcat:()=>Qc,hexDataLength:()=>Wc,hexDataSlice:()=>Jc,hexStripZeros:()=>Xc,hexValue:()=>Yc,hexZeroPad:()=>el,hexlify:()=>Vc,id:()=>pd,isAddress:()=>Yl,isBytes:()=>Zc,isBytesLike:()=>Uc,isHexString:()=>Hc,isValidMnemonic:()=>sm,isValidName:()=>wg,joinSignature:()=>rl,keccak256:()=>Dl,mnemonicToEntropy:()=>nm,mnemonicToSeed:()=>rm,namehash:()=>Ag,nameprep:()=>Vv,parseBytes32String:()=>Jv,parseEther:()=>n_,parseTransaction:()=>jf,parseUnits:()=>t_,poll:()=>Ng,randomBytes:()=>lm,recoverAddress:()=>Tf,recoverPublicKey:()=>yf,resolveProperties:()=>bl,ripemd160:()=>Rp,serializeTransaction:()=>Mf,sha256:()=>jp,sha512:()=>Dp,shallowCopy:()=>Al,shuffled:()=>Qy,solidityKeccak256:()=>Dv,solidityPack:()=>jv,soliditySha256:()=>Bv,splitSignature:()=>tl,stripZeros:()=>$c,toUtf8Bytes:()=>ud,toUtf8CodePoints:()=>fd,toUtf8String:()=>hd,verifyMessage:()=>Bm,verifyTypedData:()=>Lm,zeroPad:()=>Kc});var f={};i.r(f),i.d(f,{BaseContract:()=>Jf,BigNumber:()=>dl,Contract:()=>Qf,ContractFactory:()=>Yf,FixedNumber:()=>cp,Signer:()=>Th,VoidSigner:()=>Ph,Wallet:()=>Dm,Wordlist:()=>Fp,constants:()=>c,errors:()=>Mc,getDefaultProvider:()=>Sv,logger:()=>s_,providers:()=>l,utils:()=>h,version:()=>i_,wordlists:()=>$p});var p={};i.r(p),i.d(p,{ChainId:()=>__,Currency:()=>tb,CurrencyAmount:()=>mb,ETHER:()=>nb,FACTORY_ADDRESS:()=>E_,Fetcher:()=>Rb,Fraction:()=>fb,INIT_CODE_HASH:()=>k_,InsufficientInputAmountError:()=>W_,InsufficientReservesError:()=>V_,JSBI:()=>o_(),MINIMUM_LIQUIDITY:()=>x_,Pair:()=>_b,Percent:()=>Ab,Price:()=>yb,Rounding:()=>w_,Route:()=>bb,Router:()=>Cb,Token:()=>ib,TokenAmount:()=>gb,Trade:()=>Pb,TradeType:()=>b_,WETH:()=>ub,currencyEquals:()=>sb,inputOutputComparator:()=>Eb,tradeComparator:()=>kb});var m={};i.r(m),i.d(m,{erc20:()=>jb,uni_v2:()=>Db});var g={};i.r(g),i.d(g,{BNtoGwei:()=>Lb,toEth:()=>Bb,toGweiBN:()=>Ub});var y={};i.r(y),i.d(y,{status:()=>Zb,wait:()=>$b,wait_until:()=>zb});var v={};i.r(v),i.d(v,{MaxGasType:()=>Jb,ProviderType:()=>Xb,SmartWallet:()=>tw,TxStatus:()=>Qb,TxType:()=>Yb,arbitrum_provider:()=>sw,ethereum_provider:()=>iw,fantom_provider:()=>nw,get_provider:()=>rw,polygon_provider:()=>aw,scale_big_num:()=>ew});var _={};i.r(_),i.d(_,{EVMBalancer:()=>ow,UniV2Balancer:()=>uw});var b={};i.r(b),i.d(b,{arbitrum:()=>lw,ethereum:()=>cw,fantom:()=>dw});var w={};i.r(w),i.d(w,{get_account_info:()=>hw});var A={};i.r(A),i.d(A,{evm:()=>w});var E={};i.r(E),i.d(E,{data:()=>fw,get_id:()=>mw,symbol_to_id:()=>pw});var k={};i.r(k),i.d(k,{abis:()=>m,accounts:()=>A,chain_id:()=>E,ethers:()=>f,evm_balancers:()=>_,info:()=>b,smart_wallet:()=>v,uniswap_sdk:()=>p,utils:()=>g});var x={};i.r(x),i.d(x,{abs:()=>_w,flat_float32_array:()=>Ew,length:()=>gw,mean:()=>bw,mean_abs:()=>ww,min_max_mean:()=>Aw,power:()=>yw,sum:()=>vw});var T={};i.r(T),i.d(T,{ms:()=>kw});var P={};i.r(P),i.d(P,{add:()=>Tw,db:()=>xw,get:()=>Pw,log:()=>Sw});var S={};i.r(S),i.d(S,{prepend_timestamp_as_bytes:()=>Ow,timestampToByteArray:()=>Iw});var I={};i.r(I),i.d(I,{bytes:()=>S,debug:()=>P,dsp:()=>x,is_browser:()=>Cw,is_node:()=>Nw,performance:()=>T,unix_timestamp_ms:()=>Mw});var O={};i.r(O),i.d(O,{ai_cds:()=>Lw,ask_ai:()=>jw,clean_json_string:()=>Rw,example_patient:()=>Dw,generate_patient_data:()=>Uw,generate_prompt:()=>Bw});var C={};i.r(C),i.d(C,{code:()=>Fw});var N={};i.r(N),i.d(N,{build_index:()=>Jw,get_medications:()=>Kw,index:()=>$w,init:()=>Hw,medications:()=>zw,parse_ar_text:()=>Xw,parse_subsection_1:()=>Qw,parse_subsection_2:()=>Yw,raw_medications:()=>qw,search_for_medication:()=>Gw,search_for_side_effect:()=>Vw});var M={};i.r(M),i.d(M,{APIConnectionError:()=>_A,APIConnectionTimeoutError:()=>bA,APIError:()=>yA,APIUserAbortError:()=>vA,AuthenticationError:()=>AA,BadRequestError:()=>wA,ConflictError:()=>xA,InternalServerError:()=>SA,NotFoundError:()=>kA,OpenAIError:()=>gA,PermissionDeniedError:()=>EA,RateLimitError:()=>PA,UnprocessableEntityError:()=>TA});var j={};i.r(j),i.d(j,{JsonPatchError:()=>iP,_areEquals:()=>pP,applyOperation:()=>cP,applyPatch:()=>lP,applyReducer:()=>dP,deepClone:()=>sP,getValueByPointer:()=>uP,validate:()=>fP,validator:()=>hP});var D={};i.r(D),i.d(D,{get_chat_model:()=>PI});var B={};i.r(B),i.d(B,{OpenAI:()=>Yk,aidx:()=>O,langchain:()=>D,loinc:()=>C,medications:()=>N});var L={};i.r(L),i.d(L,{control_change:()=>OI,note_off:()=>II,note_on:()=>SI});var U={};i.r(U),i.d(U,{copy_date:()=>LI,dates_eq:()=>BI,day_string:()=>UI,iso_day_filename:()=>RI,iso_now:()=>NI,ms_now:()=>DI,round_date:()=>FI,shift_date:()=>ZI,times_in_ms:()=>qI,to_iso:()=>CI,to_iso_day_filename:()=>MI,to_ms:()=>jI});const F=function(){return!1},Z=function(){return!0},q={"@@functional/placeholder":!0};function z(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function $(e){return function t(r){return 0===arguments.length||z(r)?t:e.apply(this,arguments)}}function K(e){return function t(r,n){switch(arguments.length){case 0:return t;case 1:return z(r)?t:$((function(t){return e(r,t)}));default:return z(r)&&z(n)?t:z(r)?$((function(t){return e(t,n)})):z(n)?$((function(t){return e(r,t)})):e(r,n)}}}const H=K((function(e,t){return Number(e)+Number(t)}));function G(e,t){var r;t=t||[];var n=(e=e||[]).length,i=t.length,s=[];for(r=0;r<n;)s[s.length]=e[r],r+=1;for(r=0;r<i;)s[s.length]=t[r],r+=1;return s}function V(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,r){return t.apply(this,arguments)};case 3:return function(e,r,n){return t.apply(this,arguments)};case 4:return function(e,r,n,i){return t.apply(this,arguments)};case 5:return function(e,r,n,i,s){return t.apply(this,arguments)};case 6:return function(e,r,n,i,s,a){return t.apply(this,arguments)};case 7:return function(e,r,n,i,s,a,o){return t.apply(this,arguments)};case 8:return function(e,r,n,i,s,a,o,u){return t.apply(this,arguments)};case 9:return function(e,r,n,i,s,a,o,u,c){return t.apply(this,arguments)};case 10:return function(e,r,n,i,s,a,o,u,c,l){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function W(e,t,r){return function(){for(var n=[],i=0,s=e,a=0;a<t.length||i<arguments.length;){var o;a<t.length&&(!z(t[a])||i>=arguments.length)?o=t[a]:(o=arguments[i],i+=1),n[a]=o,z(o)||(s-=1),a+=1}return s<=0?r.apply(this,n):V(s,W(e,n,r))}}const J=K((function(e,t){return 1===e?$(t):V(e,W(e,[],t))})),Q=$((function(e){return J(e.length,(function(){var t=0,r=arguments[0],n=arguments[arguments.length-1],i=Array.prototype.slice.call(arguments,0);return i[0]=function(){var e=r.apply(this,G(arguments,[t,n]));return t+=1,e},e.apply(this,i)}))}));function Y(e){return function t(r,n,i){switch(arguments.length){case 0:return t;case 1:return z(r)?t:K((function(t,n){return e(r,t,n)}));case 2:return z(r)&&z(n)?t:z(r)?K((function(t,r){return e(t,n,r)})):z(n)?K((function(t,n){return e(r,t,n)})):$((function(t){return e(r,n,t)}));default:return z(r)&&z(n)&&z(i)?t:z(r)&&z(n)?K((function(t,r){return e(t,r,i)})):z(r)&&z(i)?K((function(t,r){return e(t,n,r)})):z(n)&&z(i)?K((function(t,n){return e(r,t,n)})):z(r)?$((function(t){return e(t,n,i)})):z(n)?$((function(t){return e(r,t,i)})):z(i)?$((function(t){return e(r,n,t)})):e(r,n,i)}}}var X=Y((function(e,t,r){var n=r.length;if(e>=n||e<-n)return r;var i=(n+e)%n,s=G(r);return s[i]=t(r[i]),s}));const ee=X,te=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function re(e){return null!=e&&"function"==typeof e["@@transducer/step"]}function ne(e,t,r){return function(){if(0===arguments.length)return r();var n=arguments[arguments.length-1];if(!te(n)){for(var i=0;i<e.length;){if("function"==typeof n[e[i]])return n[e[i]].apply(n,Array.prototype.slice.call(arguments,0,-1));i+=1}if(re(n))return t.apply(null,Array.prototype.slice.call(arguments,0,-1))(n)}return r.apply(this,arguments)}}function ie(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}const se={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}};var ae=function(){function e(e,t){this.xf=t,this.f=e,this.all=!0}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=function(e){return this.all&&(e=this.xf["@@transducer/step"](e,!0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)||(this.all=!1,e=ie(this.xf["@@transducer/step"](e,!1))),e},e}();const oe=K(ne(["all"],K((function(e,t){return new ae(e,t)})),(function(e,t){for(var r=0;r<t.length;){if(!e(t[r]))return!1;r+=1}return!0}))),ue=K((function(e,t){return t>e?t:e}));function ce(e,t){for(var r=0,n=t.length,i=Array(n);r<n;)i[r]=e(t[r]),r+=1;return i}function le(e){return"[object String]"===Object.prototype.toString.call(e)}var de=$((function(e){return!!te(e)||!!e&&"object"==typeof e&&!le(e)&&(0===e.length||e.length>0&&e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1))}));const he=de;var fe=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();function pe(e){return new fe(e)}const me=K((function(e,t){return V(e.length,(function(){return e.apply(t,arguments)}))}));function ge(e,t,r){for(var n=r.next();!n.done;){if((t=e["@@transducer/step"](t,n.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n=r.next()}return e["@@transducer/result"](t)}function ye(e,t,r,n){return e["@@transducer/result"](r[n](me(e["@@transducer/step"],e),t))}var ve="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function _e(e,t,r){if("function"==typeof e&&(e=pe(e)),he(r))return function(e,t,r){for(var n=0,i=r.length;n<i;){if((t=e["@@transducer/step"](t,r[n]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n+=1}return e["@@transducer/result"](t)}(e,t,r);if("function"==typeof r["fantasy-land/reduce"])return ye(e,t,r,"fantasy-land/reduce");if(null!=r[ve])return ge(e,t,r[ve]());if("function"==typeof r.next)return ge(e,t,r);if("function"==typeof r.reduce)return ye(e,t,r,"reduce");throw new TypeError("reduce: list must be array or iterable")}var be=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=se.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},e}();const we=K((function(e,t){return new be(e,t)}));function Ae(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var Ee=Object.prototype.toString,ke=function(){return"[object Arguments]"===Ee.call(arguments)?function(e){return"[object Arguments]"===Ee.call(e)}:function(e){return Ae("callee",e)}}();const xe=ke;var Te=!{toString:null}.propertyIsEnumerable("toString"),Pe=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Se=function(){return arguments.propertyIsEnumerable("length")}(),Ie=function(e,t){for(var r=0;r<e.length;){if(e[r]===t)return!0;r+=1}return!1};const Oe="function"!=typeof Object.keys||Se?$((function(e){if(Object(e)!==e)return[];var t,r,n=[],i=Se&&xe(e);for(t in e)!Ae(t,e)||i&&"length"===t||(n[n.length]=t);if(Te)for(r=Pe.length-1;r>=0;)Ae(t=Pe[r],e)&&!Ie(n,t)&&(n[n.length]=t),r-=1;return n})):$((function(e){return Object(e)!==e?[]:Object.keys(e)}));var Ce=K(ne(["fantasy-land/map","map"],we,(function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return J(t.length,(function(){return e.call(this,t.apply(this,arguments))}));case"[object Object]":return _e((function(r,n){return r[n]=e(t[n]),r}),{},Oe(t));default:return ce(e,t)}})));const Ne=Ce,Me=Number.isInteger||function(e){return e<<0===e},Re=K((function(e,t){var r=e<0?t.length+e:e;return le(t)?t.charAt(r):t[r]})),je=K((function(e,t){if(null!=t)return Me(e)?Re(e,t):t[e]})),De=K((function(e,t){return Ne(je(e),t)})),Be=Y(_e);var Le=$((function(e){return J(Be(ue,0,De("length",e)),(function(){for(var t=0,r=e.length;t<r;){if(!e[t].apply(this,arguments))return!1;t+=1}return!0}))}));const Ue=Le,Fe=$((function(e){return function(){return e}})),Ze=K((function(e,t){return e&&t}));var qe=function(){function e(e,t){this.xf=t,this.f=e,this.any=!1}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.any=!0,e=ie(this.xf["@@transducer/step"](e,!0))),e},e}();const ze=K(ne(["any"],K((function(e,t){return new qe(e,t)})),(function(e,t){for(var r=0;r<t.length;){if(e(t[r]))return!0;r+=1}return!1})));var $e=$((function(e){return J(Be(ue,0,De("length",e)),(function(){for(var t=0,r=e.length;t<r;){if(e[t].apply(this,arguments))return!0;t+=1}return!1}))}));const Ke=$e;var He=K((function(e,t){return"function"==typeof t["fantasy-land/ap"]?t["fantasy-land/ap"](e):"function"==typeof e.ap?e.ap(t):"function"==typeof e?function(r){return e(r)(t(r))}:_e((function(e,r){return G(e,Ne(r,t))}),[],e)}));const Ge=He;var Ve=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=new Array(e)}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.store(t),this.full?this.xf["@@transducer/step"](e,this.getCopy()):e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e.prototype.getCopy=function(){return G(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},e}();const We=K(ne([],K((function(e,t){return new Ve(e,t)})),(function(e,t){for(var r=0,n=t.length-(e-1),i=new Array(n>=0?n:0);r<n;)i[r]=Array.prototype.slice.call(t,r,r+e),r+=1;return i}))),Je=K((function(e,t){return G(t,[e])})),Qe=K((function(e,t){return e.apply(this,t)}));var Ye=$((function(e){for(var t=Oe(e),r=t.length,n=[],i=0;i<r;)n[i]=e[t[i]],i+=1;return n}));const Xe=Ye;function et(e,t){return te(t)?t.map(e):Oe(t).reduce((function(r,n){return r[n]=e(t[n]),r}),{})}const tt=$((function e(t){return t=et((function(t){return"function"==typeof t?t:e(t)}),t),J(Be(ue,0,De("length",Xe(t))),(function(){var e=arguments;return et((function(t){return Qe(t,e)}),t)}))}));var rt=K((function(e,t){return t(e)}));const nt=rt,it=Y((function(e,t,r){var n=e(t),i=e(r);return n<i?-1:n>i?1:0}));function st(e,t,r){if(Me(e)&&te(r)){var n=[].concat(r);return n[e]=t,n}var i={};for(var s in r)i[s]=r[s];return i[e]=t,i}var at=$((function(e){return null==e}));const ot=at,ut=Y((function e(t,r,n){if(0===t.length)return r;var i=t[0];if(t.length>1){var s=!ot(n)&&Ae(i,n)?n[i]:Me(t[1])?[]:{};r=e(Array.prototype.slice.call(t,1),r,s)}return st(i,r,n)})),ct=Y((function(e,t,r){return ut([e],t,r)})),lt=K((function(e,t){switch(e){case 0:return function(){return t.call(this)};case 1:return function(e){return t.call(this,e)};case 2:return function(e,r){return t.call(this,e,r)};case 3:return function(e,r,n){return t.call(this,e,r,n)};case 4:return function(e,r,n,i){return t.call(this,e,r,n,i)};case 5:return function(e,r,n,i,s){return t.call(this,e,r,n,i,s)};case 6:return function(e,r,n,i,s,a){return t.call(this,e,r,n,i,s,a)};case 7:return function(e,r,n,i,s,a,o){return t.call(this,e,r,n,i,s,a,o)};case 8:return function(e,r,n,i,s,a,o,u){return t.call(this,e,r,n,i,s,a,o,u)};case 9:return function(e,r,n,i,s,a,o,u,c){return t.call(this,e,r,n,i,s,a,o,u,c)};case 10:return function(e,r,n,i,s,a,o,u,c,l){return t.call(this,e,r,n,i,s,a,o,u,c,l)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}})),dt=$((function(e){return lt(2,e)}));function ht(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t}const ft=K((function(e,t){var r=J(e,t);return J(e,(function(){return _e(Ge,Ne(r,arguments[0]),Array.prototype.slice.call(arguments,1))}))})),pt=$((function(e){return ft(e.length,e)})),mt=K((function(e,t){return ht(e)?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:pt(Ze)(e,t)})),gt=$((function(e){return e.apply(this,Array.prototype.slice.call(arguments,1))}));function yt(e){return function t(r){for(var n,i,s,a=[],o=0,u=r.length;o<u;){if(he(r[o]))for(s=0,i=(n=e?t(r[o]):r[o]).length;s<i;)a[a.length]=n[s],s+=1;else a[a.length]=r[o];o+=1}return a}}var vt=K(ne(["fantasy-land/chain","chain"],K((function(e,t){return Ne(e,function(e){var t=function(e){return{"@@transducer/init":se.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,r){var n=e["@@transducer/step"](t,r);return n["@@transducer/reduced"]?{"@@transducer/value":n,"@@transducer/reduced":!0}:n}}}(e);return{"@@transducer/init":se.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,r){return he(r)?_e(t,e,r):_e(t,e,[r])}}}(t))})),(function(e,t){return"function"==typeof t?function(r){return e(t(r))(r)}:yt(!1)(Ne(e,t))})));const _t=vt,bt=Y((function(e,t,r){if(e>t)throw new Error("min must not be greater than max in clamp(min, max, value)");return r<e?e:r>t?t:r}));function wt(e){return new RegExp(e.source,(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":""))}const At=$((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));function Et(e,t,r,n){var i=function(i){for(var s=t.length,a=0;a<s;){if(e===t[a])return r[a];a+=1}for(var o in t[a]=e,r[a]=i,e)e.hasOwnProperty(o)&&(i[o]=n?Et(e[o],t,r,!0):e[o]);return i};switch(At(e)){case"Object":return i(Object.create(Object.getPrototypeOf(e)));case"Array":return i([]);case"Date":return new Date(e.valueOf());case"RegExp":return wt(e);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}const kt=$((function(e){return null!=e&&"function"==typeof e.clone?e.clone():Et(e,[],[],!0)}));var xt=K((function(e,t){var r=_e((function(t,r){var n=e(r);return void 0===t[n]&&(t[n]=[]),t[n].push(r),t}),{},t),n=[];for(var i in r)n.push(r[i]);return n}));const Tt=xt,Pt=$((function(e){return function(t,r){return e(t,r)?-1:e(r,t)?1:0}})),St=$((function(e){return!e})),It=pt(St);function Ot(e,t){return function(){return t.call(this,e.apply(this,arguments))}}function Ct(e,t){return function(){var r=arguments.length;if(0===r)return t();var n=arguments[r-1];return te(n)||"function"!=typeof n[e]?t.apply(this,arguments):n[e].apply(n,Array.prototype.slice.call(arguments,0,r-1))}}const Nt=Y(Ct("slice",(function(e,t,r){return Array.prototype.slice.call(r,e,t)}))),Mt=$(Ct("tail",Nt(1,1/0)));function Rt(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return V(arguments[0].length,Be(Ot,arguments[0],Mt(arguments)))}const jt=$((function(e){return le(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()}));function Dt(){if(0===arguments.length)throw new Error("compose requires at least one argument");return Rt.apply(this,jt(arguments))}const Bt=Re(0);function Lt(e){return e}const Ut=$(Lt),Ft=K((function(e,t){if(t.length<=0)return Ut;var r=Bt(t),n=Mt(t);return V(r.length,(function(){return _e((function(t,r){return e.call(this,r,t)}),r.apply(this,arguments),n)}))})),Zt=K((function(e,t){return Ft.apply(this,[e,jt(t)])}));function qt(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}function zt(e,t,r){for(var n=0,i=r.length;n<i;){if(e(t,r[n]))return!0;n+=1}return!1}const $t="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};function Kt(e,t,r,n){var i=qt(e);function s(e,t){return Ht(e,t,r.slice(),n.slice())}return!zt((function(e,t){return!zt(s,t,e)}),qt(t),i)}function Ht(e,t,r,n){if($t(e,t))return!0;var i=At(e);if(i!==At(t))return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(i){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===function(e){var t=String(e).match(/^function (\w*)/);return null==t?"":t[1]}(e.constructor))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!$t(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!$t(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var s=r.length-1;s>=0;){if(r[s]===e)return n[s]===t;s-=1}switch(i){case"Map":return e.size===t.size&&Kt(e.entries(),t.entries(),r.concat([e]),n.concat([t]));case"Set":return e.size===t.size&&Kt(e.values(),t.values(),r.concat([e]),n.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var a=Oe(e);if(a.length!==Oe(t).length)return!1;var o=r.concat([e]),u=n.concat([t]);for(s=a.length-1;s>=0;){var c=a[s];if(!Ae(c,t)||!Ht(t[c],e[c],o,u))return!1;s-=1}return!0}const Gt=K((function(e,t){return Ht(e,t,[],[])}));function Vt(e,t,r){var n,i;if("function"==typeof e.indexOf)switch(typeof t){case"number":if(0===t){for(n=1/t;r<e.length;){if(0===(i=e[r])&&1/i===n)return r;r+=1}return-1}if(t!=t){for(;r<e.length;){if("number"==typeof(i=e[r])&&i!=i)return r;r+=1}return-1}return e.indexOf(t,r);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,r);case"object":if(null===t)return e.indexOf(t,r)}for(;r<e.length;){if(Gt(e[r],t))return r;r+=1}return-1}function Wt(e,t){return Vt(t,e,0)>=0}function Jt(e){return'"'+e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var Qt=function(e){return(e<10?"0":"")+e};const Yt="function"==typeof Date.prototype.toISOString?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+Qt(e.getUTCMonth()+1)+"-"+Qt(e.getUTCDate())+"T"+Qt(e.getUTCHours())+":"+Qt(e.getUTCMinutes())+":"+Qt(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function Xt(e){return function(){return!e.apply(this,arguments)}}function er(e,t){for(var r=0,n=t.length,i=[];r<n;)e(t[r])&&(i[i.length]=t[r]),r+=1;return i}function tr(e){return"[object Object]"===Object.prototype.toString.call(e)}var rr=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=se.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},e}(),nr=K(ne(["fantasy-land/filter","filter"],K((function(e,t){return new rr(e,t)})),(function(e,t){return tr(t)?_e((function(r,n){return e(t[n])&&(r[n]=t[n]),r}),{},Oe(t)):er(e,t)})));const ir=nr,sr=K((function(e,t){return ir(Xt(e),t)}));function ar(e,t){var r=function(r){var n=t.concat([e]);return Wt(r,n)?"<Circular>":ar(r,n)},n=function(e,t){return ce((function(t){return Jt(t)+": "+r(e[t])}),t.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+ce(r,e).join(", ")+"))";case"[object Array]":return"["+ce(r,e).concat(n(e,sr((function(e){return/^\d+$/.test(e)}),Oe(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+r(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?r(NaN):Jt(Yt(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+r(e.valueOf())+")":1/e==-1/0?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+r(e.valueOf())+")":Jt(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var i=e.toString();if("[object Object]"!==i)return i}return"{"+n(e,Oe(e)).join(", ")+"}"}}const or=$((function(e){return ar(e,[])})),ur=K((function(e,t){if(te(e)){if(te(t))return e.concat(t);throw new TypeError(or(t)+" is not an array")}if(le(e)){if(le(t))return e+t;throw new TypeError(or(t)+" is not a string")}if(null!=e&&ht(e["fantasy-land/concat"]))return e["fantasy-land/concat"](t);if(null!=e&&ht(e.concat))return e.concat(t);throw new TypeError(or(e)+' does not have a method named "concat" or "fantasy-land/concat"')})),cr=$((function(e){return V(Be(ue,0,Ne((function(e){return e[0].length}),e)),(function(){for(var t=0;t<e.length;){if(e[t][0].apply(this,arguments))return e[t][1].apply(this,arguments);t+=1}}))})),lr=$((function(e){return J(e.length,e)})),dr=K((function(e,t){if(e>10)throw new Error("Constructor with greater than ten arguments");return 0===e?function(){return new t}:lr(lt(e,(function(e,r,n,i,s,a,o,u,c,l){switch(arguments.length){case 1:return new t(e);case 2:return new t(e,r);case 3:return new t(e,r,n);case 4:return new t(e,r,n,i);case 5:return new t(e,r,n,i,s);case 6:return new t(e,r,n,i,s,a);case 7:return new t(e,r,n,i,s,a,o);case 8:return new t(e,r,n,i,s,a,o,u);case 9:return new t(e,r,n,i,s,a,o,u,c);case 10:return new t(e,r,n,i,s,a,o,u,c,l)}})))})),hr=$((function(e){return dr(e.length,e)})),fr=K((function(e,t){return J(Be(ue,0,De("length",t)),(function(){var r=arguments,n=this;return e.apply(n,ce((function(e){return e.apply(n,r)}),t))}))})),pr=lr((function(e,t){return _e((function(t,r){return e(r)?t+1:t}),0,t)}));var mr=function(){function e(e,t,r,n){this.valueFn=e,this.valueAcc=t,this.keyFn=r,this.xf=n,this.inputs={}}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=function(e){var t;for(t in this.inputs)if(Ae(t,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[t]))["@@transducer/reduced"]){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var r=this.keyFn(t);return this.inputs[r]=this.inputs[r]||[r,this.valueAcc],this.inputs[r][1]=this.valueFn(this.inputs[r][1],t),e},e}(),gr=W(4,[],ne([],W(4,[],(function(e,t,r,n){return new mr(e,t,r,n)})),(function(e,t,r,n){return _e((function(n,i){var s=r(i),a=e(Ae(s,n)?n[s]:Et(t,[],[],!1),i);return a&&a["@@transducer/reduced"]?ie(n):(n[s]=a,n)}),{},n)})));const yr=gr,vr=yr((function(e,t){return e+1}),0),_r=H(-1),br=K((function(e,t){return null==t||t!=t?e:t})),wr=Y((function(e,t,r){var n=e(t),i=e(r);return n>i?-1:n<i?1:0}));function Ar(e,t,r){var n,i=typeof e;switch(i){case"string":case"number":return 0===e&&1/e==-1/0?!!r._items["-0"]||(t&&(r._items["-0"]=!0),!1):null!==r._nativeSet?t?(n=r._nativeSet.size,r._nativeSet.add(e),r._nativeSet.size===n):r._nativeSet.has(e):i in r._items?e in r._items[i]||(t&&(r._items[i][e]=!0),!1):(t&&(r._items[i]={},r._items[i][e]=!0),!1);case"boolean":if(i in r._items){var s=e?1:0;return!!r._items[i][s]||(t&&(r._items[i][s]=!0),!1)}return t&&(r._items[i]=e?[!1,!0]:[!0,!1]),!1;case"function":return null!==r._nativeSet?t?(n=r._nativeSet.size,r._nativeSet.add(e),r._nativeSet.size===n):r._nativeSet.has(e):i in r._items?!!Wt(e,r._items[i])||(t&&r._items[i].push(e),!1):(t&&(r._items[i]=[e]),!1);case"undefined":return!!r._items[i]||(t&&(r._items[i]=!0),!1);case"object":if(null===e)return!!r._items.null||(t&&(r._items.null=!0),!1);default:return(i=Object.prototype.toString.call(e))in r._items?!!Wt(e,r._items[i])||(t&&r._items[i].push(e),!1):(t&&(r._items[i]=[e]),!1)}}const Er=function(){function e(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return e.prototype.add=function(e){return!Ar(e,!0,this)},e.prototype.has=function(e){return Ar(e,!1,this)},e}();var kr=K((function(e,t){for(var r=[],n=0,i=e.length,s=t.length,a=new Er,o=0;o<s;o+=1)a.add(t[o]);for(;n<i;)a.add(e[n])&&(r[r.length]=e[n]),n+=1;return r}));const xr=kr;var Tr=Y((function(e,t,r){for(var n=[],i=0,s=t.length;i<s;)zt(e,t[i],r)||zt(e,t[i],n)||n.push(t[i]),i+=1;return n}));const Pr=Tr,Sr=Y((function(e,t,r){var n=Array.prototype.slice.call(r,0);return n.splice(e,t),n})),Ir=K((function e(t,r){if(null==r)return r;switch(t.length){case 0:return r;case 1:return function(e,t){if(null==t)return t;if(Me(e)&&te(t))return Sr(e,1,t);var r={};for(var n in t)r[n]=t[n];return delete r[e],r}(t[0],r);default:var n=t[0],i=Array.prototype.slice.call(t,1);return null==r[n]?function(e,t){if(Me(e)&&te(t))return[].concat(t);var r={};for(var n in t)r[n]=t[n];return r}(n,r):ct(n,e(i,r[n]),r)}})),Or=K((function(e,t){return Ir([e],t)})),Cr=K((function(e,t){return e/t}));var Nr=function(){function e(e,t){this.xf=t,this.n=e}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=se.result,e.prototype["@@transducer/step"]=function(e,t){return this.n>0?(this.n-=1,e):this.xf["@@transducer/step"](e,t)},e}();const Mr=K(ne(["drop"],K((function(e,t){return new Nr(e,t)})),(function(e,t){return Nt(Math.max(0,e),1/0,t)})));var Rr=function(){function e(e,t){this.xf=t,this.n=e,this.i=0}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=se.result,e.prototype["@@transducer/step"]=function(e,t){this.i+=1;var r=0===this.n?e:this.xf["@@transducer/step"](e,t);return this.n>=0&&this.i>=this.n?ie(r):r},e}();const jr=K(ne(["take"],K((function(e,t){return new Rr(e,t)})),(function(e,t){return Nt(0,e<0?1/0:e,t)})));var Dr=function(){function e(e,t){this.xf=t,this.pos=0,this.full=!1,this.acc=new Array(e)}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.full&&(e=this.xf["@@transducer/step"](e,this.acc[this.pos])),this.store(t),e},e.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e}();const Br=K(ne([],K((function(e,t){return new Dr(e,t)})),(function(e,t){return jr(e<t.length?t.length-e:0,t)})));var Lr=function(){function e(e,t){this.f=e,this.retained=[],this.xf=t}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=function(e){return this.retained=null,this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.retain(e,t):this.flush(e,t)},e.prototype.flush=function(e,t){return e=_e(this.xf["@@transducer/step"],e,this.retained),this.retained=[],this.xf["@@transducer/step"](e,t)},e.prototype.retain=function(e,t){return this.retained.push(t),e},e}();const Ur=K(ne([],K((function(e,t){return new Lr(e,t)})),(function(e,t){for(var r=t.length-1;r>=0&&e(t[r]);)r-=1;return Nt(0,r+1,t)})));var Fr=function(){function e(e,t){this.xf=t,this.pred=e,this.lastValue=void 0,this.seenFirstValue=!1}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=se.result,e.prototype["@@transducer/step"]=function(e,t){var r=!1;return this.seenFirstValue?this.pred(this.lastValue,t)&&(r=!0):this.seenFirstValue=!0,this.lastValue=t,r?e:this.xf["@@transducer/step"](e,t)},e}();const Zr=K((function(e,t){return new Fr(e,t)})),qr=Re(-1);var zr=K(ne([],Zr,(function(e,t){var r=[],n=1,i=t.length;if(0!==i)for(r[0]=t[0];n<i;)e(qr(r),t[n])||(r[r.length]=t[n]),n+=1;return r})));const $r=zr,Kr=$(ne([],Zr(Gt),$r(Gt)));var Hr=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=se.result,e.prototype["@@transducer/step"]=function(e,t){if(this.f){if(this.f(t))return e;this.f=null}return this.xf["@@transducer/step"](e,t)},e}(),Gr=K(ne(["dropWhile"],K((function(e,t){return new Hr(e,t)})),(function(e,t){for(var r=0,n=t.length;r<n&&e(t[r]);)r+=1;return Nt(r,1/0,t)})));const Vr=Gr,Wr=K((function(e,t){return e||t})),Jr=K((function(e,t){return ht(e)?function(){return e.apply(this,arguments)||t.apply(this,arguments)}:pt(Wr)(e,t)}));var Qr=$((function(e){return null!=e&&"function"==typeof e["fantasy-land/empty"]?e["fantasy-land/empty"]():null!=e&&null!=e.constructor&&"function"==typeof e.constructor["fantasy-land/empty"]?e.constructor["fantasy-land/empty"]():null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():te(e)?[]:le(e)?"":tr(e)?{}:xe(e)?function(){return arguments}():(t=e,"[object Uint8ClampedArray]"===(r=Object.prototype.toString.call(t))||"[object Int8Array]"===r||"[object Uint8Array]"===r||"[object Int16Array]"===r||"[object Uint16Array]"===r||"[object Int32Array]"===r||"[object Uint32Array]"===r||"[object Float32Array]"===r||"[object Float64Array]"===r||"[object BigInt64Array]"===r||"[object BigUint64Array]"===r?e.constructor.from(""):void 0);var t,r}));const Yr=Qr,Xr=K((function(e,t){return Mr(e>=0?t.length-e:0,t)})),en=K((function(e,t){return Gt(Xr(e.length,t),e)}));var tn=Y((function(e,t,r){return Gt(e(t),e(r))}));const rn=tn,nn=Y((function(e,t,r){return Gt(t[e],r[e])}));var sn=K((function e(t,r){if(!tr(r)&&!te(r))return r;var n,i,s,a=r instanceof Array?[]:{};for(i in r)s=typeof(n=t[i]),a[i]="function"===s?n(r[i]):n&&"object"===s?e(n,r[i]):r[i];return a}));const an=sn;var on=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.found=!0,e=ie(this.xf["@@transducer/step"](e,t))),e},e}(),un=K(ne(["find"],K((function(e,t){return new on(e,t)})),(function(e,t){for(var r=0,n=t.length;r<n;){if(e(t[r]))return t[r];r+=1}})));const cn=un;var ln=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.found=!1}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,-1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.found=!0,e=ie(this.xf["@@transducer/step"](e,this.idx))),e},e}(),dn=K(ne([],K((function(e,t){return new ln(e,t)})),(function(e,t){for(var r=0,n=t.length;r<n;){if(e(t[r]))return r;r+=1}return-1})));const hn=dn;var fn=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.last))},e.prototype["@@transducer/step"]=function(e,t){return this.f(t)&&(this.last=t),e},e}();const pn=K(ne([],K((function(e,t){return new fn(e,t)})),(function(e,t){for(var r=t.length-1;r>=0;){if(e(t[r]))return t[r];r-=1}})));var mn=function(){function e(e,t){this.xf=t,this.f=e,this.idx=-1,this.lastIdx=-1}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.lastIdx))},e.prototype["@@transducer/step"]=function(e,t){return this.idx+=1,this.f(t)&&(this.lastIdx=this.idx),e},e}();const gn=K(ne([],K((function(e,t){return new mn(e,t)})),(function(e,t){for(var r=t.length-1;r>=0;){if(e(t[r]))return r;r-=1}return-1}))),yn=$(yt(!0)),vn=$((function(e){return J(e.length,(function(t,r){var n=Array.prototype.slice.call(arguments,0);return n[0]=r,n[1]=t,e.apply(this,n)}))}));var _n=K(Ct("forEach",(function(e,t){for(var r=t.length,n=0;n<r;)e(t[n]),n+=1;return t})));const bn=_n;var wn=K((function(e,t){for(var r=Oe(t),n=0;n<r.length;){var i=r[n];e(t[i],i,t),n+=1}return t}));const An=wn,En=$((function(e){for(var t={},r=0;r<e.length;)t[e[r][0]]=e[r][1],r+=1;return t})),kn=K(Ct("groupBy",yr((function(e,t){return e.push(t),e}),[])));var xn=K((function(e,t){for(var r=[],n=0,i=t.length;n<i;){for(var s=n+1;s<i&&e(t[s-1],t[s]);)s+=1;r.push(t.slice(n,s)),n=s}return r}));const Tn=xn,Pn=K((function(e,t){return e>t})),Sn=K((function(e,t){return e>=t})),In=K((function(e,t){if(0===e.length||ot(t))return!1;for(var r=t,n=0;n<e.length;){if(ot(r)||!Ae(e[n],r))return!1;r=r[e[n]],n+=1}return!0})),On=K((function(e,t){return In([e],t)})),Cn=K((function(e,t){return!ot(t)&&e in t})),Nn=K($t),Mn=Y((function(e,t,r){return J(Math.max(e.length,t.length,r.length),(function(){return e.apply(this,arguments)?t.apply(this,arguments):r.apply(this,arguments)}))})),Rn=H(1),jn=K(Wt),Dn=yr((function(e,t){return t}),null),Bn=K((function(e,t){return"function"!=typeof t.indexOf||te(t)?Vt(t,e,0):t.indexOf(e)})),Ln=Nt(0,-1);var Un=Y((function(e,t,r){return er((function(t){return zt(e,t,r)}),t)}));const Fn=Un,Zn=Y((function(e,t,r){e=e<r.length&&e>=0?e:r.length;var n=Array.prototype.slice.call(r,0);return n.splice(e,0,t),n})),qn=Y((function(e,t,r){return e=e<r.length&&e>=0?e:r.length,[].concat(Array.prototype.slice.call(r,0,e),t,Array.prototype.slice.call(r,e))}));var zn=function(){function e(e,t){this.xf=t,this.f=e,this.set=new Er}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=se.result,e.prototype["@@transducer/step"]=function(e,t){return this.set.add(this.f(t))?this.xf["@@transducer/step"](e,t):e},e}(),$n=K(ne([],K((function(e,t){return new zn(e,t)})),(function(e,t){for(var r,n,i=new Er,s=[],a=0;a<t.length;)r=e(n=t[a]),i.add(r)&&s.push(n),a+=1;return s})));const Kn=$n,Hn=Kn(Ut),Gn=K((function(e,t){var r,n;return e.length>t.length?(r=e,n=t):(r=t,n=e),Hn(er(vn(Wt)(r),n))})),Vn=K(Ct("intersperse",(function(e,t){for(var r=[],n=0,i=t.length;n<i;)n===i-1?r.push(t[n]):r.push(t[n],e),n+=1;return r}))),Wn="function"==typeof Object.assign?Object.assign:function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,n=arguments.length;r<n;){var i=arguments[r];if(null!=i)for(var s in i)Ae(s,i)&&(t[s]=i[s]);r+=1}return t};var Jn=K((function(e,t){var r={};return r[e]=t,r}));const Qn=Jn;var Yn={"@@transducer/init":Array,"@@transducer/step":function(e,t){return e.push(t),e},"@@transducer/result":Lt},Xn={"@@transducer/init":String,"@@transducer/step":function(e,t){return e+t},"@@transducer/result":Lt},ei={"@@transducer/init":Object,"@@transducer/step":function(e,t){return Wn(e,he(t)?Qn(t[0],t[1]):t)},"@@transducer/result":Lt};const ti=Y((function(e,t,r){return re(e)?_e(t(e),e["@@transducer/init"](),r):_e(t(function(e){if(re(e))return e;if(he(e))return Yn;if("string"==typeof e)return Xn;if("object"==typeof e)return ei;throw new Error("Cannot create transformer for "+e)}(e)),Et(e,[],[],!1),r)}));var ri=$((function(e){for(var t=Oe(e),r=t.length,n=0,i={};n<r;){var s=t[n],a=e[s],o=Ae(a,i)?i[a]:i[a]=[];o[o.length]=s,n+=1}return i}));const ni=ri;var ii=$((function(e){for(var t=Oe(e),r=t.length,n=0,i={};n<r;){var s=t[n];i[e[s]]=s,n+=1}return i}));const si=ii,ai=K((function(e,t){return J(e+1,(function(){var r=arguments[e];if(null!=r&&ht(r[t]))return r[t].apply(r,Array.prototype.slice.call(arguments,0,e));throw new TypeError(or(r)+' does not have a method named "'+t+'"')}))})),oi=K((function(e,t){return t instanceof e||null!=t&&(t.constructor===e||"Object"===e.name&&"object"==typeof t)}));var ui=$((function(e){return null!=e&&Gt(e,Yr(e))}));const ci=ui,li=ai(1,"join"),di=$((function(e){return fr((function(){return Array.prototype.slice.call(arguments,0)}),e)})),hi=$((function(e){var t,r=[];for(t in e)r[r.length]=t;return r})),fi=K((function(e,t){if("function"!=typeof t.lastIndexOf||te(t)){for(var r=t.length-1;r>=0;){if(Gt(t[r],e))return r;r-=1}return-1}return t.lastIndexOf(e)}));function pi(e){return"[object Number]"===Object.prototype.toString.call(e)}const mi=$((function(e){return null!=e&&pi(e.length)?e.length:NaN}));var gi=K((function(e,t){return function(r){return function(n){return Ne((function(e){return t(e,n)}),r(e(n)))}}}));const yi=gi;var vi=Y((function(e,t,r){return ee(e,Fe(t),r)}));const _i=vi,bi=$((function(e){return yi(Re(e),_i(e))})),wi=K((function(e,t){return e.map((function(e){for(var r,n=t,i=0;i<e.length;){if(null==n)return;r=e[i],n=Me(r)?Re(r,n):n[r],i+=1}return n}))})),Ai=K((function(e,t){return wi([e],t)[0]})),Ei=$((function(e){return yi(Ai(e),ut(e))})),ki=$((function(e){return yi(je(e),ct(e))})),xi=K((function(e,t){return e<t})),Ti=K((function(e,t){return e<=t}));var Pi=Y((function(e,t,r){for(var n=0,i=r.length,s=[],a=[t];n<i;)a=e(a[0],r[n]),s[n]=a[1],n+=1;return[a[0],s]}));const Si=Pi,Ii=Y((function(e,t,r){for(var n=r.length-1,i=[],s=[t];n>=0;)s=e(s[0],r[n]),i[n]=s[1],n-=1;return[s[0],i]}));var Oi=K((function(e,t){return _e((function(r,n){return r[n]=e(t[n],n,t),r}),{},Oe(t))}));const Ci=Oi;var Ni=K((function(e,t){return t.match(e)||[]}));const Mi=Ni,Ri=K((function(e,t){return Me(e)?!Me(t)||t<1?NaN:(e%t+t)%t:NaN})),ji=Y((function(e,t,r){return e(r)>e(t)?r:t})),Di=Be(H,0),Bi=$((function(e){return Di(e)/e.length}));var Li=$((function(e){var t=e.length;if(0===t)return NaN;var r=2-t%2,n=(t-r)/2;return Bi(Array.prototype.slice.call(e,0).sort((function(e,t){return e<t?-1:e>t?1:0})).slice(n,n+r))}));const Ui=Li;var Fi=K((function(e,t){var r={};return V(t.length,(function(){var n=e.apply(this,arguments);return Ae(n,r)||(r[n]=t.apply(this,arguments)),r[n]}))}));const Zi=Fi,qi=$((function(e){return Wn.apply(null,[{}].concat(e))}));var zi=Y((function(e,t,r){var n,i={};for(n in t)Ae(n,t)&&(i[n]=Ae(n,r)?e(n,t[n],r[n]):t[n]);for(n in r)Ae(n,r)&&!Ae(n,i)&&(i[n]=r[n]);return i}));const $i=zi,Ki=Y((function e(t,r,n){return $i((function(r,n,i){return tr(n)&&tr(i)?e(t,n,i):t(r,n,i)}),r,n)})),Hi=K((function(e,t){return Ki((function(e,t,r){return t}),e,t)})),Gi=K((function(e,t){return Ki((function(e,t,r){return r}),e,t)})),Vi=Y((function(e,t,r){return Ki((function(t,r,n){return e(r,n)}),t,r)}));var Wi=K((function(e,t){return Wn({},t,e)}));const Ji=Wi;var Qi=K((function(e,t){return Wn({},e,t)}));const Yi=Qi;var Xi=Y((function(e,t,r){return $i((function(t,r,n){return e(r,n)}),t,r)}));const es=Xi,ts=K((function(e,t){return t<e?t:e})),rs=Y((function(e,t,r){return e(r)<e(t)?r:t})),ns=Y((function e(t,r,n){if(!tr(n)&&!te(n)||0===t.length)return n;var i=t[0];if(!Ae(i,n))return n;if(1===t.length)return function(e,t,r){if(Me(e)&&te(r)){var n=[].concat(r);return n[e]=t(n[e]),n}var i={};for(var s in r)i[s]=r[s];return i[e]=t(i[e]),i}(i,r,n);var s=e(Array.prototype.slice.call(t,1),r,n[i]);return s===n[i]?n:st(i,s,n)})),is=Y((function(e,t,r){return ns([e],t,r)})),ss=K((function(e,t){return e%t})),as=Y((function(e,t,r){var n=r.length,i=r.slice(),s=e<0?n+e:e,a=t<0?n+t:t,o=i.splice(s,1);return s<0||s>=r.length||a<0||a>=r.length?r:[].concat(i.slice(0,a)).concat(o).concat(i.slice(a,r.length))})),os=K((function(e,t){return e*t})),us=K(((e,t)=>r=>e.call(void 0,Gi(t,r)))),cs=$((function(e){return-e})),ls=K((function(e,t){return oe(Xt(e),t)})),ds=$((function(e){return J(e<0?1:e+1,(function(){return Re(e,arguments)}))}));var hs=Y((function(e,t,r){return e(t(r))}));const fs=hs,ps=$((function(e){return[e]}));var ms=K((function(e,t){for(var r={},n={},i=0,s=e.length;i<s;)n[e[i]]=1,i+=1;for(var a in t)n.hasOwnProperty(a)||(r[a]=t[a]);return r}));const gs=ms,ys=W(4,[],(function(e,t,r,n){return e(t(r),t(n))})),vs=$((function(e){var t,r=!1;return V(e.length,(function(){return r?t:(r=!0,t=e.apply(this,arguments))}))}));function _s(e,t){if(null==t||!ht(t.then))throw new TypeError("`"+e+"` expected a Promise, received "+ar(t,[]))}const bs=K((function(e,t){return _s("otherwise",t),t.then(null,e)}));var ws=function(e){return{value:e,map:function(t){return ws(t(e))}}},As=Y((function(e,t,r){return e((function(e){return ws(t(e))}))(r).value}));const Es=As,ks=K((function(e,t){return[e,t]}));function xs(e){return K((function(t,r){return V(Math.max(0,t.length-r.length),(function(){return t.apply(this,e(r,arguments))}))}))}const Ts=xs(G),Ps=xs(vn(G)),Ss=di([ir,sr]),Is=Y((function(e,t,r){return Gt(Ai(e,r),t)})),Os=Y((function(e,t,r){return br(e,Ai(t,r))})),Cs=Y((function(e,t,r){return e(Ai(t,r))}));var Ns=K((function(e,t){for(var r={},n=0;n<e.length;)e[n]in t&&(r[e[n]]=t[e[n]]),n+=1;return r}));const Ms=Ns;var Rs=K((function(e,t){for(var r={},n=0,i=e.length;n<i;){var s=e[n];r[s]=t[s],n+=1}return r}));const js=Rs;var Ds=K((function(e,t){var r={};for(var n in t)e(t[n],n,t)&&(r[n]=t[n]);return r}));const Bs=Ds,Ls=K((function(e,t){return G([e],t)})),Us=Be(os,1),Fs=K((function(e,t){return J(t.length,(function(){for(var r=[],n=0;n<t.length;)r.push(t[n].call(this,arguments[n])),n+=1;return e.apply(this,r.concat(Array.prototype.slice.call(arguments,t.length)))}))})),Zs=Fs(ce,[js,Ut]);function qs(e,t,r){return function(n){return t(r(e(n)))}}var zs=function(){function e(e,t,r){this.xf=r,this.f=e,this.g=t}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=se.result,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,qs(this.f,this.g,t))},e}();const $s=Y(ne(["fantasy-land/promap","promap"],Y((function(e,t,r){return new zs(e,t,r)})),qs)),Ks=Y((function(e,t,r){return Gt(t,je(e,r))})),Hs=Y((function(e,t,r){return oi(e,je(t,r))})),Gs=Y((function(e,t,r){return br(e,je(t,r))})),Vs=Y((function(e,t,r){return e(je(t,r))})),Ws=K((function(e,t){return e.map((function(e){return Ai([e],t)}))})),Js=K((function(e,t){if(!pi(e)||!pi(t))throw new TypeError("Both arguments to range must be numbers");for(var r=[],n=e;n<t;)r.push(n),n+=1;return r})),Qs=Y((function(e,t,r){for(var n=r.length-1;n>=0;){if((t=e(r[n],t))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}n-=1}return t}));var Ys=W(4,[],(function(e,t,r,n){return _e((function(r,n){return e(r,n)?t(r,n):ie(r)}),r,n)}));const Xs=Ys,ea=$(ie);var ta=K((function(e,t){var r,n=Number(t),i=0;if(n<0||isNaN(n))throw new RangeError("n must be a non-negative number");for(r=new Array(n);i<n;)r[i]=e(i),i+=1;return r}));const ra=ta,na=K((function(e,t){return ra(Fe(e),t)}));var ia=Y((function(e,t,r){return r.replace(e,t)}));const sa=ia;var aa=Y((function(e,t,r){for(var n=0,i=r.length,s=[t];n<i;)t=e(t,r[n]),s[n+1]=t,n+=1;return s}));const oa=aa;var ua=K((function(e,t){return"function"==typeof t.sequence?t.sequence(e):Qs((function(e,t){return Ge(Ne(Ls,e),t)}),e([]),t)}));const ca=ua;var la=Y((function(e,t,r){return Es(e,Fe(t),r)}));const da=la,ha=K((function(e,t){return Array.prototype.slice.call(t,0).sort(e)})),fa=K((function(e,t){return Array.prototype.slice.call(t,0).sort((function(t,r){var n=e(t),i=e(r);return n<i?-1:n>i?1:0}))}));var pa=K((function(e,t){return Array.prototype.slice.call(t,0).sort((function(t,r){for(var n=0,i=0;0===n&&i<e.length;)n=e[i](t,r),i+=1;return n}))}));const ma=pa,ga=ai(1,"split");var ya=K((function(e,t){return[Nt(0,e,t),Nt(e,mi(t),t)]}));const va=ya,_a=K((function(e,t){if(e<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var r=[],n=0;n<t.length;)r.push(Nt(n,n+=e,t));return r}));var ba=K((function(e,t){for(var r=0,n=t.length,i=[];r<n&&!e(t[r]);)i.push(t[r]),r+=1;return[i,Array.prototype.slice.call(t,r)]}));const wa=ba;var Aa=W(2,[],(function(e,t){for(var r=[],n=[],i=0;i<t.length;i+=1)e(t[i])||n.push(t[i]),(i<t.length-1&&e(t[i+1])||i===t.length-1)&&n.length>0&&(r.push(n),n=[]);return r}));const Ea=Aa;var ka=K((function(e,t){return Gt(jr(e.length,t),e)}));const xa=ka,Ta=K((function(e,t){return Number(e)-Number(t)})),Pa=K((function(e,t){return ur(xr(e,t),xr(t,e))})),Sa=Y((function(e,t,r){return ur(Pr(e,t,r),Pr(e,r,t))})),Ia=K((function(e,t){for(var r=t.length-1;r>=0&&e(t[r]);)r-=1;return Nt(r+1,1/0,t)}));var Oa=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=se.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):ie(e)},e}(),Ca=K(ne(["takeWhile"],K((function(e,t){return new Oa(e,t)})),(function(e,t){for(var r=0,n=t.length;r<n&&e(t[r]);)r+=1;return Nt(0,r,t)})));const Na=Ca;var Ma=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=se.result,e.prototype["@@transducer/step"]=function(e,t){return this.f(t),this.xf["@@transducer/step"](e,t)},e}(),Ra=K(ne([],K((function(e,t){return new Ma(e,t)})),(function(e,t){return e(t),t})));const ja=Ra;var Da=K((function(e,t){if(r=e,"[object RegExp]"!==Object.prototype.toString.call(r))throw new TypeError("‘test’ requires a value of type RegExp as its first argument; received "+or(e));var r;return wt(e).test(t)}));const Ba=Da,La=K((function(e,t){return _s("andThen",t),t.then(e)})),Ua=ai(0,"toLowerCase"),Fa=$((function(e){var t=[];for(var r in e)Ae(r,e)&&(t[t.length]=[r,e[r]]);return t})),Za=$((function(e){var t=[];for(var r in e)t[t.length]=[r,e[r]];return t})),qa=ai(0,"toUpperCase"),za=J(4,(function(e,t,r,n){return _e(e("function"==typeof t?pe(t):t),r,n)}));var $a=$((function(e){for(var t=0,r=[];t<e.length;){for(var n=e[t],i=0;i<n.length;)void 0===r[i]&&(r[i]=[]),r[i].push(n[i]),i+=1;t+=1}return r}));const Ka=$a,Ha=Y((function(e,t,r){return"function"==typeof r["fantasy-land/traverse"]?r["fantasy-land/traverse"](t,e):"function"==typeof r.traverse?r.traverse(t,e):ca(e,Ne(t,r))}));var Ga="\t\n\v\f\r                　\u2028\u2029\ufeff",Va=$("function"==typeof String.prototype.trim&&!Ga.trim()&&"​".trim()?function(e){return e.trim()}:function(e){var t=new RegExp("^["+Ga+"]["+Ga+"]*"),r=new RegExp("["+Ga+"]["+Ga+"]*$");return e.replace(t,"").replace(r,"")});const Wa=Va,Ja=K((function(e,t){return V(e.length,(function(){try{return e.apply(this,arguments)}catch(e){return t.apply(this,G([e],arguments))}}))})),Qa=$((function(e){return function(){return e(Array.prototype.slice.call(arguments,0))}})),Ya=$((function(e){return lt(1,e)})),Xa=K((function(e,t){return J(e,(function(){for(var r,n=1,i=t,s=0;n<=e&&"function"==typeof i;)r=n===e?arguments.length:s+i.length,i=i.apply(this,Array.prototype.slice.call(arguments,s,r)),n+=1,s=r;return i}))})),eo=K((function(e,t){for(var r=e(t),n=[];r&&r.length;)n[n.length]=r[0],r=e(r[1]);return n})),to=K(Dt(Hn,G));var ro=function(){function e(e,t){this.xf=t,this.pred=e,this.items=[]}return e.prototype["@@transducer/init"]=se.init,e.prototype["@@transducer/result"]=se.result,e.prototype["@@transducer/step"]=function(e,t){return zt(this.pred,t,this.items)?e:(this.items.push(t),this.xf["@@transducer/step"](e,t))},e}(),no=K(ne([],K((function(e,t){return new ro(e,t)})),(function(e,t){for(var r,n=0,i=t.length,s=[];n<i;)zt(e,r=t[n],s)||(s[s.length]=r),n+=1;return s})));const io=no,so=Y((function(e,t,r){return io(e,G(t,r))}));var ao=Y((function(e,t,r){return e(r)?r:t(r)}));const oo=ao,uo=_t(Lt),co=Y((function(e,t,r){for(var n=r;!e(n);)n=t(n);return n}));var lo=K((function(e,t){return e in t&&te(t[e])?ce((function(r){return st(e,r,t)}),t[e]):[t]}));const ho=lo,fo=$((function(e){var t,r=[];for(t in e)r[r.length]=e[t];return r}));var po=function(e){return{value:e,"fantasy-land/map":function(){return this}}},mo=K((function(e,t){return e(po)(t).value}));const go=mo;var yo=Y((function(e,t,r){return e(r)?t(r):r}));const vo=yo,_o=K((function(e,t){for(var r in e)if(Ae(r,e)&&!e[r](t[r]))return!1;return!0})),bo=K((function(e,t){for(var r in e)if(Ae(r,e)&&e[r](t[r]))return!0;return!1})),wo=K((function(e,t){return _o(Ne(Gt,e),t)})),Ao=K((function(e,t){return sr(vn(Wt)(e),t)})),Eo=K((function(e,t){return Boolean(!e^!t)})),ko=K((function(e,t){for(var r,n=0,i=e.length,s=t.length,a=[];n<i;){for(r=0;r<s;)a[a.length]=[e[n],t[r]],r+=1;n+=1}return a}));var xo=K((function(e,t){for(var r=[],n=0,i=Math.min(e.length,t.length);n<i;)r[n]=[e[n],t[n]],n+=1;return r}));const To=xo;var Po=K((function(e,t){for(var r=0,n=Math.min(e.length,t.length),i={};r<n;)i[e[r]]=t[r],r+=1;return i}));const So=Po;var Io=Y((function(e,t,r){for(var n=[],i=0,s=Math.min(t.length,r.length);i<s;)n[i]=e(t[i],r[i]),i+=1;return n}));const Oo=Io,Co=$((function(e){return J(e.length,(function(){var t=arguments;return function(){return e.apply(this,t)}}))})),No=Do({id:"log"});var Mo={};function Ro(e,t){Mo[e]=!0,No(`Suppressing ${e}, reason=${t||"none_given"}`)}function jo(e){Mo[e]=!1,No(`Unsuppressing ${e}`)}function Do(e){let{id:t}=e;return function(e){Mo[t]||("[object Object]"==e.toString()?(console.log(`[${t}]:: > `),console.log(e)):console.log(`[${t}]:: ${e}`))}}const Bo=Do({id:"fp"}),Lo=Q(Ne);function Uo(e,t){return Lo(((t,r)=>e(r,t)),t)}function Fo(e){return ec(e)?iu(e):nc(e)?Eu(e):e}function Zo(e){return Object.keys(e)}function qo(e){let t=Zo(e),r=Eu(e);return Du(t)?[]:vu(t,(e=>r[e]))}function zo(e){let t=Zo(e);return Du(t)?[]:vu(t,(t=>e[t]))}function $o(e,t){return Object.assign(Eu(e),t)}function Ko(e){return e.reduce($o,{})}function Ho(e,t){return e[t]}function Go(e,t,r){return e[t]=r,e}function Vo(e,t,r){let n=Eu(e);return n[t]=r,n}function Wo(e){return function(t){return t[e]}}function Jo(e,t){return function(r){return Go(r,e,t)}}function Qo(e,t){return function(r){return Go(r,e,t)}}function Yo(e){return nc(e)&&Mu(Ru(Zo(e)))}function Xo(e,t,r){for(var n=e,i=0;i<t.length-1;i++)n=n[i];let s=cu(t);return n[s]=r(n[s]),Eu(e)}function eu(e){return Hu(Zo(e),zo(e))}var tu=eu;function ru(e,t){let r=vu(zo(e),t);return Ju(Zo(e),r)}function nu(e,t=[]){let r=Oe(e),n=[];for(var i of r){let r=e[i];if(nc(r))nu(r,ur(t,[i])).map((e=>n.push(e)));else{let e=ur(t,[i]);n.push({value:r,path:e})}}return n}function iu(e){return JSON.parse(JSON.stringify(e))}function su(e){return e[0]}function au(e){return e[1]}function ou(e){return e[2]}function uu(e){return e[3]}function cu(e){return e[e.length-1]}function lu(e,t){return e[t]}function du(e){return function(t){return lu(t,e)}}function hu(e){return e.reduce(((e,t)=>e&&t))}function fu(e){return!Du(e)&&e.reduce(((e,t)=>e||t))}function pu(e){return!fu(e)}function mu(e){return!hu(e)}function gu(e,t){let r=[];for(var n of yu(t))r.push(Fo(e));return r}function yu(e,t=null){if(t){for(var r=Array(t-e).fill(0),n=0;n<r.length;n++)r[n]=n+e;return r}for(r=Array(e).fill(0),n=0;n<r.length;n++)r[n]=n;return r}function vu(e,t){return e.map(t)}function _u(e){return Uo(((e,t)=>[e,t]),e)}function bu(e,t){return Ne(je(e))(t)}function wu(e,t,r,n){return Be(t,r,bu(e,n))}function Au(e){let t=[],r=e[0].length,n=e.length;for(var i=0;i<r;i++){for(var s=new Array,a=0;a<n;a++)s.push(e[a][i]);t.push(s)}return t}function Eu(e){return JSON.parse(JSON.stringify(e))}function ku(e,t){let r=Eu(e);return r.push(t),r}function xu(e,t){return Eu(e).filter((e=>!(e==t)))}function Tu(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(r,n){return(r[e]<n[e]?-1:r[e]>n[e]?1:0)*t}}function Pu(e,t){let r=Math.ceil(e.length/t),n=Array(r).fill(null).map((e=>new Array)),i=0;for(var s=0;s<e.length;s++)s%t==0&&0!=s&&(i+=1),n[i].push(e[s]);return n}function Su(e,t){let r=[];for(var[n,i]of _u(e))r.push(t(n,i));return r}function Iu(e,t){return e.concat(t)}function Ou(e,t){return vu(e,Wo(t))}function Cu(e,t,r){return vu(e,Jo(t,r))}function Nu(e,t,r){return vu(e,Qo(t,r))}function Mu(e){return 0==e}function Ru(e){return e.length}function ju(e){return ec(e)&&Mu(Ru(e))}function Du(e){return Qu(e)||Yu(e)||ju(e)||ic(e)||Yo(e)}function Bu(e){return!Du(e)}function Lu(e,t){return e.filter(t)}function Uu(e,t,r){return Lu(e,(e=>r(Ho(e,t))))}function Fu(e,t,r){return Uu(e,t,(e=>e==r))}function Zu(e){return Lu(e,Bu)}function qu(e){return fu(vu(e,ec))}function zu(e){return e.flat()}function $u(e){return qu(e)?$u(zu(e)):e}function Ku(e){return Zu($u(e))}function Hu(e,t){let r=[];for(var n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}var Gu,Vu=Hu;function Wu(e){let t={};for(var[r,n]of e)t[r]=n;return t}function Ju(e,t){return Wu(Vu(e,t))}function Qu(e){return null==e}function Yu(e){return null==e}function Xu(e){return!(Qu(e)||Yu(e))}function ec(e){return Xu(e)&&e.constructor==Array}function tc(e){return Xu(e)&&e.constructor==String}function rc(e){return Xu(e)&&e.constructor==Object}function nc(e){return Xu(e)&&rc(e)&&!ec(e)}function ic(e){return""==e}function sc(e,t,r){return e.substring(t,r)}function ac(e,t){return sc(e,0,t)}function oc(e,t){return e.join(t)}function uc(e){return function(t){return oc(t,e)}}function cc(e,t){return e.split(t)}function lc(e,t){let r=iu(t),n=r.shift(),i=e;for(;n;)i=i.replace("{}",String(n)),n=r.shift();return i}function dc(e,t){return e+t}function hc(e,t){return e-t}function fc(e,t){return e*t}function pc(e,t){return e/t}function mc(e){return function(t){return t+e}}function gc(e){return function(t){return t-e}}function yc(e){return function(t){return t/e}}function vc(e){return function(t){return t*e}}function _c(e){let t=[];for(var r=1;r<e.length;r++)t.push(e[r]-e[r-1]);return t}function bc(e,t){return e==t}function wc(e,t){var r={attempt_ref:null};return n=>{r.attempt_ref&&clearTimeout(r.attempt_ref),r.attempt_ref=setTimeout((function(){t(n)}),e)}}function Ac(e,t){let r={},n=[];return Oe(e).map((i=>{try{r[i]=e[i](t)}catch(e){n.push(e),r[i]=null}})),n.length&&(Bo("Error while applying function to dictionary"),Bo(n),Bo(r)),r}async function Ec(e,t){let r={},n=[],i=Oe(e).map((async i=>{try{r[i]=await e[i](t)}catch(e){n.push(e),r[i]=null}}));return await Promise.all(i),n.length&&(Bo("Error while applying function to dictionary"),Bo(n),Bo(r)),r}!function(e){e[e.BUY=0]="BUY",e[e.SELL=1]="SELL"}(Gu||(Gu={}));class kc{constructor(e){this.Params=e,this.Logger=Do({id:e.logger_id}),this.last_balance_data={},this.log_mode="verbose",this.state={price_history:[],last_price:null,r:e.target_ratio},this.Params.alpha=this.Params.alpha||.01}log(e){this.Logger(e)}async balance_portfolio(){let{base_asset:e,quote_asset:t}=this.Params;"verbose"==this.log_mode&&this.log("Balancing...");let r=await this.get_balance_data(),{base_amt:n,quote_amt:i,base_price:s,portfolio_value:a,current_ratio:o,ratio_error:u,target_achieved:c,target_base_amt:l,base_delta:d,trade_type:h,base_market_amt:f}=r;if("verbose"==this.log_mode&&this.log(r),this.Params.adaptive&&this.state.last_price){let e=s-this.state.last_price,t=e=>Math.max(Math.min(1,e),0);this.state.r=t(this.state.r-this.Params.alpha*e),this.Params.target_ratio=this.state.r}if(this.state.last_price=s,this.state.price_history.push(s),c)return"verbose"==this.log_mode&&this.log("Target ratio already achieved. Returning"),{balanced:!1,balance_needed:!1,info:null};{"verbose"==this.log_mode&&(this.log("Target ratio NOT achieved. Continuing."),this.log(`Processing order to ${h} ${f} ${e}`));let t=await this.do_market_trade(h,f),{error:r,info:n}=t;return{balanced:!r,balance_needed:!0,info:n}}}async get_balance_data(){let{target_ratio:e,target_precision:t,quote_asset:r,base_asset:n}=this.Params,i=await this.get_base_balance(n),s=await this.get_quote_balance(r),a=await this.get_base_price(n,r),o=i*a+s,u=i*a/o,c=e-u,l=o*e/a,d=l-i,h={base_amt:i,quote_amt:s,base_price:a,portfolio_value:o,current_ratio:u,ratio_error:c,target_achieved:Math.abs(c)<t,target_ratio:e,target_precision:t,target_base_amt:l,base_delta:d,trade_type:d>=0?Gu.BUY:Gu.SELL,base_market_amt:Math.abs(d)};return this.last_balance_data=h,h}set_log_mode(e){"verbose"==this.log_mode&&(this.log(`Setting log mode to ${e}`),this.log_mode=e)}}class xc extends kc{constructor(e){super(e),this.data=e.data,this.current_index=-1,this.portfolio=Object.assign({},e.initial_portfolio),this.initial_portfolio=Object.assign({},e.initial_portfolio),this.rebalances=[],this.slippage=e.slippage,this.fee=e.fee,this.transactions_costs={fees:{base:0,quote:0},slippage:{base:0,quote:0}},this.balance_portfolio_series=[],this.hodl_portfolio_series=[],this.ratio_series=[]}async get_quote_balance(e){return this.portfolio.quote_balance}async get_base_balance(e){return this.portfolio.base_balance}async get_base_price(e,t){return this.data[this.current_index].p}async do_market_trade(e,t){let r=await this.get_base_price("",""),n=this.data[this.current_index];r!=n.p&&(this.log("Sanity check failed! - there is a problem with price indexing"),process.exit(1));let{p:i,t:s}=n;var a,o;switch(e){case Gu.BUY:a=t*(1-this.fee),o=-t*i*(1+this.slippage),this.transactions_costs.fees.base+=t*this.fee,this.transactions_costs.slippage.quote+=t*i*this.slippage;break;case Gu.SELL:a=-t,o=t*i*(1-this.fee)*(1-this.slippage),this.transactions_costs.fees.quote+=t*i*this.fee,this.transactions_costs.slippage.quote+=t*i*this.slippage}let u=this.portfolio.base_balance+=a,c=this.portfolio.quote_balance+=o;return this.portfolio={base_balance:u,quote_balance:c},this.rebalances.push({index:this.current_index,p:i,t:s,trade_type:e,base_amt:t,quote_amt:t*i,portfolio:this.get_portfolio_value_and_time(this.portfolio,i,s),hodl_portfolio:this.get_portfolio_value_and_time(this.initial_portfolio,i,s),cummulative_transactions_costs:{raw:Object.assign({},this.transactions_costs),values:this.get_transactions_costs_values(this.transactions_costs,i)}}),{error:!1,info:null}}symbol_generator(e,t){return"BACKTESTER"}async process_data(){this.current_index+=1,await this.balance_portfolio();let{p:e,t}=this.data[this.current_index];this.hodl_portfolio_series.push(this.get_portfolio_value_and_time(this.initial_portfolio,e,t)),this.balance_portfolio_series.push(this.get_portfolio_value_and_time(this.portfolio,e,t)),this.ratio_series.push(this.Params.target_ratio)}get_portfolio_value_and_time(e,t,r){let n=e.base_balance*t+e.quote_balance;return{base_balance:e.base_balance,quote_balance:e.quote_balance,value:n,p:t,t:r}}get_transactions_costs_values(e,t){let{fees:r,slippage:n}=e,i=r.base*t+r.quote,s=n.base*t+n.quote;return{fee_cost:i,slippage_cost:s,total:i+s}}async backtest(){this.log("Starting backtest...");let e=this.data.length;for(var t=0;t<e;t++)await this.process_data(),t%100==0&&this.log(`Progress = ${t}/${e}`);this.log("Done")}}let Tc=!1,Pc=!1;const Sc={debug:1,default:2,info:2,warning:3,error:4,off:5};let Ic=Sc.default,Oc=null;const Cc=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Nc,Mc;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Nc||(Nc={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Mc||(Mc={}));const Rc="0123456789abcdef";class jc{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Sc[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Ic>Sc[r]||console.log.apply(console,t)}debug(...e){this._log(jc.levels.DEBUG,e)}info(...e){this._log(jc.levels.INFO,e)}warn(...e){this._log(jc.levels.WARNING,e)}makeError(e,t,r){if(Pc)return this.makeError("censored error",t,{});t||(t=jc.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach((e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=Rc[t[e]>>4],r+=Rc[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(t){n.push(e+"="+JSON.stringify(r[e].toString()))}})),n.push(`code=${t}`),n.push(`version=${this.version}`);const i=e;let s="";switch(t){case Mc.NUMERIC_FAULT:{s="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":s+="-"+t;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result"}break}case Mc.CALL_EXCEPTION:case Mc.INSUFFICIENT_FUNDS:case Mc.MISSING_NEW:case Mc.NONCE_EXPIRED:case Mc.REPLACEMENT_UNDERPRICED:case Mc.TRANSACTION_REPLACED:case Mc.UNPREDICTABLE_GAS_LIMIT:s=t}s&&(e+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const a=new Error(e);return a.reason=i,a.code=t,Object.keys(r).forEach((function(e){a[e]=r[e]})),a}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,jc.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),Cc&&this.throwError("platform missing String.prototype.normalize",jc.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Cc})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,jc.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,jc.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,jc.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,jc.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",jc.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",jc.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",jc.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Oc||(Oc=new jc("logger/5.7.0")),Oc}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",jc.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Tc){if(!e)return;this.globalLogger().throwError("error censorship permanent",jc.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Pc=!!e,Tc=!!t}static setLogLevel(e){const t=Sc[e.toLowerCase()];null!=t?Ic=t:jc.globalLogger().warn("invalid log level - "+e)}static from(e){return new jc(e)}}jc.errors=Mc,jc.levels=Nc;const Dc=new jc("bytes/5.7.0");function Bc(e){return!!e.toHexString}function Lc(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Lc(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Uc(e){return Hc(e)&&!(e.length%2)||Zc(e)}function Fc(e){return"number"==typeof e&&e==e&&e%1==0}function Zc(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!Fc(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!Fc(r)||r<0||r>=256)return!1}return!0}function qc(e,t){if(t||(t={}),"number"==typeof e){Dc.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),Lc(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Bc(e)&&(e=e.toHexString()),Hc(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":Dc.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return Lc(new Uint8Array(n))}return Zc(e)?Lc(new Uint8Array(e)):Dc.throwArgumentError("invalid arrayify value","value",e)}function zc(e){const t=e.map((e=>qc(e))),r=t.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(r);return t.reduce(((e,t)=>(n.set(t,e),e+t.length)),0),Lc(n)}function $c(e){let t=qc(e);if(0===t.length)return t;let r=0;for(;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}function Kc(e,t){(e=qc(e)).length>t&&Dc.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(t);return r.set(e,t-e.length),Lc(r)}function Hc(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const Gc="0123456789abcdef";function Vc(e,t){if(t||(t={}),"number"==typeof e){Dc.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=Gc[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Bc(e))return e.toHexString();if(Hc(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Dc.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Zc(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=Gc[(240&n)>>4]+Gc[15&n]}return t}return Dc.throwArgumentError("invalid hexlify value","value",e)}function Wc(e){if("string"!=typeof e)e=Vc(e);else if(!Hc(e)||e.length%2)return null;return(e.length-2)/2}function Jc(e,t,r){return"string"!=typeof e?e=Vc(e):(!Hc(e)||e.length%2)&&Dc.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function Qc(e){let t="0x";return e.forEach((e=>{t+=Vc(e).substring(2)})),t}function Yc(e){const t=Xc(Vc(e,{hexPad:"left"}));return"0x"===t?"0x0":t}function Xc(e){"string"!=typeof e&&(e=Vc(e)),Hc(e)||Dc.throwArgumentError("invalid hex string","value",e),e=e.substring(2);let t=0;for(;t<e.length&&"0"===e[t];)t++;return"0x"+e.substring(t)}function el(e,t){for("string"!=typeof e?e=Vc(e):Hc(e)||Dc.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&Dc.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function tl(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Uc(e)){let r=qc(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=Vc(r.slice(0,32)),t.s=Vc(r.slice(32,64))):65===r.length?(t.r=Vc(r.slice(0,32)),t.s=Vc(r.slice(32,64)),t.v=r[64]):Dc.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:Dc.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=Vc(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){const r=Kc(qc(t._vs),32);t._vs=Vc(r);const n=r[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=n:t.recoveryParam!==n&&Dc.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;const i=Vc(r);null==t.s?t.s=i:t.s!==i&&Dc.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?Dc.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{const r=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==r&&Dc.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&Hc(t.r)?t.r=el(t.r,32):Dc.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&Hc(t.s)?t.s=el(t.s,32):Dc.throwArgumentError("signature missing or invalid s","signature",e);const r=qc(t.s);r[0]>=128&&Dc.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(r[0]|=128);const n=Vc(r);t._vs&&(Hc(t._vs)||Dc.throwArgumentError("signature invalid _vs","signature",e),t._vs=el(t._vs,32)),null==t._vs?t._vs=n:t._vs!==n&&Dc.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function rl(e){return Vc(zc([(e=tl(e)).r,e.s,e.recoveryParam?"0x1c":"0x1b"]))}var nl=i(2197),il=i.n(nl);const sl="bignumber/5.7.0";var al=il().BN;const ol=new jc(sl),ul={},cl=9007199254740991;let ll=!1;class dl{constructor(e,t){e!==ul&&ol.throwError("cannot call constructor directly; use BigNumber.from",jc.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return fl(pl(this).fromTwos(e))}toTwos(e){return fl(pl(this).toTwos(e))}abs(){return"-"===this._hex[0]?dl.from(this._hex.substring(1)):this}add(e){return fl(pl(this).add(pl(e)))}sub(e){return fl(pl(this).sub(pl(e)))}div(e){return dl.from(e).isZero()&&ml("division-by-zero","div"),fl(pl(this).div(pl(e)))}mul(e){return fl(pl(this).mul(pl(e)))}mod(e){const t=pl(e);return t.isNeg()&&ml("division-by-zero","mod"),fl(pl(this).umod(t))}pow(e){const t=pl(e);return t.isNeg()&&ml("negative-power","pow"),fl(pl(this).pow(t))}and(e){const t=pl(e);return(this.isNegative()||t.isNeg())&&ml("unbound-bitwise-result","and"),fl(pl(this).and(t))}or(e){const t=pl(e);return(this.isNegative()||t.isNeg())&&ml("unbound-bitwise-result","or"),fl(pl(this).or(t))}xor(e){const t=pl(e);return(this.isNegative()||t.isNeg())&&ml("unbound-bitwise-result","xor"),fl(pl(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&ml("negative-width","mask"),fl(pl(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&ml("negative-width","shl"),fl(pl(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&ml("negative-width","shr"),fl(pl(this).shrn(e))}eq(e){return pl(this).eq(pl(e))}lt(e){return pl(this).lt(pl(e))}lte(e){return pl(this).lte(pl(e))}gt(e){return pl(this).gt(pl(e))}gte(e){return pl(this).gte(pl(e))}isNegative(){return"-"===this._hex[0]}isZero(){return pl(this).isZero()}toNumber(){try{return pl(this).toNumber()}catch(e){ml("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return ol.throwError("this platform does not support BigInt",jc.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?ll||(ll=!0,ol.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?ol.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",jc.errors.UNEXPECTED_ARGUMENT,{}):ol.throwError("BigNumber.toString does not accept parameters",jc.errors.UNEXPECTED_ARGUMENT,{})),pl(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof dl)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new dl(ul,hl(e)):e.match(/^-?[0-9]+$/)?new dl(ul,hl(new al(e))):ol.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&ml("underflow","BigNumber.from",e),(e>=cl||e<=-cl)&&ml("overflow","BigNumber.from",e),dl.from(String(e));const t=e;if("bigint"==typeof t)return dl.from(t.toString());if(Zc(t))return dl.from(Vc(t));if(t)if(t.toHexString){const e=t.toHexString();if("string"==typeof e)return dl.from(e)}else{let e=t._hex;if(null==e&&"BigNumber"===t.type&&(e=t.hex),"string"==typeof e&&(Hc(e)||"-"===e[0]&&Hc(e.substring(1))))return dl.from(e)}return ol.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function hl(e){if("string"!=typeof e)return hl(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&ol.throwArgumentError("invalid hex","value",e),"0x00"===(e=hl(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function fl(e){return dl.from(hl(e))}function pl(e){const t=dl.from(e).toHexString();return"-"===t[0]?new al("-"+t.substring(3),16):new al(t.substring(2),16)}function ml(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),ol.throwError(e,jc.errors.NUMERIC_FAULT,n)}var gl=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}u((n=n.apply(e,t||[])).next())}))};const yl=new jc("properties/5.7.0");function vl(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function _l(e,t){for(let r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||"object"!=typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function bl(e){return gl(this,void 0,void 0,(function*(){const t=Object.keys(e).map((t=>{const r=e[t];return Promise.resolve(r).then((e=>({key:t,value:e})))}));return(yield Promise.all(t)).reduce(((e,t)=>(e[t.key]=t.value,e)),{})}))}function wl(e,t){e&&"object"==typeof e||yl.throwArgumentError("invalid object","object",e),Object.keys(e).forEach((r=>{t[r]||yl.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)}))}function Al(e){const t={};for(const r in e)t[r]=e[r];return t}const El={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function kl(e){if(null==e||El[typeof e])return!0;if(Array.isArray(e)||"object"==typeof e){if(!Object.isFrozen(e))return!1;const t=Object.keys(e);for(let r=0;r<t.length;r++){let n=null;try{n=e[t[r]]}catch(e){continue}if(!kl(n))return!1}return!0}return yl.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function xl(e){if(kl(e))return e;if(Array.isArray(e))return Object.freeze(e.map((e=>Tl(e))));if("object"==typeof e){const t={};for(const r in e){const n=e[r];void 0!==n&&vl(t,r,Tl(n))}return t}return yl.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function Tl(e){return xl(e)}class Pl{constructor(e){for(const t in e)this[t]=Tl(e[t])}}const Sl="abi/5.7.0",Il=new jc(Sl);function Ol(e){const t=[],r=function(e,n){if(Array.isArray(n))for(let i in n){const s=e.slice();s.push(i);try{r(s,n[i])}catch(e){t.push({path:s,error:e})}}};return r([],e),t}class Cl{constructor(e,t,r,n){this.name=e,this.type=t,this.localName=r,this.dynamic=n}_throwError(e,t){Il.throwArgumentError(e,this.localName,t)}}class Nl{constructor(e){vl(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Qc(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(zc(e._data))}writeBytes(e){let t=qc(e);const r=t.length%this.wordSize;return r&&(t=zc([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=qc(dl.from(e));return t.length>this.wordSize&&Il.throwError("value out-of-bounds",jc.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=zc([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class Ml{constructor(e,t,r,n){vl(this,"_data",qc(e)),vl(this,"wordSize",t||32),vl(this,"_coerceFunc",r),vl(this,"allowLoose",n),this._offset=0}get data(){return Vc(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):Ml.coerce(e,t)}_peekBytes(e,t,r){let n=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?n=t:Il.throwError("data out-of-bounds",jc.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(e){return new Ml(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return dl.from(this.readBytes(this.wordSize))}}var Rl=i(3669),jl=i.n(Rl);function Dl(e){return"0x"+jl().keccak_256(qc(e))}const Bl=new jc("rlp/5.7.0");function Ll(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function Ul(e,t,r){let n=0;for(let i=0;i<r;i++)n=256*n+e[t+i];return n}function Fl(e){if(Array.isArray(e)){let t=[];if(e.forEach((function(e){t=t.concat(Fl(e))})),t.length<=55)return t.unshift(192+t.length),t;const r=Ll(t.length);return r.unshift(247+r.length),r.concat(t)}Uc(e)||Bl.throwArgumentError("RLP object must be BytesLike","object",e);const t=Array.prototype.slice.call(qc(e));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const r=Ll(t.length);return r.unshift(183+r.length),r.concat(t)}function Zl(e){return Vc(Fl(e))}function ql(e,t,r,n){const i=[];for(;r<t+1+n;){const s=zl(e,r);i.push(s.result),(r+=s.consumed)>t+1+n&&Bl.throwError("child data too short",jc.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function zl(e,t){if(0===e.length&&Bl.throwError("data too short",jc.errors.BUFFER_OVERRUN,{}),e[t]>=248){const r=e[t]-247;t+1+r>e.length&&Bl.throwError("data short segment too short",jc.errors.BUFFER_OVERRUN,{});const n=Ul(e,t+1,r);return t+1+r+n>e.length&&Bl.throwError("data long segment too short",jc.errors.BUFFER_OVERRUN,{}),ql(e,t,t+1+r,r+n)}if(e[t]>=192){const r=e[t]-192;return t+1+r>e.length&&Bl.throwError("data array too short",jc.errors.BUFFER_OVERRUN,{}),ql(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;t+1+r>e.length&&Bl.throwError("data array too short",jc.errors.BUFFER_OVERRUN,{});const n=Ul(e,t+1,r);return t+1+r+n>e.length&&Bl.throwError("data array too short",jc.errors.BUFFER_OVERRUN,{}),{consumed:1+r+n,result:Vc(e.slice(t+1+r,t+1+r+n))}}if(e[t]>=128){const r=e[t]-128;return t+1+r>e.length&&Bl.throwError("data too short",jc.errors.BUFFER_OVERRUN,{}),{consumed:1+r,result:Vc(e.slice(t+1,t+1+r))}}return{consumed:1,result:Vc(e[t])}}function $l(e){const t=qc(e),r=zl(t,0);return r.consumed!==t.length&&Bl.throwArgumentError("invalid rlp data","data",e),r.result}const Kl=new jc("address/5.7.0");function Hl(e){Hc(e,20)||Kl.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);const n=qc(Dl(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}const Gl={};for(let e=0;e<10;e++)Gl[String(e)]=String(e);for(let e=0;e<26;e++)Gl[String.fromCharCode(65+e)]=String(10+e);const Vl=Math.floor((Wl=9007199254740991,Math.log10?Math.log10(Wl):Math.log(Wl)/Math.LN10));var Wl;function Jl(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((e=>Gl[e])).join("");for(;t.length>=Vl;){let e=t.substring(0,Vl);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}function Ql(e){let t=null;if("string"!=typeof e&&Kl.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=Hl(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&Kl.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==Jl(e)&&Kl.throwArgumentError("bad icap checksum","address",e),r=e.substring(4),t=new al(r,36).toString(16);t.length<40;)t="0"+t;t=Hl("0x"+t)}else Kl.throwArgumentError("invalid address","address",e);var r;return t}function Yl(e){try{return Ql(e),!0}catch(e){}return!1}function Xl(e){let t=(r=Ql(e).substring(2),new al(r,16).toString(36)).toUpperCase();for(var r;t.length<30;)t="0"+t;return"XE"+Jl("XE00"+t)+t}function ed(e){let t=null;try{t=Ql(e.from)}catch(t){Kl.throwArgumentError("missing from address","transaction",e)}return Ql(Jc(Dl(Zl([t,$c(qc(dl.from(e.nonce).toHexString()))])),12))}function td(e,t,r){return 32!==Wc(t)&&Kl.throwArgumentError("salt must be 32 bytes","salt",t),32!==Wc(r)&&Kl.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),Ql(Jc(Dl(zc(["0xff",Ql(e),t,r])),12))}const rd=new jc("strings/5.7.0");var nd,id;function sd(e,t,r,n,i){if(e===id.BAD_PREFIX||e===id.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return e===id.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(nd||(nd={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(id||(id={}));const ad=Object.freeze({error:function(e,t,r,n,i){return rd.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:sd,replace:function(e,t,r,n,i){return e===id.OVERLONG?(n.push(i),0):(n.push(65533),sd(e,t,r))}});function od(e,t){null==t&&(t=ad.error),e=qc(e);const r=[];let n=0;for(;n<e.length;){const i=e[n++];if(i>>7==0){r.push(i);continue}let s=null,a=null;if(192==(224&i))s=1,a=127;else if(224==(240&i))s=2,a=2047;else{if(240!=(248&i)){n+=t(128==(192&i)?id.UNEXPECTED_CONTINUE:id.BAD_PREFIX,n-1,e,r);continue}s=3,a=65535}if(n-1+s>=e.length){n+=t(id.OVERRUN,n-1,e,r);continue}let o=i&(1<<8-s-1)-1;for(let i=0;i<s;i++){let i=e[n];if(128!=(192&i)){n+=t(id.MISSING_CONTINUE,n,e,r),o=null;break}o=o<<6|63&i,n++}null!==o&&(o>1114111?n+=t(id.OUT_OF_RANGE,n-1-s,e,r,o):o>=55296&&o<=57343?n+=t(id.UTF16_SURROGATE,n-1-s,e,r,o):o<=a?n+=t(id.OVERLONG,n-1-s,e,r,o):r.push(o))}return r}function ud(e,t=nd.current){t!=nd.current&&(rd.checkNormalize(),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){const n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){t++;const i=e.charCodeAt(t);if(t>=e.length||56320!=(64512&i))throw new Error("invalid utf-8 string");const s=65536+((1023&n)<<10)+(1023&i);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(63&s|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return qc(r)}function cd(e){const t="0000"+e.toString(16);return"\\u"+t.substring(t.length-4)}function ld(e,t){return'"'+od(e,t).map((e=>{if(e<256){switch(e){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(e>=32&&e<127)return String.fromCharCode(e)}return e<=65535?cd(e):cd(55296+((e-=65536)>>10&1023))+cd(56320+(1023&e))})).join("")+'"'}function dd(e){return e.map((e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e))))).join("")}function hd(e,t){return dd(od(e,t))}function fd(e,t=nd.current){return od(ud(e,t))}function pd(e){return Dl(ud(e))}class md extends Cl{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=Ql(t)}catch(e){this._throwError(e.message,t)}return e.writeValue(t)}decode(e){return Ql(el(e.readValue().toHexString(),20))}}class gd extends Cl{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const yd=new jc(Sl);function vd(e,t,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let e={};n=t.map((t=>{const n=t.localName;return n||yd.throwError("cannot encode object for signature with missing names",jc.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]&&yd.throwError("cannot encode object for signature with duplicate names",jc.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]=!0,r[n]}))}else yd.throwArgumentError("invalid tuple value","tuple",r);t.length!==n.length&&yd.throwArgumentError("types/value length mismatch","tuple",r);let i=new Nl(e.wordSize),s=new Nl(e.wordSize),a=[];t.forEach(((e,t)=>{let r=n[t];if(e.dynamic){let t=s.length;e.encode(s,r);let n=i.writeUpdatableValue();a.push((e=>{n(e+t)}))}else e.encode(i,r)})),a.forEach((e=>{e(i.length)}));let o=e.appendWriter(i);return o+=e.appendWriter(s),o}function _d(e,t){let r=[],n=e.subReader(0);t.forEach((t=>{let i=null;if(t.dynamic){let r=e.readValue(),s=n.subReader(r.toNumber());try{i=t.decode(s)}catch(e){if(e.code===jc.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(e){if(e.code===jc.errors.BUFFER_OVERRUN)throw e;i=e,i.baseType=t.name,i.name=t.localName,i.type=t.type}null!=i&&r.push(i)}));const i=t.reduce(((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e}),{});t.forEach(((e,t)=>{let n=e.localName;if(!n||1!==i[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const s=r[t];s instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:()=>{throw s}}):r[n]=s}));for(let e=0;e<r.length;e++){const t=r[e];t instanceof Error&&Object.defineProperty(r,e,{enumerable:!0,get:()=>{throw t}})}return Object.freeze(r)}class bd extends Cl{constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;-1===r&&(r=t.length,e.writeValue(t.length)),yd.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let e=0;e<t.length;e++)n.push(this.coder);return vd(e,n,t)}decode(e){let t=this.length;-1===t&&(t=e.readValue().toNumber(),32*t>e._data.length&&yd.throwError("insufficient data length",jc.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let e=0;e<t;e++)r.push(new gd(this.coder));return e.coerce(this.name,_d(e,r))}}class wd extends Cl{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Ad extends Cl{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=qc(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class Ed extends Ad{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,Vc(super.decode(e)))}}class kd extends Cl{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=qc(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,Vc(e.readBytes(this.size)))}}class xd extends Cl{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const Td=dl.from(-1),Pd=dl.from(0),Sd=dl.from(1),Id=dl.from(2),Od=dl.from("1000000000000000000"),Cd=dl.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Nd=dl.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),Md=dl.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Rd extends Cl{constructor(e,t,r){const n=(t?"int":"uint")+8*e;super(n,n,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=dl.from(t),n=Cd.mask(8*e.wordSize);if(this.signed){let e=n.mask(8*this.size-1);(r.gt(e)||r.lt(e.add(Sd).mul(Td)))&&this._throwError("value out-of-bounds",t)}else(r.lt(Pd)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}class jd extends Ad{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,ud(t))}decode(e){return hd(super.decode(e))}}class Dd extends Cl{constructor(e,t){let r=!1;const n=[];e.forEach((e=>{e.dynamic&&(r=!0),n.push(e.type)})),super("tuple","tuple("+n.join(",")+")",t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach((t=>{e.push(t.defaultValue())}));const t=this.coders.reduce(((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e}),{});return this.coders.forEach(((r,n)=>{let i=r.localName;i&&1===t[i]&&("length"===i&&(i="_length"),null==e[i]&&(e[i]=e[n]))})),Object.freeze(e)}encode(e,t){return vd(e,this.coders,t)}decode(e){return e.coerce(this.name,_d(e,this.coders))}}const Bd=new jc(Sl),Ld={};let Ud={calldata:!0,memory:!0,storage:!0},Fd={calldata:!0,memory:!0};function Zd(e,t){if("bytes"===e||"string"===e){if(Ud[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&Fd[t])return!0;return(Ud[t]||"payable"===t)&&Bd.throwArgumentError("invalid modifier","name",t),!1}function qd(e,t){for(let r in t)vl(e,r,t[r])}const zd=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),$d=new RegExp(/^(.*)\[([0-9]*)\]$/);class Kd{constructor(e,t){e!==Ld&&Bd.throwError("use fromString",jc.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),qd(this,t);let r=this.type.match($d);qd(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:Kd.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=zd.sighash),zd[e]||Bd.throwArgumentError("invalid format type","format",e),e===zd.json){let t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map((t=>JSON.parse(t.format(e))))),JSON.stringify(t)}let t="";return"array"===this.baseType?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==zd.sighash&&(t+=this.type),t+="("+this.components.map((t=>t.format(e))).join(e===zd.full?", ":",")+")"):t+=this.type,e!==zd.sighash&&(!0===this.indexed&&(t+=" indexed"),e===zd.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return"string"==typeof e?Kd.fromString(e,t):Kd.fromObject(e)}static fromObject(e){return Kd.isParamType(e)?e:new Kd(Ld,{name:e.name||null,type:rh(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(Kd.fromObject):null})}static fromString(e,t){return r=function(e,t){let r=e;function n(t){Bd.throwArgumentError(`unexpected character at position ${t}`,"param",e)}function i(e){let r={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(r.indexed=!1),r}e=e.replace(/\s/g," ");let s={type:"",name:"",state:{allowType:!0}},a=s;for(let r=0;r<e.length;r++){let s=e[r];switch(s){case"(":a.state.allowType&&""===a.type?a.type="tuple":a.state.allowParams||n(r),a.state.allowType=!1,a.type=rh(a.type),a.components=[i(a)],a=a.components[0];break;case")":delete a.state,"indexed"===a.name&&(t||n(r),a.indexed=!0,a.name=""),Zd(a.type,a.name)&&(a.name=""),a.type=rh(a.type);let e=a;a=a.parent,a||n(r),delete e.parent,a.state.allowParams=!1,a.state.allowName=!0,a.state.allowArray=!0;break;case",":delete a.state,"indexed"===a.name&&(t||n(r),a.indexed=!0,a.name=""),Zd(a.type,a.name)&&(a.name=""),a.type=rh(a.type);let o=i(a.parent);a.parent.components.push(o),delete a.parent,a=o;break;case" ":a.state.allowType&&""!==a.type&&(a.type=rh(a.type),delete a.state.allowType,a.state.allowName=!0,a.state.allowParams=!0),a.state.allowName&&""!==a.name&&("indexed"===a.name?(t||n(r),a.indexed&&n(r),a.indexed=!0,a.name=""):Zd(a.type,a.name)?a.name="":a.state.allowName=!1);break;case"[":a.state.allowArray||n(r),a.type+=s,a.state.allowArray=!1,a.state.allowName=!1,a.state.readArray=!0;break;case"]":a.state.readArray||n(r),a.type+=s,a.state.readArray=!1,a.state.allowArray=!0,a.state.allowName=!0;break;default:a.state.allowType?(a.type+=s,a.state.allowParams=!0,a.state.allowArray=!0):a.state.allowName?(a.name+=s,delete a.state.allowArray):a.state.readArray?a.type+=s:n(r)}}return a.parent&&Bd.throwArgumentError("unexpected eof","param",e),delete s.state,"indexed"===a.name?(t||n(r.length-7),a.indexed&&n(r.length-7),a.indexed=!0,a.name=""):Zd(a.type,a.name)&&(a.name=""),s.type=rh(s.type),s}(e,!!t),Kd.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(e){return!(null==e||!e._isParamType)}}function Hd(e,t){return function(e){e=e.trim();let t=[],r="",n=0;for(let i=0;i<e.length;i++){let s=e[i];","===s&&0===n?(t.push(r),r=""):(r+=s,"("===s?n++:")"===s&&(n--,-1===n&&Bd.throwArgumentError("unbalanced parenthesis","value",e)))}return r&&t.push(r),t}(e).map((e=>Kd.fromString(e,t)))}class Gd{constructor(e,t){e!==Ld&&Bd.throwError("use a static from method",jc.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),qd(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return Gd.isFragment(e)?e:"string"==typeof e?Gd.fromString(e):Gd.fromObject(e)}static fromObject(e){if(Gd.isFragment(e))return e;switch(e.type){case"function":return Xd.fromObject(e);case"event":return Vd.fromObject(e);case"constructor":return Yd.fromObject(e);case"error":return th.fromObject(e);case"fallback":case"receive":return null}return Bd.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return"event"===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?Vd.fromString(e.substring(5).trim()):"function"===e.split(" ")[0]?Xd.fromString(e.substring(8).trim()):"constructor"===e.split("(")[0].trim()?Yd.fromString(e.trim()):"error"===e.split(" ")[0]?th.fromString(e.substring(5).trim()):Bd.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!(!e||!e._isFragment)}}class Vd extends Gd{format(e){if(e||(e=zd.sighash),zd[e]||Bd.throwArgumentError("invalid format type","format",e),e===zd.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==zd.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===zd.full?", ":",")+") ",e!==zd.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return"string"==typeof e?Vd.fromString(e):Vd.fromObject(e)}static fromObject(e){if(Vd.isEventFragment(e))return e;"event"!==e.type&&Bd.throwArgumentError("invalid event object","value",e);const t={name:ih(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Kd.fromObject):[],type:"event"};return new Vd(Ld,t)}static fromString(e){let t=e.match(sh);t||Bd.throwArgumentError("invalid event string","value",e);let r=!1;return t[3].split(" ").forEach((e=>{switch(e.trim()){case"anonymous":r=!0;break;case"":break;default:Bd.warn("unknown modifier: "+e)}})),Vd.fromObject({name:t[1].trim(),anonymous:r,inputs:Hd(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&"event"===e.type}}function Wd(e,t){t.gas=null;let r=e.split("@");return 1!==r.length?(r.length>2&&Bd.throwArgumentError("invalid human-readable ABI signature","value",e),r[1].match(/^[0-9]+$/)||Bd.throwArgumentError("invalid human-readable ABI signature gas","value",e),t.gas=dl.from(r[1]),r[0]):e}function Jd(e,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",e.split(" ").forEach((e=>{switch(e.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}}))}function Qd(e){let t={constant:!1,payable:!0,stateMutability:"payable"};return null!=e.stateMutability?(t.stateMutability=e.stateMutability,t.constant="view"===t.stateMutability||"pure"===t.stateMutability,null!=e.constant&&!!e.constant!==t.constant&&Bd.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e),t.payable="payable"===t.stateMutability,null!=e.payable&&!!e.payable!==t.payable&&Bd.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)):null!=e.payable?(t.payable=!!e.payable,null!=e.constant||t.payable||"constructor"===e.type||Bd.throwArgumentError("unable to determine stateMutability","value",e),t.constant=!!e.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&Bd.throwArgumentError("cannot have constant payable function","value",e)):null!=e.constant?(t.constant=!!e.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):"constructor"!==e.type&&Bd.throwArgumentError("unable to determine stateMutability","value",e),t}class Yd extends Gd{format(e){if(e||(e=zd.sighash),zd[e]||Bd.throwArgumentError("invalid format type","format",e),e===zd.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});e===zd.sighash&&Bd.throwError("cannot format a constructor for sighash",jc.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map((t=>t.format(e))).join(e===zd.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "),t.trim()}static from(e){return"string"==typeof e?Yd.fromString(e):Yd.fromObject(e)}static fromObject(e){if(Yd.isConstructorFragment(e))return e;"constructor"!==e.type&&Bd.throwArgumentError("invalid constructor object","value",e);let t=Qd(e);t.constant&&Bd.throwArgumentError("constructor cannot be constant","value",e);const r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Kd.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?dl.from(e.gas):null};return new Yd(Ld,r)}static fromString(e){let t={type:"constructor"},r=(e=Wd(e,t)).match(sh);return r&&"constructor"===r[1].trim()||Bd.throwArgumentError("invalid constructor string","value",e),t.inputs=Hd(r[2].trim(),!1),Jd(r[3].trim(),t),Yd.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&"constructor"===e.type}}class Xd extends Yd{format(e){if(e||(e=zd.sighash),zd[e]||Bd.throwArgumentError("invalid format type","format",e),e===zd.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((t=>JSON.parse(t.format(e)))),outputs:this.outputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==zd.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===zd.full?", ":",")+") ",e!==zd.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map((t=>t.format(e))).join(", ")+") "),null!=this.gas&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return"string"==typeof e?Xd.fromString(e):Xd.fromObject(e)}static fromObject(e){if(Xd.isFunctionFragment(e))return e;"function"!==e.type&&Bd.throwArgumentError("invalid function object","value",e);let t=Qd(e);const r={type:e.type,name:ih(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(Kd.fromObject):[],outputs:e.outputs?e.outputs.map(Kd.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?dl.from(e.gas):null};return new Xd(Ld,r)}static fromString(e){let t={type:"function"},r=(e=Wd(e,t)).split(" returns ");r.length>2&&Bd.throwArgumentError("invalid function string","value",e);let n=r[0].match(sh);if(n||Bd.throwArgumentError("invalid function signature","value",e),t.name=n[1].trim(),t.name&&ih(t.name),t.inputs=Hd(n[2],!1),Jd(n[3].trim(),t),r.length>1){let n=r[1].match(sh);""==n[1].trim()&&""==n[3].trim()||Bd.throwArgumentError("unexpected tokens","value",e),t.outputs=Hd(n[2],!1)}else t.outputs=[];return Xd.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&"function"===e.type}}function eh(e){const t=e.format();return"Error(string)"!==t&&"Panic(uint256)"!==t||Bd.throwArgumentError(`cannot specify user defined ${t} error`,"fragment",e),e}class th extends Gd{format(e){if(e||(e=zd.sighash),zd[e]||Bd.throwArgumentError("invalid format type","format",e),e===zd.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((t=>JSON.parse(t.format(e))))});let t="";return e!==zd.sighash&&(t+="error "),t+=this.name+"("+this.inputs.map((t=>t.format(e))).join(e===zd.full?", ":",")+") ",t.trim()}static from(e){return"string"==typeof e?th.fromString(e):th.fromObject(e)}static fromObject(e){if(th.isErrorFragment(e))return e;"error"!==e.type&&Bd.throwArgumentError("invalid error object","value",e);const t={type:e.type,name:ih(e.name),inputs:e.inputs?e.inputs.map(Kd.fromObject):[]};return eh(new th(Ld,t))}static fromString(e){let t={type:"error"},r=e.match(sh);return r||Bd.throwArgumentError("invalid error signature","value",e),t.name=r[1].trim(),t.name&&ih(t.name),t.inputs=Hd(r[2],!1),eh(th.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&"error"===e.type}}function rh(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}const nh=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function ih(e){return e&&e.match(nh)||Bd.throwArgumentError(`invalid identifier "${e}"`,"value",e),e}const sh=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),ah=new jc(Sl),oh=new RegExp(/^bytes([0-9]*)$/),uh=new RegExp(/^(u?int)([0-9]*)$/);class ch{constructor(e){vl(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new md(e.name);case"bool":return new wd(e.name);case"string":return new jd(e.name);case"bytes":return new Ed(e.name);case"array":return new bd(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Dd((e.components||[]).map((e=>this._getCoder(e))),e.name);case"":return new xd(e.name)}let t=e.type.match(uh);if(t){let r=parseInt(t[2]||"256");return(0===r||r>256||r%8!=0)&&ah.throwArgumentError("invalid "+t[1]+" bit length","param",e),new Rd(r/8,"int"===t[1],e.name)}if(t=e.type.match(oh),t){let r=parseInt(t[1]);return(0===r||r>32)&&ah.throwArgumentError("invalid bytes length","param",e),new kd(r,e.name)}return ah.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new Ml(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new Nl(this._getWordSize())}getDefaultValue(e){const t=e.map((e=>this._getCoder(Kd.from(e))));return new Dd(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&ah.throwError("types/values length mismatch",jc.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map((e=>this._getCoder(Kd.from(e)))),n=new Dd(r,"_"),i=this._getWriter();return n.encode(i,t),i.data}decode(e,t,r){const n=e.map((e=>this._getCoder(Kd.from(e))));return new Dd(n,"_").decode(this._getReader(qc(t),r))}}const lh=new ch,dh=new jc(Sl);class hh extends Pl{}class fh extends Pl{}class ph extends Pl{}class mh extends Pl{static isIndexed(e){return!(!e||!e._isIndexed)}}const gh={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function yh(e,t){const r=new Error(`deferred error during ABI decoding triggered accessing ${e}`);return r.error=t,r}class vh{constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,vl(this,"fragments",t.map((e=>Gd.from(e))).filter((e=>null!=e))),vl(this,"_abiCoder",_l(new.target,"getAbiCoder")()),vl(this,"functions",{}),vl(this,"errors",{}),vl(this,"events",{}),vl(this,"structs",{}),this.fragments.forEach((e=>{let t=null;switch(e.type){case"constructor":return this.deploy?void dh.warn("duplicate definition - constructor"):void vl(this,"deploy",e);case"function":t=this.functions;break;case"event":t=this.events;break;case"error":t=this.errors;break;default:return}let r=e.format();t[r]?dh.warn("duplicate definition - "+r):t[r]=e})),this.deploy||vl(this,"deploy",Yd.from({payable:!1,type:"constructor"})),vl(this,"_isInterface",!0)}format(e){e||(e=zd.full),e===zd.sighash&&dh.throwArgumentError("interface does not support formatting sighash","format",e);const t=this.fragments.map((t=>t.format(e)));return e===zd.json?JSON.stringify(t.map((e=>JSON.parse(e)))):t}static getAbiCoder(){return lh}static getAddress(e){return Ql(e)}static getSighash(e){return Jc(pd(e.format()),0,4)}static getEventTopic(e){return pd(e.format())}getFunction(e){if(Hc(e)){for(const t in this.functions)if(e===this.getSighash(t))return this.functions[t];dh.throwArgumentError("no matching function","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),r=Object.keys(this.functions).filter((e=>e.split("(")[0]===t));return 0===r.length?dh.throwArgumentError("no matching function","name",t):r.length>1&&dh.throwArgumentError("multiple matching functions","name",t),this.functions[r[0]]}const t=this.functions[Xd.fromString(e).format()];return t||dh.throwArgumentError("no matching function","signature",e),t}getEvent(e){if(Hc(e)){const t=e.toLowerCase();for(const e in this.events)if(t===this.getEventTopic(e))return this.events[e];dh.throwArgumentError("no matching event","topichash",t)}if(-1===e.indexOf("(")){const t=e.trim(),r=Object.keys(this.events).filter((e=>e.split("(")[0]===t));return 0===r.length?dh.throwArgumentError("no matching event","name",t):r.length>1&&dh.throwArgumentError("multiple matching events","name",t),this.events[r[0]]}const t=this.events[Vd.fromString(e).format()];return t||dh.throwArgumentError("no matching event","signature",e),t}getError(e){if(Hc(e)){const t=_l(this.constructor,"getSighash");for(const r in this.errors)if(e===t(this.errors[r]))return this.errors[r];dh.throwArgumentError("no matching error","sighash",e)}if(-1===e.indexOf("(")){const t=e.trim(),r=Object.keys(this.errors).filter((e=>e.split("(")[0]===t));return 0===r.length?dh.throwArgumentError("no matching error","name",t):r.length>1&&dh.throwArgumentError("multiple matching errors","name",t),this.errors[r[0]]}const t=this.errors[Xd.fromString(e).format()];return t||dh.throwArgumentError("no matching error","signature",e),t}getSighash(e){if("string"==typeof e)try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch(e){throw t}}return _l(this.constructor,"getSighash")(e)}getEventTopic(e){return"string"==typeof e&&(e=this.getEvent(e)),_l(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){"string"==typeof e&&(e=this.getError(e));const r=qc(t);return Vc(r.slice(0,4))!==this.getSighash(e)&&dh.throwArgumentError(`data signature does not match error ${e.name}.`,"data",Vc(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){return"string"==typeof e&&(e=this.getError(e)),Vc(zc([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){"string"==typeof e&&(e=this.getFunction(e));const r=qc(t);return Vc(r.slice(0,4))!==this.getSighash(e)&&dh.throwArgumentError(`data signature does not match function ${e.name}.`,"data",Vc(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){return"string"==typeof e&&(e=this.getFunction(e)),Vc(zc([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){"string"==typeof e&&(e=this.getFunction(e));let r=qc(t),n=null,i="",s=null,a=null,o=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch(e){}break;case 4:{const t=Vc(r.slice(0,4)),u=gh[t];if(u)s=this._abiCoder.decode(u.inputs,r.slice(4)),a=u.name,o=u.signature,u.reason&&(n=s[0]),"Error"===a?i=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(s[0])}`:"Panic"===a&&(i=`; VM Exception while processing transaction: reverted with panic code ${s[0]}`);else try{const e=this.getError(t);s=this._abiCoder.decode(e.inputs,r.slice(4)),a=e.name,o=e.format()}catch(e){}break}}return dh.throwError("call revert exception"+i,jc.errors.CALL_EXCEPTION,{method:e.format(),data:Vc(t),errorArgs:s,errorName:a,errorSignature:o,reason:n})}encodeFunctionResult(e,t){return"string"==typeof e&&(e=this.getFunction(e)),Vc(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){"string"==typeof e&&(e=this.getEvent(e)),t.length>e.inputs.length&&dh.throwError("too many arguments for "+e.format(),jc.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let r=[];e.anonymous||r.push(this.getEventTopic(e));const n=(e,t)=>"string"===e.type?pd(t):"bytes"===e.type?Dl(Vc(t)):("bool"===e.type&&"boolean"==typeof t&&(t=t?"0x01":"0x00"),e.type.match(/^u?int/)&&(t=dl.from(t).toHexString()),"address"===e.type&&this._abiCoder.encode(["address"],[t]),el(Vc(t),32));for(t.forEach(((t,i)=>{let s=e.inputs[i];s.indexed?null==t?r.push(null):"array"===s.baseType||"tuple"===s.baseType?dh.throwArgumentError("filtering with tuples or arrays not supported","contract."+s.name,t):Array.isArray(t)?r.push(t.map((e=>n(s,e)))):r.push(n(s,t)):null!=t&&dh.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+s.name,t)}));r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(e,t){"string"==typeof e&&(e=this.getEvent(e));const r=[],n=[],i=[];return e.anonymous||r.push(this.getEventTopic(e)),t.length!==e.inputs.length&&dh.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach(((e,s)=>{const a=t[s];if(e.indexed)if("string"===e.type)r.push(pd(a));else if("bytes"===e.type)r.push(Dl(a));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");r.push(this._abiCoder.encode([e.type],[a]))}else n.push(e),i.push(a)})),{data:this._abiCoder.encode(n,i),topics:r}}decodeEventLog(e,t,r){if("string"==typeof e&&(e=this.getEvent(e)),null!=r&&!e.anonymous){let t=this.getEventTopic(e);Hc(r[0],32)&&r[0].toLowerCase()===t||dh.throwError("fragment/topic mismatch",jc.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:t,value:r[0]}),r=r.slice(1)}let n=[],i=[],s=[];e.inputs.forEach(((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(n.push(Kd.fromObject({type:"bytes32",name:e.name})),s.push(!0)):(n.push(e),s.push(!1)):(i.push(e),s.push(!1))}));let a=null!=r?this._abiCoder.decode(n,zc(r)):null,o=this._abiCoder.decode(i,t,!0),u=[],c=0,l=0;e.inputs.forEach(((e,t)=>{if(e.indexed)if(null==a)u[t]=new mh({_isIndexed:!0,hash:null});else if(s[t])u[t]=new mh({_isIndexed:!0,hash:a[l++]});else try{u[t]=a[l++]}catch(e){u[t]=e}else try{u[t]=o[c++]}catch(e){u[t]=e}if(e.name&&null==u[e.name]){const r=u[t];r instanceof Error?Object.defineProperty(u,e.name,{enumerable:!0,get:()=>{throw yh(`property ${JSON.stringify(e.name)}`,r)}}):u[e.name]=r}}));for(let e=0;e<u.length;e++){const t=u[e];t instanceof Error&&Object.defineProperty(u,e,{enumerable:!0,get:()=>{throw yh(`index ${e}`,t)}})}return Object.freeze(u)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new fh({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:dl.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new hh({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){const t=Vc(e);let r=this.getError(t.substring(0,10).toLowerCase());return r?new ph({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!(!e||!e._isInterface)}}const _h=new jc("abstract-provider/5.7.0");class bh extends Pl{static isForkEvent(e){return!(!e||!e._isForkEvent)}}class wh{constructor(){_h.checkAbstract(new.target,wh),vl(this,"_isProvider",!0)}getFeeData(){return e=this,r=function*(){const{block:e,gasPrice:t}=yield bl({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((e=>null))});let r=null,n=null,i=null;return e&&e.baseFeePerGas&&(r=e.baseFeePerGas,i=dl.from("1500000000"),n=e.baseFeePerGas.mul(2).add(i)),{lastBaseFeePerGas:r,maxFeePerGas:n,maxPriorityFeePerGas:i,gasPrice:t}},new((t=void 0)||(t=Promise))((function(n,i){function s(e){try{o(r.next(e))}catch(e){i(e)}}function a(e){try{o(r.throw(e))}catch(e){i(e)}}function o(e){var r;e.done?n(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(s,a)}o((r=r.apply(e,[])).next())}));var e,t,r}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!(!e||!e._isProvider)}}var Ah=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}u((n=n.apply(e,t||[])).next())}))};const Eh=new jc("abstract-signer/5.7.0"),kh=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],xh=[jc.errors.INSUFFICIENT_FUNDS,jc.errors.NONCE_EXPIRED,jc.errors.REPLACEMENT_UNDERPRICED];class Th{constructor(){Eh.checkAbstract(new.target,Th),vl(this,"_isSigner",!0)}getBalance(e){return Ah(this,void 0,void 0,(function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)}))}getTransactionCount(e){return Ah(this,void 0,void 0,(function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)}))}estimateGas(e){return Ah(this,void 0,void 0,(function*(){this._checkProvider("estimateGas");const t=yield bl(this.checkTransaction(e));return yield this.provider.estimateGas(t)}))}call(e,t){return Ah(this,void 0,void 0,(function*(){this._checkProvider("call");const r=yield bl(this.checkTransaction(e));return yield this.provider.call(r,t)}))}sendTransaction(e){return Ah(this,void 0,void 0,(function*(){this._checkProvider("sendTransaction");const t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)}))}getChainId(){return Ah(this,void 0,void 0,(function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId}))}getGasPrice(){return Ah(this,void 0,void 0,(function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()}))}getFeeData(){return Ah(this,void 0,void 0,(function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()}))}resolveName(e){return Ah(this,void 0,void 0,(function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)}))}checkTransaction(e){for(const t in e)-1===kh.indexOf(t)&&Eh.throwArgumentError("invalid transaction key: "+t,"transaction",e);const t=Al(e);return null==t.from?t.from=this.getAddress():t.from=Promise.all([Promise.resolve(t.from),this.getAddress()]).then((t=>(t[0].toLowerCase()!==t[1].toLowerCase()&&Eh.throwArgumentError("from address mismatch","transaction",e),t[0]))),t}populateTransaction(e){return Ah(this,void 0,void 0,(function*(){const t=yield bl(this.checkTransaction(e));null!=t.to&&(t.to=Promise.resolve(t.to).then((e=>Ah(this,void 0,void 0,(function*(){if(null==e)return null;const t=yield this.resolveName(e);return null==t&&Eh.throwArgumentError("provided ENS name resolves to null","tx.to",e),t})))),t.to.catch((e=>{})));const r=null!=t.maxFeePerGas||null!=t.maxPriorityFeePerGas;if(null==t.gasPrice||2!==t.type&&!r?0!==t.type&&1!==t.type||!r||Eh.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):Eh.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==t.type&&null!=t.type||null==t.maxFeePerGas||null==t.maxPriorityFeePerGas)if(0===t.type||1===t.type)null==t.gasPrice&&(t.gasPrice=this.getGasPrice());else{const e=yield this.getFeeData();if(null==t.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(t.type=2,null!=t.gasPrice){const e=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=e,t.maxPriorityFeePerGas=e}else null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(r&&Eh.throwError("network does not support EIP-1559",jc.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==t.gasPrice&&(t.gasPrice=e.gasPrice),t.type=0):Eh.throwError("failed to get consistent fee data",jc.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else 2===t.type&&(null==t.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else t.type=2;return null==t.nonce&&(t.nonce=this.getTransactionCount("pending")),null==t.gasLimit&&(t.gasLimit=this.estimateGas(t).catch((e=>{if(xh.indexOf(e.code)>=0)throw e;return Eh.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",jc.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})}))),null==t.chainId?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then((t=>(0!==t[1]&&t[0]!==t[1]&&Eh.throwArgumentError("chainId address mismatch","transaction",e),t[0]))),yield bl(t)}))}_checkProvider(e){this.provider||Eh.throwError("missing provider",jc.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!(!e||!e._isSigner)}}class Ph extends Th{constructor(e,t){super(),vl(this,"address",e),vl(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then((()=>{Eh.throwError(e,jc.errors.UNSUPPORTED_OPERATION,{operation:t})}))}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new Ph(this.address,e)}}var Sh=i(4485),Ih=i.n(Sh);function Oh(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},e(r,r.exports),r.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self&&self;var Ch=Nh;function Nh(e,t){if(!e)throw new Error(t||"Assertion failed")}Nh.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var Mh=Oh((function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16));else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),s=i>>8,a=255&i;s?r.push(s,a):r.push(a)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}})),Rh=Oh((function(e,t){var r=t;r.assert=Ch,r.toArray=Mh.toArray,r.zero2=Mh.zero2,r.toHex=Mh.toHex,r.encode=Mh.encode,r.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,s=e.clone(),a=0;a<n.length;a++){var o,u=s.andln(i-1);s.isOdd()?(o=u>(i>>1)-1?(i>>1)-u:u,s.isubn(o)):o=0,n[a]=o,s.iushrn(1)}return n},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,s=0;e.cmpn(-i)>0||t.cmpn(-s)>0;){var a,o,u=e.andln(3)+i&3,c=t.andln(3)+s&3;3===u&&(u=-1),3===c&&(c=-1),a=0==(1&u)?0:3!=(n=e.andln(7)+i&7)&&5!==n||2!==c?u:-u,r[0].push(a),o=0==(1&c)?0:3!=(n=t.andln(7)+s&7)&&5!==n||2!==u?c:-c,r[1].push(o),2*i===a+1&&(i=1-i),2*s===o+1&&(s=1-s),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new(il())(e,"hex","le")}})),jh=Rh.getNAF,Dh=Rh.getJSF,Bh=Rh.assert;function Lh(e,t){this.type=e,this.p=new(il())(t.p,16),this.red=t.prime?il().red(t.prime):il().mont(this.p),this.zero=new(il())(0).toRed(this.red),this.one=new(il())(1).toRed(this.red),this.two=new(il())(2).toRed(this.red),this.n=t.n&&new(il())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Uh=Lh;function Fh(e,t){this.curve=e,this.type=t,this.precomputed=null}Lh.prototype.point=function(){throw new Error("Not implemented")},Lh.prototype.validate=function(){throw new Error("Not implemented")},Lh.prototype._fixedNafMul=function(e,t){Bh(e.precomputed);var r=e._getDoubles(),n=jh(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2==0?2:1);i/=3;var s,a,o=[];for(s=0;s<n.length;s+=r.step){a=0;for(var u=s+r.step-1;u>=s;u--)a=(a<<1)+n[u];o.push(a)}for(var c=this.jpoint(null,null,null),l=this.jpoint(null,null,null),d=i;d>0;d--){for(s=0;s<o.length;s++)(a=o[s])===d?l=l.mixedAdd(r.points[s]):a===-d&&(l=l.mixedAdd(r.points[s].neg()));c=c.add(l)}return c.toP()},Lh.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=jh(t,r,this._bitLength),a=this.jpoint(null,null,null),o=s.length-1;o>=0;o--){for(var u=0;o>=0&&0===s[o];o--)u++;if(o>=0&&u++,a=a.dblp(u),o<0)break;var c=s[o];Bh(0!==c),a="affine"===e.type?c>0?a.mixedAdd(i[c-1>>1]):a.mixedAdd(i[-c-1>>1].neg()):c>0?a.add(i[c-1>>1]):a.add(i[-c-1>>1].neg())}return"affine"===e.type?a.toP():a},Lh.prototype._wnafMulAdd=function(e,t,r,n,i){var s,a,o,u=this._wnafT1,c=this._wnafT2,l=this._wnafT3,d=0;for(s=0;s<n;s++){var h=(o=t[s])._getNAFPoints(e);u[s]=h.wnd,c[s]=h.points}for(s=n-1;s>=1;s-=2){var f=s-1,p=s;if(1===u[f]&&1===u[p]){var m=[t[f],null,null,t[p]];0===t[f].y.cmp(t[p].y)?(m[1]=t[f].add(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg())):0===t[f].y.cmp(t[p].y.redNeg())?(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].add(t[p].neg())):(m[1]=t[f].toJ().mixedAdd(t[p]),m[2]=t[f].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],y=Dh(r[f],r[p]);for(d=Math.max(y[0].length,d),l[f]=new Array(d),l[p]=new Array(d),a=0;a<d;a++){var v=0|y[0][a],_=0|y[1][a];l[f][a]=g[3*(v+1)+(_+1)],l[p][a]=0,c[f]=m}}else l[f]=jh(r[f],u[f],this._bitLength),l[p]=jh(r[p],u[p],this._bitLength),d=Math.max(l[f].length,d),d=Math.max(l[p].length,d)}var b=this.jpoint(null,null,null),w=this._wnafT4;for(s=d;s>=0;s--){for(var A=0;s>=0;){var E=!0;for(a=0;a<n;a++)w[a]=0|l[a][s],0!==w[a]&&(E=!1);if(!E)break;A++,s--}if(s>=0&&A++,b=b.dblp(A),s<0)break;for(a=0;a<n;a++){var k=w[a];0!==k&&(k>0?o=c[a][k-1>>1]:k<0&&(o=c[a][-k-1>>1].neg()),b="affine"===o.type?b.mixedAdd(o):b.add(o))}}for(s=0;s<n;s++)c[s]=null;return i?b:b.toP()},Lh.BasePoint=Fh,Fh.prototype.eq=function(){throw new Error("Not implemented")},Fh.prototype.validate=function(){return this.curve.validate(this)},Lh.prototype.decodePoint=function(e,t){e=Rh.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?Bh(e[e.length-1]%2==0):7===e[0]&&Bh(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},Fh.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Fh.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},Fh.prototype.encode=function(e,t){return Rh.encode(this._encode(t),e)},Fh.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},Fh.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},Fh.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var s=0;s<e;s++)n=n.dbl();r.push(n)}return{step:e,points:r}},Fh.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},Fh.prototype._getBeta=function(){return null},Fh.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var Zh=Oh((function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),qh=Rh.assert;function zh(e){Uh.call(this,"short",e),this.a=new(il())(e.a,16).toRed(this.red),this.b=new(il())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Zh(zh,Uh);var $h=zh;function Kh(e,t,r,n){Uh.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(il())(t,16),this.y=new(il())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Hh(e,t,r,n){Uh.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(il())(0)):(this.x=new(il())(t,16),this.y=new(il())(r,16),this.z=new(il())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}zh.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new(il())(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new(il())(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],qh(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new(il())(e.a,16),b:new(il())(e.b,16)}})):this._getEndoBasis(r)}}},zh.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:il().mont(e),r=new(il())(2).toRed(t).redInvm(),n=r.redNeg(),i=new(il())(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},zh.prototype._getEndoBasis=function(e){for(var t,r,n,i,s,a,o,u,c,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=e,h=this.n.clone(),f=new(il())(1),p=new(il())(0),m=new(il())(0),g=new(il())(1),y=0;0!==d.cmpn(0);){var v=h.div(d);u=h.sub(v.mul(d)),c=m.sub(v.mul(f));var _=g.sub(v.mul(p));if(!n&&u.cmp(l)<0)t=o.neg(),r=f,n=u.neg(),i=c;else if(n&&2==++y)break;o=u,h=d,d=u,m=f,f=c,g=p,p=_}s=u.neg(),a=c;var b=n.sqr().add(i.sqr());return s.sqr().add(a.sqr()).cmp(b)>=0&&(s=t,a=r),n.negative&&(n=n.neg(),i=i.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:n,b:i},{a:s,b:a}]},zh.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),s=r.b.neg().mul(e).divRound(this.n),a=i.mul(r.a),o=s.mul(n.a),u=i.mul(r.b),c=s.mul(n.b);return{k1:e.sub(a).sub(o),k2:u.add(c).neg()}},zh.prototype.pointFromX=function(e,t){(e=new(il())(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},zh.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},zh.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,s=0;s<e.length;s++){var a=this._endoSplit(t[s]),o=e[s],u=o._getBeta();a.k1.negative&&(a.k1.ineg(),o=o.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),n[2*s]=o,n[2*s+1]=u,i[2*s]=a.k1,i[2*s+1]=a.k2}for(var c=this._wnafMulAdd(1,n,i,2*s,r),l=0;l<2*s;l++)n[l]=null,i[l]=null;return c},Zh(Kh,Uh.BasePoint),zh.prototype.point=function(e,t,r){return new Kh(this,e,t,r)},zh.prototype.pointFromJSON=function(e,t){return Kh.fromJSON(this,e,t)},Kh.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},Kh.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Kh.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var s=t[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(i))}},n},Kh.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Kh.prototype.isInfinity=function(){return this.inf},Kh.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},Kh.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),s=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,a)},Kh.prototype.getX=function(){return this.x.fromRed()},Kh.prototype.getY=function(){return this.y.fromRed()},Kh.prototype.mul=function(e){return e=new(il())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Kh.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},Kh.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},Kh.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},Kh.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},Kh.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},Zh(Hh,Uh.BasePoint),zh.prototype.jpoint=function(e,t,r){return new Hh(this,e,t,r)},Hh.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},Hh.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Hh.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),s=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),o=n.redSub(i),u=s.redSub(a);if(0===o.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=o.redSqr(),l=c.redMul(o),d=n.redMul(c),h=u.redSqr().redIAdd(l).redISub(d).redISub(d),f=u.redMul(d.redISub(h)).redISub(s.redMul(l)),p=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(h,f,p)},Hh.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,s=e.y.redMul(t).redMul(this.z),a=r.redSub(n),o=i.redSub(s);if(0===a.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),l=r.redMul(u),d=o.redSqr().redIAdd(c).redISub(l).redISub(l),h=o.redMul(l.redISub(d)).redISub(i.redMul(c)),f=this.z.redMul(a);return this.curve.jpoint(d,h,f)},Hh.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,s=this.x,a=this.y,o=this.z,u=o.redSqr().redSqr(),c=a.redAdd(a);for(t=0;t<e;t++){var l=s.redSqr(),d=c.redSqr(),h=d.redSqr(),f=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(u)),p=s.redMul(d),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),y=f.redMul(g);y=y.redIAdd(y).redISub(h);var v=c.redMul(o);t+1<e&&(u=u.redMul(h)),s=m,o=v,c=y}return this.curve.jpoint(s,c.redMul(i),o)},Hh.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Hh.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(s);a=a.redIAdd(a);var o=n.redAdd(n).redIAdd(n),u=o.redSqr().redISub(a).redISub(a),c=s.redIAdd(s);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=o.redMul(a.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),f=this.x.redAdd(d).redSqr().redISub(l).redISub(h);f=f.redIAdd(f);var p=l.redAdd(l).redIAdd(l),m=p.redSqr(),g=h.redIAdd(h);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},Hh.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(s);a=a.redIAdd(a);var o=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=o.redSqr().redISub(a).redISub(a);e=u;var c=s.redIAdd(s);c=(c=c.redIAdd(c)).redIAdd(c),t=o.redMul(a.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),f=this.x.redSub(l).redMul(this.x.redAdd(l));f=f.redAdd(f).redIAdd(f);var p=h.redIAdd(h),m=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(d).redISub(l);var g=d.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=f.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},Hh.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),s=t.redSqr(),a=r.redSqr(),o=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(a),l=o.redSqr().redISub(c.redAdd(c)),d=c.redISub(l),h=a.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var f=o.redMul(d).redISub(h),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,f,p)},Hh.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),s=i.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(n),o=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(s)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(a).redSqr().redISub(s).redISub(o).redISub(u),l=t.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var d=this.x.redMul(o).redISub(l);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.y.redMul(c.redMul(u.redISub(c)).redISub(a.redMul(o)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var f=this.z.redAdd(a).redSqr().redISub(r).redISub(o);return this.curve.jpoint(d,h,f)},Hh.prototype.mul=function(e,t){return e=new(il())(e,t),this.curve._wnafMul(this,e)},Hh.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},Hh.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},Hh.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Hh.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Gh=Oh((function(e,t){var r=t;r.base=Uh,r.short=$h,r.mont=null,r.edwards=null})),Vh=Oh((function(e,t){var r,n=t,i=Rh.assert;function s(e){"short"===e.type?this.curve=new Gh.short(e):"edwards"===e.type?this.curve=new Gh.edwards(e):this.curve=new Gh.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function a(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new s(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=s,a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Ih().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Ih().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Ih().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Ih().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Ih().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ih().sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ih().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(e){r=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Ih().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function Wh(e){if(!(this instanceof Wh))return new Wh(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Mh.toArray(e.entropy,e.entropyEnc||"hex"),r=Mh.toArray(e.nonce,e.nonceEnc||"hex"),n=Mh.toArray(e.pers,e.persEnc||"hex");Ch(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var Jh=Wh;Wh.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Wh.prototype._hmac=function(){return new(Ih().hmac)(this.hash,this.K)},Wh.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Wh.prototype.reseed=function(e,t,r,n){"string"!=typeof t&&(n=r,r=t,t=null),e=Mh.toArray(e,t),r=Mh.toArray(r,n),Ch(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},Wh.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(n=r,r=t,t=null),r&&(r=Mh.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,e);return this._update(r),this._reseed++,Mh.encode(s,t)};var Qh=Rh.assert;function Yh(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Xh=Yh;Yh.fromPublic=function(e,t,r){return t instanceof Yh?t:new Yh(e,{pub:t,pubEnc:r})},Yh.fromPrivate=function(e,t,r){return t instanceof Yh?t:new Yh(e,{priv:t,privEnc:r})},Yh.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Yh.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},Yh.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},Yh.prototype._importPrivate=function(e,t){this.priv=new(il())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},Yh.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?Qh(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Qh(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},Yh.prototype.derive=function(e){return e.validate()||Qh(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Yh.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},Yh.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},Yh.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var ef=Rh.assert;function tf(e,t){if(e instanceof tf)return e;this._importDER(e,t)||(ef(e.r&&e.s,"Signature without r or s"),this.r=new(il())(e.r,16),this.s=new(il())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var rf=tf;function nf(){this.place=0}function sf(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,s=0,a=t.place;s<n;s++,a++)i<<=8,i|=e[a],i>>>=0;return!(i<=127)&&(t.place=a,i)}function af(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function of(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}tf.prototype._importDER=function(e,t){e=Rh.toArray(e,t);var r=new nf;if(48!==e[r.place++])return!1;var n=sf(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=sf(e,r);if(!1===i)return!1;var s=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var a=sf(e,r);if(!1===a)return!1;if(e.length!==a+r.place)return!1;var o=e.slice(r.place,a+r.place);if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}return this.r=new(il())(s),this.s=new(il())(o),this.recoveryParam=null,!0},tf.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=af(t),r=af(r);!(r[0]||128&r[1]);)r=r.slice(1);var n=[2];of(n,t.length),(n=n.concat(t)).push(2),of(n,r.length);var i=n.concat(r),s=[48];return of(s,i.length),s=s.concat(i),Rh.encode(s,e)};var uf=function(){throw new Error("unsupported")},cf=Rh.assert;function lf(e){if(!(this instanceof lf))return new lf(e);"string"==typeof e&&(cf(Object.prototype.hasOwnProperty.call(Vh,e),"Unknown curve "+e),e=Vh[e]),e instanceof Vh.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var df=lf;lf.prototype.keyPair=function(e){return new Xh(this,e)},lf.prototype.keyFromPrivate=function(e,t){return Xh.fromPrivate(this,e,t)},lf.prototype.keyFromPublic=function(e,t){return Xh.fromPublic(this,e,t)},lf.prototype.genKeyPair=function(e){e||(e={});for(var t=new Jh({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||uf(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(il())(2));;){var i=new(il())(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},lf.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},lf.prototype.sign=function(e,t,r,n){"object"==typeof r&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new(il())(e,16));for(var i=this.n.byteLength(),s=t.getPrivate().toArray("be",i),a=e.toArray("be",i),o=new Jh({hash:this.hash,entropy:s,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new(il())(1)),c=0;;c++){var l=n.k?n.k(c):new(il())(o.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(u)>=0)){var d=this.g.mul(l);if(!d.isInfinity()){var h=d.getX(),f=h.umod(this.n);if(0!==f.cmpn(0)){var p=l.invm(this.n).mul(f.mul(t.getPrivate()).iadd(e));if(0!==(p=p.umod(this.n)).cmpn(0)){var m=(d.getY().isOdd()?1:0)|(0!==h.cmp(f)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),m^=1),new rf({r:f,s:p,recoveryParam:m})}}}}}},lf.prototype.verify=function(e,t,r,n){e=this._truncateToN(new(il())(e,16)),r=this.keyFromPublic(r,n);var i=(t=new rf(t,"hex")).r,s=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,o=s.invm(this.n),u=o.mul(e).umod(this.n),c=o.mul(i).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),c)).isInfinity()&&a.eqXToP(i):!(a=this.g.mulAdd(u,r.getPublic(),c)).isInfinity()&&0===a.getX().umod(this.n).cmp(i)},lf.prototype.recoverPubKey=function(e,t,r,n){cf((3&r)===r,"The recovery param is more than two bits"),t=new rf(t,n);var i=this.n,s=new(il())(e),a=t.r,o=t.s,u=1&r,c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");a=c?this.curve.pointFromX(a.add(this.curve.n),u):this.curve.pointFromX(a,u);var l=t.r.invm(i),d=i.sub(s).mul(l).umod(i),h=o.mul(l).umod(i);return this.g.mulAdd(d,a,h)},lf.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new rf(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(e,t,i)}catch(e){continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var hf=Oh((function(e,t){var r=t;r.version="6.5.4",r.utils=Rh,r.rand=function(){throw new Error("unsupported")},r.curve=Gh,r.curves=Vh,r.ec=df,r.eddsa=null})).ec;const ff=new jc("signing-key/5.7.0");let pf=null;function mf(){return pf||(pf=new hf("secp256k1")),pf}class gf{constructor(e){vl(this,"curve","secp256k1"),vl(this,"privateKey",Vc(e)),32!==Wc(this.privateKey)&&ff.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=mf().keyFromPrivate(qc(this.privateKey));vl(this,"publicKey","0x"+t.getPublic(!1,"hex")),vl(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),vl(this,"_isSigningKey",!0)}_addPoint(e){const t=mf().keyFromPublic(qc(this.publicKey)),r=mf().keyFromPublic(qc(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){const t=mf().keyFromPrivate(qc(this.privateKey)),r=qc(e);32!==r.length&&ff.throwArgumentError("bad digest length","digest",e);const n=t.sign(r,{canonical:!0});return tl({recoveryParam:n.recoveryParam,r:el("0x"+n.r.toString(16),32),s:el("0x"+n.s.toString(16),32)})}computeSharedSecret(e){const t=mf().keyFromPrivate(qc(this.privateKey)),r=mf().keyFromPublic(qc(vf(e)));return el("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function yf(e,t){const r=tl(t),n={r:qc(r.r),s:qc(r.s)};return"0x"+mf().recoverPubKey(qc(e),n,r.recoveryParam).encode("hex",!1)}function vf(e,t){const r=qc(e);if(32===r.length){const e=new gf(r);return t?"0x"+mf().keyFromPrivate(r).getPublic(!0,"hex"):e.publicKey}return 33===r.length?t?Vc(r):"0x"+mf().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+mf().keyFromPublic(r).getPublic(!0,"hex"):Vc(r):ff.throwArgumentError("invalid public or private key","key","[REDACTED]")}const _f=new jc("transactions/5.7.0");var bf;function wf(e){return"0x"===e?null:Ql(e)}function Af(e){return"0x"===e?Pd:dl.from(e)}!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(bf||(bf={}));const Ef=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],kf={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function xf(e){return Ql(Jc(Dl(Jc(vf(e),1)),12))}function Tf(e,t){return xf(yf(qc(e),t))}function Pf(e,t){const r=$c(dl.from(e).toHexString());return r.length>32&&_f.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function Sf(e,t){return{address:Ql(e),storageKeys:(t||[]).map(((t,r)=>(32!==Wc(t)&&_f.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t),t.toLowerCase())))}}function If(e){if(Array.isArray(e))return e.map(((e,t)=>Array.isArray(e)?(e.length>2&&_f.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e),Sf(e[0],e[1])):Sf(e.address,e.storageKeys)));const t=Object.keys(e).map((t=>{const r=e[t].reduce(((e,t)=>(e[t]=!0,e)),{});return Sf(t,Object.keys(r).sort())}));return t.sort(((e,t)=>e.address.localeCompare(t.address))),t}function Of(e){return If(e).map((e=>[e.address,e.storageKeys]))}function Cf(e,t){if(null!=e.gasPrice){const t=dl.from(e.gasPrice),r=dl.from(e.maxFeePerGas||0);t.eq(r)||_f.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:r})}const r=[Pf(e.chainId||0,"chainId"),Pf(e.nonce||0,"nonce"),Pf(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Pf(e.maxFeePerGas||0,"maxFeePerGas"),Pf(e.gasLimit||0,"gasLimit"),null!=e.to?Ql(e.to):"0x",Pf(e.value||0,"value"),e.data||"0x",Of(e.accessList||[])];if(t){const e=tl(t);r.push(Pf(e.recoveryParam,"recoveryParam")),r.push($c(e.r)),r.push($c(e.s))}return Qc(["0x02",Zl(r)])}function Nf(e,t){const r=[Pf(e.chainId||0,"chainId"),Pf(e.nonce||0,"nonce"),Pf(e.gasPrice||0,"gasPrice"),Pf(e.gasLimit||0,"gasLimit"),null!=e.to?Ql(e.to):"0x",Pf(e.value||0,"value"),e.data||"0x",Of(e.accessList||[])];if(t){const e=tl(t);r.push(Pf(e.recoveryParam,"recoveryParam")),r.push($c(e.r)),r.push($c(e.s))}return Qc(["0x01",Zl(r)])}function Mf(e,t){if(null==e.type||0===e.type)return null!=e.accessList&&_f.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),function(e,t){wl(e,kf);const r=[];Ef.forEach((function(t){let n=e[t.name]||[];const i={};t.numeric&&(i.hexPad="left"),n=qc(Vc(n,i)),t.length&&n.length!==t.length&&n.length>0&&_f.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n),t.maxLength&&(n=$c(n),n.length>t.maxLength&&_f.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n)),r.push(Vc(n))}));let n=0;if(null!=e.chainId?(n=e.chainId,"number"!=typeof n&&_f.throwArgumentError("invalid transaction.chainId","transaction",e)):t&&!Uc(t)&&t.v>28&&(n=Math.floor((t.v-35)/2)),0!==n&&(r.push(Vc(n)),r.push("0x"),r.push("0x")),!t)return Zl(r);const i=tl(t);let s=27+i.recoveryParam;return 0!==n?(r.pop(),r.pop(),r.pop(),s+=2*n+8,i.v>28&&i.v!==s&&_f.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):i.v!==s&&_f.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),r.push(Vc(s)),r.push($c(qc(i.r))),r.push($c(qc(i.s))),Zl(r)}(e,t);switch(e.type){case 1:return Nf(e,t);case 2:return Cf(e,t)}return _f.throwError(`unsupported transaction type: ${e.type}`,jc.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function Rf(e,t,r){try{const r=Af(t[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");e.v=r}catch(e){_f.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=el(t[1],32),e.s=el(t[2],32);try{const t=Dl(r(e));e.from=Tf(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(e){}}function jf(e){const t=qc(e);if(t[0]>127)return function(e){const t=$l(e);9!==t.length&&6!==t.length&&_f.throwArgumentError("invalid raw transaction","rawTransaction",e);const r={nonce:Af(t[0]).toNumber(),gasPrice:Af(t[1]),gasLimit:Af(t[2]),to:wf(t[3]),value:Af(t[4]),data:t[5],chainId:0};if(6===t.length)return r;try{r.v=dl.from(t[6]).toNumber()}catch(e){return r}if(r.r=el(t[7],32),r.s=el(t[8],32),dl.from(r.r).isZero()&&dl.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=t.slice(0,6);0!==r.chainId&&(i.push(Vc(r.chainId)),i.push("0x"),i.push("0x"),n-=2*r.chainId+8);const s=Dl(Zl(i));try{r.from=Tf(s,{r:Vc(r.r),s:Vc(r.s),recoveryParam:n})}catch(e){}r.hash=Dl(e)}return r.type=null,r}(t);switch(t[0]){case 1:return function(e){const t=$l(e.slice(1));8!==t.length&&11!==t.length&&_f.throwArgumentError("invalid component count for transaction type: 1","payload",Vc(e));const r={type:1,chainId:Af(t[0]).toNumber(),nonce:Af(t[1]).toNumber(),gasPrice:Af(t[2]),gasLimit:Af(t[3]),to:wf(t[4]),value:Af(t[5]),data:t[6],accessList:If(t[7])};return 8===t.length||(r.hash=Dl(e),Rf(r,t.slice(8),Nf)),r}(t);case 2:return function(e){const t=$l(e.slice(1));9!==t.length&&12!==t.length&&_f.throwArgumentError("invalid component count for transaction type: 2","payload",Vc(e));const r=Af(t[2]),n=Af(t[3]),i={type:2,chainId:Af(t[0]).toNumber(),nonce:Af(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:Af(t[4]),to:wf(t[5]),value:Af(t[6]),data:t[7],accessList:If(t[8])};return 9===t.length||(i.hash=Dl(e),Rf(i,t.slice(9),Cf)),i}(t)}return _f.throwError(`unsupported transaction type: ${t[0]}`,jc.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}var Df=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}u((n=n.apply(e,t||[])).next())}))};const Bf=new jc("contracts/5.7.0"),Lf={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0,ccipReadEnabled:!0};function Uf(e,t){return Df(this,void 0,void 0,(function*(){const r=yield t;"string"!=typeof r&&Bf.throwArgumentError("invalid address or ENS name","name",r);try{return Ql(r)}catch(e){}e||Bf.throwError("a provider or signer is needed to resolve ENS names",jc.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield e.resolveName(r);return null==n&&Bf.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n}))}function Ff(e,t,r){return Df(this,void 0,void 0,(function*(){return Array.isArray(r)?yield Promise.all(r.map(((r,n)=>Ff(e,Array.isArray(t)?t[n]:t[r.name],r)))):"address"===r.type?yield Uf(e,t):"tuple"===r.type?yield Ff(e,t,r.components):"array"===r.baseType?Array.isArray(t)?yield Promise.all(t.map((t=>Ff(e,t,r.arrayChildren)))):Promise.reject(Bf.makeError("invalid value for array",jc.errors.INVALID_ARGUMENT,{argument:"value",value:t})):t}))}function Zf(e,t,r){return Df(this,void 0,void 0,(function*(){let n={};r.length===t.inputs.length+1&&"object"==typeof r[r.length-1]&&(n=Al(r.pop())),Bf.checkArgumentCount(r.length,t.inputs.length,"passed to contract"),e.signer?n.from?n.from=bl({override:Uf(e.signer,n.from),signer:e.signer.getAddress()}).then((e=>Df(this,void 0,void 0,(function*(){return Ql(e.signer)!==e.override&&Bf.throwError("Contract with a Signer cannot override from",jc.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),e.override})))):n.from=e.signer.getAddress():n.from&&(n.from=Uf(e.provider,n.from));const i=yield bl({args:Ff(e.signer||e.provider,r,t.inputs),address:e.resolvedAddress,overrides:bl(n)||{}}),s=e.interface.encodeFunctionData(t,i.args),a={data:s,to:i.address},o=i.overrides;if(null!=o.nonce&&(a.nonce=dl.from(o.nonce).toNumber()),null!=o.gasLimit&&(a.gasLimit=dl.from(o.gasLimit)),null!=o.gasPrice&&(a.gasPrice=dl.from(o.gasPrice)),null!=o.maxFeePerGas&&(a.maxFeePerGas=dl.from(o.maxFeePerGas)),null!=o.maxPriorityFeePerGas&&(a.maxPriorityFeePerGas=dl.from(o.maxPriorityFeePerGas)),null!=o.from&&(a.from=o.from),null!=o.type&&(a.type=o.type),null!=o.accessList&&(a.accessList=If(o.accessList)),null==a.gasLimit&&null!=t.gas){let e=21e3;const r=qc(s);for(let t=0;t<r.length;t++)e+=4,r[t]&&(e+=64);a.gasLimit=dl.from(t.gas).add(e)}if(o.value){const e=dl.from(o.value);e.isZero()||t.payable||Bf.throwError("non-payable method cannot override value",jc.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),a.value=e}o.customData&&(a.customData=Al(o.customData)),o.ccipReadEnabled&&(a.ccipReadEnabled=!!o.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const u=Object.keys(n).filter((e=>null!=n[e]));return u.length&&Bf.throwError(`cannot override ${u.map((e=>JSON.stringify(e))).join(",")}`,jc.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:u}),a}))}function qf(e,t){const r=t.wait.bind(t);t.wait=t=>r(t).then((t=>(t.events=t.logs.map((r=>{let n=Tl(r),i=null;try{i=e.interface.parseLog(r)}catch(e){}return i&&(n.args=i.args,n.decode=(t,r)=>e.interface.decodeEventLog(i.eventFragment,t,r),n.event=i.name,n.eventSignature=i.signature),n.removeListener=()=>e.provider,n.getBlock=()=>e.provider.getBlock(t.blockHash),n.getTransaction=()=>e.provider.getTransaction(t.transactionHash),n.getTransactionReceipt=()=>Promise.resolve(t),n})),t)))}function zf(e,t,r){const n=e.signer||e.provider;return function(...i){return Df(this,void 0,void 0,(function*(){let s;if(i.length===t.inputs.length+1&&"object"==typeof i[i.length-1]){const e=Al(i.pop());null!=e.blockTag&&(s=yield e.blockTag),delete e.blockTag,i.push(e)}null!=e.deployTransaction&&(yield e._deployed(s));const a=yield Zf(e,t,i),o=yield n.call(a,s);try{let n=e.interface.decodeFunctionResult(t,o);return r&&1===t.outputs.length&&(n=n[0]),n}catch(t){throw t.code===jc.errors.CALL_EXCEPTION&&(t.address=e.address,t.args=i,t.transaction=a),t}}))}}function $f(e,t,r){return t.constant?zf(e,t,r):function(e,t){return function(...r){return Df(this,void 0,void 0,(function*(){e.signer||Bf.throwError("sending a transaction requires a signer",jc.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=e.deployTransaction&&(yield e._deployed());const n=yield Zf(e,t,r),i=yield e.signer.sendTransaction(n);return qf(e,i),i}))}}(e,t)}function Kf(e){return!e.address||null!=e.topics&&0!==e.topics.length?(e.address||"*")+"@"+(e.topics?e.topics.map((e=>Array.isArray(e)?e.join("|"):e)).join(":"):""):"*"}class Hf{constructor(e,t){vl(this,"tag",e),vl(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter((r=>!(!t&&r.listener===e&&(t=!0,1))))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map((e=>e.listener))}listenerCount(){return this._listeners.length}run(e){const t=this.listenerCount();return this._listeners=this._listeners.filter((t=>{const r=e.slice();return setTimeout((()=>{t.listener.apply(this,r)}),0),!t.once})),t}prepareEvent(e){}getEmit(e){return[e]}}class Gf extends Hf{constructor(){super("error",null)}}class Vf extends Hf{constructor(e,t,r,n){const i={address:e};let s=t.getEventTopic(r);n?(s!==n[0]&&Bf.throwArgumentError("topic mismatch","topics",n),i.topics=n.slice()):i.topics=[s],super(Kf(i),i),vl(this,"address",e),vl(this,"interface",t),vl(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(e,t)=>this.interface.decodeEventLog(this.fragment,e,t);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){const t=Ol(e.args);if(t.length)throw t[0].error;const r=(e.args||[]).slice();return r.push(e),r}}class Wf extends Hf{constructor(e,t){super("*",{address:e}),vl(this,"address",e),vl(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{const t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(e,r)=>this.interface.decodeEventLog(t.eventFragment,e,r),e.args=t.args}catch(e){}}}class Jf{constructor(e,t,r){vl(this,"interface",_l(new.target,"getInterface")(t)),null==r?(vl(this,"provider",null),vl(this,"signer",null)):Th.isSigner(r)?(vl(this,"provider",r.provider||null),vl(this,"signer",r)):wh.isProvider(r)?(vl(this,"provider",r),vl(this,"signer",null)):Bf.throwArgumentError("invalid signer or provider","signerOrProvider",r),vl(this,"callStatic",{}),vl(this,"estimateGas",{}),vl(this,"functions",{}),vl(this,"populateTransaction",{}),vl(this,"filters",{});{const e={};Object.keys(this.interface.events).forEach((t=>{const r=this.interface.events[t];vl(this.filters,t,((...e)=>({address:this.address,topics:this.interface.encodeFilterTopics(r,e)}))),e[r.name]||(e[r.name]=[]),e[r.name].push(t)})),Object.keys(e).forEach((t=>{const r=e[t];1===r.length?vl(this.filters,t,this.filters[r[0]]):Bf.warn(`Duplicate definition of ${t} (${r.join(", ")})`)}))}if(vl(this,"_runningEvents",{}),vl(this,"_wrappedEmits",{}),null==e&&Bf.throwArgumentError("invalid contract address or ENS name","addressOrName",e),vl(this,"address",e),this.provider)vl(this,"resolvedAddress",Uf(this.provider,e));else try{vl(this,"resolvedAddress",Promise.resolve(Ql(e)))}catch(e){Bf.throwError("provider is required to use ENS name as contract address",jc.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch((e=>{}));const n={},i={};Object.keys(this.interface.functions).forEach((e=>{const t=this.interface.functions[e];if(i[e])Bf.warn(`Duplicate ABI entry for ${JSON.stringify(e)}`);else{i[e]=!0;{const r=t.name;n[`%${r}`]||(n[`%${r}`]=[]),n[`%${r}`].push(e)}null==this[e]&&vl(this,e,$f(this,t,!0)),null==this.functions[e]&&vl(this.functions,e,$f(this,t,!1)),null==this.callStatic[e]&&vl(this.callStatic,e,zf(this,t,!0)),null==this.populateTransaction[e]&&vl(this.populateTransaction,e,function(e,t){return function(...r){return Zf(e,t,r)}}(this,t)),null==this.estimateGas[e]&&vl(this.estimateGas,e,function(e,t){const r=e.signer||e.provider;return function(...n){return Df(this,void 0,void 0,(function*(){r||Bf.throwError("estimate require a provider or signer",jc.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield Zf(e,t,n);return yield r.estimateGas(i)}))}}(this,t))}})),Object.keys(n).forEach((e=>{const t=n[e];if(t.length>1)return;e=e.substring(1);const r=t[0];try{null==this[e]&&vl(this,e,this[r])}catch(e){}null==this.functions[e]&&vl(this.functions,e,this.functions[r]),null==this.callStatic[e]&&vl(this.callStatic,e,this.callStatic[r]),null==this.populateTransaction[e]&&vl(this.populateTransaction,e,this.populateTransaction[r]),null==this.estimateGas[e]&&vl(this.estimateGas,e,this.estimateGas[r])}))}static getContractAddress(e){return ed(e)}static getInterface(e){return vh.isInterface(e)?e:new vh(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((()=>this)):this._deployedPromise=this.provider.getCode(this.address,e).then((e=>("0x"===e&&Bf.throwError("contract not deployed",jc.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this)))),this._deployedPromise}fallback(e){this.signer||Bf.throwError("sending a transactions require a signer",jc.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const t=Al(e||{});return["from","to"].forEach((function(e){null!=t[e]&&Bf.throwError("cannot override "+e,jc.errors.UNSUPPORTED_OPERATION,{operation:e})})),t.to=this.resolvedAddress,this.deployed().then((()=>this.signer.sendTransaction(t)))}connect(e){"string"==typeof e&&(e=new Ph(e,this.provider));const t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&vl(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return mh.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if("string"==typeof e){if("error"===e)return this._normalizeRunningEvent(new Gf);if("event"===e)return this._normalizeRunningEvent(new Hf("event",null));if("*"===e)return this._normalizeRunningEvent(new Wf(this.address,this.interface));const t=this.interface.getEvent(e);return this._normalizeRunningEvent(new Vf(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{const t=e.topics[0];if("string"!=typeof t)throw new Error("invalid topic");const r=this.interface.getEvent(t);return this._normalizeRunningEvent(new Vf(this.address,this.interface,r,e.topics))}catch(e){}const t={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Hf(Kf(t),t))}return this._normalizeRunningEvent(new Wf(this.address,this.interface))}_checkRunningEvents(e){if(0===e.listenerCount()){delete this._runningEvents[e.tag];const t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){const n=Tl(t);return n.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},n.getBlock=()=>this.provider.getBlock(t.blockHash),n.getTransaction=()=>this.provider.getTransaction(t.transactionHash),n.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(n),n}_addEventListener(e,t,r){if(this.provider||Bf.throwError("events require a provider or a signer with a provider",jc.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const r=r=>{let n=this._wrapEvent(e,r,t);if(null==n.decodeError)try{const t=e.getEmit(n);this.emit(e.filter,...t)}catch(e){n.decodeError=e.error}null!=e.filter&&this.emit("event",n),null!=n.decodeError&&this.emit("error",n.decodeError,n)};this._wrappedEmits[e.tag]=r,null!=e.filter&&this.provider.on(e.filter,r)}}queryFilter(e,t,r){const n=this._getRunningEvent(e),i=Al(n.filter);return"string"==typeof t&&Hc(t,32)?(null!=r&&Bf.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),i.blockHash=t):(i.fromBlock=null!=t?t:0,i.toBlock=null!=r?r:"latest"),this.provider.getLogs(i).then((e=>e.map((e=>this._wrapEvent(n,e,null)))))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;const r=this._getRunningEvent(e),n=r.run(t)>0;return this._checkRunningEvents(r),n}listenerCount(e){return this.provider?null==e?Object.keys(this._runningEvents).reduce(((e,t)=>e+this._runningEvents[t].listenerCount()),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(null==e){const e=[];for(let t in this._runningEvents)this._runningEvents[t].listeners().forEach((t=>{e.push(t)}));return e}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(null==e){for(const e in this._runningEvents){const t=this._runningEvents[e];t.removeAllListeners(),this._checkRunningEvents(t)}return this}const t=this._getRunningEvent(e);return t.removeAllListeners(),this._checkRunningEvents(t),this}off(e,t){if(!this.provider)return this;const r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class Qf extends Jf{}class Yf{constructor(e,t,r){let n=null;n="string"==typeof t?t:Zc(t)?Vc(t):t&&"string"==typeof t.object?t.object:"!","0x"!==n.substring(0,2)&&(n="0x"+n),(!Hc(n)||n.length%2)&&Bf.throwArgumentError("invalid bytecode","bytecode",t),r&&!Th.isSigner(r)&&Bf.throwArgumentError("invalid signer","signer",r),vl(this,"bytecode",n),vl(this,"interface",_l(new.target,"getInterface")(e)),vl(this,"signer",r||null)}getDeployTransaction(...e){let t={};if(e.length===this.interface.deploy.inputs.length+1&&"object"==typeof e[e.length-1]){t=Al(e.pop());for(const e in t)if(!Lf[e])throw new Error("unknown transaction override "+e)}return["data","from","to"].forEach((e=>{null!=t[e]&&Bf.throwError("cannot override "+e,jc.errors.UNSUPPORTED_OPERATION,{operation:e})})),t.value&&(dl.from(t.value).isZero()||this.interface.deploy.payable||Bf.throwError("non-payable constructor cannot override value",jc.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:t.value})),Bf.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),t.data=Vc(zc([this.bytecode,this.interface.encodeDeploy(e)])),t}deploy(...e){return Df(this,void 0,void 0,(function*(){let t={};e.length===this.interface.deploy.inputs.length+1&&(t=e.pop()),Bf.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");const r=yield Ff(this.signer,e,this.interface.deploy.inputs);r.push(t);const n=this.getDeployTransaction(...r),i=yield this.signer.sendTransaction(n),s=_l(this.constructor,"getContractAddress")(i),a=_l(this.constructor,"getContract")(s,this.interface,this.signer);return qf(a,i),vl(a,"deployTransaction",i),a}))}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,t){null==e&&Bf.throwError("missing compiler output",jc.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),"string"==typeof e&&(e=JSON.parse(e));const r=e.abi;let n=null;return e.bytecode?n=e.bytecode:e.evm&&e.evm.bytecode&&(n=e.evm.bytecode),new this(r,n,t)}static getInterface(e){return Qf.getInterface(e)}static getContractAddress(e){return ed(e)}static getContract(e,t,r){return new Qf(e,t,r)}}const Xf=new jc(sl),ep={},tp=dl.from(0),rp=dl.from(-1);function np(e,t,r,n){const i={fault:t,operation:r};return void 0!==n&&(i.value=n),Xf.throwError(e,jc.errors.NUMERIC_FAULT,i)}let ip="0";for(;ip.length<256;)ip+=ip;function sp(e){if("number"!=typeof e)try{e=dl.from(e).toNumber()}catch(e){}return"number"==typeof e&&e>=0&&e<=256&&!(e%1)?"1"+ip.substring(0,e):Xf.throwArgumentError("invalid decimal size","decimals",e)}function ap(e,t){null==t&&(t=0);const r=sp(t),n=(e=dl.from(e)).lt(tp);n&&(e=e.mul(rp));let i=e.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=e.div(r).toString();return e=1===r.length?s:s+"."+i,n&&(e="-"+e),e}function op(e,t){null==t&&(t=0);const r=sp(t);"string"==typeof e&&e.match(/^-?[0-9.]+$/)||Xf.throwArgumentError("invalid decimal value","value",e);const n="-"===e.substring(0,1);n&&(e=e.substring(1)),"."===e&&Xf.throwArgumentError("missing value","value",e);const i=e.split(".");i.length>2&&Xf.throwArgumentError("too many decimal points","value",e);let s=i[0],a=i[1];for(s||(s="0"),a||(a="0");"0"===a[a.length-1];)a=a.substring(0,a.length-1);for(a.length>r.length-1&&np("fractional component exceeds decimals","underflow","parseFixed"),""===a&&(a="0");a.length<r.length-1;)a+="0";const o=dl.from(s),u=dl.from(a);let c=o.mul(r).add(u);return n&&(c=c.mul(rp)),c}class up{constructor(e,t,r,n){e!==ep&&Xf.throwError("cannot use FixedFormat constructor; use FixedFormat.from",jc.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=r,this.decimals=n,this.name=(t?"":"u")+"fixed"+String(r)+"x"+String(n),this._multiplier=sp(n),Object.freeze(this)}static from(e){if(e instanceof up)return e;"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,r=128,n=18;if("string"==typeof e)if("fixed"===e);else if("ufixed"===e)t=!1;else{const i=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);i||Xf.throwArgumentError("invalid fixed format","format",e),t="u"!==i[1],r=parseInt(i[2]),n=parseInt(i[3])}else if(e){const i=(t,r,n)=>null==e[t]?n:(typeof e[t]!==r&&Xf.throwArgumentError("invalid fixed format ("+t+" not "+r+")","format."+t,e[t]),e[t]);t=i("signed","boolean",t),r=i("width","number",r),n=i("decimals","number",n)}return r%8&&Xf.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r),n>80&&Xf.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n),new up(ep,t,r,n)}}class cp{constructor(e,t,r,n){e!==ep&&Xf.throwError("cannot use FixedNumber constructor; use FixedNumber.from",jc.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=t,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Xf.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=op(this._value,this.format.decimals),r=op(e._value,e.format.decimals);return cp.fromValue(t.add(r),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=op(this._value,this.format.decimals),r=op(e._value,e.format.decimals);return cp.fromValue(t.sub(r),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=op(this._value,this.format.decimals),r=op(e._value,e.format.decimals);return cp.fromValue(t.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=op(this._value,this.format.decimals),r=op(e._value,e.format.decimals);return cp.fromValue(t.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");1===e.length&&e.push("0");let t=cp.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return this.isNegative()&&r&&(t=t.subUnsafe(lp.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");1===e.length&&e.push("0");let t=cp.from(e[0],this.format);const r=!e[1].match(/^(0*)$/);return!this.isNegative()&&r&&(t=t.addUnsafe(lp.toFormat(t.format))),t}round(e){null==e&&(e=0);const t=this.toString().split(".");if(1===t.length&&t.push("0"),(e<0||e>80||e%1)&&Xf.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const r=cp.from("1"+ip.substring(0,e),this.format),n=dp.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(n).floor().divUnsafe(r)}isZero(){return"0.0"===this._value||"0"===this._value}isNegative(){return"-"===this._value[0]}toString(){return this._value}toHexString(e){return null==e?this._hex:(e%8&&Xf.throwArgumentError("invalid byte width","width",e),el(dl.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString(),e/8))}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return cp.fromString(this._value,e)}static fromValue(e,t,r){return null!=r||null==t||function(e){return null!=e&&(dl.isBigNumber(e)||"number"==typeof e&&e%1==0||"string"==typeof e&&!!e.match(/^-?[0-9]+$/)||Hc(e)||"bigint"==typeof e||Zc(e))}(t)||(r=t,t=null),null==t&&(t=0),null==r&&(r="fixed"),cp.fromString(ap(e,t),up.from(r))}static fromString(e,t){null==t&&(t="fixed");const r=up.from(t),n=op(e,r.decimals);!r.signed&&n.lt(tp)&&np("unsigned value cannot be negative","overflow","value",e);let i=null;r.signed?i=n.toTwos(r.width).toHexString():(i=n.toHexString(),i=el(i,r.width/8));const s=ap(n,r.decimals);return new cp(ep,i,s,r)}static fromBytes(e,t){null==t&&(t="fixed");const r=up.from(t);if(qc(e).length>r.width/8)throw new Error("overflow");let n=dl.from(e);r.signed&&(n=n.fromTwos(r.width));const i=n.toTwos((r.signed?0:1)+r.width).toHexString(),s=ap(n,r.decimals);return new cp(ep,i,s,r)}static from(e,t){if("string"==typeof e)return cp.fromString(e,t);if(Zc(e))return cp.fromBytes(e,t);try{return cp.fromValue(e,0,t)}catch(e){if(e.code!==jc.errors.INVALID_ARGUMENT)throw e}return Xf.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!(!e||!e._isFixedNumber)}}const lp=cp.from(1),dp=cp.from("0.5"),hp="Ethereum Signed Message:\n";function fp(e){return"string"==typeof e&&(e=ud(e)),Dl(zc([ud(hp),ud(String(e.length)),e]))}const pp="hash/5.7.0",mp=new jc(pp),gp=new Uint8Array(32);gp.fill(0);const yp=dl.from(-1),vp=dl.from(0),_p=dl.from(1),bp=dl.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),wp=el(_p.toHexString(),32),Ap=el(vp.toHexString(),32),Ep={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},kp=["name","version","chainId","verifyingContract","salt"];function xp(e){return function(t){return"string"!=typeof t&&mp.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}const Tp={name:xp("name"),version:xp("version"),chainId:function(e){try{return dl.from(e).toString()}catch(e){}return mp.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return Ql(e).toLowerCase()}catch(e){}return mp.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{const t=qc(e);if(32!==t.length)throw new Error("bad length");return Vc(t)}catch(e){}return mp.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function Pp(e){{const t=e.match(/^(u?)int(\d*)$/);if(t){const r=""===t[1],n=parseInt(t[2]||"256");(n%8!=0||n>256||t[2]&&t[2]!==String(n))&&mp.throwArgumentError("invalid numeric width","type",e);const i=bp.mask(r?n-1:n),s=r?i.add(_p).mul(yp):vp;return function(t){const r=dl.from(t);return(r.lt(s)||r.gt(i))&&mp.throwArgumentError(`value out-of-bounds for ${e}`,"value",t),el(r.toTwos(256).toHexString(),32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const r=parseInt(t[1]);return(0===r||r>32||t[1]!==String(r))&&mp.throwArgumentError("invalid bytes width","type",e),function(t){return qc(t).length!==r&&mp.throwArgumentError(`invalid length for ${e}`,"value",t),function(e){const t=qc(e),r=t.length%32;return r?Qc([t,gp.slice(r)]):Vc(t)}(t)}}}switch(e){case"address":return function(e){return el(Ql(e),32)};case"bool":return function(e){return e?wp:Ap};case"bytes":return function(e){return Dl(e)};case"string":return function(e){return pd(e)}}return null}function Sp(e,t){return`${e}(${t.map((({name:e,type:t})=>t+" "+e)).join(",")})`}class Ip{constructor(e){vl(this,"types",Object.freeze(Tl(e))),vl(this,"_encoderCache",{}),vl(this,"_types",{});const t={},r={},n={};Object.keys(e).forEach((e=>{t[e]={},r[e]=[],n[e]={}}));for(const n in e){const i={};e[n].forEach((s=>{i[s.name]&&mp.throwArgumentError(`duplicate variable name ${JSON.stringify(s.name)} in ${JSON.stringify(n)}`,"types",e),i[s.name]=!0;const a=s.type.match(/^([^\x5b]*)(\x5b|$)/)[1];a===n&&mp.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),Pp(a)||(r[a]||mp.throwArgumentError(`unknown type ${JSON.stringify(a)}`,"types",e),r[a].push(n),t[n][a]=!0)}))}const i=Object.keys(r).filter((e=>0===r[e].length));0===i.length?mp.throwArgumentError("missing primary type","types",e):i.length>1&&mp.throwArgumentError(`ambiguous primary types or unused types: ${i.map((e=>JSON.stringify(e))).join(", ")}`,"types",e),vl(this,"primaryType",i[0]),function i(s,a){a[s]&&mp.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",e),a[s]=!0,Object.keys(t[s]).forEach((e=>{r[e]&&(i(e,a),Object.keys(a).forEach((t=>{n[t][e]=!0})))})),delete a[s]}(this.primaryType,{});for(const t in n){const r=Object.keys(n[t]);r.sort(),this._types[t]=Sp(t,e[t])+r.map((t=>Sp(t,e[t]))).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{const t=Pp(e);if(t)return t}const t=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(t){const e=t[1],r=this.getEncoder(e),n=parseInt(t[3]);return t=>{n>=0&&t.length!==n&&mp.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t);let i=t.map(r);return this._types[e]&&(i=i.map(Dl)),Dl(Qc(i))}}const r=this.types[e];if(r){const t=pd(this._types[e]);return e=>{const n=r.map((({name:t,type:r})=>{const n=this.getEncoder(r)(e[t]);return this._types[r]?Dl(n):n}));return n.unshift(t),Qc(n)}}return mp.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const t=this._types[e];return t||mp.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Dl(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(Pp(e))return r(e,t);const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const e=n[1],i=parseInt(n[3]);return i>=0&&t.length!==i&&mp.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map((t=>this._visit(e,t,r)))}const i=this.types[e];return i?i.reduce(((e,{name:n,type:i})=>(e[n]=this._visit(i,t[n],r),e)),{}):mp.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Ip(e)}static getPrimaryType(e){return Ip.from(e).primaryType}static hashStruct(e,t,r){return Ip.from(t).hashStruct(e,r)}static hashDomain(e){const t=[];for(const r in e){const n=Ep[r];n||mp.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:n})}return t.sort(((e,t)=>kp.indexOf(e.name)-kp.indexOf(t.name))),Ip.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return Qc(["0x1901",Ip.hashDomain(e),Ip.from(t).hash(r)])}static hash(e,t,r){return Dl(Ip.encode(e,t,r))}static resolveNames(e,t,r,n){return i=this,a=function*(){e=Al(e);const i={};e.verifyingContract&&!Hc(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const s=Ip.from(t);s.visit(r,((e,t)=>("address"!==e||Hc(t,20)||(i[t]="0x"),t)));for(const e in i)i[e]=yield n(e);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=s.visit(r,((e,t)=>"address"===e&&i[t]?i[t]:t)),{domain:e,value:r}},new((s=void 0)||(s=Promise))((function(e,t){function r(e){try{o(a.next(e))}catch(e){t(e)}}function n(e){try{o(a.throw(e))}catch(e){t(e)}}function o(t){var i;t.done?e(t.value):(i=t.value,i instanceof s?i:new s((function(e){e(i)}))).then(r,n)}o((a=a.apply(i,[])).next())}));var i,s,a}static getPayload(e,t,r){Ip.hashDomain(e);const n={},i=[];kp.forEach((t=>{const r=e[t];null!=r&&(n[t]=Tp[t](r),i.push({name:t,type:Ep[t]}))}));const s=Ip.from(t),a=Al(t);return a.EIP712Domain?mp.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):a.EIP712Domain=i,s.encode(r),{types:a,domain:n,primaryType:s.primaryType,message:s.visit(r,((e,t)=>{if(e.match(/^bytes(\d*)/))return Vc(qc(t));if(e.match(/^u?int/))return dl.from(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return"string"!=typeof t&&mp.throwArgumentError("invalid string","value",t),t}return mp.throwArgumentError("unsupported type","type",e)}))}}}class Op{constructor(e){vl(this,"alphabet",e),vl(this,"base",e.length),vl(this,"_alphabetMap",{}),vl(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=qc(e);if(0===t.length)return"";let r=[0];for(let e=0;e<t.length;++e){let n=t[e];for(let e=0;e<r.length;++e)n+=r[e]<<8,r[e]=n%this.base,n=n/this.base|0;for(;n>0;)r.push(n%this.base),n=n/this.base|0}let n="";for(let e=0;0===t[e]&&e<t.length-1;++e)n+=this._leader;for(let e=r.length-1;e>=0;--e)n+=this.alphabet[r[e]];return n}decode(e){if("string"!=typeof e)throw new TypeError("Expected String");let t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let n=this._alphabetMap[e[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");let i=n;for(let e=0;e<t.length;++e)i+=t[e]*this.base,t[e]=255&i,i>>=8;for(;i>0;)t.push(255&i),i>>=8}for(let r=0;e[r]===this._leader&&r<e.length-1;++r)t.push(0);return qc(new Uint8Array(t.reverse()))}}new Op("abcdefghijklmnopqrstuvwxyz234567");const Cp=new Op("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Np;!function(e){e.sha256="sha256",e.sha512="sha512"}(Np||(Np={}));const Mp=new jc("sha2/5.7.0");function Rp(e){return"0x"+Ih().ripemd160().update(qc(e)).digest("hex")}function jp(e){return"0x"+Ih().sha256().update(qc(e)).digest("hex")}function Dp(e){return"0x"+Ih().sha512().update(qc(e)).digest("hex")}function Bp(e,t,r){return Np[e]||Mp.throwError("unsupported algorithm "+e,jc.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+Ih().hmac(Ih()[e],qc(t)).update(qc(r)).digest("hex")}function Lp(e,t,r,n,i){let s;e=qc(e),t=qc(t);let a=1;const o=new Uint8Array(n),u=new Uint8Array(t.length+4);let c,l;u.set(t);for(let d=1;d<=a;d++){u[t.length]=d>>24&255,u[t.length+1]=d>>16&255,u[t.length+2]=d>>8&255,u[t.length+3]=255&d;let h=qc(Bp(i,e,u));s||(s=h.length,l=new Uint8Array(s),a=Math.ceil(n/s),c=n-(a-1)*s),l.set(h);for(let t=1;t<r;t++){h=qc(Bp(i,e,h));for(let e=0;e<s;e++)l[e]^=h[e]}const f=(d-1)*s,p=d===a?c:s;o.set(qc(l).slice(0,p),f)}return Vc(o)}const Up=new jc("wordlists/5.7.0");class Fp{constructor(e){Up.checkAbstract(new.target,Fp),vl(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const t=[];for(let r=0;r<2048;r++){const n=e.getWord(r);if(r!==e.getWordIndex(n))return"0x";t.push(n)}return pd(t.join("\n")+"\n")}static register(e,t){t||(t=e.locale)}}let Zp=null;function qp(e){if(null==Zp&&(Zp="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==Fp.check(e)))throw Zp=null,new Error("BIP39 Wordlist for en (English) FAILED")}const zp=new class extends Fp{constructor(){super("en")}getWord(e){return qp(this),Zp[e]}getWordIndex(e){return qp(this),Zp.indexOf(e)}};Fp.register(zp);const $p={en:zp},Kp=new jc("hdnode/5.7.0"),Hp=dl.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Gp=ud("Bitcoin seed"),Vp=2147483648;function Wp(e){return(1<<e)-1<<8-e}function Jp(e){return el(Vc(e),32)}function Qp(e){return Cp.encode(zc([e,Jc(jp(jp(e)),0,4)]))}function Yp(e){if(null==e)return $p.en;if("string"==typeof e){const t=$p[e];return null==t&&Kp.throwArgumentError("unknown locale","wordlist",e),t}return e}const Xp={},em="m/44'/60'/0'/0/0";class tm{constructor(e,t,r,n,i,s,a,o){if(e!==Xp)throw new Error("HDNode constructor cannot be called directly");if(t){const e=new gf(t);vl(this,"privateKey",e.privateKey),vl(this,"publicKey",e.compressedPublicKey)}else vl(this,"privateKey",null),vl(this,"publicKey",Vc(r));vl(this,"parentFingerprint",n),vl(this,"fingerprint",Jc(Rp(jp(this.publicKey)),0,4)),vl(this,"address",xf(this.publicKey)),vl(this,"chainCode",i),vl(this,"index",s),vl(this,"depth",a),null==o?(vl(this,"mnemonic",null),vl(this,"path",null)):"string"==typeof o?(vl(this,"mnemonic",null),vl(this,"path",o)):(vl(this,"mnemonic",o),vl(this,"path",o.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return Qp(zc([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",Vc(this.depth),this.parentFingerprint,el(Vc(this.index),4),this.chainCode,null!=this.privateKey?zc(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new tm(Xp,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let t=this.path;t&&(t+="/"+(e&~Vp));const r=new Uint8Array(37);if(e&Vp){if(!this.privateKey)throw new Error("cannot derive child of neutered node");r.set(qc(this.privateKey),1),t&&(t+="'")}else r.set(qc(this.publicKey));for(let t=24;t>=0;t-=8)r[33+(t>>3)]=e>>24-t&255;const n=qc(Bp(Np.sha512,this.chainCode,r)),i=n.slice(0,32),s=n.slice(32);let a=null,o=null;this.privateKey?a=Jp(dl.from(i).add(this.privateKey).mod(Hp)):o=new gf(Vc(i))._addPoint(this.publicKey);let u=t;const c=this.mnemonic;return c&&(u=Object.freeze({phrase:c.phrase,path:t,locale:c.locale||"en"})),new tm(Xp,a,o,this.fingerprint,Jp(s),e,this.depth+1,u)}derivePath(e){const t=e.split("/");if(0===t.length||"m"===t[0]&&0!==this.depth)throw new Error("invalid path - "+e);"m"===t[0]&&t.shift();let r=this;for(let e=0;e<t.length;e++){const n=t[e];if(n.match(/^[0-9]+'$/)){const e=parseInt(n.substring(0,n.length-1));if(e>=Vp)throw new Error("invalid path index - "+n);r=r._derive(Vp+e)}else{if(!n.match(/^[0-9]+$/))throw new Error("invalid path component - "+n);{const e=parseInt(n);if(e>=Vp)throw new Error("invalid path index - "+n);r=r._derive(e)}}}return r}static _fromSeed(e,t){const r=qc(e);if(r.length<16||r.length>64)throw new Error("invalid seed");const n=qc(Bp(Np.sha512,Gp,r));return new tm(Xp,Jp(n.slice(0,32)),null,"0x00000000",Jp(n.slice(32)),0,0,t)}static fromMnemonic(e,t,r){return e=im(nm(e,r=Yp(r)),r),tm._fromSeed(rm(e,t),{phrase:e,path:"m",locale:r.locale})}static fromSeed(e){return tm._fromSeed(e,null)}static fromExtendedKey(e){const t=Cp.decode(e);82===t.length&&Qp(t.slice(0,78))===e||Kp.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const r=t[4],n=Vc(t.slice(5,9)),i=parseInt(Vc(t.slice(9,13)).substring(2),16),s=Vc(t.slice(13,45)),a=t.slice(45,78);switch(Vc(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new tm(Xp,null,Vc(a),n,s,i,r,null);case"0x0488ade4":case"0x04358394 ":if(0!==a[0])break;return new tm(Xp,Vc(a.slice(1)),null,n,s,i,r,null)}return Kp.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function rm(e,t){t||(t="");const r=ud("mnemonic"+t,nd.NFKD);return Lp(ud(e,nd.NFKD),r,2048,64,"sha512")}function nm(e,t){t=Yp(t),Kp.checkNormalize();const r=t.split(e);if(r.length%3!=0)throw new Error("invalid mnemonic");const n=qc(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let e=0;e<r.length;e++){let s=t.getWordIndex(r[e].normalize("NFKD"));if(-1===s)throw new Error("invalid mnemonic");for(let e=0;e<11;e++)s&1<<10-e&&(n[i>>3]|=1<<7-i%8),i++}const s=32*r.length/3,a=Wp(r.length/3);if((qc(jp(n.slice(0,s/8)))[0]&a)!=(n[n.length-1]&a))throw new Error("invalid checksum");return Vc(n.slice(0,s/8))}function im(e,t){if(t=Yp(t),(e=qc(e)).length%4!=0||e.length<16||e.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let t=0;t<e.length;t++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=e[t],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[t]>>8-n,r.push(e[t]&(1<<8-n)-1),n+=3);const i=e.length/4,s=qc(jp(e))[0]&Wp(i);return r[r.length-1]<<=i,r[r.length-1]|=s>>8-i,t.join(r.map((e=>t.getWord(e))))}function sm(e,t){try{return nm(e,t),!0}catch(e){}return!1}function am(e){return("number"!=typeof e||e<0||e>=Vp||e%1)&&Kp.throwArgumentError("invalid account index","index",e),`m/44'/60'/${e}'/0/0`}const om=new jc("random/5.7.0"),um=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i.g)return i.g;throw new Error("unable to locate global object")}();let cm=um.crypto||um.msCrypto;function lm(e){(e<=0||e>1024||e%1||e!=e)&&om.throwArgumentError("invalid length","length",e);const t=new Uint8Array(e);return cm.getRandomValues(t),qc(t)}cm&&cm.getRandomValues||(om.warn("WARNING: Missing strong random number source"),cm={getRandomValues:function(e){return om.throwError("no secure random source avaialble",jc.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});var dm=i(8202),hm=i.n(dm),fm=i(4689),pm=i.n(fm);function mm(e){return"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),qc(e)}function gm(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function ym(e){return"string"==typeof e?ud(e,nd.NFKC):qc(e)}function vm(e,t){let r=e;const n=t.toLowerCase().split("/");for(let e=0;e<n.length;e++){let t=null;for(const i in r)if(i.toLowerCase()===n[e]){t=r[i];break}if(null===t)return null;r=t}return r}function _m(e){const t=qc(e);t[6]=15&t[6]|64,t[8]=63&t[8]|128;const r=Vc(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const bm="json-wallets/5.7.0",wm=new jc(bm);function Am(e){return null!=e&&e.mnemonic&&e.mnemonic.phrase}class Em extends Pl{isKeystoreAccount(e){return!(!e||!e._isKeystoreAccount)}}function km(e,t){const r=mm(vm(e,"crypto/ciphertext"));if(Vc(Dl(zc([t.slice(16,32),r]))).substring(2)!==vm(e,"crypto/mac").toLowerCase())throw new Error("invalid password");const n=function(e,t,r){if("aes-128-ctr"===vm(e,"crypto/cipher")){const n=mm(vm(e,"crypto/cipherparams/iv")),i=new(hm().Counter)(n);return qc(new(hm().ModeOfOperation.ctr)(t,i).decrypt(r))}return null}(e,t.slice(0,16),r);n||wm.throwError("unsupported cipher",jc.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const i=t.slice(32,64),s=xf(n);if(e.address){let t=e.address.toLowerCase();if("0x"!==t.substring(0,2)&&(t="0x"+t),Ql(t)!==s)throw new Error("address mismatch")}const a={_isKeystoreAccount:!0,address:s,privateKey:Vc(n)};if("0.1"===vm(e,"x-ethers/version")){const t=mm(vm(e,"x-ethers/mnemonicCiphertext")),r=mm(vm(e,"x-ethers/mnemonicCounter")),n=new(hm().Counter)(r),s=new(hm().ModeOfOperation.ctr)(i,n),o=vm(e,"x-ethers/path")||em,u=vm(e,"x-ethers/locale")||"en",c=qc(s.decrypt(t));try{const e=im(c,u),t=tm.fromMnemonic(e,null,u).derivePath(o);if(t.privateKey!=a.privateKey)throw new Error("mnemonic mismatch");a.mnemonic=t.mnemonic}catch(e){if(e.code!==jc.errors.INVALID_ARGUMENT||"wordlist"!==e.argument)throw e}}return new Em(a)}function xm(e,t,r,n,i){return qc(Lp(e,t,r,n,i))}function Tm(e,t,r,n,i){return Promise.resolve(xm(e,t,r,n,i))}function Pm(e,t,r,n,i){const s=ym(t),a=vm(e,"crypto/kdf");if(a&&"string"==typeof a){const t=function(e,t){return wm.throwArgumentError("invalid key-derivation function parameters",e,t)};if("scrypt"===a.toLowerCase()){const r=mm(vm(e,"crypto/kdfparams/salt")),o=parseInt(vm(e,"crypto/kdfparams/n")),u=parseInt(vm(e,"crypto/kdfparams/r")),c=parseInt(vm(e,"crypto/kdfparams/p"));o&&u&&c||t("kdf",a),0!=(o&o-1)&&t("N",o);const l=parseInt(vm(e,"crypto/kdfparams/dklen"));return 32!==l&&t("dklen",l),n(s,r,o,u,c,64,i)}if("pbkdf2"===a.toLowerCase()){const n=mm(vm(e,"crypto/kdfparams/salt"));let i=null;const a=vm(e,"crypto/kdfparams/prf");"hmac-sha256"===a?i="sha256":"hmac-sha512"===a?i="sha512":t("prf",a);const o=parseInt(vm(e,"crypto/kdfparams/c")),u=parseInt(vm(e,"crypto/kdfparams/dklen"));return 32!==u&&t("dklen",u),r(s,n,o,u,i)}}return wm.throwArgumentError("unsupported key-derivation function","kdf",a)}const Sm=new jc(bm);class Im extends Pl{isCrowdsaleAccount(e){return!(!e||!e._isCrowdsaleAccount)}}function Om(e,t){const r=JSON.parse(e);t=ym(t);const n=Ql(vm(r,"ethaddr")),i=mm(vm(r,"encseed"));i&&i.length%16==0||Sm.throwArgumentError("invalid encseed","json",e);const s=qc(Lp(t,t,2e3,32,"sha256")).slice(0,16),a=i.slice(0,16),o=i.slice(16),u=new(hm().ModeOfOperation.cbc)(s,a),c=hm().padding.pkcs7.strip(qc(u.decrypt(o)));let l="";for(let e=0;e<c.length;e++)l+=String.fromCharCode(c[e]);const d=Dl(ud(l));return new Im({_isCrowdsaleAccount:!0,address:n,privateKey:d})}function Cm(e){let t=null;try{t=JSON.parse(e)}catch(e){return!1}return t.encseed&&t.ethaddr}function Nm(e){let t=null;try{t=JSON.parse(e)}catch(e){return!1}return!(!t.version||parseInt(t.version)!==t.version||3!==parseInt(t.version))}function Mm(e){if(Cm(e))try{return Ql(JSON.parse(e).ethaddr)}catch(e){return null}if(Nm(e))try{return Ql(JSON.parse(e).address)}catch(e){return null}return null}var Rm=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}u((n=n.apply(e,t||[])).next())}))};const jm=new jc("wallet/5.7.0");class Dm extends Th{constructor(e,t){if(super(),null!=(r=e)&&Hc(r.privateKey,32)&&null!=r.address){const t=new gf(e.privateKey);if(vl(this,"_signingKey",(()=>t)),vl(this,"address",xf(this.publicKey)),this.address!==Ql(e.address)&&jm.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),function(e){const t=e.mnemonic;return t&&t.phrase}(e)){const t=e.mnemonic;vl(this,"_mnemonic",(()=>({phrase:t.phrase,path:t.path||em,locale:t.locale||"en"})));const r=this.mnemonic;xf(tm.fromMnemonic(r.phrase,null,r.locale).derivePath(r.path).privateKey)!==this.address&&jm.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else vl(this,"_mnemonic",(()=>null))}else{if(gf.isSigningKey(e))"secp256k1"!==e.curve&&jm.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),vl(this,"_signingKey",(()=>e));else{"string"==typeof e&&e.match(/^[0-9a-f]*$/i)&&64===e.length&&(e="0x"+e);const t=new gf(e);vl(this,"_signingKey",(()=>t))}vl(this,"_mnemonic",(()=>null)),vl(this,"address",xf(this.publicKey))}var r;t&&!wh.isProvider(t)&&jm.throwArgumentError("invalid provider","provider",t),vl(this,"provider",t||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Dm(this,e)}signTransaction(e){return bl(e).then((t=>{null!=t.from&&(Ql(t.from)!==this.address&&jm.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete t.from);const r=this._signingKey().signDigest(Dl(Mf(t)));return Mf(t,r)}))}signMessage(e){return Rm(this,void 0,void 0,(function*(){return rl(this._signingKey().signDigest(fp(e)))}))}_signTypedData(e,t,r){return Rm(this,void 0,void 0,(function*(){const n=yield Ip.resolveNames(e,t,r,(e=>(null==this.provider&&jm.throwError("cannot resolve ENS names without a provider",jc.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:e}),this.provider.resolveName(e))));return rl(this._signingKey().signDigest(Ip.hash(n.domain,t,n.value)))}))}encrypt(e,t,r){if("function"!=typeof t||r||(r=t,t={}),r&&"function"!=typeof r)throw new Error("invalid callback");return t||(t={}),function(e,t,r,n){try{if(Ql(e.address)!==xf(e.privateKey))throw new Error("address/privateKey mismatch");if(Am(e)){const t=e.mnemonic;if(tm.fromMnemonic(t.phrase,null,t.locale).derivePath(t.path||em).privateKey!=e.privateKey)throw new Error("mnemonic mismatch")}}catch(e){return Promise.reject(e)}"function"!=typeof r||n||(n=r,r={}),r||(r={});const i=qc(e.privateKey),s=ym(t);let a=null,o=null,u=null;if(Am(e)){const t=e.mnemonic;a=qc(nm(t.phrase,t.locale||"en")),o=t.path||em,u=t.locale||"en"}let c=r.client;c||(c="ethers.js");let l=null;l=r.salt?qc(r.salt):lm(32);let d=null;if(r.iv){if(d=qc(r.iv),16!==d.length)throw new Error("invalid iv")}else d=lm(16);let h=null;if(r.uuid){if(h=qc(r.uuid),16!==h.length)throw new Error("invalid uuid")}else h=lm(16);let f=1<<17,p=8,m=1;return r.scrypt&&(r.scrypt.N&&(f=r.scrypt.N),r.scrypt.r&&(p=r.scrypt.r),r.scrypt.p&&(m=r.scrypt.p)),pm().scrypt(s,l,f,p,m,64,n).then((t=>{const r=(t=qc(t)).slice(0,16),n=t.slice(16,32),s=t.slice(32,64),g=new(hm().Counter)(d),y=qc(new(hm().ModeOfOperation.ctr)(r,g).encrypt(i)),v=Dl(zc([n,y])),_={address:e.address.substring(2).toLowerCase(),id:_m(h),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:Vc(d).substring(2)},ciphertext:Vc(y).substring(2),kdf:"scrypt",kdfparams:{salt:Vc(l).substring(2),n:f,dklen:32,p:m,r:p},mac:v.substring(2)}};if(a){const e=lm(16),t=new(hm().Counter)(e),r=qc(new(hm().ModeOfOperation.ctr)(s,t).encrypt(a)),n=new Date,i=n.getUTCFullYear()+"-"+gm(n.getUTCMonth()+1,2)+"-"+gm(n.getUTCDate(),2)+"T"+gm(n.getUTCHours(),2)+"-"+gm(n.getUTCMinutes(),2)+"-"+gm(n.getUTCSeconds(),2)+".0Z";_["x-ethers"]={client:c,gethFilename:"UTC--"+i+"--"+_.address,mnemonicCounter:Vc(e).substring(2),mnemonicCiphertext:Vc(r).substring(2),path:o,locale:u,version:"0.1"}}return JSON.stringify(_)}))}(this,e,t,r)}static createRandom(e){let t=lm(16);e||(e={}),e.extraEntropy&&(t=qc(Jc(Dl(zc([t,e.extraEntropy])),0,16)));const r=im(t,e.locale);return Dm.fromMnemonic(r,e.path,e.locale)}static fromEncryptedJson(e,t,r){return function(e,t,r){if(Cm(e)){r&&r(0);const n=Om(e,t);return r&&r(1),Promise.resolve(n)}return Nm(e)?function(e,t,r){return n=this,s=function*(){const n=JSON.parse(e);return km(n,yield Pm(n,t,Tm,pm().scrypt,r))},new((i=void 0)||(i=Promise))((function(e,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,a)}o((s=s.apply(n,[])).next())}));var n,i,s}(e,t,r):Promise.reject(new Error("invalid JSON wallet"))}(e,t,r).then((e=>new Dm(e)))}static fromEncryptedJsonSync(e,t){return new Dm(function(e,t){if(Cm(e))return Om(e,t);if(Nm(e))return function(e,t){const r=JSON.parse(e);return km(r,Pm(r,t,xm,pm().syncScrypt))}(e,t);throw new Error("invalid JSON wallet")}(e,t))}static fromMnemonic(e,t,r){return t||(t=em),new Dm(tm.fromMnemonic(e,null,r).derivePath(t))}}function Bm(e,t){return Tf(fp(e),t)}function Lm(e,t,r,n){return Tf(Ip.hash(e,t,r),n)}const Um="0x0000000000000000000000000000000000000000",Fm="0x0000000000000000000000000000000000000000000000000000000000000000",Zm="Ξ",qm=new jc("networks/5.7.1");function zm(e){const t=function(t,r){null==r&&(r={});const n=[];if(t.InfuraProvider&&"-"!==r.infura)try{n.push(new t.InfuraProvider(e,r.infura))}catch(e){}if(t.EtherscanProvider&&"-"!==r.etherscan)try{n.push(new t.EtherscanProvider(e,r.etherscan))}catch(e){}if(t.AlchemyProvider&&"-"!==r.alchemy)try{n.push(new t.AlchemyProvider(e,r.alchemy))}catch(e){}if(t.PocketProvider&&"-"!==r.pocket){const i=["goerli","ropsten","rinkeby","sepolia"];try{const s=new t.PocketProvider(e,r.pocket);s.network&&-1===i.indexOf(s.network.name)&&n.push(s)}catch(e){}}if(t.CloudflareProvider&&"-"!==r.cloudflare)try{n.push(new t.CloudflareProvider(e))}catch(e){}if(t.AnkrProvider&&"-"!==r.ankr)try{const i=["ropsten"],s=new t.AnkrProvider(e,r.ankr);s.network&&-1===i.indexOf(s.network.name)&&n.push(s)}catch(e){}if(0===n.length)return null;if(t.FallbackProvider){let i=1;return null!=r.quorum?i=r.quorum:"homestead"===e&&(i=2),new t.FallbackProvider(n,i)}return n[0]};return t.renetwork=function(e){return zm(e)},t}function $m(e,t){const r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(e,t):null};return r.renetwork=function(t){return $m(e,t)},r}const Km={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:zm("homestead")},Hm={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:zm("ropsten")},Gm={chainId:63,name:"classicMordor",_defaultProvider:$m("https://www.ethercluster.com/mordor","classicMordor")},Vm={unspecified:{chainId:0,name:"unspecified"},homestead:Km,mainnet:Km,morden:{chainId:2,name:"morden"},ropsten:Hm,testnet:Hm,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:zm("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:zm("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:zm("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:zm("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:$m("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Gm,classicTestnet:Gm,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:$m("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:zm("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:zm("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Wm(e){if(null==e)return null;if("number"==typeof e){for(const t in Vm){const r=Vm[t];if(r.chainId===e)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"==typeof e){const t=Vm[e];return null==t?null:{name:t.name,chainId:t.chainId,ensAddress:t.ensAddress,_defaultProvider:t._defaultProvider||null}}const t=Vm[e.name];if(!t)return"number"!=typeof e.chainId&&qm.throwArgumentError("invalid network chainId","network",e),e;0!==e.chainId&&e.chainId!==t.chainId&&qm.throwArgumentError("network chainId mismatch","network",e);let r=e._defaultProvider||null;var n;return null==r&&t._defaultProvider&&(r=(n=t._defaultProvider)&&"function"==typeof n.renetwork?t._defaultProvider.renetwork(e):t._defaultProvider),{name:e.name,chainId:t.chainId,ensAddress:e.ensAddress||t.ensAddress||null,_defaultProvider:r}}function Jm(e){e=atob(e);const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return qc(t)}function Qm(e){e=qc(e);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function Ym(e,t){null==t&&(t=1);const r=[],n=r.forEach,i=function(e,t){n.call(e,(function(e){t>0&&Array.isArray(e)?i(e,t-1):r.push(e)}))};return i(e,t),r}function Xm(e){return 1&e?~e>>1:e>>1}function eg(e,t){let r=Array(e);for(let n=0,i=-1;n<e;n++)r[n]=i+=1+t();return r}function tg(e,t){let r=Array(e);for(let n=0,i=0;n<e;n++)r[n]=i+=Xm(t());return r}function rg(e,t){let r=eg(e(),e),n=e(),i=eg(n,e),s=function(e,t){let r=Array(e);for(let n=0;n<e;n++)r[n]=1+t();return r}(n,e);for(let e=0;e<n;e++)for(let t=0;t<s[e];t++)r.push(i[e]+t);return t?r.map((e=>t[e])):r}function ng(e,t,r){let n=Array(e).fill(void 0).map((()=>[]));for(let i=0;i<t;i++)tg(e,r).forEach(((e,t)=>n[t].push(e)));return n}function ig(e,t){let r=1+t(),n=t(),i=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(r)}return t}(t);return Ym(ng(i.length,1+e,t).map(((e,t)=>{const s=e[0],a=e.slice(1);return Array(i[t]).fill(void 0).map(((e,t)=>{let i=t*n;return[s+t*r,a.map((e=>e+i))]}))})))}function sg(e,t){return ng(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}const ag=function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),i=1,s=[0,1];for(let e=1;e<n;e++)s.push(i+=r());let a=r(),o=t;t+=a;let u=0,c=0;function l(){return 0==u&&(c=c<<8|e[t++],u=8),c>>--u&1}const d=Math.pow(2,31),h=d>>>1,f=h>>1,p=d-1;let m=0;for(let e=0;e<31;e++)m=m<<1|l();let g=[],y=0,v=d;for(;;){let e=Math.floor(((m-y+1)*i-1)/v),t=0,r=n;for(;r-t>1;){let n=t+r>>>1;e<s[n]?r=n:t=n}if(0==t)break;g.push(t);let a=y+Math.floor(v*s[t]/i),o=y+Math.floor(v*s[t+1]/i)-1;for(;0==((a^o)&h);)m=m<<1&p|l(),a=a<<1&p,o=o<<1&p|1;for(;a&~o&f;)m=m&h|m<<1&p>>>1|l(),a=a<<1^h,o=(o^h)<<1|h|1;y=a,v=1+o-a}let _=n-4;return g.map((t=>{switch(t-_){case 3:return _+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return _+256+(e[o++]<<8|e[o++]);case 1:return _+e[o++];default:return t-1}}))}(Jm("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))),og=new Set(rg(ag)),ug=new Set(rg(ag)),cg=function(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(ig(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(sg(r,e))}return function(e){const t={};for(let r=0;r<e.length;r++){const n=e[r];t[n[0]]=n[1]}return t}(Ym(t))}(ag),lg=function(e){let t=rg(e).sort(((e,t)=>e-t));return function r(){let n=[];for(;;){let i=rg(e,t);if(0==i.length)break;n.push({set:new Set(i),node:r()})}n.sort(((e,t)=>t.set.size-e.set.size));let i=e(),s=i%3;i=i/3|0;let a=!!(1&i);return i>>=1,{branches:n,valid:s,fe0f:a,save:1==i,check:2==i}}()}(ag),dg=45,hg=95;function fg(e){return fd(e)}function pg(e){return e.filter((e=>65039!=e))}function mg(e){for(let t of e.split(".")){let r=fg(t);try{for(let e=r.lastIndexOf(hg)-1;e>=0;e--)if(r[e]!==hg)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every((e=>e<128))&&r[2]===dg&&r[3]===dg)throw new Error("invalid label extension")}catch(e){throw new Error(`Invalid label "${t}": ${e.message}`)}}return e}function gg(e,t){var r;let n,i,s=lg,a=[],o=e.length;for(t&&(t.length=0);o;){let u=e[--o];if(s=null===(r=s.branches.find((e=>e.set.has(u))))||void 0===r?void 0:r.node,!s)break;if(s.save)i=u;else if(s.check&&u===i)break;a.push(u),s.fe0f&&(a.push(65039),o>0&&65039==e[o-1]&&o--),s.valid&&(n=a.slice(),2==s.valid&&n.splice(1,1),t&&t.push(...e.slice(o).reverse()),e.length=o)}return n}const yg=new jc(pp),vg=new Uint8Array(32);function _g(e){if(0===e.length)throw new Error("invalid ENS name; empty component");return e}function bg(e){const t=ud(function(e){return mg(function(e,t){let r=fg(e).reverse(),n=[];for(;r.length;){let e=gg(r);if(e){n.push(...t(e));continue}let i=r.pop();if(og.has(i)){n.push(i);continue}if(ug.has(i))continue;let s=cg[i];if(!s)throw new Error(`Disallowed codepoint: 0x${i.toString(16).toUpperCase()}`);n.push(...s)}return mg(String.fromCodePoint(...n).normalize("NFC"))}(e,pg))}(e)),r=[];if(0===e.length)return r;let n=0;for(let e=0;e<t.length;e++)46===t[e]&&(r.push(_g(t.slice(n,e))),n=e+1);if(n>=t.length)throw new Error("invalid ENS name; empty component");return r.push(_g(t.slice(n))),r}function wg(e){try{return 0!==bg(e).length}catch(e){}return!1}function Ag(e){"string"!=typeof e&&yg.throwArgumentError("invalid ENS name; not a string","name",e);let t=vg;const r=bg(e);for(;r.length;)t=Dl(zc([t,Dl(r.pop())]));return Vc(t)}function Eg(e){return Vc(zc(bg(e).map((e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t}))))+"00"}vg.fill(0);var kg=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}u((n=n.apply(e,t||[])).next())}))};function xg(e,t){return kg(this,void 0,void 0,(function*(){null==t&&(t={});const r={method:t.method||"GET",headers:t.headers||{},body:t.body||void 0};if(!0!==t.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),null!=t.fetchOptions){const e=t.fetchOptions;e.mode&&(r.mode=e.mode),e.cache&&(r.cache=e.cache),e.credentials&&(r.credentials=e.credentials),e.redirect&&(r.redirect=e.redirect),e.referrer&&(r.referrer=e.referrer)}const n=yield fetch(e,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach(((e,t)=>{s[t.toLowerCase()]=e})):n.headers.keys().forEach((e=>{s[e.toLowerCase()]=n.headers.get(e)})),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:qc(new Uint8Array(i))}}))}var Tg=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}u((n=n.apply(e,t||[])).next())}))};const Pg=new jc("web/5.7.1");function Sg(e){return new Promise((t=>{setTimeout(t,e)}))}function Ig(e,t){if(null==e)return null;if("string"==typeof e)return e;if(Uc(e)){if(t&&("text"===t.split("/")[0]||"application/json"===t.split(";")[0].trim()))try{return hd(e)}catch(e){}return Vc(e)}return e}function Og(e,t,r){const n="object"==typeof e&&null!=e.throttleLimit?e.throttleLimit:12;Pg.assertArgument(n>0&&n%1==0,"invalid connection throttle limit","connection.throttleLimit",n);const i="object"==typeof e?e.throttleCallback:null,s="object"==typeof e&&"number"==typeof e.throttleSlotInterval?e.throttleSlotInterval:100;Pg.assertArgument(s>0&&s%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const a="object"==typeof e&&!!e.errorPassThrough,o={};let u=null;const c={method:"GET"};let l=!1,d=12e4;if("string"==typeof e)u=e;else if("object"==typeof e){if(null!=e&&null!=e.url||Pg.throwArgumentError("missing URL","connection.url",e),u=e.url,"number"==typeof e.timeout&&e.timeout>0&&(d=e.timeout),e.headers)for(const t in e.headers)o[t.toLowerCase()]={key:t,value:String(e.headers[t])},["if-none-match","if-modified-since"].indexOf(t.toLowerCase())>=0&&(l=!0);if(c.allowGzip=!!e.allowGzip,null!=e.user&&null!=e.password){"https:"!==u.substring(0,6)&&!0!==e.allowInsecureAuthentication&&Pg.throwError("basic authentication requires a secure https url",jc.errors.INVALID_ARGUMENT,{argument:"url",url:u,user:e.user,password:"[REDACTED]"});const t=e.user+":"+e.password;o.authorization={key:"Authorization",value:"Basic "+Qm(ud(t))}}null!=e.skipFetchSetup&&(c.skipFetchSetup=!!e.skipFetchSetup),null!=e.fetchOptions&&(c.fetchOptions=Al(e.fetchOptions))}const h=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),f=u?u.match(h):null;if(f)try{const e={statusCode:200,statusMessage:"OK",headers:{"content-type":f[1]||"text/plain"},body:f[2]?Jm(f[3]):(p=f[3],ud(p.replace(/%([0-9a-f][0-9a-f])/gi,((e,t)=>String.fromCharCode(parseInt(t,16))))))};let t=e.body;return r&&(t=r(e.body,e)),Promise.resolve(t)}catch(e){Pg.throwError("processing response error",jc.errors.SERVER_ERROR,{body:Ig(f[1],f[2]),error:e,requestBody:null,requestMethod:"GET",url:u})}var p;t&&(c.method="POST",c.body=t,null==o["content-type"]&&(o["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==o["content-length"]&&(o["content-length"]={key:"Content-Length",value:String(t.length)}));const m={};Object.keys(o).forEach((e=>{const t=o[e];m[t.key]=t.value})),c.headers=m;const g=function(){let e=null;return{promise:new Promise((function(t,r){d&&(e=setTimeout((()=>{null!=e&&(e=null,r(Pg.makeError("timeout",jc.errors.TIMEOUT,{requestBody:Ig(c.body,m["content-type"]),requestMethod:c.method,timeout:d,url:u})))}),d))})),cancel:function(){null!=e&&(clearTimeout(e),e=null)}}}(),y=function(){return Tg(this,void 0,void 0,(function*(){for(let e=0;e<n;e++){let t=null;try{if(t=yield xg(u,c),e<n)if(301===t.statusCode||302===t.statusCode){const e=t.headers.location||"";if("GET"===c.method&&e.match(/^https:/)){u=t.headers.location;continue}}else if(429===t.statusCode){let r=!0;if(i&&(r=yield i(e,u)),r){let r=0;const n=t.headers["retry-after"];r="string"==typeof n&&n.match(/^[1-9][0-9]*$/)?1e3*parseInt(n):s*parseInt(String(Math.random()*Math.pow(2,e))),yield Sg(r);continue}}}catch(e){t=e.response,null==t&&(g.cancel(),Pg.throwError("missing response",jc.errors.SERVER_ERROR,{requestBody:Ig(c.body,m["content-type"]),requestMethod:c.method,serverError:e,url:u}))}let o=t.body;if(l&&304===t.statusCode?o=null:!a&&(t.statusCode<200||t.statusCode>=300)&&(g.cancel(),Pg.throwError("bad response",jc.errors.SERVER_ERROR,{status:t.statusCode,headers:t.headers,body:Ig(o,t.headers?t.headers["content-type"]:null),requestBody:Ig(c.body,m["content-type"]),requestMethod:c.method,url:u})),r)try{const e=yield r(o,t);return g.cancel(),e}catch(r){if(r.throttleRetry&&e<n){let t=!0;if(i&&(t=yield i(e,u)),t){const t=s*parseInt(String(Math.random()*Math.pow(2,e)));yield Sg(t);continue}}g.cancel(),Pg.throwError("processing response error",jc.errors.SERVER_ERROR,{body:Ig(o,t.headers?t.headers["content-type"]:null),error:r,requestBody:Ig(c.body,m["content-type"]),requestMethod:c.method,url:u})}return g.cancel(),o}return Pg.throwError("failed response",jc.errors.SERVER_ERROR,{requestBody:Ig(c.body,m["content-type"]),requestMethod:c.method,url:u})}))}();return Promise.race([g.promise,y])}function Cg(e,t,r){let n=null;if(null!=t){n=ud(t);const r="string"==typeof e?{url:e}:Al(e);r.headers?0!==Object.keys(r.headers).filter((e=>"content-type"===e.toLowerCase())).length||(r.headers=Al(r.headers),r.headers["content-type"]="application/json"):r.headers={"content-type":"application/json"},e=r}return Og(e,n,((e,t)=>{let n=null;if(null!=e)try{n=JSON.parse(hd(e))}catch(t){Pg.throwError("invalid JSON",jc.errors.SERVER_ERROR,{body:e,error:t})}return r&&(n=r(n,t)),n}))}function Ng(e,t){return t||(t={}),null==(t=Al(t)).floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise((function(r,n){let i=null,s=!1;const a=()=>!s&&(s=!0,i&&clearTimeout(i),!0);t.timeout&&(i=setTimeout((()=>{a()&&n(new Error("timeout"))}),t.timeout));const o=t.retryLimit;let u=0;!function i(){return e().then((function(e){if(void 0!==e)a()&&r(e);else if(t.oncePoll)t.oncePoll.once("poll",i);else if(t.onceBlock)t.onceBlock.once("block",i);else if(!s){if(u++,u>o)return void(a()&&n(new Error("retry limit reached")));let e=t.interval*parseInt(String(Math.random()*Math.pow(2,u)));e<t.floor&&(e=t.floor),e>t.ceiling&&(e=t.ceiling),setTimeout(i,e)}return null}),(function(e){a()&&n(e)}))}()}))}var Mg=i(1273),Rg=i.n(Mg);const jg="providers/5.7.2",Dg=new jc(jg);class Bg{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},t=this.address.bind(this),r=this.bigNumber.bind(this),n=this.blockTag.bind(this),i=this.data.bind(this),s=this.hash.bind(this),a=this.hex.bind(this),o=this.number.bind(this),u=this.type.bind(this);return e.transaction={hash:s,type:u,accessList:Bg.allowNull(this.accessList.bind(this),null),blockHash:Bg.allowNull(s,null),blockNumber:Bg.allowNull(o,null),transactionIndex:Bg.allowNull(o,null),confirmations:Bg.allowNull(o,null),from:t,gasPrice:Bg.allowNull(r),maxPriorityFeePerGas:Bg.allowNull(r),maxFeePerGas:Bg.allowNull(r),gasLimit:r,to:Bg.allowNull(t,null),value:r,nonce:o,data:i,r:Bg.allowNull(this.uint256),s:Bg.allowNull(this.uint256),v:Bg.allowNull(o),creates:Bg.allowNull(t,null),raw:Bg.allowNull(i)},e.transactionRequest={from:Bg.allowNull(t),nonce:Bg.allowNull(o),gasLimit:Bg.allowNull(r),gasPrice:Bg.allowNull(r),maxPriorityFeePerGas:Bg.allowNull(r),maxFeePerGas:Bg.allowNull(r),to:Bg.allowNull(t),value:Bg.allowNull(r),data:Bg.allowNull((e=>this.data(e,!0))),type:Bg.allowNull(o),accessList:Bg.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:o,blockNumber:o,transactionHash:s,address:t,topics:Bg.arrayOf(s),data:i,logIndex:o,blockHash:s},e.receipt={to:Bg.allowNull(this.address,null),from:Bg.allowNull(this.address,null),contractAddress:Bg.allowNull(t,null),transactionIndex:o,root:Bg.allowNull(a),gasUsed:r,logsBloom:Bg.allowNull(i),blockHash:s,transactionHash:s,logs:Bg.arrayOf(this.receiptLog.bind(this)),blockNumber:o,confirmations:Bg.allowNull(o,null),cumulativeGasUsed:r,effectiveGasPrice:Bg.allowNull(r),status:Bg.allowNull(o),type:u},e.block={hash:Bg.allowNull(s),parentHash:s,number:o,timestamp:o,nonce:Bg.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:Bg.allowNull(t),extraData:i,transactions:Bg.allowNull(Bg.arrayOf(s)),baseFeePerGas:Bg.allowNull(r)},e.blockWithTransactions=Al(e.block),e.blockWithTransactions.transactions=Bg.allowNull(Bg.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:Bg.allowNull(n,void 0),toBlock:Bg.allowNull(n,void 0),blockHash:Bg.allowNull(s,void 0),address:Bg.allowNull(t,void 0),topics:Bg.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:Bg.allowNull(o),blockHash:Bg.allowNull(s),transactionIndex:o,removed:Bg.allowNull(this.boolean.bind(this)),address:t,data:Bg.allowFalsish(i,"0x"),topics:Bg.arrayOf(s),transactionHash:s,logIndex:o},e}accessList(e){return If(e||[])}number(e){return"0x"===e?0:dl.from(e).toNumber()}type(e){return"0x"===e||null==e?0:dl.from(e).toNumber()}bigNumber(e){return dl.from(e)}boolean(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)}hex(e,t){return"string"==typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),Hc(e))?e.toLowerCase():Dg.throwArgumentError("invalid hash","value",e)}data(e,t){const r=this.hex(e,t);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+e);return r}address(e){return Ql(e)}callAddress(e){if(!Hc(e,32))return null;const t=Ql(Jc(e,12));return t===Um?null:t}contractAddress(e){return ed(e)}blockTag(e){if(null==e)return"latest";if("earliest"===e)return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if("number"==typeof e||Hc(e))return Yc(e);throw new Error("invalid blockTag")}hash(e,t){const r=this.hex(e,t);return 32!==Wc(r)?Dg.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(null==e)return null;const t=dl.from(e);try{return t.toNumber()}catch(e){}return null}uint256(e){if(!Hc(e))throw new Error("invalid uint256");return el(e,32)}_block(e,t){null!=e.author&&null==e.miner&&(e.miner=e.author);const r=null!=e._difficulty?e._difficulty:e.difficulty,n=Bg.check(t,e);return n._difficulty=null==r?null:dl.from(r),n}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return Bg.check(this.formats.transactionRequest,e)}transactionResponse(e){null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&dl.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=this.contractAddress(e)),1!==e.type&&2!==e.type||null!=e.accessList||(e.accessList=[]);const t=Bg.check(this.formats.transaction,e);if(null!=e.chainId){let r=e.chainId;Hc(r)&&(r=dl.from(r).toNumber()),t.chainId=r}else{let r=e.networkId;null==r&&null==t.v&&(r=e.chainId),Hc(r)&&(r=dl.from(r).toNumber()),"number"!=typeof r&&null!=t.v&&(r=(t.v-35)/2,r<0&&(r=0),r=parseInt(r)),"number"!=typeof r&&(r=0),t.chainId=r}return t.blockHash&&"x"===t.blockHash.replace(/0/g,"")&&(t.blockHash=null),t}transaction(e){return jf(e)}receiptLog(e){return Bg.check(this.formats.receiptLog,e)}receipt(e){const t=Bg.check(this.formats.receipt,e);if(null!=t.root)if(t.root.length<=4){const e=dl.from(t.root).toNumber();0===e||1===e?(null!=t.status&&t.status!==e&&Dg.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=e,delete t.root):Dg.throwArgumentError("invalid alt-root-status","value.root",t.root)}else 66!==t.root.length&&Dg.throwArgumentError("invalid root hash","value.root",t.root);return null!=t.status&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map((e=>this.topics(e))):null!=e?this.hash(e,!0):null}filter(e){return Bg.check(this.formats.filter,e)}filterLog(e){return Bg.check(this.formats.filterLog,e)}static check(e,t){const r={};for(const n in e)try{const i=e[n](t[n]);void 0!==i&&(r[n]=i)}catch(e){throw e.checkKey=n,e.checkValue=t[n],e}return r}static allowNull(e,t){return function(r){return null==r?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");const r=[];return t.forEach((function(t){r.push(e(t))})),r}}}function Lg(e){return e&&"function"==typeof e.isCommunityResource}function Ug(e){return Lg(e)&&e.isCommunityResource()}let Fg=!1;function Zg(){Fg||(Fg=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var qg=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}u((n=n.apply(e,t||[])).next())}))};const zg=new jc(jg);function $g(e){return null==e?"null":(32!==Wc(e)&&zg.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function Kg(e){for(e=e.slice();e.length>0&&null==e[e.length-1];)e.pop();return e.map((e=>{if(Array.isArray(e)){const t={};e.forEach((e=>{t[$g(e)]=!0}));const r=Object.keys(t);return r.sort(),r.join("|")}return $g(e)})).join("&")}function Hg(e){if("string"==typeof e){if(32===Wc(e=e.toLowerCase()))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:*:"+Kg(e);if(bh.isForkEvent(e))throw zg.warn("not implemented"),new Error("not implemented");if(e&&"object"==typeof e)return"filter:"+(e.address||"*")+":"+Kg(e.topics||[])}throw new Error("invalid event - "+e)}function Gg(){return(new Date).getTime()}function Vg(e){return new Promise((t=>{setTimeout(t,e)}))}const Wg=["block","network","pending","poll"];class Jg{constructor(e,t,r){vl(this,"tag",e),vl(this,"listener",t),vl(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}get filter(){const e=this.tag.split(":");if("filter"!==e[0])return null;const t=e[1],r=function(e){return""===e?[]:e.split(/&/g).map((e=>{if(""===e)return[];const t=e.split("|").map((e=>"null"===e?null:e));return 1===t.length?t[0]:t}))}(e[2]),n={};return r.length>0&&(n.topics=r),t&&"*"!==t&&(n.address=t),n}pollable(){return this.tag.indexOf(":")>=0||Wg.indexOf(this.tag)>=0}}const Qg={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Yg(e){return el(dl.from(e).toHexString(),32)}function Xg(e){return Cp.encode(zc([e,Jc(jp(jp(e)),0,4)]))}const ey=new RegExp("^(ipfs)://(.*)$","i"),ty=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),ey,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function ry(e,t){try{return hd(ny(e,t))}catch(e){}return null}function ny(e,t){if("0x"===e)return null;const r=dl.from(Jc(e,t,t+32)).toNumber(),n=dl.from(Jc(e,r,r+32)).toNumber();return Jc(e,r+32,r+32+n)}function iy(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):zg.throwArgumentError("unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}function sy(e){const t=qc(e);if(t.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(t,32-t.length),r}function ay(e){if(e.length%32==0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}function oy(e){const t=[];let r=0;for(let n=0;n<e.length;n++)t.push(null),r+=32;for(let n=0;n<e.length;n++){const i=qc(e[n]);t[n]=sy(r),t.push(sy(i.length)),t.push(ay(i)),r+=32+32*Math.ceil(i.length/32)}return Qc(t)}class uy{constructor(e,t,r,n){vl(this,"provider",e),vl(this,"name",r),vl(this,"address",e.formatter.address(t)),vl(this,"_resolvedAddress",n)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then((e=>dl.from(e).eq(1))).catch((e=>{if(e.code===jc.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e}))),this._supportsEip2544}_fetch(e,t){return qg(this,void 0,void 0,(function*(){const r={to:this.address,ccipReadEnabled:!0,data:Qc([e,Ag(this.name),t||"0x"])};let n=!1;(yield this.supportsWildcard())&&(n=!0,r.data=Qc(["0x9061b923",oy([Eg(this.name),r.data])]));try{let e=yield this.provider.call(r);return qc(e).length%32==4&&zg.throwError("resolver threw error",jc.errors.CALL_EXCEPTION,{transaction:r,data:e}),n&&(e=ny(e,0)),e}catch(e){if(e.code===jc.errors.CALL_EXCEPTION)return null;throw e}}))}_fetchBytes(e,t){return qg(this,void 0,void 0,(function*(){const r=yield this._fetch(e,t);return null!=r?ny(r,0):null}))}_getAddress(e,t){const r=Qg[String(e)];if(null==r&&zg.throwError(`unsupported coin type: ${e}`,jc.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),"eth"===r.ilk)return this.provider.formatter.address(t);const n=qc(t);if(null!=r.p2pkh){const e=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return Xg(zc([[r.p2pkh],"0x"+e[2]]))}}if(null!=r.p2sh){const e=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(e){const t=parseInt(e[1],16);if(e[2].length===2*t&&t>=1&&t<=75)return Xg(zc([[r.p2sh],"0x"+e[2]]))}}if(null!=r.prefix){const e=n[1];let t=n[0];if(0===t?20!==e&&32!==e&&(t=-1):t=-1,t>=0&&n.length===2+e&&e>=1&&e<=75){const e=Rg().toWords(n.slice(2));return e.unshift(t),Rg().encode(r.prefix,e)}}return null}getAddress(e){return qg(this,void 0,void 0,(function*(){if(null==e&&(e=60),60===e)try{const e=yield this._fetch("0x3b3b57de");return"0x"===e||e===Fm?null:this.provider.formatter.callAddress(e)}catch(e){if(e.code===jc.errors.CALL_EXCEPTION)return null;throw e}const t=yield this._fetchBytes("0xf1cb7e06",Yg(e));if(null==t||"0x"===t)return null;const r=this._getAddress(e,t);return null==r&&zg.throwError("invalid or unsupported coin data",jc.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:t}),r}))}getAvatar(){return qg(this,void 0,void 0,(function*(){const e=[{type:"name",content:this.name}];try{const t=yield this.getText("avatar");if(null==t)return null;for(let r=0;r<ty.length;r++){const n=t.match(ty[r]);if(null==n)continue;const i=n[1].toLowerCase();switch(i){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:iy(t)};case"erc721":case"erc1155":{const r="erc721"===i?"0xc87b56dd":"0x0e89341c";e.push({type:i,content:t});const s=this._resolvedAddress||(yield this.getAddress()),a=(n[2]||"").split("/");if(2!==a.length)return null;const o=yield this.provider.formatter.address(a[0]),u=el(dl.from(a[1]).toHexString(),32);if("erc721"===i){const t=this.provider.formatter.callAddress(yield this.provider.call({to:o,data:Qc(["0x6352211e",u])}));if(s!==t)return null;e.push({type:"owner",content:t})}else if("erc1155"===i){const t=dl.from(yield this.provider.call({to:o,data:Qc(["0x00fdd58e",el(s,32),u])}));if(t.isZero())return null;e.push({type:"balance",content:t.toString()})}const c={to:this.provider.formatter.address(a[0]),data:Qc([r,u])};let l=ry(yield this.provider.call(c),0);if(null==l)return null;e.push({type:"metadata-url-base",content:l}),"erc1155"===i&&(l=l.replace("{id}",u.substring(2)),e.push({type:"metadata-url-expanded",content:l})),l.match(/^ipfs:/i)&&(l=iy(l)),e.push({type:"metadata-url",content:l});const d=yield Cg(l);if(!d)return null;e.push({type:"metadata",content:JSON.stringify(d)});let h=d.image;if("string"!=typeof h)return null;if(h.match(/^(https:\/\/|data:)/i));else{if(null==h.match(ey))return null;e.push({type:"url-ipfs",content:h}),h=iy(h)}return e.push({type:"url",content:h}),{linkage:e,url:h}}}}}catch(e){}return null}))}getContentHash(){return qg(this,void 0,void 0,(function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(null==e||"0x"===e)return null;const t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e=parseInt(t[3],16);if(t[4].length===2*e)return"ipfs://"+Cp.encode("0x"+t[1])}const r=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const e=parseInt(r[3],16);if(r[4].length===2*e)return"ipns://"+Cp.encode("0x"+r[1])}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return"bzz://"+n[1];const i=e.match(/^0x90b2c605([0-9a-f]*)$/);if(i&&68===i[1].length){const e={"=":"","+":"-","/":"_"};return"sia://"+Qm("0x"+i[1]).replace(/[=+\/]/g,(t=>e[t]))}return zg.throwError("invalid or unsupported content hash data",jc.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})}))}getText(e){return qg(this,void 0,void 0,(function*(){let t=ud(e);t=zc([Yg(64),Yg(t.length),t]),t.length%32!=0&&(t=zc([t,el("0x",32-e.length%32)]));const r=yield this._fetchBytes("0x59d1d43c",Vc(t));return null==r||"0x"===r?null:hd(r)}))}}let cy=null,ly=1;class dy extends wh{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),vl(this,"anyNetwork","any"===e),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch((e=>{})),this._ready().catch((e=>{}));else{const t=_l(new.target,"getNetwork")(e);t?(vl(this,"_network",t),this.emit("network",t,null)):zg.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return qg(this,void 0,void 0,(function*(){if(null==this._network){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch(e){}null==e&&(e=yield this.detectNetwork()),e||zg.throwError("no network detected",jc.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=e:vl(this,"_network",e),this.emit("network",e,null))}return this._network}))}get ready(){return Ng((()=>this._ready().then((e=>e),(e=>{if(e.code!==jc.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e}))))}static getFormatter(){return null==cy&&(cy=new Bg),cy}static getNetwork(e){return Wm(null==e?"homestead":e)}ccipReadFetch(e,t,r){return qg(this,void 0,void 0,(function*(){if(this.disableCcipRead||0===r.length)return null;const n=e.to.toLowerCase(),i=t.toLowerCase(),s=[];for(let e=0;e<r.length;e++){const t=r[e],a=t.replace("{sender}",n).replace("{data}",i),o=t.indexOf("{data}")>=0?null:JSON.stringify({data:i,sender:n}),u=yield Cg({url:a,errorPassThrough:!0},o,((e,t)=>(e.status=t.statusCode,e)));if(u.data)return u.data;const c=u.message||"unknown error";if(u.status>=400&&u.status<500)return zg.throwError(`response not found during CCIP fetch: ${c}`,jc.errors.SERVER_ERROR,{url:t,errorMessage:c});s.push(c)}return zg.throwError(`error encountered during CCIP fetch: ${s.map((e=>JSON.stringify(e))).join(", ")}`,jc.errors.SERVER_ERROR,{urls:r,errorMessages:s})}))}_getInternalBlockNumber(e){return qg(this,void 0,void 0,(function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const t=this._internalBlockNumber;try{const r=yield t;if(Gg()-r.respTime<=e)return r.blockNumber;break}catch(e){if(this._internalBlockNumber===t)break}}const t=Gg(),r=bl({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((e=>null),(e=>e))}).then((({blockNumber:e,networkError:n})=>{if(n)throw this._internalBlockNumber===r&&(this._internalBlockNumber=null),n;const i=Gg();return(e=dl.from(e).toNumber())<this._maxInternalBlockNumber&&(e=this._maxInternalBlockNumber),this._maxInternalBlockNumber=e,this._setFastBlockNumber(e),{blockNumber:e,reqTime:t,respTime:i}}));return this._internalBlockNumber=r,r.catch((e=>{this._internalBlockNumber===r&&(this._internalBlockNumber=null)})),(yield r).blockNumber}))}poll(){return qg(this,void 0,void 0,(function*(){const e=ly++,t=[];let r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(e){return void this.emit("error",e)}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)zg.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",zg.makeError("network block skew detected",jc.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let e=this._emitted.block+1;e<=r;e++)this.emit("block",e);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach((e=>{if("block"===e)return;const t=this._emitted[e];"pending"!==t&&r-t>12&&delete this._emitted[e]}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach((e=>{switch(e.type){case"tx":{const r=e.hash;let n=this.getTransactionReceipt(r).then((e=>e&&null!=e.blockNumber?(this._emitted["t:"+r]=e.blockNumber,this.emit(r,e),null):null)).catch((e=>{this.emit("error",e)}));t.push(n);break}case"filter":if(!e._inflight){e._inflight=!0,-2===e._lastBlockNumber&&(e._lastBlockNumber=r-1);const n=e.filter;n.fromBlock=e._lastBlockNumber+1,n.toBlock=r;const i=n.toBlock-this._maxFilterBlockRange;i>n.fromBlock&&(n.fromBlock=i),n.fromBlock<0&&(n.fromBlock=0);const s=this.getLogs(n).then((t=>{e._inflight=!1,0!==t.length&&t.forEach((t=>{t.blockNumber>e._lastBlockNumber&&(e._lastBlockNumber=t.blockNumber),this._emitted["b:"+t.blockHash]=t.blockNumber,this._emitted["t:"+t.transactionHash]=t.blockNumber,this.emit(n,t)}))})).catch((t=>{this.emit("error",t),e._inflight=!1}));t.push(s)}}})),this._lastBlockNumber=r,Promise.all(t).then((()=>{this.emit("didPoll",e)})).catch((e=>{this.emit("error",e)}))}else this.emit("didPoll",e)}))}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return qg(this,void 0,void 0,(function*(){return zg.throwError("provider does not support network detection",jc.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})}))}getNetwork(){return qg(this,void 0,void 0,(function*(){const e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield Vg(0),this._network;const r=zg.makeError("underlying network changed",jc.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e}))}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then((e=>{this._setFastBlockNumber(e)}),(e=>{})),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(e){e&&!this._poller?(this._poller=setInterval((()=>{this.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((()=>{this.poll(),this._bootstrapPoll=setTimeout((()=>{this._poller||this.poll(),this._bootstrapPoll=null}),this.pollingInterval)}),0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if("number"!=typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval((()=>{this.poll()}),this._pollingInterval))}_getFastBlockNumber(){const e=Gg();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then((e=>((null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e),this._fastBlockNumber)))),this._fastBlockNumberPromise}_setFastBlockNumber(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=Gg(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return qg(this,void 0,void 0,(function*(){return this._waitForTransaction(e,null==t?1:t,r||0,null)}))}_waitForTransaction(e,t,r,n){return qg(this,void 0,void 0,(function*(){const i=yield this.getTransactionReceipt(e);return(i?i.confirmations:0)>=t?i:new Promise(((i,s)=>{const a=[];let o=!1;const u=function(){return!!o||(o=!0,a.forEach((e=>{e()})),!1)},c=e=>{e.confirmations<t||u()||i(e)};if(this.on(e,c),a.push((()=>{this.removeListener(e,c)})),n){let r=n.startBlock,i=null;const c=a=>qg(this,void 0,void 0,(function*(){o||(yield Vg(1e3),this.getTransactionCount(n.from).then((l=>qg(this,void 0,void 0,(function*(){if(!o){if(l<=n.nonce)r=a;else{{const t=yield this.getTransaction(e);if(t&&null!=t.blockNumber)return}for(null==i&&(i=r-3,i<n.startBlock&&(i=n.startBlock));i<=a;){if(o)return;const r=yield this.getBlockWithTransactions(i);for(let i=0;i<r.transactions.length;i++){const a=r.transactions[i];if(a.hash===e)return;if(a.from===n.from&&a.nonce===n.nonce){if(o)return;const r=yield this.waitForTransaction(a.hash,t);if(u())return;let i="replaced";return a.data===n.data&&a.to===n.to&&a.value.eq(n.value)?i="repriced":"0x"===a.data&&a.from===a.to&&a.value.isZero()&&(i="cancelled"),void s(zg.makeError("transaction was replaced",jc.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:this._wrapTransaction(a),hash:e,receipt:r}))}}i++}}o||this.once("block",c)}}))),(e=>{o||this.once("block",c)})))}));if(o)return;this.once("block",c),a.push((()=>{this.removeListener("block",c)}))}if("number"==typeof r&&r>0){const e=setTimeout((()=>{u()||s(zg.makeError("timeout exceeded",jc.errors.TIMEOUT,{timeout:r}))}),r);e.unref&&e.unref(),a.push((()=>{clearTimeout(e)}))}}))}))}getBlockNumber(){return qg(this,void 0,void 0,(function*(){return this._getInternalBlockNumber(0)}))}getGasPrice(){return qg(this,void 0,void 0,(function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return dl.from(e)}catch(t){return zg.throwError("bad result from backend",jc.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}}))}getBalance(e,t){return qg(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield bl({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getBalance",r);try{return dl.from(n)}catch(e){return zg.throwError("bad result from backend",jc.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:e})}}))}getTransactionCount(e,t){return qg(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield bl({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getTransactionCount",r);try{return dl.from(n).toNumber()}catch(e){return zg.throwError("bad result from backend",jc.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:e})}}))}getCode(e,t){return qg(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield bl({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),n=yield this.perform("getCode",r);try{return Vc(n)}catch(e){return zg.throwError("bad result from backend",jc.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:e})}}))}getStorageAt(e,t,r){return qg(this,void 0,void 0,(function*(){yield this.getNetwork();const n=yield bl({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then((e=>Yc(e)))}),i=yield this.perform("getStorageAt",n);try{return Vc(i)}catch(e){return zg.throwError("bad result from backend",jc.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:i,error:e})}}))}_wrapTransaction(e,t,r){if(null!=t&&32!==Wc(t))throw new Error("invalid response - sendTransaction");const n=e;return null!=t&&e.hash!==t&&zg.throwError("Transaction hash mismatch from Provider.sendTransaction.",jc.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),n.wait=(t,n)=>qg(this,void 0,void 0,(function*(){let i;null==t&&(t=1),null==n&&(n=0),0!==t&&null!=r&&(i={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});const s=yield this._waitForTransaction(e.hash,t,n,i);return null==s&&0===t?null:(this._emitted["t:"+e.hash]=s.blockNumber,0===s.status&&zg.throwError("transaction failed",jc.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:s}),s)})),n}sendTransaction(e){return qg(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield Promise.resolve(e).then((e=>Vc(e))),r=this.formatter.transaction(e);null==r.confirmations&&(r.confirmations=0);const n=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const e=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,e,n)}catch(e){throw e.transaction=r,e.transactionHash=r.hash,e}}))}_getTransactionRequest(e){return qg(this,void 0,void 0,(function*(){const t=yield e,r={};return["from","to"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>e?this._getAddress(e):null)))})),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>e?dl.from(e):null)))})),["type"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>null!=e?e:null)))})),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach((e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((e=>e?Vc(e):null)))})),this.formatter.transactionRequest(yield bl(r))}))}_getFilter(e){return qg(this,void 0,void 0,(function*(){e=yield e;const t={};return null!=e.address&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach((r=>{null!=e[r]&&(t[r]=e[r])})),["fromBlock","toBlock"].forEach((r=>{null!=e[r]&&(t[r]=this._getBlockTag(e[r]))})),this.formatter.filter(yield bl(t))}))}_call(e,t,r){return qg(this,void 0,void 0,(function*(){r>=10&&zg.throwError("CCIP read exceeded maximum redirections",jc.errors.SERVER_ERROR,{redirects:r,transaction:e});const n=e.to,i=yield this.perform("call",{transaction:e,blockTag:t});if(r>=0&&"latest"===t&&null!=n&&"0x556f1830"===i.substring(0,10)&&Wc(i)%32==4)try{const s=Jc(i,4),a=Jc(s,0,32);dl.from(a).eq(n)||zg.throwError("CCIP Read sender did not match",jc.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const o=[],u=dl.from(Jc(s,32,64)).toNumber(),c=dl.from(Jc(s,u,u+32)).toNumber(),l=Jc(s,u+32);for(let t=0;t<c;t++){const r=ry(l,32*t);null==r&&zg.throwError("CCIP Read contained corrupt URL string",jc.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i}),o.push(r)}const d=ny(s,64);dl.from(Jc(s,100,128)).isZero()||zg.throwError("CCIP Read callback selector included junk",jc.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const h=Jc(s,96,100),f=ny(s,128),p=yield this.ccipReadFetch(e,d,o);null==p&&zg.throwError("CCIP Read disabled or provided no URLs",jc.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i});const m={to:n,data:Qc([h,oy([p,f])])};return this._call(m,t,r+1)}catch(e){if(e.code===jc.errors.SERVER_ERROR)throw e}try{return Vc(i)}catch(r){return zg.throwError("bad result from backend",jc.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:i,error:r})}}))}call(e,t){return qg(this,void 0,void 0,(function*(){yield this.getNetwork();const r=yield bl({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)}))}estimateGas(e){return qg(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield bl({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return dl.from(r)}catch(e){return zg.throwError("bad result from backend",jc.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:e})}}))}_getAddress(e){return qg(this,void 0,void 0,(function*(){"string"!=typeof(e=yield e)&&zg.throwArgumentError("invalid address or ENS name","name",e);const t=yield this.resolveName(e);return null==t&&zg.throwError("ENS name not configured",jc.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t}))}_getBlock(e,t){return qg(this,void 0,void 0,(function*(){yield this.getNetwork(),e=yield e;let r=-128;const n={includeTransactions:!!t};if(Hc(e,32))n.blockHash=e;else try{n.blockTag=yield this._getBlockTag(e),Hc(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16))}catch(t){zg.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Ng((()=>qg(this,void 0,void 0,(function*(){const e=yield this.perform("getBlock",n);if(null==e)return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?null:void 0;if(t){let t=null;for(let r=0;r<e.transactions.length;r++){const n=e.transactions[r];if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){null==t&&(t=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let e=t-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}}const r=this.formatter.blockWithTransactions(e);return r.transactions=r.transactions.map((e=>this._wrapTransaction(e))),r}return this.formatter.block(e)}))),{oncePoll:this})}))}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return qg(this,void 0,void 0,(function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Ng((()=>qg(this,void 0,void 0,(function*(){const r=yield this.perform("getTransaction",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;const n=this.formatter.transactionResponse(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return this._wrapTransaction(n)}))),{oncePoll:this})}))}getTransactionReceipt(e){return qg(this,void 0,void 0,(function*(){yield this.getNetwork(),e=yield e;const t={transactionHash:this.formatter.hash(e,!0)};return Ng((()=>qg(this,void 0,void 0,(function*(){const r=yield this.perform("getTransactionReceipt",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;if(null==r.blockHash)return;const n=this.formatter.receipt(r);if(null==n.blockNumber)n.confirmations=0;else if(null==n.confirmations){let e=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-n.blockNumber+1;e<=0&&(e=1),n.confirmations=e}return n}))),{oncePoll:this})}))}getLogs(e){return qg(this,void 0,void 0,(function*(){yield this.getNetwork();const t=yield bl({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach((e=>{null==e.removed&&(e.removed=!1)})),Bg.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)}))}getEtherPrice(){return qg(this,void 0,void 0,(function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})}))}_getBlockTag(e){return qg(this,void 0,void 0,(function*(){if("number"==typeof(e=yield e)&&e<0){e%1&&zg.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return t+=e,t<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)}))}getResolver(e){return qg(this,void 0,void 0,(function*(){let t=e;for(;;){if(""===t||"."===t)return null;if("eth"!==e&&"eth"===t)return null;const r=yield this._getResolver(t,"getResolver");if(null!=r){const n=new uy(this,r,e);return t===e||(yield n.supportsWildcard())?n:null}t=t.split(".").slice(1).join(".")}}))}_getResolver(e,t){return qg(this,void 0,void 0,(function*(){null==t&&(t="ENS");const r=yield this.getNetwork();r.ensAddress||zg.throwError("network does not support ENS",jc.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name});try{const t=yield this.call({to:r.ensAddress,data:"0x0178b8bf"+Ag(e).substring(2)});return this.formatter.callAddress(t)}catch(e){}return null}))}resolveName(e){return qg(this,void 0,void 0,(function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(t){if(Hc(e))throw t}"string"!=typeof e&&zg.throwArgumentError("invalid ENS name","name",e);const t=yield this.getResolver(e);return t?yield t.getAddress():null}))}lookupAddress(e){return qg(this,void 0,void 0,(function*(){e=yield e;const t=(e=this.formatter.address(e)).substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t,"lookupAddress");if(null==r)return null;const n=ry(yield this.call({to:r,data:"0x691f3431"+Ag(t).substring(2)}),0);return(yield this.resolveName(n))!=e?null:n}))}getAvatar(e){return qg(this,void 0,void 0,(function*(){let t=null;if(Hc(e)){const r=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"getAvatar");if(!n)return null;t=new uy(this,n,r);try{const e=yield t.getAvatar();if(e)return e.url}catch(e){if(e.code!==jc.errors.CALL_EXCEPTION)throw e}try{const e=ry(yield this.call({to:n,data:"0x691f3431"+Ag(r).substring(2)}),0);t=yield this.getResolver(e)}catch(e){if(e.code!==jc.errors.CALL_EXCEPTION)throw e;return null}}else if(t=yield this.getResolver(e),!t)return null;const r=yield t.getAvatar();return null==r?null:r.url}))}perform(e,t){return zg.throwError(e+" not implemented",jc.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter((e=>e.pollable())).length>0}_stopEvent(e){this.polling=this._events.filter((e=>e.pollable())).length>0}_addEventListener(e,t,r){const n=new Jg(Hg(e),t,r);return this._events.push(n),this._startEvent(n),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,n=[],i=Hg(e);return this._events=this._events.filter((e=>e.tag!==i||(setTimeout((()=>{e.listener.apply(this,t)}),0),r=!0,!e.once||(n.push(e),!1)))),n.forEach((e=>{this._stopEvent(e)})),r}listenerCount(e){if(!e)return this._events.length;let t=Hg(e);return this._events.filter((e=>e.tag===t)).length}listeners(e){if(null==e)return this._events.map((e=>e.listener));let t=Hg(e);return this._events.filter((e=>e.tag===t)).map((e=>e.listener))}off(e,t){if(null==t)return this.removeAllListeners(e);const r=[];let n=!1,i=Hg(e);return this._events=this._events.filter((e=>e.tag!==i||e.listener!=t||!!n||(n=!0,r.push(e),!1))),r.forEach((e=>{this._stopEvent(e)})),this}removeAllListeners(e){let t=[];if(null==e)t=this._events,this._events=[];else{const r=Hg(e);this._events=this._events.filter((e=>e.tag!==r||(t.push(e),!1)))}return t.forEach((e=>{this._stopEvent(e)})),this}}var hy=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}u((n=n.apply(e,t||[])).next())}))};const fy=new jc(jg),py=["call","estimateGas"];function my(e,t){if(null==e)return null;if("string"==typeof e.message&&e.message.match("reverted")){const r=Hc(e.data)?e.data:null;if(!t||r)return{message:e.message,data:r}}if("object"==typeof e){for(const r in e){const n=my(e[r],t);if(n)return n}return null}if("string"==typeof e)try{return my(JSON.parse(e),t)}catch(e){}return null}function gy(e,t,r){const n=r.transaction||r.signedTransaction;if("call"===e){const e=my(t,!0);if(e)return e.data;fy.throwError("missing revert data in call exception; Transaction reverted without a reason string",jc.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:t})}if("estimateGas"===e){let r=my(t.body,!1);null==r&&(r=my(t,!1)),r&&fy.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",jc.errors.UNPREDICTABLE_GAS_LIMIT,{reason:r.message,method:e,transaction:n,error:t})}let i=t.message;throw t.code===jc.errors.SERVER_ERROR&&t.error&&"string"==typeof t.error.message?i=t.error.message:"string"==typeof t.body?i=t.body:"string"==typeof t.responseText&&(i=t.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&fy.throwError("insufficient funds for intrinsic transaction cost",jc.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:n}),i.match(/nonce (is )?too low/i)&&fy.throwError("nonce has already been used",jc.errors.NONCE_EXPIRED,{error:t,method:e,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&fy.throwError("replacement fee too low",jc.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:n}),i.match(/only replay-protected/i)&&fy.throwError("legacy pre-eip-155 transactions not supported",jc.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:n}),py.indexOf(e)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&fy.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",jc.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:n}),t}function yy(e){return new Promise((function(t){setTimeout(t,e)}))}function vy(e){if(e.error){const t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function _y(e){return e?e.toLowerCase():e}const by={};class wy extends Th{constructor(e,t,r){if(super(),e!==by)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");vl(this,"provider",t),null==r&&(r=0),"string"==typeof r?(vl(this,"_address",this.provider.formatter.address(r)),vl(this,"_index",null)):"number"==typeof r?(vl(this,"_index",r),vl(this,"_address",null)):fy.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return fy.throwError("cannot alter JSON-RPC Signer connection",jc.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new Ay(by,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((e=>(e.length<=this._index&&fy.throwError("unknown account #"+this._index,jc.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index]))))}sendUncheckedTransaction(e){e=Al(e);const t=this.getAddress().then((e=>(e&&(e=e.toLowerCase()),e)));if(null==e.gasLimit){const r=Al(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return null!=e.to&&(e.to=Promise.resolve(e.to).then((e=>hy(this,void 0,void 0,(function*(){if(null==e)return null;const t=yield this.provider.resolveName(e);return null==t&&fy.throwArgumentError("provided ENS name resolves to null","tx.to",e),t}))))),bl({tx:bl(e),sender:t}).then((({tx:t,sender:r})=>{null!=t.from?t.from.toLowerCase()!==r&&fy.throwArgumentError("from address mismatch","transaction",e):t.from=r;const n=this.provider.constructor.hexlifyTransaction(t,{from:!0});return this.provider.send("eth_sendTransaction",[n]).then((e=>e),(e=>("string"==typeof e.message&&e.message.match(/user denied/i)&&fy.throwError("user rejected transaction",jc.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:t}),gy("sendTransaction",e,n))))}))}signTransaction(e){return fy.throwError("signing transactions is unsupported",jc.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return hy(this,void 0,void 0,(function*(){const t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield Ng((()=>hy(this,void 0,void 0,(function*(){const e=yield this.provider.getTransaction(r);if(null!==e)return this.provider._wrapTransaction(e,r,t)}))),{oncePoll:this.provider})}catch(e){throw e.transactionHash=r,e}}))}signMessage(e){return hy(this,void 0,void 0,(function*(){const t="string"==typeof e?ud(e):e,r=yield this.getAddress();try{return yield this.provider.send("personal_sign",[Vc(t),r.toLowerCase()])}catch(t){throw"string"==typeof t.message&&t.message.match(/user denied/i)&&fy.throwError("user rejected signing",jc.errors.ACTION_REJECTED,{action:"signMessage",from:r,messageData:e}),t}}))}_legacySignMessage(e){return hy(this,void 0,void 0,(function*(){const t="string"==typeof e?ud(e):e,r=yield this.getAddress();try{return yield this.provider.send("eth_sign",[r.toLowerCase(),Vc(t)])}catch(t){throw"string"==typeof t.message&&t.message.match(/user denied/i)&&fy.throwError("user rejected signing",jc.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,messageData:e}),t}}))}_signTypedData(e,t,r){return hy(this,void 0,void 0,(function*(){const n=yield Ip.resolveNames(e,t,r,(e=>this.provider.resolveName(e))),i=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(Ip.getPayload(n.domain,t,n.value))])}catch(e){throw"string"==typeof e.message&&e.message.match(/user denied/i)&&fy.throwError("user rejected signing",jc.errors.ACTION_REJECTED,{action:"_signTypedData",from:i,messageData:{domain:n.domain,types:t,value:n.value}}),e}}))}unlock(e){return hy(this,void 0,void 0,(function*(){const t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])}))}}class Ay extends wy{sendTransaction(e){return this.sendUncheckedTransaction(e).then((e=>({hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:t=>this.provider.waitForTransaction(e,t)})))}}const Ey={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class ky extends dy{constructor(e,t){let r=t;null==r&&(r=new Promise(((e,t)=>{setTimeout((()=>{this.detectNetwork().then((t=>{e(t)}),(e=>{t(e)}))}),0)}))),super(r),e||(e=_l(this.constructor,"defaultUrl")()),vl(this,"connection","string"==typeof e?Object.freeze({url:e}):Object.freeze(Al(e))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout((()=>{this._cache.detectNetwork=null}),0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return hy(this,void 0,void 0,(function*(){yield yy(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch(t){try{e=yield this.send("net_version",[])}catch(e){}}if(null!=e){const t=_l(this.constructor,"getNetwork");try{return t(dl.from(e).toNumber())}catch(t){return fy.throwError("could not detect network",jc.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})}}return fy.throwError("could not detect network",jc.errors.NETWORK_ERROR,{event:"noNetwork"})}))}getSigner(e){return new wy(by,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then((e=>e.map((e=>this.formatter.address(e)))))}send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Tl(r),provider:this});const n=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(n&&this._cache[e])return this._cache[e];const i=Cg(this.connection,JSON.stringify(r),vy).then((e=>(this.emit("debug",{action:"response",request:r,response:e,provider:this}),e)),(e=>{throw this.emit("debug",{action:"response",error:e,request:r,provider:this}),e}));return n&&(this._cache[e]=i,setTimeout((()=>{this._cache[e]=null}),0)),i}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[_y(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[_y(t.address),t.blockTag]];case"getCode":return["eth_getCode",[_y(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[_y(t.address),el(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[_l(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[_l(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=_y(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return hy(this,void 0,void 0,(function*(){if("call"===e||"estimateGas"===e){const e=t.transaction;if(e&&null!=e.type&&dl.from(e.type).isZero()&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const r=yield this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&((t=Al(t)).transaction=Al(e),delete t.transaction.type)}}const r=this.prepareRequest(e,t);null==r&&fy.throwError(e+" not implemented",jc.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(r[0],r[1])}catch(r){return gy(e,r,t)}}))}_startEvent(e){"pending"===e.tag&&this._startPending(),super._startEvent(e)}_startPending(){if(null!=this._pendingFilter)return;const e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then((function(r){return function n(){e.send("eth_getFilterChanges",[r]).then((function(r){if(e._pendingFilter!=t)return null;let n=Promise.resolve();return r.forEach((function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then((function(){return e.getTransaction(t).then((function(t){return e.emit("pending",t),null}))}))})),n.then((function(){return yy(1e3)}))})).then((function(){if(e._pendingFilter==t)return setTimeout((function(){n()}),0),null;e.send("eth_uninstallFilter",[r])})).catch((e=>{}))}(),r})).catch((e=>{}))}_stopEvent(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){const r=Al(Ey);if(t)for(const e in t)t[e]&&(r[e]=!0);wl(e,r);const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(t){if(null==e[t])return;const r=Yc(dl.from(e[t]));"gasLimit"===t&&(t="gas"),n[t]=r})),["from","to","data"].forEach((function(t){null!=e[t]&&(n[t]=Vc(e[t]))})),e.accessList&&(n.accessList=If(e.accessList)),n}}let xy=null;try{if(xy=WebSocket,null==xy)throw new Error("inject please")}catch(e){const t=new jc(jg);xy=function(){t.throwError("WebSockets not supported in this environment",jc.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Ty=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}u((n=n.apply(e,t||[])).next())}))};const Py=new jc(jg);let Sy=1;class Iy extends ky{constructor(e,t){"any"===t&&Py.throwError("WebSocketProvider does not support 'any' network yet",jc.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),super("string"==typeof e?e:"_websocket",t),this._pollingInterval=-1,this._wsReady=!1,vl(this,"_websocket","string"==typeof e?new xy(this.connection.url):e),vl(this,"_requests",{}),vl(this,"_subs",{}),vl(this,"_subIds",{}),vl(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach((e=>{this.websocket.send(this._requests[e].payload)}))},this.websocket.onmessage=e=>{const t=e.data,r=JSON.parse(t);if(null!=r.id){const e=String(r.id),n=this._requests[e];if(delete this._requests[e],void 0!==r.result)n.callback(null,r.result),this.emit("debug",{action:"response",request:JSON.parse(n.payload),response:r.result,provider:this});else{let e=null;r.error?(e=new Error(r.error.message||"unknown error"),vl(e,"code",r.error.code||null),vl(e,"response",t)):e=new Error("unknown error"),n.callback(e,void 0),this.emit("debug",{action:"response",error:e,request:JSON.parse(n.payload),provider:this})}}else if("eth_subscription"===r.method){const e=this._subs[r.params.subscription];e&&e.processFunc(r.params.result)}else console.warn("this should not happen")};const r=setInterval((()=>{this.emit("poll")}),1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){Py.throwError("cannot reset events block on WebSocketProvider",jc.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){Py.throwError("cannot set polling interval on WebSocketProvider",jc.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return Ty(this,void 0,void 0,(function*(){return null}))}set polling(e){e&&Py.throwError("cannot set polling on WebSocketProvider",jc.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){const r=Sy++;return new Promise(((n,i)=>{const s=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(s),provider:this}),this._requests[String(r)]={callback:function(e,t){return e?i(e):n(t)},payload:s},this._wsReady&&this.websocket.send(s)}))}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return Ty(this,void 0,void 0,(function*(){let n=this._subIds[e];null==n&&(n=Promise.all(t).then((e=>this.send("eth_subscribe",e))),this._subIds[e]=n);const i=yield n;this._subs[i]={tag:e,processFunc:r}}))}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],(e=>{const t=dl.from(e.number).toNumber();this._emitted.block=t,this.emit("block",t)}));break;case"pending":this._subscribe("pending",["newPendingTransactions"],(e=>{this.emit("pending",e)}));break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],(t=>{null==t.removed&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))}));break;case"tx":{const t=e=>{const t=e.hash;this.getTransactionReceipt(t).then((e=>{e&&this.emit(t,e)}))};t(e),this._subscribe("tx",["newHeads"],(e=>{this._events.filter((e=>"tx"===e.type)).forEach(t)}));break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e)}}_stopEvent(e){let t=e.tag;if("tx"===e.type){if(this._events.filter((e=>"tx"===e.type)).length)return;t="tx"}else if(this.listenerCount(e.event))return;const r=this._subIds[t];r&&(delete this._subIds[t],r.then((e=>{this._subs[e]&&(delete this._subs[e],this.send("eth_unsubscribe",[e]))})))}destroy(){return Ty(this,void 0,void 0,(function*(){this.websocket.readyState===xy.CONNECTING&&(yield new Promise((e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}}))),this.websocket.close(1e3)}))}}const Oy=new jc(jg);class Cy extends ky{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return t=this,n=function*(){let t=this.network;return null==t&&(t=yield e.detectNetwork.call(this),t||Oy.throwError("no network detected",jc.errors.UNKNOWN_ERROR,{}),null==this._network&&(vl(this,"_network",t),this.emit("network",t,null))),t},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{o(n.next(e))}catch(e){i(e)}}function a(e){try{o(n.throw(e))}catch(e){i(e)}}function o(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,a)}o((n=n.apply(t,[])).next())}));var t,r,n}}class Ny extends Cy{constructor(e,t){Oy.checkAbstract(new.target,Ny),e=_l(new.target,"getNetwork")(e),t=_l(new.target,"getApiKey")(t),super(_l(new.target,"getUrl")(e,t),e),"string"==typeof t?vl(this,"apiKey",t):null!=t&&Object.keys(t).forEach((e=>{vl(this,e,t[e])}))}_startPending(){Oy.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return Oy.throwError("API provider does not support signing",jc.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return Oy.throwError("not implemented; sub-classes must override getUrl",jc.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const My=new jc(jg),Ry="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class jy extends Iy{constructor(e,t){const r=new Dy(e,t);super(r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi."),r.network),vl(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===Ry}}class Dy extends Ny{static getWebSocketProvider(e,t){return new jy(e,t)}static getApiKey(e){return null==e?Ry:(e&&"string"!=typeof e&&My.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;default:My.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+t,throttleCallback:(e,r)=>(t===Ry&&Zg(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===Ry}}const By=new jc(jg),Ly="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function Uy(e){switch(e){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return By.throwArgumentError("unsupported network","name",e)}class Fy extends Ny{isCommunityResource(){return this.apiKey===Ly}static getApiKey(e){return null==e?Ly:e}static getUrl(e,t){null==t&&(t=Ly);const r={allowGzip:!0,url:"https://"+Uy(e.name)+t,throttleCallback:(e,r)=>(t.apiKey===Ly&&Zg(),Promise.resolve(!0))};return null!=t.projectSecret&&(r.user="",r.password=t.projectSecret),r}}const Zy=new jc(jg);class qy extends Ny{static getApiKey(e){return null!=e&&Zy.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let r=null;return"homestead"===e.name?r="https://cloudflare-eth.com/":Zy.throwArgumentError("unsupported network","network",arguments[0]),r}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return n=this,s=function*(){return"getBlockNumber"===e?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,e,t)},new((i=void 0)||(i=Promise))((function(e,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function a(e){try{o(s.throw(e))}catch(e){t(e)}}function o(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(r,a)}o((s=s.apply(n,[])).next())}));var n,i,s}}var zy=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}u((n=n.apply(e,t||[])).next())}))};const $y=new jc(jg);function Ky(e){const t={};for(let r in e){if(null==e[r])continue;let n=e[r];"type"===r&&0===n||(n={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?Yc(Vc(n)):"accessList"===r?"["+If(n).map((e=>`{address:"${e.address}",storageKeys:["${e.storageKeys.join('","')}"]}`)).join(",")+"]":Vc(n),t[r]=n)}return t}function Hy(e){if(0==e.status&&("No records found"===e.message||"No transactions found"===e.message))return e.result;if(1!=e.status||"string"!=typeof e.message||!e.message.match(/^OK/)){const t=new Error("invalid response");throw t.result=JSON.stringify(e),(e.result||"").toLowerCase().indexOf("rate limit")>=0&&(t.throttleRetry=!0),t}return e.result}function Gy(e){if(e&&0==e.status&&"NOTOK"==e.message&&(e.result||"").toLowerCase().indexOf("rate limit")>=0){const t=new Error("throttled response");throw t.result=JSON.stringify(e),t.throttleRetry=!0,t}if("2.0"!=e.jsonrpc){const t=new Error("invalid response");throw t.result=JSON.stringify(e),t}if(e.error){const t=new Error(e.error.message||"unknown error");throw e.error.code&&(t.code=e.error.code),e.error.data&&(t.data=e.error.data),t}return e.result}function Vy(e){if("pending"===e)throw new Error("pending not supported");return"latest"===e?e:parseInt(e.substring(2),16)}function Wy(e,t,r){if("call"===e&&t.code===jc.errors.SERVER_ERROR){const e=t.error;if(e&&(e.message.match(/reverted/i)||e.message.match(/VM execution error/i))){let r=e.data;if(r&&(r="0x"+r.replace(/^.*0x/i,"")),Hc(r))return r;$y.throwError("missing revert data in call exception",jc.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}let n=t.message;throw t.code===jc.errors.SERVER_ERROR&&(t.error&&"string"==typeof t.error.message?n=t.error.message:"string"==typeof t.body?n=t.body:"string"==typeof t.responseText&&(n=t.responseText)),n=(n||"").toLowerCase(),n.match(/insufficient funds/)&&$y.throwError("insufficient funds for intrinsic transaction cost",jc.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:r}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&$y.throwError("nonce has already been used",jc.errors.NONCE_EXPIRED,{error:t,method:e,transaction:r}),n.match(/another transaction with same nonce/)&&$y.throwError("replacement fee too low",jc.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:r}),n.match(/execution failed due to an exception|execution reverted/)&&$y.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",jc.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:r}),t}class Jy extends dy{constructor(e,t){super(e),vl(this,"baseUrl",this.getBaseUrl()),vl(this,"apiKey",t||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return $y.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,t){const r=Object.keys(t).reduce(((e,r)=>{const n=t[r];return null!=n&&(e+=`&${r}=${n}`),e}),""),n=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${n}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,r){return zy(this,void 0,void 0,(function*(){const n=r?this.getPostUrl():this.getUrl(e,t),i=r?this.getPostData(e,t):null,s="proxy"===e?Gy:Hy;this.emit("debug",{action:"request",request:n,provider:this});const a={url:n,throttleSlotInterval:1e3,throttleCallback:(e,t)=>(this.isCommunityResource()&&Zg(),Promise.resolve(!0))};let o=null;i&&(a.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},o=Object.keys(i).map((e=>`${e}=${i[e]}`)).join("&"));const u=yield Cg(a,o,s||Gy);return this.emit("debug",{action:"response",request:n,response:Tl(u),provider:this}),u}))}detectNetwork(){return zy(this,void 0,void 0,(function*(){return this.network}))}perform(e,t){const r=Object.create(null,{perform:{get:()=>super.perform}});return zy(this,void 0,void 0,(function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch((e=>Wy("sendTransaction",e,t.signedTransaction)));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if("latest"!==t.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");const e=Ky(t.transaction);e.module="proxy",e.action="eth_call";try{return yield this.fetch("proxy",e,!0)}catch(e){return Wy("call",e,t.transaction)}}case"estimateGas":{const e=Ky(t.transaction);e.module="proxy",e.action="eth_estimateGas";try{return yield this.fetch("proxy",e,!0)}catch(e){return Wy("estimateGas",e,t.transaction)}}case"getLogs":{const e={action:"getLogs"};if(t.filter.fromBlock&&(e.fromBlock=Vy(t.filter.fromBlock)),t.filter.toBlock&&(e.toBlock=Vy(t.filter.toBlock)),t.filter.address&&(e.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&$y.throwError("unsupported topic count",jc.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),1===t.filter.topics.length)){const r=t.filter.topics[0];"string"==typeof r&&66===r.length||$y.throwError("unsupported topic format",jc.errors.UNSUPPORTED_OPERATION,{topic0:r}),e.topic0=r}const r=yield this.fetch("logs",e);let n={};for(let e=0;e<r.length;e++){const t=r[e];if(null==t.blockHash){if(null==n[t.blockNumber]){const e=yield this.getBlock(t.blockNumber);e&&(n[t.blockNumber]=e.hash)}t.blockHash=n[t.blockNumber]}}return r}case"getEtherPrice":return"homestead"!==this.network.name?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)}))}getHistory(e,t,r){return zy(this,void 0,void 0,(function*(){const n={action:"txlist",address:yield this.resolveName(e),startblock:null==t?0:t,endblock:null==r?99999999:r,sort:"asc"};return(yield this.fetch("account",n)).map((e=>{["contractAddress","to"].forEach((function(t){""==e[t]&&delete e[t]})),null==e.creates&&null!=e.contractAddress&&(e.creates=e.contractAddress);const t=this.formatter.transactionResponse(e);return e.timeStamp&&(t.timestamp=parseInt(e.timeStamp)),t}))}))}isCommunityResource(){return null==this.apiKey}}function Qy(e){for(let t=(e=e.slice()).length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}var Yy=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}u((n=n.apply(e,t||[])).next())}))};const Xy=new jc(jg);function ev(){return(new Date).getTime()}function tv(e){let t=null;for(let r=0;r<e.length;r++){const n=e[r];if(null==n)return null;t?t.name===n.name&&t.chainId===n.chainId&&(t.ensAddress===n.ensAddress||null==t.ensAddress&&null==n.ensAddress)||Xy.throwArgumentError("provider mismatch","networks",e):t=n}return t}function rv(e,t){e=e.slice().sort();const r=Math.floor(e.length/2);if(e.length%2)return e[r];const n=e[r-1],i=e[r];return null!=t&&Math.abs(n-i)>t?null:(n+i)/2}function nv(e){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return JSON.stringify(e);if("string"==typeof e)return e;if(dl.isBigNumber(e))return e.toString();if(Array.isArray(e))return JSON.stringify(e.map((e=>nv(e))));if("object"==typeof e){const t=Object.keys(e);return t.sort(),"{"+t.map((t=>{let r=e[t];return r="function"==typeof r?"[function]":nv(r),JSON.stringify(t)+":"+r})).join(",")+"}"}throw new Error("unknown value type: "+typeof e)}let iv=1;function sv(e){let t=null,r=null,n=new Promise((n=>{t=function(){r&&(clearTimeout(r),r=null),n()},r=setTimeout(t,e)}));return{cancel:t,getPromise:function(){return n},wait:e=>(n=n.then(e),n)}}const av=[jc.errors.CALL_EXCEPTION,jc.errors.INSUFFICIENT_FUNDS,jc.errors.NONCE_EXPIRED,jc.errors.REPLACEMENT_UNDERPRICED,jc.errors.UNPREDICTABLE_GAS_LIMIT],ov=["address","args","errorArgs","errorSignature","method","transaction"];function uv(e,t){const r={weight:e.weight};return Object.defineProperty(r,"provider",{get:()=>e.provider}),e.start&&(r.start=e.start),t&&(r.duration=t-e.start),e.done&&(e.error?r.error=e.error:r.result=e.result||null),r}function cv(e,t){return Yy(this,void 0,void 0,(function*(){const r=e.provider;return null!=r.blockNumber&&r.blockNumber>=t||-1===t?r:Ng((()=>new Promise(((n,i)=>{setTimeout((function(){return r.blockNumber>=t?n(r):e.cancelled?n(null):n(void 0)}),0)}))),{oncePoll:r})}))}function lv(e,t,r,n){return Yy(this,void 0,void 0,(function*(){let i=e.provider;switch(r){case"getBlockNumber":case"getGasPrice":return i[r]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return n.blockTag&&Hc(n.blockTag)&&(i=yield cv(e,t)),i[r](n.address,n.blockTag||"latest");case"getStorageAt":return n.blockTag&&Hc(n.blockTag)&&(i=yield cv(e,t)),i.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":return n.blockTag&&Hc(n.blockTag)&&(i=yield cv(e,t)),i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":return n.blockTag&&Hc(n.blockTag)&&(i=yield cv(e,t)),"call"===r&&n.blockTag?i[r](n.transaction,n.blockTag):i[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return i[r](n.transactionHash);case"getLogs":{let r=n.filter;return(r.fromBlock&&Hc(r.fromBlock)||r.toBlock&&Hc(r.toBlock))&&(i=yield cv(e,t)),i.getLogs(r)}}return Xy.throwError("unknown method error",jc.errors.UNKNOWN_ERROR,{method:r,params:n})}))}class dv extends dy{constructor(e,t){0===e.length&&Xy.throwArgumentError("missing providers","providers",e);const r=e.map(((e,t)=>{if(wh.isProvider(e)){const t=Ug(e)?2e3:750,r=1;return Object.freeze({provider:e,weight:1,stallTimeout:t,priority:r})}const r=Al(e);null==r.priority&&(r.priority=1),null==r.stallTimeout&&(r.stallTimeout=Ug(e)?2e3:750),null==r.weight&&(r.weight=1);const n=r.weight;return(n%1||n>512||n<1)&&Xy.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${t}].weight`,n),Object.freeze(r)})),n=r.reduce(((e,t)=>e+t.weight),0);null==t?t=n/2:t>n&&Xy.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let i=tv(r.map((e=>e.provider.network)));null==i&&(i=new Promise(((e,t)=>{setTimeout((()=>{this.detectNetwork().then(e,t)}),0)}))),super(i),vl(this,"providerConfigs",Object.freeze(r)),vl(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return Yy(this,void 0,void 0,(function*(){return tv(yield Promise.all(this.providerConfigs.map((e=>e.provider.getNetwork()))))}))}perform(e,t){return Yy(this,void 0,void 0,(function*(){if("sendTransaction"===e){const e=yield Promise.all(this.providerConfigs.map((e=>e.provider.sendTransaction(t.signedTransaction).then((e=>e.hash),(e=>e)))));for(let t=0;t<e.length;t++){const r=e[t];if("string"==typeof r)return r}throw e[0]}-1===this._highestBlockNumber&&"getBlockNumber"!==e&&(yield this.getBlockNumber());const r=function(e,t,r){let n=nv;switch(t){case"getBlockNumber":return function(t){const r=t.map((e=>e.result));let n=rv(t.map((e=>e.result)),2);if(null!=n)return n=Math.ceil(n),r.indexOf(n+1)>=0&&n++,n>=e._highestBlockNumber&&(e._highestBlockNumber=n),e._highestBlockNumber};case"getGasPrice":return function(e){const t=e.map((e=>e.result));return t.sort(),t[Math.floor(t.length/2)]};case"getEtherPrice":return function(e){return rv(e.map((e=>e.result)))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(e){return null==e?null:((e=Al(e)).confirmations=-1,nv(e))};break;case"getBlock":n=r.includeTransactions?function(e){return null==e?null:((e=Al(e)).transactions=e.transactions.map((e=>((e=Al(e)).confirmations=-1,e))),nv(e))}:function(e){return null==e?null:nv(e)};break;default:throw new Error("unknown method: "+t)}return function(e,t){return function(r){const n={};r.forEach((t=>{const r=e(t.result);n[r]||(n[r]={count:0,result:t.result}),n[r].count++}));const i=Object.keys(n);for(let e=0;e<i.length;e++){const r=n[i[e]];if(r.count>=t)return r.result}}}(n,e.quorum)}(this,e,t),n=Qy(this.providerConfigs.map(Al));n.sort(((e,t)=>e.priority-t.priority));const i=this._highestBlockNumber;let s=0,a=!0;for(;;){const o=ev();let u=n.filter((e=>e.runner&&o-e.start<e.stallTimeout)).reduce(((e,t)=>e+t.weight),0);for(;u<this.quorum&&s<n.length;){const r=n[s++],a=iv++;r.start=ev(),r.staller=sv(r.stallTimeout),r.staller.wait((()=>{r.staller=null})),r.runner=lv(r,i,e,t).then((n=>{r.done=!0,r.result=n,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:a,backend:uv(r,ev()),request:{method:e,params:Tl(t)},provider:this})}),(n=>{r.done=!0,r.error=n,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:a,backend:uv(r,ev()),request:{method:e,params:Tl(t)},provider:this})})),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:a,backend:uv(r,null),request:{method:e,params:Tl(t)},provider:this}),u+=r.weight}const c=[];n.forEach((e=>{!e.done&&e.runner&&(c.push(e.runner),e.staller&&c.push(e.staller.getPromise()))})),c.length&&(yield Promise.race(c));const l=n.filter((e=>e.done&&null==e.error));if(l.length>=this.quorum){const e=r(l);if(void 0!==e)return n.forEach((e=>{e.staller&&e.staller.cancel(),e.cancelled=!0})),e;a||(yield sv(100).getPromise()),a=!1}const d=n.reduce(((e,t)=>{if(!t.done||null==t.error)return e;const r=t.error.code;return av.indexOf(r)>=0&&(e[r]||(e[r]={error:t.error,weight:0}),e[r].weight+=t.weight),e}),{});if(Object.keys(d).forEach((e=>{const t=d[e];if(t.weight<this.quorum)return;n.forEach((e=>{e.staller&&e.staller.cancel(),e.cancelled=!0}));const r=t.error,i={};ov.forEach((e=>{null!=r[e]&&(i[e]=r[e])})),Xy.throwError(r.reason||r.message,e,i)})),0===n.filter((e=>!e.done)).length)break}return n.forEach((e=>{e.staller&&e.staller.cancel(),e.cancelled=!0})),Xy.throwError("failed to meet quorum",jc.errors.SERVER_ERROR,{method:e,params:t,results:n.map((e=>uv(e))),provider:this})}))}}const hv=null,fv=new jc(jg),pv="84842078b09946638c03157f83405213";class mv extends Iy{constructor(e,t){const r=new gv(e,t),n=r.connection;n.password&&fv.throwError("INFURA WebSocket project secrets unsupported",jc.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"}),super(n.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),e),vl(this,"apiKey",r.projectId),vl(this,"projectId",r.projectId),vl(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===pv}}class gv extends Ny{static getWebSocketProvider(e,t){return new mv(e,t)}static getApiKey(e){const t={apiKey:pv,projectId:pv,projectSecret:null};return null==e||("string"==typeof e?t.projectId=e:null!=e.projectSecret?(fv.assertArgument("string"==typeof e.projectId,"projectSecret requires a projectId","projectId",e.projectId),fv.assertArgument("string"==typeof e.projectSecret,"invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;default:fv.throwError("unsupported network",jc.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(e,r)=>(t.projectId===pv&&Zg(),Promise.resolve(!0))};return null!=t.projectSecret&&(n.user="",n.password=t.projectSecret),n}isCommunityResource(){return this.projectId===pv}}class yv extends ky{send(e,t){const r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);const n={request:r,resolve:null,reject:null},i=new Promise(((e,t)=>{n.resolve=e,n.reject=t}));return this._pendingBatch.push(n),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout((()=>{const e=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const t=e.map((e=>e.request));return this.emit("debug",{action:"requestBatch",request:Tl(t),provider:this}),Cg(this.connection,JSON.stringify(t)).then((r=>{this.emit("debug",{action:"response",request:t,response:r,provider:this}),e.forEach(((e,t)=>{const n=r[t];if(n.error){const t=new Error(n.error.message);t.code=n.error.code,t.data=n.error.data,e.reject(t)}else e.resolve(n.result)}))}),(r=>{this.emit("debug",{action:"response",error:r,request:t,provider:this}),e.forEach((e=>{e.reject(r)}))}))}),10)),i}}const vv=new jc(jg);class _v extends Ny{static getApiKey(e){return e&&"string"!=typeof e&&vv.throwArgumentError("invalid apiKey","apiKey",e),e||"ETHERS_JS_SHARED"}static getUrl(e,t){vv.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:vv.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}const bv=new jc(jg),wv="62e1ad51b37b8e00394bda3b";class Av extends Ny{static getApiKey(e){const t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return null==e?t.applicationId=wv:"string"==typeof e?t.applicationId=e:null!=e.applicationSecretKey?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:bv.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:bv.throwError("unsupported network",jc.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const n={headers:{},url:`https://${r}/v1/lb/${t.applicationId}`};return null!=t.applicationSecretKey&&(n.user="",n.password=t.applicationSecretKey),n}isCommunityResource(){return this.applicationId===wv}}const Ev=new jc(jg);let kv=1;function xv(e,t){const r="Web3LegacyFetcher";return function(e,n){const i={method:e,params:n,id:kv++,jsonrpc:"2.0"};return new Promise(((e,n)=>{this.emit("debug",{action:"request",fetcher:r,request:Tl(i),provider:this}),t(i,((t,s)=>{if(t)return this.emit("debug",{action:"response",fetcher:r,error:t,request:i,provider:this}),n(t);if(this.emit("debug",{action:"response",fetcher:r,request:i,response:s,provider:this}),s.error){const e=new Error(s.error.message);return e.code=s.error.code,e.data=s.error.data,n(e)}e(s.result)}))}))}}class Tv extends ky{constructor(e,t){null==e&&Ev.throwArgumentError("missing provider","provider",e);let r=null,n=null,i=null;"function"==typeof e?(r="unknown:",n=e):(r=e.host||e.path||"",!r&&e.isMetaMask&&(r="metamask"),i=e,e.request?(""===r&&(r="eip-1193:"),n=function(e){return function(t,r){null==r&&(r=[]);const n={method:t,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Tl(n),provider:this}),e.request(n).then((e=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:e,provider:this}),e)),(e=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:e,provider:this}),e}))}}(e)):e.sendAsync?n=xv(0,e.sendAsync.bind(e)):e.send?n=xv(0,e.send.bind(e)):Ev.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),vl(this,"jsonRpcFetchFunc",n),vl(this,"provider",i)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}const Pv=new jc(jg);function Sv(e,t){if(null==e&&(e="homestead"),"string"==typeof e){const t=e.match(/^(ws|http)s?:/i);if(t)switch(t[1].toLowerCase()){case"http":case"https":return new ky(e);case"ws":case"wss":return new Iy(e);default:Pv.throwArgumentError("unsupported URL scheme","network",e)}}const r=Wm(e);return r&&r._defaultProvider||Pv.throwError("unsupported getDefaultProvider network",jc.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:e}),r._defaultProvider({FallbackProvider:dv,AlchemyProvider:Dy,AnkrProvider:Fy,CloudflareProvider:qy,EtherscanProvider:Jy,InfuraProvider:gv,JsonRpcProvider:ky,NodesmithProvider:_v,PocketProvider:Av,Web3Provider:Tv,IpcProvider:hv},t)}const Iv=new RegExp("^bytes([0-9]+)$"),Ov=new RegExp("^(u?int)([0-9]*)$"),Cv=new RegExp("^(.*)\\[([0-9]*)\\]$"),Nv="0000000000000000000000000000000000000000000000000000000000000000",Mv=new jc("solidity/5.7.0");function Rv(e,t,r){switch(e){case"address":return r?Kc(t,32):qc(t);case"string":return ud(t);case"bytes":return qc(t);case"bool":return t=t?"0x01":"0x00",r?Kc(t,32):qc(t)}let n=e.match(Ov);if(n){let i=parseInt(n[2]||"256");return(n[2]&&String(i)!==n[2]||i%8!=0||0===i||i>256)&&Mv.throwArgumentError("invalid number type","type",e),r&&(i=256),Kc(t=dl.from(t).toTwos(i),i/8)}if(n=e.match(Iv),n){const i=parseInt(n[1]);return(String(i)!==n[1]||0===i||i>32)&&Mv.throwArgumentError("invalid bytes type","type",e),qc(t).byteLength!==i&&Mv.throwArgumentError(`invalid value for ${e}`,"value",t),r?qc((t+Nv).substring(0,66)):t}if(n=e.match(Cv),n&&Array.isArray(t)){const r=n[1];parseInt(n[2]||String(t.length))!=t.length&&Mv.throwArgumentError(`invalid array length for ${e}`,"value",t);const i=[];return t.forEach((function(e){i.push(Rv(r,e,!0))})),zc(i)}return Mv.throwArgumentError("invalid type","type",e)}function jv(e,t){e.length!=t.length&&Mv.throwArgumentError("wrong number of values; expected ${ types.length }","values",t);const r=[];return e.forEach((function(e,n){r.push(Rv(e,t[n]))})),Vc(zc(r))}function Dv(e,t){return Dl(jv(e,t))}function Bv(e,t){return jp(jv(e,t))}function Lv(e,t){t||(t=function(e){return[parseInt(e,16)]});let r=0,n={};return e.split(",").forEach((e=>{let i=e.split(":");r+=parseInt(i[0],16),n[r]=t(i[1])})),n}function Uv(e){let t=0;return e.split(",").map((e=>{let r=e.split("-");1===r.length?r[1]="0":""===r[1]&&(r[1]="1");let n=t+parseInt(r[0],16);return t=parseInt(r[1],16),{l:n,h:t}}))}function Fv(e,t){let r=0;for(let n=0;n<t.length;n++){let i=t[n];if(r+=i.l,e>=r&&e<=r+i.h&&(e-r)%(i.d||1)==0){if(i.e&&-1!==i.e.indexOf(e-r))continue;return i}}return null}const Zv=Uv("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),qv="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((e=>parseInt(e,16))),zv=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],$v=Lv("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Kv=Lv("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Hv=Lv("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",(function(e){if(e.length%4!=0)throw new Error("bad data");let t=[];for(let r=0;r<e.length;r+=4)t.push(parseInt(e.substring(r,r+4),16));return t})),Gv=Uv("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function Vv(e){if(e.match(/^[a-z0-9-]*$/i)&&e.length<=59)return e.toLowerCase();let t=fd(e);t=function(e){return e.reduce(((e,t)=>(t.forEach((t=>{e.push(t)})),e)),[])}(t.map((e=>{if(qv.indexOf(e)>=0)return[];if(e>=65024&&e<=65039)return[];let t=function(e){let t=Fv(e,zv);if(t)return[e+t.s];let r=$v[e];if(r)return r;let n=Kv[e];return n?[e+n[0]]:Hv[e]||null}(e);return t||[e]}))),t=fd(dd(t),nd.NFKC),t.forEach((e=>{if(Fv(e,Gv))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")})),t.forEach((e=>{if(Fv(e,Zv))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")}));let r=dd(t);if("-"===r.substring(0,1)||"--"===r.substring(2,4)||"-"===r.substring(r.length-1))throw new Error("invalid hyphen");return r}function Wv(e){const t=ud(e);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return Vc(zc([t,Fm]).slice(0,32))}function Jv(e){const t=qc(e);if(32!==t.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==t[31])throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;0===t[r-1];)r--;return hd(t.slice(0,r))}const Qv=new jc("units/5.7.0"),Yv=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Xv(e){const t=String(e).split(".");(t.length>2||!t[0].match(/^-?[0-9]*$/)||t[1]&&!t[1].match(/^[0-9]*$/)||"."===e||"-."===e)&&Qv.throwArgumentError("invalid value","value",e);let r=t[0],n="";for("-"===r.substring(0,1)&&(n="-",r=r.substring(1));"0"===r.substring(0,1);)r=r.substring(1);""===r&&(r="0");let i="";for(2===t.length&&(i="."+(t[1]||"0"));i.length>2&&"0"===i[i.length-1];)i=i.substring(0,i.length-1);const s=[];for(;r.length;){if(r.length<=3){s.unshift(r);break}{const e=r.length-3;s.unshift(r.substring(e)),r=r.substring(0,e)}}return n+s.join(",")+i}function e_(e,t){if("string"==typeof t){const e=Yv.indexOf(t);-1!==e&&(t=3*e)}return ap(e,null!=t?t:18)}function t_(e,t){if("string"!=typeof e&&Qv.throwArgumentError("value must be a string","value",e),"string"==typeof t){const e=Yv.indexOf(t);-1!==e&&(t=3*e)}return op(e,null!=t?t:18)}function r_(e){return e_(e,18)}function n_(e){return t_(e,18)}const i_="ethers/5.7.2",s_=new jc(i_);var a_=i(1484),o_=i.n(a_),u_=!0,c_="Invariant failed";function l_(e,t){if(!e){if(u_)throw new Error(c_);var r="function"==typeof t?t():t,n=r?"".concat(c_,": ").concat(r):c_;throw new Error(n)}}var d_=i(4244),h_=i.n(d_),f_=i(1243),p_=i.n(f_),m_=i(7374),g_=i.n(m_);const y_=JSON.parse('{"Mt":[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount0","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount1","type":"uint256"},{"indexed":true,"internalType":"address","name":"to","type":"address"}],"name":"Burn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount0","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount1","type":"uint256"}],"name":"Mint","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount0In","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount1In","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount0Out","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount1Out","type":"uint256"},{"indexed":true,"internalType":"address","name":"to","type":"address"}],"name":"Swap","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint112","name":"reserve0","type":"uint112"},{"indexed":false,"internalType":"uint112","name":"reserve1","type":"uint112"}],"name":"Sync","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"constant":true,"inputs":[],"name":"DOMAIN_SEPARATOR","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"MINIMUM_LIQUIDITY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[],"name":"PERMIT_TYPEHASH","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"to","type":"address"}],"name":"burn","outputs":[{"internalType":"uint256","name":"amount0","type":"uint256"},{"internalType":"uint256","name":"amount1","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[],"name":"factory","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getReserves","outputs":[{"internalType":"uint112","name":"reserve0","type":"uint112"},{"internalType":"uint112","name":"reserve1","type":"uint112"},{"internalType":"uint32","name":"blockTimestampLast","type":"uint32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"name":"initialize","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"kLast","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"to","type":"address"}],"name":"mint","outputs":[{"internalType":"uint256","name":"liquidity","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"permit","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"price0CumulativeLast","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"price1CumulativeLast","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"to","type":"address"}],"name":"skim","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"amount0Out","type":"uint256"},{"internalType":"uint256","name":"amount1Out","type":"uint256"},{"internalType":"address","name":"to","type":"address"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"swap","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[],"name":"sync","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"token0","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"token1","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"}]}');var v_,__,b_,w_;!function(e){e[e.MAINNET=1]="MAINNET",e[e.ROPSTEN=3]="ROPSTEN",e[e.RINKEBY=4]="RINKEBY",e[e["GÖRLI"]=5]="GÖRLI",e[e.KOVAN=42]="KOVAN"}(__||(__={})),function(e){e[e.EXACT_INPUT=0]="EXACT_INPUT",e[e.EXACT_OUTPUT=1]="EXACT_OUTPUT"}(b_||(b_={})),function(e){e[e.ROUND_DOWN=0]="ROUND_DOWN",e[e.ROUND_HALF_UP=1]="ROUND_HALF_UP",e[e.ROUND_UP=2]="ROUND_UP"}(w_||(w_={}));var A_,E_="0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",k_="0x96e8ac4277198ff8b6f785478aa9a39f403cb768dd02cbee326c3e7da348845f",x_=o_().BigInt(1e3),T_=o_().BigInt(0),P_=o_().BigInt(1),S_=o_().BigInt(2),I_=o_().BigInt(3),O_=o_().BigInt(5),C_=o_().BigInt(10),N_=o_().BigInt(100),M_=o_().BigInt(997),R_=o_().BigInt(1e3);!function(e){e.uint8="uint8",e.uint256="uint256"}(A_||(A_={}));var j_=((v_={})[A_.uint8]=o_().BigInt("0xff"),v_[A_.uint256]=o_().BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),v_);function D_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B_(e,t,r){return t&&D_(e.prototype,t),r&&D_(e,r),e}function L_(){return L_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L_.apply(this,arguments)}function U_(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function F_(e){return F_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},F_(e)}function Z_(e,t){return Z_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Z_(e,t)}function q_(e,t,r){return q_=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&Z_(i,r.prototype),i},q_.apply(null,arguments)}function z_(e){var t="function"==typeof Map?new Map:void 0;return z_=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return q_(e,arguments,F_(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Z_(n,e)},z_(e)}function $_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function H_(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return K_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K_(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=e[Symbol.iterator]()).next.bind(r)}var G_="setPrototypeOf"in Object,V_=function(e){function t(){var r;return(r=e.call(this)||this).isInsufficientReservesError=!0,r.name=r.constructor.name,G_&&Object.setPrototypeOf($_(r),(this instanceof t?this.constructor:void 0).prototype),r}return U_(t,e),t}(z_(Error)),W_=function(e){function t(){var r;return(r=e.call(this)||this).isInsufficientInputAmountError=!0,r.name=r.constructor.name,G_&&Object.setPrototypeOf($_(r),(this instanceof t?this.constructor:void 0).prototype),r}return U_(t,e),t}(z_(Error));function J_(e,t){o_().greaterThanOrEqual(e,T_)||l_(!1),o_().lessThanOrEqual(e,j_[t])||l_(!1)}function Q_(e){try{return Ql(e)}catch(e){l_(!1)}}function Y_(e){return e instanceof o_()?e:"bigint"==typeof e?o_().BigInt(e.toString()):o_().BigInt(e)}function X_(e){J_(e,A_.uint256);var t,r=T_;if(o_().greaterThan(e,I_))for(r=e,t=o_().add(o_().divide(e,S_),P_);o_().lessThan(t,r);)r=t,t=o_().divide(o_().add(o_().divide(e,t),t),S_);else o_().notEqual(e,T_)&&(r=P_);return r}function eb(e,t,r,n){if(r>0||l_(!1),e.length<=r||l_(!1),0===e.length)return e.push(t),null;var i=e.length===r;if(i&&n(e[e.length-1],t)<=0)return t;for(var s=0,a=e.length;s<a;){var o=s+a>>>1;n(e[o],t)<=0?s=o+1:a=o}return e.splice(s,0,t),i?e.pop():null}var tb=function(e,t,r){J_(o_().BigInt(e),A_.uint8),this.decimals=e,this.symbol=t,this.name=r};tb.ETHER=new tb(18,"ETH","Ether");var rb,nb=tb.ETHER,ib=function(e){function t(t,r,n,i,s){var a;return(a=e.call(this,n,i,s)||this).chainId=t,a.address=Q_(r),a}U_(t,e);var r=t.prototype;return r.equals=function(e){return this===e||this.chainId===e.chainId&&this.address===e.address},r.sortsBefore=function(e){return this.chainId!==e.chainId&&l_(!1),this.address===e.address&&l_(!1),this.address.toLowerCase()<e.address.toLowerCase()},t}(tb);function sb(e,t){return e instanceof ib&&t instanceof ib?e.equals(t):!(e instanceof ib||t instanceof ib||e!==t)}var ab,ob,ub=((rb={})[__.MAINNET]=new ib(__.MAINNET,"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",18,"WETH","Wrapped Ether"),rb[__.ROPSTEN]=new ib(__.ROPSTEN,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),rb[__.RINKEBY]=new ib(__.RINKEBY,"0xc778417E063141139Fce010982780140Aa0cD5Ab",18,"WETH","Wrapped Ether"),rb[__.GÖRLI]=new ib(__.GÖRLI,"0xB4FBF271143F4FBf7B91A5ded31805e42b2208d6",18,"WETH","Wrapped Ether"),rb[__.KOVAN]=new ib(__.KOVAN,"0xd0A1E359811322d97991E03f863a0C30C2cF029C",18,"WETH","Wrapped Ether"),rb),cb=p_()(g_()),lb=p_()(h_()),db=((ab={})[w_.ROUND_DOWN]=cb.ROUND_DOWN,ab[w_.ROUND_HALF_UP]=cb.ROUND_HALF_UP,ab[w_.ROUND_UP]=cb.ROUND_UP,ab),hb=((ob={})[w_.ROUND_DOWN]=0,ob[w_.ROUND_HALF_UP]=1,ob[w_.ROUND_UP]=3,ob),fb=function(){function e(e,t){void 0===t&&(t=P_),this.numerator=Y_(e),this.denominator=Y_(t)}var t=e.prototype;return t.invert=function(){return new e(this.denominator,this.numerator)},t.add=function(t){var r=t instanceof e?t:new e(Y_(t));return o_().equal(this.denominator,r.denominator)?new e(o_().add(this.numerator,r.numerator),this.denominator):new e(o_().add(o_().multiply(this.numerator,r.denominator),o_().multiply(r.numerator,this.denominator)),o_().multiply(this.denominator,r.denominator))},t.subtract=function(t){var r=t instanceof e?t:new e(Y_(t));return o_().equal(this.denominator,r.denominator)?new e(o_().subtract(this.numerator,r.numerator),this.denominator):new e(o_().subtract(o_().multiply(this.numerator,r.denominator),o_().multiply(r.numerator,this.denominator)),o_().multiply(this.denominator,r.denominator))},t.lessThan=function(t){var r=t instanceof e?t:new e(Y_(t));return o_().lessThan(o_().multiply(this.numerator,r.denominator),o_().multiply(r.numerator,this.denominator))},t.equalTo=function(t){var r=t instanceof e?t:new e(Y_(t));return o_().equal(o_().multiply(this.numerator,r.denominator),o_().multiply(r.numerator,this.denominator))},t.greaterThan=function(t){var r=t instanceof e?t:new e(Y_(t));return o_().greaterThan(o_().multiply(this.numerator,r.denominator),o_().multiply(r.numerator,this.denominator))},t.multiply=function(t){var r=t instanceof e?t:new e(Y_(t));return new e(o_().multiply(this.numerator,r.numerator),o_().multiply(this.denominator,r.denominator))},t.divide=function(t){var r=t instanceof e?t:new e(Y_(t));return new e(o_().multiply(this.numerator,r.denominator),o_().multiply(this.denominator,r.numerator))},t.toSignificant=function(e,t,r){void 0===t&&(t={groupSeparator:""}),void 0===r&&(r=w_.ROUND_HALF_UP),Number.isInteger(e)||l_(!1),e>0||l_(!1),cb.set({precision:e+1,rounding:db[r]});var n=new cb(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return n.toFormat(n.decimalPlaces(),t)},t.toFixed=function(e,t,r){return void 0===t&&(t={groupSeparator:""}),void 0===r&&(r=w_.ROUND_HALF_UP),Number.isInteger(e)||l_(!1),e>=0||l_(!1),lb.DP=e,lb.RM=hb[r],new lb(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)},B_(e,[{key:"quotient",get:function(){return o_().divide(this.numerator,this.denominator)}},{key:"remainder",get:function(){return new e(o_().remainder(this.numerator,this.denominator),this.denominator)}}]),e}(),pb=p_()(h_()),mb=function(e){function t(t,r){var n,i=Y_(r);return J_(i,A_.uint256),(n=e.call(this,i,o_().exponentiate(C_,o_().BigInt(t.decimals)))||this).currency=t,n}U_(t,e),t.ether=function(e){return new t(nb,e)};var r=t.prototype;return r.add=function(e){return sb(this.currency,e.currency)||l_(!1),new t(this.currency,o_().add(this.raw,e.raw))},r.subtract=function(e){return sb(this.currency,e.currency)||l_(!1),new t(this.currency,o_().subtract(this.raw,e.raw))},r.toSignificant=function(t,r,n){return void 0===t&&(t=6),void 0===n&&(n=w_.ROUND_DOWN),e.prototype.toSignificant.call(this,t,r,n)},r.toFixed=function(t,r,n){return void 0===t&&(t=this.currency.decimals),void 0===n&&(n=w_.ROUND_DOWN),t<=this.currency.decimals||l_(!1),e.prototype.toFixed.call(this,t,r,n)},r.toExact=function(e){return void 0===e&&(e={groupSeparator:""}),pb.DP=this.currency.decimals,new pb(this.numerator.toString()).div(this.denominator.toString()).toFormat(e)},B_(t,[{key:"raw",get:function(){return this.numerator}}]),t}(fb),gb=function(e){function t(t,r){var n;return(n=e.call(this,t,r)||this).token=t,n}U_(t,e);var r=t.prototype;return r.add=function(e){return this.token.equals(e.token)||l_(!1),new t(this.token,o_().add(this.raw,e.raw))},r.subtract=function(e){return this.token.equals(e.token)||l_(!1),new t(this.token,o_().subtract(this.raw,e.raw))},t}(mb),yb=function(e){function t(t,r,n,i){var s;return(s=e.call(this,i,n)||this).baseCurrency=t,s.quoteCurrency=r,s.scalar=new fb(o_().exponentiate(C_,o_().BigInt(t.decimals)),o_().exponentiate(C_,o_().BigInt(r.decimals))),s}U_(t,e),t.fromRoute=function(e){for(var r,n=[],i=H_(e.pairs.entries());!(r=i()).done;){var s=r.value,a=s[0],o=s[1];n.push(e.path[a].equals(o.token0)?new t(o.reserve0.currency,o.reserve1.currency,o.reserve0.raw,o.reserve1.raw):new t(o.reserve1.currency,o.reserve0.currency,o.reserve1.raw,o.reserve0.raw))}return n.slice(1).reduce((function(e,t){return e.multiply(t)}),n[0])};var r=t.prototype;return r.invert=function(){return new t(this.quoteCurrency,this.baseCurrency,this.numerator,this.denominator)},r.multiply=function(r){sb(this.quoteCurrency,r.baseCurrency)||l_(!1);var n=e.prototype.multiply.call(this,r);return new t(this.baseCurrency,r.quoteCurrency,n.denominator,n.numerator)},r.quote=function(t){return sb(t.currency,this.baseCurrency)||l_(!1),this.quoteCurrency instanceof ib?new gb(this.quoteCurrency,e.prototype.multiply.call(this,t.raw).quotient):mb.ether(e.prototype.multiply.call(this,t.raw).quotient)},r.toSignificant=function(e,t,r){return void 0===e&&(e=6),this.adjusted.toSignificant(e,t,r)},r.toFixed=function(e,t,r){return void 0===e&&(e=4),this.adjusted.toFixed(e,t,r)},B_(t,[{key:"raw",get:function(){return new fb(this.numerator,this.denominator)}},{key:"adjusted",get:function(){return e.prototype.multiply.call(this,this.scalar)}}]),t}(fb),vb={},_b=function(){function e(t,r){var n=t.token.sortsBefore(r.token)?[t,r]:[r,t];this.liquidityToken=new ib(n[0].token.chainId,e.getAddress(n[0].token,n[1].token),18,"UNI-V2","Uniswap V2"),this.tokenAmounts=n}e.getAddress=function(e,t){var r,n,i,s,a,o=e.sortsBefore(t)?[e,t]:[t,e];return void 0===(null===(r=vb)||void 0===r||null===(n=r[o[0].address])||void 0===n?void 0:n[o[1].address])&&(vb=L_({},vb,((a={})[o[0].address]=L_({},null===(i=vb)||void 0===i?void 0:i[o[0].address],((s={})[o[1].address]=td(E_,Dv(["bytes"],[jv(["address","address"],[o[0].address,o[1].address])]),k_),s)),a))),vb[o[0].address][o[1].address]};var t=e.prototype;return t.involvesToken=function(e){return e.equals(this.token0)||e.equals(this.token1)},t.priceOf=function(e){return this.involvesToken(e)||l_(!1),e.equals(this.token0)?this.token0Price:this.token1Price},t.reserveOf=function(e){return this.involvesToken(e)||l_(!1),e.equals(this.token0)?this.reserve0:this.reserve1},t.getOutputAmount=function(t){if(this.involvesToken(t.token)||l_(!1),o_().equal(this.reserve0.raw,T_)||o_().equal(this.reserve1.raw,T_))throw new V_;var r=this.reserveOf(t.token),n=this.reserveOf(t.token.equals(this.token0)?this.token1:this.token0),i=o_().multiply(t.raw,M_),s=o_().multiply(i,n.raw),a=o_().add(o_().multiply(r.raw,R_),i),o=new gb(t.token.equals(this.token0)?this.token1:this.token0,o_().divide(s,a));if(o_().equal(o.raw,T_))throw new W_;return[o,new e(r.add(t),n.subtract(o))]},t.getInputAmount=function(t){if(this.involvesToken(t.token)||l_(!1),o_().equal(this.reserve0.raw,T_)||o_().equal(this.reserve1.raw,T_)||o_().greaterThanOrEqual(t.raw,this.reserveOf(t.token).raw))throw new V_;var r=this.reserveOf(t.token),n=this.reserveOf(t.token.equals(this.token0)?this.token1:this.token0),i=o_().multiply(o_().multiply(n.raw,t.raw),R_),s=o_().multiply(o_().subtract(r.raw,t.raw),M_),a=new gb(t.token.equals(this.token0)?this.token1:this.token0,o_().add(o_().divide(i,s),P_));return[a,new e(n.add(a),r.subtract(t))]},t.getLiquidityMinted=function(e,t,r){e.token.equals(this.liquidityToken)||l_(!1);var n,i=t.token.sortsBefore(r.token)?[t,r]:[r,t];if(i[0].token.equals(this.token0)&&i[1].token.equals(this.token1)||l_(!1),o_().equal(e.raw,T_))n=o_().subtract(X_(o_().multiply(i[0].raw,i[1].raw)),x_);else{var s=o_().divide(o_().multiply(i[0].raw,e.raw),this.reserve0.raw),a=o_().divide(o_().multiply(i[1].raw,e.raw),this.reserve1.raw);n=o_().lessThanOrEqual(s,a)?s:a}if(!o_().greaterThan(n,T_))throw new W_;return new gb(this.liquidityToken,n)},t.getLiquidityValue=function(e,t,r,n,i){var s;if(void 0===n&&(n=!1),this.involvesToken(e)||l_(!1),t.token.equals(this.liquidityToken)||l_(!1),r.token.equals(this.liquidityToken)||l_(!1),o_().lessThanOrEqual(r.raw,t.raw)||l_(!1),n){i||l_(!1);var a=Y_(i);if(o_().equal(a,T_))s=t;else{var o=X_(o_().multiply(this.reserve0.raw,this.reserve1.raw)),u=X_(a);if(o_().greaterThan(o,u)){var c=o_().multiply(t.raw,o_().subtract(o,u)),l=o_().add(o_().multiply(o,O_),u),d=o_().divide(c,l);s=t.add(new gb(this.liquidityToken,d))}else s=t}}else s=t;return new gb(e,o_().divide(o_().multiply(r.raw,this.reserveOf(e).raw),s.raw))},B_(e,[{key:"token0Price",get:function(){return new yb(this.token0,this.token1,this.tokenAmounts[0].raw,this.tokenAmounts[1].raw)}},{key:"token1Price",get:function(){return new yb(this.token1,this.token0,this.tokenAmounts[1].raw,this.tokenAmounts[0].raw)}},{key:"chainId",get:function(){return this.token0.chainId}},{key:"token0",get:function(){return this.tokenAmounts[0].token}},{key:"token1",get:function(){return this.tokenAmounts[1].token}},{key:"reserve0",get:function(){return this.tokenAmounts[0]}},{key:"reserve1",get:function(){return this.tokenAmounts[1]}}]),e}(),bb=function(){function e(e,t,r){e.length>0||l_(!1),e.every((function(t){return t.chainId===e[0].chainId}))||l_(!1),t instanceof ib&&e[0].involvesToken(t)||t===nb&&e[0].involvesToken(ub[e[0].chainId])||l_(!1),void 0===r||r instanceof ib&&e[e.length-1].involvesToken(r)||r===nb&&e[e.length-1].involvesToken(ub[e[0].chainId])||l_(!1);for(var n,i=[t instanceof ib?t:ub[e[0].chainId]],s=H_(e.entries());!(n=s()).done;){var a=n.value,o=a[0],u=a[1],c=i[o];c.equals(u.token0)||c.equals(u.token1)||l_(!1);var l=c.equals(u.token0)?u.token1:u.token0;i.push(l)}this.pairs=e,this.path=i,this.midPrice=yb.fromRoute(this),this.input=t,this.output=null!=r?r:i[i.length-1]}return B_(e,[{key:"chainId",get:function(){return this.pairs[0].chainId}}]),e}(),wb=new fb(N_),Ab=function(e){function t(){return e.apply(this,arguments)||this}U_(t,e);var r=t.prototype;return r.toSignificant=function(e,t,r){return void 0===e&&(e=5),this.multiply(wb).toSignificant(e,t,r)},r.toFixed=function(e,t,r){return void 0===e&&(e=2),this.multiply(wb).toFixed(e,t,r)},t}(fb);function Eb(e,t){return sb(e.inputAmount.currency,t.inputAmount.currency)||l_(!1),sb(e.outputAmount.currency,t.outputAmount.currency)||l_(!1),e.outputAmount.equalTo(t.outputAmount)?e.inputAmount.equalTo(t.inputAmount)?0:e.inputAmount.lessThan(t.inputAmount)?-1:1:e.outputAmount.lessThan(t.outputAmount)?1:-1}function kb(e,t){var r=Eb(e,t);return 0!==r?r:e.priceImpact.lessThan(t.priceImpact)?-1:e.priceImpact.greaterThan(t.priceImpact)?1:e.route.path.length-t.route.path.length}function xb(e,t){return e instanceof gb?e:e.currency===nb?new gb(ub[t],e.raw):void l_(!1)}function Tb(e,t){return e instanceof ib?e:e===nb?ub[t]:void l_(!1)}var Pb=function(){function e(e,t,r){var n=new Array(e.path.length),i=new Array(e.pairs.length);if(r===b_.EXACT_INPUT){sb(t.currency,e.input)||l_(!1),n[0]=xb(t,e.chainId);for(var s=0;s<e.path.length-1;s++){var a=e.pairs[s].getOutputAmount(n[s]),o=a[0],u=a[1];n[s+1]=o,i[s]=u}}else{sb(t.currency,e.output)||l_(!1),n[n.length-1]=xb(t,e.chainId);for(var c=e.path.length-1;c>0;c--){var l=e.pairs[c-1].getInputAmount(n[c]),d=l[0],h=l[1];n[c-1]=d,i[c-1]=h}}this.route=e,this.tradeType=r,this.inputAmount=r===b_.EXACT_INPUT?t:e.input===nb?mb.ether(n[0].raw):n[0],this.outputAmount=r===b_.EXACT_OUTPUT?t:e.output===nb?mb.ether(n[n.length-1].raw):n[n.length-1],this.executionPrice=new yb(this.inputAmount.currency,this.outputAmount.currency,this.inputAmount.raw,this.outputAmount.raw),this.nextMidPrice=yb.fromRoute(new bb(i,e.input)),this.priceImpact=function(e,t,r){var n=e.raw.multiply(t.raw),i=n.subtract(r.raw).divide(n);return new Ab(i.numerator,i.denominator)}(e.midPrice,this.inputAmount,this.outputAmount)}e.exactIn=function(t,r){return new e(t,r,b_.EXACT_INPUT)},e.exactOut=function(t,r){return new e(t,r,b_.EXACT_OUTPUT)};var t=e.prototype;return t.minimumAmountOut=function(e){if(e.lessThan(T_)&&l_(!1),this.tradeType===b_.EXACT_OUTPUT)return this.outputAmount;var t=new fb(P_).add(e).invert().multiply(this.outputAmount.raw).quotient;return this.outputAmount instanceof gb?new gb(this.outputAmount.token,t):mb.ether(t)},t.maximumAmountIn=function(e){if(e.lessThan(T_)&&l_(!1),this.tradeType===b_.EXACT_INPUT)return this.inputAmount;var t=new fb(P_).add(e).multiply(this.inputAmount.raw).quotient;return this.inputAmount instanceof gb?new gb(this.inputAmount.token,t):mb.ether(t)},e.bestTradeExactIn=function(t,r,n,i,s,a,o){var u=void 0===i?{}:i,c=u.maxNumResults,l=void 0===c?3:c,d=u.maxHops,h=void 0===d?3:d;void 0===s&&(s=[]),void 0===a&&(a=r),void 0===o&&(o=[]),t.length>0||l_(!1),h>0||l_(!1),a===r||s.length>0||l_(!1);var f=r instanceof gb?r.token.chainId:n instanceof ib?n.chainId:void 0;void 0===f&&l_(!1);for(var p=xb(r,f),m=Tb(n,f),g=0;g<t.length;g++){var y=t[g];if((y.token0.equals(p.token)||y.token1.equals(p.token))&&!y.reserve0.equalTo(T_)&&!y.reserve1.equalTo(T_)){var v=void 0;try{v=y.getOutputAmount(p)[0]}catch(e){if(e.isInsufficientInputAmountError)continue;throw e}if(v.token.equals(m))eb(o,new e(new bb([].concat(s,[y]),a.currency,n),a,b_.EXACT_INPUT),l,kb);else if(h>1&&t.length>1){var _=t.slice(0,g).concat(t.slice(g+1,t.length));e.bestTradeExactIn(_,v,n,{maxNumResults:l,maxHops:h-1},[].concat(s,[y]),a,o)}}}return o},e.bestTradeExactOut=function(t,r,n,i,s,a,o){var u=void 0===i?{}:i,c=u.maxNumResults,l=void 0===c?3:c,d=u.maxHops,h=void 0===d?3:d;void 0===s&&(s=[]),void 0===a&&(a=n),void 0===o&&(o=[]),t.length>0||l_(!1),h>0||l_(!1),a===n||s.length>0||l_(!1);var f=n instanceof gb?n.token.chainId:r instanceof ib?r.chainId:void 0;void 0===f&&l_(!1);for(var p=xb(n,f),m=Tb(r,f),g=0;g<t.length;g++){var y=t[g];if((y.token0.equals(p.token)||y.token1.equals(p.token))&&!y.reserve0.equalTo(T_)&&!y.reserve1.equalTo(T_)){var v=void 0;try{v=y.getInputAmount(p)[0]}catch(e){if(e.isInsufficientReservesError)continue;throw e}if(v.token.equals(m))eb(o,new e(new bb([y].concat(s),r,a.currency),a,b_.EXACT_OUTPUT),l,kb);else if(h>1&&t.length>1){var _=t.slice(0,g).concat(t.slice(g+1,t.length));e.bestTradeExactOut(_,r,v,{maxNumResults:l,maxHops:h-1},[y].concat(s),a,o)}}}return o},e}();function Sb(e){return"0x"+e.raw.toString(16)}var Ib,Ob="0x0",Cb=function(){function e(){}return e.swapCallParameters=function(e,t){var r=e.inputAmount.currency===nb,n=e.outputAmount.currency===nb;r&&n&&l_(!1),!("ttl"in t)||t.ttl>0||l_(!1);var i,s,a,o=Q_(t.recipient),u=Sb(e.maximumAmountIn(t.allowedSlippage)),c=Sb(e.minimumAmountOut(t.allowedSlippage)),l=e.route.path.map((function(e){return e.address})),d="ttl"in t?"0x"+(Math.floor((new Date).getTime()/1e3)+t.ttl).toString(16):"0x"+t.deadline.toString(16),h=Boolean(t.feeOnTransfer);switch(e.tradeType){case b_.EXACT_INPUT:r?(i=h?"swapExactETHForTokensSupportingFeeOnTransferTokens":"swapExactETHForTokens",s=[c,l,o,d],a=u):n?(i=h?"swapExactTokensForETHSupportingFeeOnTransferTokens":"swapExactTokensForETH",s=[u,c,l,o,d],a=Ob):(i=h?"swapExactTokensForTokensSupportingFeeOnTransferTokens":"swapExactTokensForTokens",s=[u,c,l,o,d],a=Ob);break;case b_.EXACT_OUTPUT:h&&l_(!1),r?(i="swapETHForExactTokens",s=[c,l,o,d],a=u):n?(i="swapTokensForExactETH",s=[c,u,l,o,d],a=Ob):(i="swapTokensForExactTokens",s=[c,u,l,o,d],a=Ob)}return{methodName:i,args:s,value:a}},e}(),Nb=[{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],Mb=((Ib={})[__.MAINNET]={"0xE0B7927c4aF23765Cb51314A0E0521A9645F0E2A":9},Ib),Rb=function(){function e(){}return e.fetchTokenData=function(e,t,r,n,i){try{var s,a,o=function(r){return new ib(e,t,r,n,i)};void 0===r&&(r=Sv(Wm(e)));var u="number"==typeof(null===(s=Mb)||void 0===s||null===(a=s[e])||void 0===a?void 0:a[t]);return Promise.resolve(u?o(Mb[e][t]):Promise.resolve(new Qf(t,Nb,r).decimals().then((function(r){var n,i,s;return Mb=L_({},Mb,((s={})[e]=L_({},null===(n=Mb)||void 0===n?void 0:n[e],((i={})[t]=r,i)),s)),r}))).then(o))}catch(e){return Promise.reject(e)}},e.fetchPairData=function(e,t,r){try{void 0===r&&(r=Sv(Wm(e.chainId))),e.chainId!==t.chainId&&l_(!1);var n=_b.getAddress(e,t);return Promise.resolve(new Qf(n,y_.Mt,r).getReserves()).then((function(r){var n=r[0],i=r[1],s=e.sortsBefore(t)?[n,i]:[i,n];return new _b(new gb(e,s[0]),new gb(t,s[1]))}))}catch(e){return Promise.reject(e)}},e}();const jb=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];var Db={router:[{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_WETH",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"WETH",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"amountADesired",type:"uint256"},{internalType:"uint256",name:"amountBDesired",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidity",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountTokenDesired",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"addLiquidityETH",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"},{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountIn",outputs:[{internalType:"uint256",name:"amountIn",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"reserveIn",type:"uint256"},{internalType:"uint256",name:"reserveOut",type:"uint256"}],name:"getAmountOut",outputs:[{internalType:"uint256",name:"amountOut",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"}],name:"getAmountsIn",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"}],name:"getAmountsOut",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"reserveA",type:"uint256"},{internalType:"uint256",name:"reserveB",type:"uint256"}],name:"quote",outputs:[{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidity",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidityETH",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"removeLiquidityETHSupportingFeeOnTransferTokens",outputs:[{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approveMax",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidityETHWithPermit",outputs:[{internalType:"uint256",name:"amountToken",type:"uint256"},{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountTokenMin",type:"uint256"},{internalType:"uint256",name:"amountETHMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approveMax",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidityETHWithPermitSupportingFeeOnTransferTokens",outputs:[{internalType:"uint256",name:"amountETH",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenA",type:"address"},{internalType:"address",name:"tokenB",type:"address"},{internalType:"uint256",name:"liquidity",type:"uint256"},{internalType:"uint256",name:"amountAMin",type:"uint256"},{internalType:"uint256",name:"amountBMin",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approveMax",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"removeLiquidityWithPermit",outputs:[{internalType:"uint256",name:"amountA",type:"uint256"},{internalType:"uint256",name:"amountB",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapETHForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactETHForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactETHForTokensSupportingFeeOnTransferTokens",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForETHSupportingFeeOnTransferTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountIn",type:"uint256"},{internalType:"uint256",name:"amountOutMin",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapExactTokensForTokensSupportingFeeOnTransferTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactETH",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountOut",type:"uint256"},{internalType:"uint256",name:"amountInMax",type:"uint256"},{internalType:"address[]",name:"path",type:"address[]"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],name:"swapTokensForExactTokens",outputs:[{internalType:"uint256[]",name:"amounts",type:"uint256[]"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],pool:[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"Burn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0In",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1In",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount0Out",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1Out",type:"uint256"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"Swap",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint112",name:"reserve0",type:"uint112"},{indexed:!1,internalType:"uint112",name:"reserve1",type:"uint112"}],name:"Sync",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINIMUM_LIQUIDITY",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"burn",outputs:[{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getReserves",outputs:[{internalType:"uint112",name:"_reserve0",type:"uint112"},{internalType:"uint112",name:"_reserve1",type:"uint112"},{internalType:"uint32",name:"_blockTimestampLast",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token0",type:"address"},{internalType:"address",name:"_token1",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"kLast",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[{internalType:"uint256",name:"liquidity",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"price0CumulativeLast",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"price1CumulativeLast",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"skim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount0Out",type:"uint256"},{internalType:"uint256",name:"amount1Out",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"swap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"sync",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"token0",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"token1",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}]};function Bb(e,t){return Number(e_(e.toString(),t))}function Lb(e){return Number(e_(e,"gwei"))}function Ub(e){return t_(e,"gwei")}let Fb=()=>performance.now();var Zb,qb;function zb(e,t,r){var n=Fb();r=r||200;let i=new Promise(((i,s)=>{let a=setInterval((function(){let r=Fb();e()?(i(!1),clearInterval(a)):t&&r-n>=t&&(i(!0),clearInterval(a))}),r)}));return i}function $b(e){return new Promise(((t,r)=>{setTimeout((function(){t(Zb.TIMEOUT)}),e)}))}(qb=Zb||(Zb={}))[qb.TIMEOUT=0]="TIMEOUT";const{formatEther:Kb,parseEther:Hb,formatUnits:Gb,parseUnits:Vb}=h,Wb=dl.from("115792089237316195423570985008687907853269984665640564039457584007913129639935");var Jb,Qb,Yb,Xb;function ew(e,t){let r=Math.ceil(t*Number(e.toString()));return dl.from(String(r))}!function(e){e[e.GasPrice=0]="GasPrice",e[e.TxFee=1]="TxFee"}(Jb||(Jb={})),function(e){e[e.Error=0]="Error",e[e.MaxRetriesReached=1]="MaxRetriesReached",e[e.MaxGasReached=2]="MaxGasReached",e[e.GasVerified=3]="GasVerified",e[e.Success=4]="Success"}(Qb||(Qb={})),function(e){e[e.EIP_1559=0]="EIP_1559",e[e.LEGACY=1]="LEGACY"}(Yb||(Yb={}));class tw extends Dm{constructor(e){let{privateKey:t,provider:r,tx_type:n}=e;super(t,r),this.params=e}async init(){let{chainId:e}=await this.params.provider.ready;this.id=`${this.address.slice(1,6)}@${e}`,this.log=Do({id:this.id})}async get_fee_data(){return await this.provider.getFeeData()}async wrap_transactions_with_gas(e){let t=await this.get_fee_data(),{maxFeePerGas:r,maxPriorityFeePerGas:n,gasPrice:i}=t;switch(this.params.tx_type){case Yb.EIP_1559:return e.map((e=>Object.assign(e,{maxFeePerGas:r}))),e;case Yb.LEGACY:return e.map((e=>Object.assign(e,{gasPrice:i}))),e}}async get_gas_overrides(){return(await this.wrap_transactions_with_gas([{}]))[0]}multiply_transactions_gas_pricing(e,t){let r=e=>ew(e,t);switch(this.params.tx_type){case Yb.EIP_1559:return e.map(ns(["maxFeePerGas"],r));case Yb.LEGACY:return e.map(ns(["gasPrice"],r))}}async smart_eth_transfer(e){var{to:t,amt:r,max_gas_ops:n,max_retries:i,timeout_ms:s}=e;let a={type:Jb.TxFee,value:Hb("0.0001")};n=n||a,i=i||5,s=s||3e4;let o={tx:await this.generate_l1_transfer_tx(t,r),max_gas_ops:n,max_retries:i,timeout_ms:s};return await this.smartSendTransaction(o)}async generate_l1_transfer_tx(e,t){let r={from:this.address,to:e,value:n_(t),gasLimit:dl.from("25000")};return(await this.wrap_transactions_with_gas([r]))[0]}async get_token_allowance(e,t){return await e.allowance(this.address,t)}async token_allowance_is_maxed(e,t){return(await this.get_token_allowance(e,t)).eq(Wb)}async generate_approve_token_tx(e,t){var r=await this.get_gas_overrides();r.gasLimit=t_("100000","gwei");let n=await e.estimateGas.approve(t,Wb,r);return r.gasLimit=n,await e.populateTransaction.approve(t,Wb,r)}async fully_approve_token(e){let{token_contract:t,allowee_addr:r,base_smart_send_ops:n}=e,i=await this.generate_approve_token_tx(t,r),s=Object.assign({tx:i},n);return await this.smartSendTransaction(s)}max_fee_ops(e){return{type:Jb.TxFee,value:e}}max_price_ops(e){return{type:Jb.GasPrice,value:e}}default_smart_send_base(e){return{max_gas_ops:this.max_fee_ops(n_(String(e))),max_retries:4,timeout_ms:45e3}}async smartSendTransaction(e){let{tx:t,max_gas_ops:r,max_retries:n,timeout_ms:i}=e;var s=await this.getTransactionCount();let a=Do({id:`${this.id}:${s}`});var o=[],u=[];a("Processing SmartSend Tx Request::"),a(`Nonce is ${s}`),a(t);let c=await this.get_gas_overrides();c.nonce=s;for(var l=0;l<n;l++){a(`Attempt number: ${l+1}`),a("overrides:"),a(c),Object.assign(t,c),a("tx:"),a(t);try{let n=await this.check_transaction_gas(t,r),{tx_gas_info:s,status:d,details:h}=n;if(d!=Qb.GasVerified)return a("Tx gas failed verification... aborting"),{status:d,tx_gas_info:s,tx_attempts:o,details:h,ops:e};a("Tx gas check passed... will send following tx: (see gas info after tx)"),a(t),a(s);let f=await this.sendTransaction(t),p=f.wait();o.push([f,p]),u.push(p);let m=Promise.any(u),g=await Promise.race([m,$b(i)]);if(g!=Zb.TIMEOUT)return a("Transaction mined successfully!"),{status:Qb.Success,receipt:g,tx_attempts:o,ops:e};a("Timeout occurred.. tx not yet mined or errored"),a("Modifying gas params..."),a("Multiplier="+(1+.1*(l+1))),Object.assign(c,await this.get_gas_overrides()),a("Got gas estimation:"),a(c),Object.assign(t,c),a("Looping")}catch(t){return a("Error occurred :("),a(t),{status:Qb.Error,details:t,tx_attempts:o,ops:e}}}return{status:Qb.MaxRetriesReached,tx_attempts:o,ops:e}}get_gas_price_field(){switch(this.params.tx_type){case Yb.EIP_1559:return"maxFeePerGas";case Yb.LEGACY:return"gasPrice"}}calculate_transaction_gas(e){let t=e[this.get_gas_price_field()],r=e.gasLimit,n=t.mul(r);return{maxGasPrice:t,gasLimit:r,maxTxFee:n}}check_transaction_gas(e,t){let r=this.calculate_transaction_gas(e),{maxGasPrice:n,gasLimit:i,maxTxFee:s}=r;var a,o;switch(t.type){case Jb.TxFee:this.log("0"),s.gt(t.value)?(a=Qb.MaxGasReached,o=`MaxFee of ${Kb(t.value)} was exceeded by planned fee of ${Kb(s)}`):(a=Qb.GasVerified,o=`MaxFee of ${Kb(t.value)} was verified by planned fee of ${Kb(s)}`);break;case Jb.GasPrice:n.gt(t.value)?(a=Qb.MaxGasReached,o=`MaxGasPrice of ${Gb(t.value,"gwei")} (gwei) was exceeded by planned price of ${Gb(n,"gwei")} (gwei)`):(a=Qb.GasVerified,o=`MaxGasPrice of ${Gb(t.value,"gwei")} (gwei) was verified by planned price of ${Gb(n,"gwei")} (gwei)`);break;default:a=Qb.Error,o="Unkown MaxGasType"}let u={tx_gas_info:r,status:a,details:o};return this.log(o),u}async balanceAsNumber(){return Number(Kb(await this.getBalance()))}}function rw(e){switch(e){case Xb.Ethereum:return new gv("mainnet",process.env.ETHER_INFURA_PROJECT_ID);case Xb.Fantom:return new ky("https://rpcapi.fantom.network/");case Xb.Arbitrum:return new gv("mainnet",process.env.ARBITRUM_INFURA_PROJECT_ID);case Xb.Polygon:return new ky("https://polygon-rpc.com")}}function nw(){return rw(Xb.Fantom)}function iw(){return rw(Xb.Ethereum)}function sw(){return rw(Xb.Arbitrum)}function aw(){return rw(Xb.Polygon)}!function(e){e[e.Ethereum=0]="Ethereum",e[e.Fantom=1]="Fantom",e[e.Arbitrum=2]="Arbitrum",e[e.Polygon=3]="Polygon"}(Xb||(Xb={}));class ow extends kc{constructor(e){super(e),this.wallet=e.smartWallet}}class uw extends ow{constructor(e){super(e),this.params=e,this.routerContract=null,this.poolContract=null,this.token0=null,this.token1=null,this.token0Contract=null,this.token1Contract=null,this.tokens=null,this.gasLimitMultiple=1.2}async init(){this.log("Initializing");let{router_address:e,pool_address:t,chain_id:r,token0:n,token1:i,token0_is_base_asset:s}=this.params,a=Db;if(this.routerContract=new Qf(e,a.router,this.wallet),this.poolContract=new Qf(t,a.pool,this.wallet),n){let{contract_address:e,decimals:t,symbol:i,name:s}=n;this.token0=new ib(r,e,t,i,s),this.token0Contract=new Qf(e,jb,this.wallet)}else this.token0=null,this.token0Contract=null;if(i){let{contract_address:e,decimals:t,symbol:n,name:s}=i;this.token1=new ib(r,e,t,n,s),this.token1Contract=new Qf(e,jb,this.wallet)}else this.token1=null,this.token1Contract=null;this.tokens={base_token:s?this.token0:this.token1,quote_token:s?this.token1:this.token0,base_token_contract:s?this.token0Contract:this.token1Contract,quote_token_contract:s?this.token1Contract:this.token0Contract,base_token_decimals:s?this.token0.decimals:this.token1.decimals,quote_token_decimals:s?this.token1.decimals:this.token0.decimals},this.log("Initialization complete")}async get_base_balance(e){let t=this.tokens,r=t.base_token,n=(t.quote_token,await t.base_token_contract.balanceOf(this.wallet.address)),i=r.decimals;return Number(e_(n.toString(),i))}async get_quote_balance(e){let t=this.tokens,r=(t.base_token,t.quote_token),n=await t.quote_token_contract.balanceOf(this.wallet.address),i=r.decimals;return Number(e_(n.toString(),i))}async get_base_price(e,t){let{base_reserves:r,quote_reserves:n}=await this.get_pool_reserves();return n/r}async generate_swap_transaction(e,t){var r,n;this.log(`Generating transaction that will consume ${t} ${e} tokens`);let i=this.tokens,s=i.base_token,a=i.quote_token;"BASE"==e?(n=Number(t.toFixed(s.decimals)),this.log(`Converted ${t} to ${n} for base input`),r=await this.estimate_quote_out(n)):(n=Number(t.toFixed(a.decimals)),this.log(`Converted ${t} to ${n} for quote input`),r=await this.estimate_base_out(n));let{amounts:o,amountOutNoSlip:u,amountIn:c,amountOut:l,slippageRatio:d,slippagePercent:h,path:f,max_slippage_percent:p,minAmountOutNum:m,minAmountOut:g}=r;this.log(r);let y=await this.wallet.get_gas_overrides();y.gasLimit=dl.from("200000"),this.log("Estimating gas");let v=await this.routerContract.estimateGas.swapExactTokensForTokens(c,g,f,this.wallet.address,Date.now()+6e5,y);return this.log("Gas estimate="),this.log(v),y.gasLimit=v,{tx:await this.routerContract.populateTransaction.swapExactTokensForTokens(c,g,f,this.wallet.address,Date.now()+6e5,y),output_info:r,gas_estimate:v}}async do_swap(e,t,r){let{tx:n,output_info:i}=await this.generate_swap_transaction(e,t),{slippagePercent:s,max_slippage_percent:a}=i;if(s>a)return this.log("Aborting swap due to high slippage"),this.log(i),{success:!1};{this.log("Proceeding with swap");let e=Object.assign({tx:n},r);return await this.wallet.smartSendTransaction(e)}}async base_token_approved(){let e=this.tokens.base_token_contract,t=this.routerContract.address;return await this.wallet.token_allowance_is_maxed(e,t)}async quote_token_approved(){let e=this.tokens.quote_token_contract,t=this.routerContract.address;return await this.wallet.token_allowance_is_maxed(e,t)}async approve_token(e,t){let r={token_contract:e,allowee_addr:this.routerContract.address,base_smart_send_ops:t};return await this.wallet.fully_approve_token(r)}async approve_quote_token(e){let t=this.tokens.quote_token_contract;return await this.approve_token(t,e)}async approve_base_token(e){let t=this.tokens.base_token_contract;return await this.approve_token(t,e)}async prepare_tokens(e){return this.log("Checking tokens"),e?(await this.base_token_approved()?(this.log("Base token already approved..."),t={status:Qb.Success}):(this.log("Base token not approved..."),t=await this.approve_base_token(e)),await this.quote_token_approved()?(this.log("Quote token already approved..."),r={status:Qb.Success}):(this.log("Quote token not approved..."),r=await this.approve_quote_token(e)),t.status==Qb.Success&&r.status==Qb.Success?(this.log("Both token approvals succeeded!"),{success:!0}):(this.log("Unfortunately there was an error with the token approvals"),{success:!1,data:{base_result:t,quote_result:r}})):(this.log("No gas args provided!"),null);var t,r}async get_base_tx_ops(){let e=this.wallet,t=e.address,r=await this.wallet.get_gas_overrides(),{base_token:n,quote_token:i,base_token_contract:s,quote_token_contract:a}=this.tokens;return{wallet:e,addr:t,from:t,overrides:r,base_token:n,quote_token:i,base_token_contract:s,quote_token_contract:a,router_contract:this.routerContract}}get_tx_gas_info(e,t){let{gasPrice:r,gasLimit:n}=e,i=Number(r_(r.mul(n)));return{max_total_gas:i,max_total_gas_usd:i*t,l1_price_usd:t,gasPrice:r,gasLimit:n}}async estimate_quote_out(e){let t=this.tokens,r=t.base_token,n=t.quote_token;var{base_amt:i,quote_amt:s,base_price:a,portfolio_value:o,current_ratio:u,ratio_error:c,target_achieved:l,target_base_amt:d,base_delta:h,trade_type:f,base_market_amt:p}=await this.get_balance_data();let m=t_(String(e),r.decimals),g=[r.address,n.address],y=e*a,v=await this.routerContract.getAmountsOut(m,g),_=Number(e_(v[1],n.decimals)),b=(y-_)/y,w=100*b,{max_slippage_percent:A}=this.params,E=(y*(1-A/100)).toFixed(n.decimals);return{amounts:v,amountOutNoSlip:y,amountIn:m,amountOut:_,slippageRatio:b,slippagePercent:w,max_slippage_percent:A,minAmountOutNum:E,minAmountOut:t_(String(E),n.decimals),path:g}}async estimate_base_out(e){let t=this.tokens,r=t.base_token,n=t.quote_token;var{base_amt:i,quote_amt:s,base_price:a,portfolio_value:o,current_ratio:u,ratio_error:c,target_achieved:l,target_base_amt:d,base_delta:h,trade_type:f,base_market_amt:p}=await this.get_balance_data();let m=t_(String(e),n.decimals),g=[n.address,r.address],y=e/a,v=await this.routerContract.getAmountsOut(m,g),_=Number(e_(v[1],r.decimals)),b=(y-_)/y,w=100*b,{max_slippage_percent:A}=this.params,E=(y*(1-A/100)).toFixed(r.decimals);return{amounts:v,amountOutNoSlip:y,amountIn:m,amountOut:_,slippageRatio:b,slippagePercent:w,max_slippage_percent:A,minAmountOutNum:E,minAmountOut:t_(String(E),r.decimals),path:g}}async get_pool_reserves(){this.tokens;var e=await this.poolContract.getReserves();let t=Bb(e[0],this.token0.decimals),r=Bb(e[1],this.token1.decimals);return{token0reserves:t,token1reserves:r,base_reserves:this.params.token0_is_base_asset?t:r,quote_reserves:this.params.token0_is_base_asset?r:t}}async do_market_trade(e,t){var r;switch(e){case Gu.BUY:r=await this.do_swap("QUOTE",t,this.wallet.default_smart_send_base(.05));break;case Gu.SELL:r=await this.do_swap("BASE",t,this.wallet.default_smart_send_base(.05))}return r.status==Qb.Success?{error:!1,info:r}:{error:!0,info:r}}symbol_generator(e,t){return`${e}/${t}`}}var cw={uniswap:{contracts:{eth_usdc:"0x8ad599c3A0ff1De082011EFDDc58f1908eb6e6D8"}}},lw={uniswap:{contracts:{eth_usdc:"0xC31E54c7a869B9FcBEcc14363CF510d1c41fa443"}}},dw={mainnet:{chain_id:250,spookyswap:{router:{address:"0xF491e7B69E4244ad4002BC14e878a34207E38c29"},pools:{usdc_ftm:{address:"0x2b4c76d0dc16be1c31d4c1dc53bf9b45987fc75c"}}},tokens:{usdc:{contract_address:"0x04068DA6C83AFCFA0e13ba15A6696662335D5B75",decimals:6,name:"USDC Coin",symbol:"USDC"},wftm:{contract_address:"0x21be370D5312f44cB42ce377BC9b8a0cEF1A4C83",decimals:18,name:"Wrapped Fantom",symbol:"WFTM"}}}};async function hw(e,t){let r=`https://account.metafi.codefi.network/accounts/${e}?chainId=${t}&includePrices=true`,n=await fetch(r);return console.log(r),i.g.res=n,await n.json()}const fw=[{id:"1",symbol:"ETH"},{id:"56",symbol:"BNB"},{id:"43114",symbol:"AVAX"},{id:"137",symbol:"MATIC"},{id:"42161",symbol:"ARB_ETH"},{id:"10",symbol:"OPT_ETH"},{id:"25",symbol:"CRO"},{id:"250",symbol:"FTM"},{id:"8217",symbol:"KLAY"},{id:"2222",symbol:"KAVA"},{id:"100",symbol:"xDAI"},{id:"7700",symbol:"CANTO"},{id:"32659",symbol:"FSN"},{id:"128",symbol:"HT"}];var pw=Object.fromEntries(fw.map((e=>[e.symbol,Number(e.id)])));function mw(e){return pw[e]}function gw(e){return e.length}function yw(e){let t=0;for(var r=0;r<e.length;r++)t+=window.Math.pow(e[r],2);return Math.pow(t,.5)}function vw(e){let t=0;for(var r=0;r<e.length;r++)t+=e[r];return t}function _w(e){let t=[];for(var r=0;r<e.length;r++)t[r]=Math.abs(e[r]);return t}function bw(e){return vw(e)/gw(e)}function ww(e){return bw(_w(e))}function Aw(e){return{max:Math.max.apply(null,e),min:Math.min.apply(null,e),mean:bw(e)}}function Ew(e){const t=e.reduce(((e,t)=>e+t.length),0),r=new Float32Array(t);let n=0;return e.forEach((e=>{r.set(e,n),n+=e.length})),r}function kw(){return performance.now()}var xw={};function Tw(e,t){xw[e]=t}function Pw(e){return xw[e]}var Sw=Do({id:"debug"});function Iw(e){let t=new ArrayBuffer(8);return new DataView(t).setBigUint64(0,BigInt(e),!1),new Uint8Array(t)}function Ow(e){let t=Iw(Date.now()),r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function Cw(){return"undefined"!=typeof window&&void 0!==window.document}function Nw(){return"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node}function Mw(){return Number(new Date)}function Rw(e){Tw("pre_clean",e);let t=e.split("\n").join("").replace(/  /g,"").replace(",}","}"),r=t.indexOf("{"),n=t.indexOf("[");var i;return i=r<0?n:n<0?r:Math.min(r,n),t=t.slice(i,t.length),Sw(`extracting json starting at index ${i}=${t[i]}`),Tw("post_clean",t),Sw(`Cleaned ${e} to \n\n\n ${t}`),t}async function jw(e,t){try{var r;r=Cw()?`${window.origin}/api/openai_davinci`:"https://www.tidyscripts.com/api/openai_davinci";let i=await $I(r,{prompt:e,max_tokens:t});Tw("api_response",i),Sw("Logged the api repsonse"),Sw("Cleaning json string");var n=Rw(i.text);return Sw(`Got cleaned response: ${n}`),{error:!1,data:JSON.parse(n)}}catch(e){return Tw("api_error",e),Sw("api_error experienced"),{error:!0,data:"api error"}}}const Dw={demographics:{age:35,gender:"Male",ethnicity:"Caucasian",occupation:"Software Engineer"},symptoms:["Fever","Cough","Fatigue"],lab_values:[{lab:"Magnesium",value:1.5},{lab:"Calcium",value:9.2},{lab:"Potassium",value:4},{lab:"Sodium",value:138}],medical_history:["Asthma","Seasonal Allergies"],medications:[{medication:"Albuterol",dose:{value:"2 puffs",frequency:"as needed"}},{medication:"Fluticasone",dose:{value:"1 spray",frequency:"daily"}}],tests:[{test:"Chest X-ray",result:"Negative"}],physical_exam:["Mild wheezing on auscultation"]};function Bw(e){const{demographics:t,symptoms:r,lab_values:n,medical_history:i,medications:s,tests:a,physical_exam:o}=e;return`\n    Given the following patient information:\n    Demographics: ${JSON.stringify(t)}\n    Symptoms: ${JSON.stringify(r)}\n    Lab values: ${JSON.stringify(n)}\n    Medical history: ${JSON.stringify(i)}\n    Medications: ${JSON.stringify(s)}\n    Tests: ${JSON.stringify(a)}\n    Physical exam: ${JSON.stringify(o)}\n\n    Please generate a list of the most likely diagnoses, along with their likelihood and any potential further workup needed to confirm or exclude each diagnosis.\nThe returned value should be a stringified JSON object that is an Array of objects that each have  "diagnosis", "likelihood", "reasoning",  and "suggested_workup" fields. \n    The suggested_workup field should be an array of strings where each string is a single suggested workup, such as "echocardiogram" or "chest x-ray" or "Basic metabolic panel (BMP)".\n    The likelihood field should be a number from 0 to 1 that estimates the probability that this is the diagnosis.\nThe reasoning field provides reasoning for ONLY the diagnosis and NOT for the suggested workup. It should be a string of atleast 5 sentences that directly references the provided information and specific numbers that went into your decision making process, and the logic behind the decision. If you conclude a lab value is high or low please provide a reference range in your explanation.\n    The returned array should have atleast 10 elements that are ranked with the highest likelihood first. \n  `}async function Lw(e){let t=Bw(e);return await jw(t,2048)}async function Uw(e){try{const t=`Given the medical one-liner "${e.one_liner}" and History and Physical "${e.hp}", generate a patient_data object which conforms\nto the following PatientData type definition in typescript:\n\ntype PatientData = {\n  demographics: {\n    age: number,\n    gender?: string,\n    ethnicity?: string,\n    occupation?: string\n  },\n  symptoms: string[],\n  lab_values: {\n    lab : string ,\n    value : any \n  }[],\n  medical_history: string[],\n  medications: {\n    medication : string,\n    dose : { value : string, frequency : string } \n  }[],\n  tests: {\n    test: string,\n    result: string\n  }[],\n  physical_exam: string[]\n}\n\nThe repsonse should be a json string. \nOnly include the optional fields in the response if that information is explicity present in the one_liner or hp\nDo not include any text in the response other than the json string itself \n\n\nEXAMPLE RESPONSE: \n\n{\n  "demographics": {\n    "age": 30,\n    "gender": "Female",\n    "occupation": "Software Engineer"\n  },\n  "symptoms": ["Fever", "Cough", "Fatigue"],\n  "lab_values": [\n    {\n      "lab": "Magnesium",\n      "value": 1.5\n    },\n    {\n      "lab": "Calcium",\n      "value": 9.2\n    },\n    {\n      "lab": "Potassium",\n      "value": 4.0\n    },\n    {\n      "lab": "Sodium",\n      "value": 138\n    }\n  ],\n  "medical_history": ["Asthma", "Seasonal Allergies"],\n  "medications": [\n    {\n      "medication": "Albuterol",\n      "dose": {\n        "value": "2 puffs",\n        "frequency": "as needed"\n      }\n    },\n    {\n      "medication": "Fluticasone",\n      "dose": {\n        "value": "1 spray",\n        "frequency": "daily"\n      }\n    }\n  ],\n  "tests": [\n    {\n      "test": "Chest X-ray",\n      "result": "Negative"\n    }\n  ],\n  "physical_exam": ["Mild wheezing on auscultation"]\n}\n`;return(await jw(t,2048)).data}catch(e){return Sw("An error occurred"),Tw("generate_error",e),null}}var Fw="1111";const Zw=Do({id:"medications"});var qw=[],zw=[],$w=null;async function Kw(){return await Hw(),zw}async function Hw(){zw.length&&$w||(Zw("Downloading medications"),qw=await $I("https://storage.googleapis.com/tidyscripts/medication_data.json",{}),Zw("Parsing medications"),(zw=Eu(qw)).map((function(e){try{e.adverse_reactions=Xw(e.adverse_reactions),e.name=e.name.replace("-drug-information","")}catch(t){Zw("error parsing med:"),console.log(e),process.exit()}})),Zw("Building index"),$w=Jw(zw),Zw("Done"))}function Gw(e){return zw.filter((function(t){return t.name.match(e)}))}function Vw(e){let t=R.keys($w).filter((t=>t.match(e)));return Object.fromEntries(t.map((e=>[e,$w[e]])))}function Ww(e,t){if(!e.adverse_reactions)return t;let r=nu(e.adverse_reactions);for(var n of r){let{value:r,path:s}=n,a=s[0];for(var i of r)t[i]||(t[i]={}),t[i][a]||(t[i][a]=[]),t[i][a].push(e.name)}return t}function Jw(e){let t={};for(var r of e)t=Ww(r,t);return t}function Qw(e){let t=e.split("\n\n").filter((e=>e.length>1));var r={};return t.map((function(e){let t=e.split(":"),n=t[0].trim(),i=t.slice(1).join("").replace(/\([\s\S]*?\)/g,"").split(",").map((e=>e.toLowerCase().trim()));r[n]=i})),r}function Yw(e){return e.replace(/\([\s\S]*?\)/g,"").split(",").map((e=>e.toLowerCase().trim()))}function Xw(e){if(!e)return null;let t=new RegExp([">10%:","1% to 10%:","2% to 10%:","Frequency not defined:","Frequency not defined.\n\n","<1%, postmarketing, and/or case reports:","<2%, postmarketing, and/or case reports:","<2%:","<1%:","Postmarketing:","Postmarketing and/or case reports:","Case Reports:"].join("|"),"g"),r=e.match(t);if(!r)return null;let n=e.split(t);var i={};return Uo((function(e,t){try{let r=n[e+1];"<1%, postmarketing, and/or case reports:"==t.trim()||"<2%, postmarketing, and/or case reports:"==t.trim()?i[t]=Yw(r):i[t]=Qw(r)}catch(e){i[t]=!1}}),r),i}const eA="4.24.7";let tA,rA,nA,iA,sA,aA,oA,uA,cA,lA=!1,dA=null,hA=null,fA=null,pA=null;class mA{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}tA||function(e,t={auto:!1}){if(lA)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(tA)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${tA}'\``);lA=t.auto,tA=e.kind,rA=e.fetch,dA=e.Request,hA=e.Response,fA=e.Headers,nA=e.FormData,pA=e.Blob,iA=e.File,sA=e.ReadableStream,aA=e.getMultipartRequestOptions,oA=e.getDefaultAgent,uA=e.fileFromPath,cA=e.isFsReadStream}(function({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let r,n,i,s;try{r=fetch,n=Request,i=Response,s=Headers}catch(e){throw new Error(`this environment is missing the following Web Fetch API type: ${e.message}. ${t}`)}return{kind:"web",fetch:r,Request:n,Response:i,Headers:s,FormData:"undefined"!=typeof FormData?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:"undefined"!=typeof Blob?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:"undefined"!=typeof File?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new mA(e)}),getDefaultAgent:e=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0});class gA extends Error{}class yA extends gA{constructor(e,t,r,n){super(`${yA.makeMessage(e,t,r)}`),this.status=e,this.headers=n;const i=t;this.error=i,this.code=i?.code,this.param=i?.param,this.type=i?.type}static makeMessage(e,t,r){const n=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,r,n){if(!e)return new _A({cause:aE(t)});const i=t?.error;return 400===e?new wA(e,i,r,n):401===e?new AA(e,i,r,n):403===e?new EA(e,i,r,n):404===e?new kA(e,i,r,n):409===e?new xA(e,i,r,n):422===e?new TA(e,i,r,n):429===e?new PA(e,i,r,n):e>=500?new SA(e,i,r,n):new yA(e,i,r,n)}}class vA extends yA{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class _A extends yA{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class bA extends _A{constructor({message:e}={}){super({message:e??"Request timed out."})}}class wA extends yA{constructor(){super(...arguments),this.status=400}}class AA extends yA{constructor(){super(...arguments),this.status=401}}class EA extends yA{constructor(){super(...arguments),this.status=403}}class kA extends yA{constructor(){super(...arguments),this.status=404}}class xA extends yA{constructor(){super(...arguments),this.status=409}}class TA extends yA{constructor(){super(...arguments),this.status=422}}class PA extends yA{constructor(){super(...arguments),this.status=429}}class SA extends yA{}class IA{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;const n=new OA;return new IA((async function*(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let i=!1;try{for await(const r of async function*(){if(!e.body)throw t.abort(),new gA("Attempted to iterate over a response with no body");const r=new CA,i=NA(e.body);for await(const e of i)for(const t of r.decode(e)){const e=n.decode(t);e&&(yield e)}for(const e of r.flush()){const t=n.decode(e);t&&(yield t)}}())if(!i)if(r.data.startsWith("[DONE]"))i=!0;else if(null===r.event){let e;try{e=JSON.parse(r.data)}catch(e){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),e}if(e&&e.error)throw new yA(void 0,e.error,void 0,void 0);yield e}i=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{i||t.abort()}}),t)}static fromReadableStream(e,t){let r=!1;return new IA((async function*(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(const t of async function*(){const t=new CA,r=NA(e);for await(const e of r)for(const r of t.decode(e))yield r;for(const e of t.flush())yield e}())n||t&&(yield JSON.parse(t));n=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{n||t.abort()}}),t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),n=n=>({next:()=>{if(0===n.length){const n=r.next();e.push(n),t.push(n)}return n.shift()}});return[new IA((()=>n(e)),this.controller),new IA((()=>n(t)),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new sA({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:n,done:i}=await t.next();if(i)return e.close();const s=r.encode(JSON.stringify(n)+"\n");e.enqueue(s)}catch(t){e.error(t)}},async cancel(){await(t.return?.())}})}}class OA{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,n]=function(e,t){const r=e.indexOf(":");return-1!==r?[e.substring(0,r),":",e.substring(r+1)]:[e,"",""]}(e);return n.startsWith(" ")&&(n=n.substring(1)),"event"===t?this.event=n:"data"===t&&this.data.push(n),null}}class CA{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const r=CA.NEWLINE_CHARS.has(t[t.length-1]||"");let n=t.split(CA.NEWLINE_REGEXP);return 1!==n.length||r?(this.buffer.length>0&&(n=[this.buffer.join("")+n[0],...n.slice(1)],this.buffer=[]),r||(this.buffer=[n.pop()||""]),n):(this.buffer.push(n[0]),[])}decodeText(e){if(null==e)return"";if("string"==typeof e)return e;if("undefined"!=typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new gA(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new gA(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new gA("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}function NA(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}CA.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","","","","","\u2028","\u2029"]),CA.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;const MA=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,RA=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function jA(e,t,r={}){if(e=await e,MA(e)){const n=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new iA([n],t,r)}const n=await async function(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(RA(e))t.push(await e.arrayBuffer());else{if(!BA(e))throw new Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${function(e){return`[${Object.getOwnPropertyNames(e).map((e=>`"${e}"`)).join(", ")}]`}(e)}`);for await(const r of e)t.push(r)}return t}(e);if(t||(t=function(e){return DA(e.name)||DA(e.filename)||DA(e.path)?.split(/[\\/]/).pop()}(e)??"unknown_file"),!r.type){const e=n[0]?.type;"string"==typeof e&&(r={...r,type:e})}return new iA(n,t,r)}const DA=e=>"string"==typeof e?e:"undefined"!=typeof Buffer&&e instanceof Buffer?String(e):void 0,BA=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],LA=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],UA=async e=>{const t=await FA(e.body);return aA(t,e)},FA=async e=>{const t=new nA;return await Promise.all(Object.entries(e||{}).map((([e,r])=>ZA(t,e,r)))),t},ZA=async(e,t,r)=>{if(void 0!==r){if(null==r)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)e.append(t,String(r));else if((e=>(e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&RA(e))(e)||MA(e)||cA(e))(r)){const n=await jA(r);e.append(t,n)}else if(Array.isArray(r))await Promise.all(r.map((r=>ZA(e,t+"[]",r))));else{if("object"!=typeof r)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`);await Promise.all(Object.entries(r).map((([r,n])=>ZA(e,`${t}[${r}]`,n))))}}};var qA;async function zA(e){const{response:t}=e;if(e.options.stream)return dE("response",t.status,t.url,t.headers,t.body),IA.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;const r=t.headers.get("content-type");if(r?.includes("application/json")){const e=await t.json();return dE("response",t.status,t.url,t.headers,e),e}const n=await t.text();return dE("response",t.status,t.url,t.headers,n),n}class $A extends Promise{constructor(e,t=zA){super((e=>{e(null)})),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new $A(this.responsePromise,(async t=>e(await this.parseResponse(t))))}asResponse(){return this.responsePromise.then((e=>e.response))}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class KA{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:n,fetch:i}){this.baseURL=e,this.maxRetries=sE("maxRetries",t),this.timeout=sE("timeout",r),this.httpAgent=n,this.fetch=i??rA}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...eE(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${hE()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then((r=>({method:e,path:t,...r}))))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if("string"==typeof e){if("undefined"!=typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e).length.toString()}return null}buildRequest(e){const{method:t,path:r,query:n,headers:i={}}=e,s=LA(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,a=this.calculateContentLength(s),o=this.buildURL(r,n);"timeout"in e&&sE("timeout",e.timeout);const u=e.timeout??this.timeout,c=e.httpAgent??this.httpAgent??oA(o),l=u+1e3;return"number"==typeof c?.options?.timeout&&l>(c.options.timeout??0)&&(c.options.timeout=l),this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey),{req:{method:t,...s&&{body:s},headers:this.buildHeaders({options:e,headers:i,contentLength:a}),...c&&{agent:c},signal:e.signal??null},url:o,timeout:u}}buildHeaders({options:e,headers:t,contentLength:r}){const n={};return r&&(n["content-length"]=r),lE(n,this.defaultHeaders(e)),lE(n,t),LA(e.body)&&"node"!==tA&&delete n["content-type"],this.validateHeaders(n,t),n}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map((e=>[...e]))):{...e}:{}}makeStatusError(e,t,r,n){return yA.generate(e,t,r,n)}request(e,t=null){return new $A(this.makeRequest(e,t))}async makeRequest(e,t){const r=await e;null==t&&(t=r.maxRetries??this.maxRetries);const{req:n,url:i,timeout:s}=this.buildRequest(r);if(await this.prepareRequest(n,{url:i,options:r}),dE("request",i,r,n.headers),r.signal?.aborted)throw new vA;const a=new AbortController,o=await this.fetchWithTimeout(i,n,s,a).catch(aE);if(o instanceof Error){if(r.signal?.aborted)throw new vA;if(t)return this.retryRequest(r,t);if("AbortError"===o.name)throw new bA;throw new _A({cause:o})}const u=VA(o.headers);if(!o.ok){if(t&&this.shouldRetry(o))return this.retryRequest(r,t,u);const e=await o.text().catch((e=>aE(e).message)),n=tE(e),s=n?void 0:e;throw dE("response",o.status,i,u,s),this.makeStatusError(o.status,n,s,u)}return{response:o,options:r,controller:a}}requestAPIList(e,t){const r=this.makeRequest(t,null);return new GA(this,r,e)}buildURL(e,t){const r=nE(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),n=this.defaultQuery();return uE(n)||(t={...n,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter((([e,t])=>void 0!==t)).map((([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new gA(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)})).join("&")}async fetchWithTimeout(e,t,r,n){const{signal:i,...s}=t||{};i&&i.addEventListener("abort",(()=>n.abort()));const a=setTimeout((()=>n.abort()),r);return this.getRequestClient().fetch.call(void 0,e,{signal:n.signal,...s}).finally((()=>{clearTimeout(a)}))}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,r){let n;const i=r?.["retry-after"];if(i){const e=parseInt(i);n=Number.isNaN(e)?Date.parse(i)-Date.now():1e3*e}if(!n||!Number.isInteger(n)||n<=0||n>6e4){const r=e.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(t,r)}return await iE(n),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const r=t-e;return Math.min(.5*Math.pow(2,r),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${eA}`}}class HA{constructor(e,t,r,n){qA.set(this,void 0),function(e,t,r,n,i){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");t.set(e,r)}(this,qA,e),this.options=n,this.response=t,this.body=r}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new gA("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&"object"==typeof t.query)t.query={...t.query,...e.params};else if("url"in e){const r=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,n]of r)e.url.searchParams.set(t,n);t.query=void 0,t.path=e.url.toString()}return await function(e,t,r,n){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}(this,qA).requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(qA=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class GA extends $A{constructor(e,t,r){super(t,(async t=>new r(e,t.response,await zA(t),t.options)))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}const VA=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}}),WA={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0},JA=e=>"object"==typeof e&&null!==e&&!uE(e)&&Object.keys(e).every((e=>cE(WA,e))),QA=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",YA=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let XA;const eE=()=>XA??(XA=(()=>{if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eA,"X-Stainless-OS":YA(Deno.build.os),"X-Stainless-Arch":QA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eA,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eA,"X-Stainless-OS":YA(process.platform),"X-Stainless-Arch":QA(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:r}of e){const e=r.exec(navigator.userAgent);if(e)return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eA,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eA,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),tE=e=>{try{return JSON.parse(e)}catch(e){return}},rE=new RegExp("^(?:[a-z]+:)?//","i"),nE=e=>rE.test(e),iE=e=>new Promise((t=>setTimeout(t,e))),sE=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new gA(`${e} must be an integer`);if(t<0)throw new gA(`${e} must be a positive integer`);return t},aE=e=>e instanceof Error?e:new Error(e),oE=e=>"undefined"!=typeof process?process.env?.[e]?.trim()??void 0:"undefined"!=typeof Deno?Deno.env?.get?.(e)?.trim():void 0;function uE(e){if(!e)return!0;for(const t in e)return!1;return!0}function cE(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function lE(e,t){for(const r in t){if(!cE(t,r))continue;const n=r.toLowerCase();if(!n)continue;const i=t[r];null===i?delete e[n]:void 0!==i&&(e[n]=i)}}function dE(e,...t){"undefined"!=typeof process&&"true"===process.env.DEBUG&&console.log(`OpenAI:DEBUG:${e}`,...t)}const hE=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));class fE extends HA{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class pE extends HA{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}class mE{constructor(e){this._client=e}}class gE extends mE{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}gE||(gE={});class yE extends mE{create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}}yE||(yE={});class vE extends mE{constructor(){super(...arguments),this.completions=new yE(this._client)}}!function(e){e.Completions=yE}(vE||(vE={}));class _E extends mE{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}_E||(_E={});class bE extends mE{create(e,t){return this._client.post("/files",UA({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return JA(e)?this.list({},e):this._client.getAPIList("/files",wE,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...t?.headers}})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=18e5}={}){const n=new Set(["processed","error","deleted"]),i=Date.now();let s=await this.retrieve(e);for(;!s.status||!n.has(s.status);)if(await iE(t),s=await this.retrieve(e),Date.now()-i>r)throw new bA({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return s}}class wE extends fE{}!function(e){e.FileObjectsPage=wE}(bE||(bE={}));class AE extends mE{createVariation(e,t){return this._client.post("/images/variations",UA({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",UA({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}AE||(AE={});class EE extends mE{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}EE||(EE={});class kE extends mE{create(e,t){return this._client.post("/audio/transcriptions",UA({body:e,...t}))}}kE||(kE={});class xE extends mE{create(e,t){return this._client.post("/audio/translations",UA({body:e,...t}))}}xE||(xE={});class TE extends mE{constructor(){super(...arguments),this.transcriptions=new kE(this._client),this.translations=new xE(this._client),this.speech=new EE(this._client)}}!function(e){e.Transcriptions=kE,e.Translations=xE,e.Speech=EE}(TE||(TE={}));class PE extends mE{create(e,t){return this._client.post("/moderations",{body:e,...t})}}PE||(PE={});class SE extends mE{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",IE,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class IE extends fE{}!function(e){e.ModelsPage=IE}(SE||(SE={}));class OE extends mE{create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return JA(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",CE,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return JA(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,NE,{query:t,...r})}}class CE extends pE{}class NE extends pE{}!function(e){e.FineTuningJobsPage=CE,e.FineTuningJobEventsPage=NE}(OE||(OE={}));class ME extends mE{constructor(){super(...arguments),this.jobs=new OE(this._client)}}!function(e){e.Jobs=OE,e.FineTuningJobsPage=CE,e.FineTuningJobEventsPage=NE}(ME||(ME={}));class RE extends mE{create(e,t,r){return this._client.post(`/assistants/${e}/files`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/assistants/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}list(e,t={},r){return JA(t)?this.list(e,{},t):this._client.getAPIList(`/assistants/${e}/files`,jE,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}del(e,t,r){return this._client.delete(`/assistants/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}}class jE extends pE{}!function(e){e.AssistantFilesPage=jE}(RE||(RE={}));class DE extends mE{constructor(){super(...arguments),this.files=new RE(this._client)}create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}update(e,t,r){return this._client.post(`/assistants/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}list(e={},t){return JA(e)?this.list({},e):this._client.getAPIList("/assistants",BE,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}}class BE extends pE{}function LE(e){return"function"==typeof e.parse}!function(e){e.AssistantsPage=BE,e.Files=RE,e.AssistantFilesPage=jE}(DE||(DE={}));const UE=e=>"assistant"===e?.role,FE=e=>"function"===e?.role,ZE=e=>"tool"===e?.role;var qE,zE,$E,KE,HE,GE,VE,WE,JE,QE,YE,XE,ek,tk,rk,nk,ik,sk,ak,ok,uk=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},ck=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};const lk=10;class dk{constructor(){qE.add(this),this.controller=new AbortController,zE.set(this,void 0),$E.set(this,(()=>{})),KE.set(this,(()=>{})),HE.set(this,void 0),GE.set(this,(()=>{})),VE.set(this,(()=>{})),WE.set(this,{}),this._chatCompletions=[],this.messages=[],JE.set(this,!1),QE.set(this,!1),YE.set(this,!1),XE.set(this,!1),sk.set(this,(e=>{if(uk(this,QE,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new vA),e instanceof vA)return uk(this,YE,!0,"f"),this._emit("abort",e);if(e instanceof gA)return this._emit("error",e);if(e instanceof Error){const t=new gA(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new gA(String(e)))})),uk(this,zE,new Promise(((e,t)=>{uk(this,$E,e,"f"),uk(this,KE,t,"f")})),"f"),uk(this,HE,new Promise(((e,t)=>{uk(this,GE,e,"f"),uk(this,VE,t,"f")})),"f"),ck(this,zE,"f").catch((()=>{})),ck(this,HE,"f").catch((()=>{}))}_run(e){setTimeout((()=>{e().then((()=>{this._emitFinal(),this._emit("end")}),ck(this,sk,"f"))}),0)}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),(FE(e)||ZE(e))&&e.content)this._emit("functionCallResult",e.content);else if(UE(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(UE(e)&&e.tool_calls)for(const t of e.tool_calls)"function"===t.type&&this._emit("functionCall",t.function)}_connected(){this.ended||(ck(this,$E,"f").call(this),this._emit("connect"))}get ended(){return ck(this,JE,"f")}get errored(){return ck(this,QE,"f")}get aborted(){return ck(this,YE,"f")}abort(){this.controller.abort()}on(e,t){return(ck(this,WE,"f")[e]||(ck(this,WE,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=ck(this,WE,"f")[e];if(!r)return this;const n=r.findIndex((e=>e.listener===t));return n>=0&&r.splice(n,1),this}once(e,t){return(ck(this,WE,"f")[e]||(ck(this,WE,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise(((t,r)=>{uk(this,XE,!0,"f"),"error"!==e&&this.once("error",r),this.once(e,t)}))}async done(){uk(this,XE,!0,"f"),await ck(this,HE,"f")}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new gA("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),ck(this,qE,"m",ek).call(this)}async finalMessage(){return await this.done(),ck(this,qE,"m",tk).call(this)}async finalFunctionCall(){return await this.done(),ck(this,qE,"m",rk).call(this)}async finalFunctionCallResult(){return await this.done(),ck(this,qE,"m",nk).call(this)}async totalUsage(){return await this.done(),ck(this,qE,"m",ik).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(e,...t){if(ck(this,JE,"f"))return;"end"===e&&(uk(this,JE,!0,"f"),ck(this,GE,"f").call(this));const r=ck(this,WE,"f")[e];if(r&&(ck(this,WE,"f")[e]=r.filter((e=>!e.once)),r.forEach((({listener:e})=>e(...t)))),"abort"===e){const e=t[0];return ck(this,XE,"f")||r?.length||Promise.reject(e),ck(this,KE,"f").call(this,e),ck(this,VE,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];ck(this,XE,"f")||r?.length||Promise.reject(e),ck(this,KE,"f").call(this,e),ck(this,VE,"f").call(this,e),this._emit("end")}}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=ck(this,qE,"m",tk).call(this);t&&this._emit("finalMessage",t);const r=ck(this,qE,"m",ek).call(this);r&&this._emit("finalContent",r);const n=ck(this,qE,"m",rk).call(this);n&&this._emit("finalFunctionCall",n);const i=ck(this,qE,"m",nk).call(this);null!=i&&this._emit("finalFunctionCallResult",i),this._chatCompletions.some((e=>e.usage))&&this._emit("totalUsage",ck(this,qE,"m",ik).call(this))}async _createChatCompletion(e,t,r){const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",(()=>this.controller.abort()))),ck(this,qE,"m",ak).call(this,t);const i=await e.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(i)}async _runChatCompletion(e,t,r){for(const e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,r)}async _runFunctions(e,t,r){const n="function",{function_call:i="auto",stream:s,...a}=t,o="string"!=typeof i&&i?.name,{maxChatCompletions:u=lk}=r||{},c={};for(const e of t.functions)c[e.name||e.function.name]=e;const l=t.functions.map((e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description})));for(const e of t.messages)this._addMessage(e,!1);for(let t=0;t<u;++t){const t=await this._createChatCompletion(e,{...a,function_call:i,functions:l,messages:[...this.messages]},r),s=t.choices[0]?.message;if(!s)throw new gA("missing message in ChatCompletion response");if(!s.function_call)return;const{name:u,arguments:d}=s.function_call,h=c[u];if(!h){const e=`Invalid function_call: ${JSON.stringify(u)}. Available options are: ${l.map((e=>JSON.stringify(e.name))).join(", ")}. Please try again`;this._addMessage({role:n,name:u,content:e});continue}if(o&&o!==u){const e=`Invalid function_call: ${JSON.stringify(u)}. ${JSON.stringify(o)} requested. Please try again`;this._addMessage({role:n,name:u,content:e});continue}let f;try{f=LE(h)?await h.parse(d):d}catch(e){this._addMessage({role:n,name:u,content:e instanceof Error?e.message:String(e)});continue}const p=await h.function(f,this),m=ck(this,qE,"m",ok).call(this,p);if(this._addMessage({role:n,name:u,content:m}),o)return}}async _runTools(e,t,r){const n="tool",{tool_choice:i="auto",stream:s,...a}=t,o="string"!=typeof i&&i?.function?.name,{maxChatCompletions:u=lk}=r||{},c={};for(const e of t.tools)"function"===e.type&&(c[e.function.name||e.function.function.name]=e.function);const l="tools"in t?t.tools.map((e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description}}:e)):void 0;for(const e of t.messages)this._addMessage(e,!1);for(let t=0;t<u;++t){const t=await this._createChatCompletion(e,{...a,tool_choice:i,tools:l,messages:[...this.messages]},r),s=t.choices[0]?.message;if(!s)throw new gA("missing message in ChatCompletion response");if(!s.tool_calls)return;for(const t of s.tool_calls){if("function"!==t.type)continue;const r=t.id,{name:i,arguments:s}=t.function,a=c[i];if(!a){const e=`Invalid tool_call: ${JSON.stringify(i)}. Available options are: ${l.map((e=>JSON.stringify(e.function.name))).join(", ")}. Please try again`;this._addMessage({role:n,tool_call_id:r,content:e});continue}if(o&&o!==i){const e=`Invalid tool_call: ${JSON.stringify(i)}. ${JSON.stringify(o)} requested. Please try again`;this._addMessage({role:n,tool_call_id:r,content:e});continue}let u;try{u=LE(a)?await a.parse(s):s}catch(e){const t=e instanceof Error?e.message:String(e);this._addMessage({role:n,tool_call_id:r,content:t});continue}const d=await a.function(u,this),h=ck(this,qE,"m",ok).call(this,d);if(this._addMessage({role:n,tool_call_id:r,content:h}),o)return}}}}zE=new WeakMap,$E=new WeakMap,KE=new WeakMap,HE=new WeakMap,GE=new WeakMap,VE=new WeakMap,WE=new WeakMap,JE=new WeakMap,QE=new WeakMap,YE=new WeakMap,XE=new WeakMap,sk=new WeakMap,qE=new WeakSet,ek=function(){return ck(this,qE,"m",tk).call(this).content??null},tk=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(UE(t))return{...t,content:t.content??null}}throw new gA("stream ended without producing a ChatCompletionMessage with role=assistant")},rk=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(UE(t)&&t?.function_call)return t.function_call;if(UE(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},nk=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(FE(t)&&null!=t.content)return t.content;if(ZE(t)&&null!=t.content&&this.messages.some((e=>"assistant"===e.role&&e.tool_calls?.some((e=>"function"===e.type&&e.id===t.tool_call_id)))))return t.content}},ik=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},ak=function(e){if(null!=e.n&&e.n>1)throw new gA("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},ok=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class hk extends dk{static runFunctions(e,t,r){const n=new hk,i={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run((()=>n._runFunctions(e,t,i))),n}static runTools(e,t,r){const n=new hk,i={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run((()=>n._runTools(e,t,i))),n}_addMessage(e){super._addMessage(e),UE(e)&&e.content&&this._emit("content",e.content)}}var fk,pk,mk,gk,yk,vk,_k,bk=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},wk=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};class Ak extends dk{constructor(){super(...arguments),fk.add(this),pk.set(this,void 0)}get currentChatCompletionSnapshot(){return bk(this,pk,"f")}static fromReadableStream(e){const t=new Ak;return t._run((()=>t._fromReadableStream(e))),t}static createChatCompletion(e,t,r){const n=new Ak;return n._run((()=>n._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}}))),n}async _createChatCompletion(e,t,r){const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",(()=>this.controller.abort()))),bk(this,fk,"m",mk).call(this);const i=await e.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const e of i)bk(this,fk,"m",gk).call(this,e);if(i.controller.signal?.aborted)throw new vA;return this._addChatCompletion(bk(this,fk,"m",yk).call(this))}async _fromReadableStream(e,t){const r=t?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",(()=>this.controller.abort()))),bk(this,fk,"m",mk).call(this),this._connected();const n=IA.fromReadableStream(e,this.controller);let i;for await(const e of n)i&&i!==e.id&&this._addChatCompletion(bk(this,fk,"m",yk).call(this)),bk(this,fk,"m",gk).call(this,e),i=e.id;if(n.controller.signal?.aborted)throw new vA;return this._addChatCompletion(bk(this,fk,"m",yk).call(this))}[(pk=new WeakMap,fk=new WeakSet,mk=function(){this.ended||wk(this,pk,void 0,"f")},gk=function(e){if(this.ended)return;const t=bk(this,fk,"m",vk).call(this,e);this._emit("chunk",e,t);const r=e.choices[0]?.delta?.content,n=t.choices[0]?.message;null!=r&&"assistant"===n?.role&&n?.content&&this._emit("content",r,n.content)},yk=function(){if(this.ended)throw new gA("stream has ended, this shouldn't happen");const e=bk(this,pk,"f");if(!e)throw new gA("request ended without sending any chunks");return wk(this,pk,void 0,"f"),function(e){const{id:t,choices:r,created:n,model:i}=e;return{id:t,choices:r.map((({message:t,finish_reason:r,index:n,logprobs:i})=>{if(!r)throw new gA(`missing finish_reason for choice ${n}`);const{content:s=null,function_call:a,tool_calls:o}=t,u=t.role;if(!u)throw new gA(`missing role for choice ${n}`);if(a){const{arguments:e,name:t}=a;if(null==e)throw new gA(`missing function_call.arguments for choice ${n}`);if(!t)throw new gA(`missing function_call.name for choice ${n}`);return{message:{content:s,function_call:{arguments:e,name:t},role:u},finish_reason:r,index:n,logprobs:i}}return o?{index:n,finish_reason:r,logprobs:i,message:{role:u,content:s,tool_calls:o.map(((t,r)=>{const{function:i,type:s,id:a}=t,{arguments:o,name:u}=i||{};if(null==a)throw new gA(`missing choices[${n}].tool_calls[${r}].id\n${Ek(e)}`);if(null==s)throw new gA(`missing choices[${n}].tool_calls[${r}].type\n${Ek(e)}`);if(null==u)throw new gA(`missing choices[${n}].tool_calls[${r}].function.name\n${Ek(e)}`);if(null==o)throw new gA(`missing choices[${n}].tool_calls[${r}].function.arguments\n${Ek(e)}`);return{id:a,type:s,function:{name:u,arguments:o}}}))}}:{message:{content:s,role:u},finish_reason:r,index:n,logprobs:i}})),created:n,model:i,object:"chat.completion"}}(e)},vk=function(e){var t,r,n;let i=bk(this,pk,"f");const{choices:s,...a}=e;i?Object.assign(i,a):i=wk(this,pk,{...a,choices:[]},"f");for(const{delta:s,finish_reason:a,index:o,logprobs:u=null,...c}of e.choices){let e=i.choices[o];if(!e){i.choices[o]={finish_reason:a,index:o,message:s,logprobs:u,...c};continue}if(u&&(e.logprobs?u.content&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...u.content)):e.logprobs=u),a&&(e.finish_reason=a),Object.assign(e,c),!s)continue;const{content:l,function_call:d,role:h,tool_calls:f}=s;if(l&&(e.message.content=(e.message.content||"")+l),h&&(e.message.role=h),d&&(e.message.function_call?(d.name&&(e.message.function_call.name=d.name),d.arguments&&((r=e.message.function_call).arguments??(r.arguments=""),e.message.function_call.arguments+=d.arguments)):e.message.function_call=d),f){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:r,type:i,function:s}of f){const a=(n=e.message.tool_calls)[t]??(n[t]={});r&&(a.id=r),i&&(a.type=i),s&&(a.function??(a.function={arguments:""})),s?.name&&(a.function.name=s.name),s?.arguments&&(a.function.arguments+=s.arguments)}}}return i},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",(r=>{const n=t.shift();n?n(r):e.push(r)})),this.on("end",(()=>{r=!0;for(const e of t)e(void 0);t.length=0})),{next:async()=>e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((e=>t.push(e))).then((e=>e?{value:e,done:!1}:{value:void 0,done:!0}))}}toReadableStream(){return new IA(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Ek(e){return JSON.stringify(e)}class kk extends Ak{static fromReadableStream(e){const t=new kk;return t._run((()=>t._fromReadableStream(e))),t}static runFunctions(e,t,r){const n=new kk,i={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run((()=>n._runFunctions(e,t,i))),n}static runTools(e,t,r){const n=new kk,i={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run((()=>n._runTools(e,t,i))),n}}class xk extends mE{runFunctions(e,t){return e.stream?kk.runFunctions(this._client.chat.completions,e,t):hk.runFunctions(this._client.chat.completions,e,t)}runTools(e,t){return e.stream?kk.runTools(this._client.chat.completions,e,t):hk.runTools(this._client.chat.completions,e,t)}stream(e,t){return Ak.createChatCompletion(this._client.chat.completions,e,t)}}class Tk extends mE{constructor(){super(...arguments),this.completions=new xk(this._client)}}!function(e){e.Completions=xk}(Tk||(Tk={}));class Pk extends mE{retrieve(e,t,r,n){return this._client.get(`/threads/${e}/messages/${t}/files/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(e,t,r={},n){return JA(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/messages/${t}/files`,Sk,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}}class Sk extends pE{}!function(e){e.MessageFilesPage=Sk}(Pk||(Pk={}));class Ik extends mE{constructor(){super(...arguments),this.files=new Pk(this._client)}create(e,t,r){return this._client.post(`/threads/${e}/messages`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}update(e,t,r,n){return this._client.post(`/threads/${e}/messages/${t}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(e,t={},r){return JA(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,Ok,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}}class Ok extends pE{}!function(e){e.ThreadMessagesPage=Ok,e.Files=Pk,e.MessageFilesPage=Sk}(Ik||(Ik={}));class Ck extends mE{retrieve(e,t,r,n){return this._client.get(`/threads/${e}/runs/${t}/steps/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(e,t,r={},n){return JA(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,Nk,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}}class Nk extends pE{}!function(e){e.RunStepsPage=Nk}(Ck||(Ck={}));class Mk extends mE{constructor(){super(...arguments),this.steps=new Ck(this._client)}create(e,t,r){return this._client.post(`/threads/${e}/runs`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/runs/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}update(e,t,r,n){return this._client.post(`/threads/${e}/runs/${t}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(e,t={},r){return JA(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,Rk,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}cancel(e,t,r){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}submitToolOutputs(e,t,r,n){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}}class Rk extends pE{}!function(e){e.RunsPage=Rk,e.Steps=Ck,e.RunStepsPage=Nk}(Mk||(Mk={}));class jk extends mE{constructor(){super(...arguments),this.runs=new Mk(this._client),this.messages=new Ik(this._client)}create(e={},t){return JA(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}update(e,t,r){return this._client.post(`/threads/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}}!function(e){e.Runs=Mk,e.RunsPage=Rk,e.Messages=Ik,e.ThreadMessagesPage=Ok}(jk||(jk={}));class Dk extends mE{constructor(){super(...arguments),this.chat=new Tk(this._client),this.assistants=new DE(this._client),this.threads=new jk(this._client)}}!function(e){e.Chat=Tk,e.Assistants=DE,e.AssistantsPage=BE,e.Threads=jk}(Dk||(Dk={}));class Bk extends KA{constructor({baseURL:e=oE("OPENAI_BASE_URL"),apiKey:t=oE("OPENAI_API_KEY"),organization:r=oE("OPENAI_ORG_ID")??null,...n}={}){if(void 0===t)throw new gA("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:t,organization:r,...n,baseURL:e||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator)throw new gA("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new gE(this),this.chat=new vE(this),this.embeddings=new _E(this),this.files=new bE(this),this.images=new AE(this),this.audio=new TE(this),this.moderations=new PE(this),this.models=new SE(this),this.fineTuning=new ME(this),this.beta=new Dk(this),this._options=i,this.apiKey=t,this.organization=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}_k=Bk,Bk.OpenAI=_k,Bk.OpenAIError=gA,Bk.APIError=yA,Bk.APIConnectionError=_A,Bk.APIConnectionTimeoutError=bA,Bk.APIUserAbortError=vA,Bk.NotFoundError=kA,Bk.ConflictError=xA,Bk.RateLimitError=PA,Bk.BadRequestError=wA,Bk.AuthenticationError=AA,Bk.InternalServerError=SA,Bk.PermissionDeniedError=EA,Bk.UnprocessableEntityError=TA;const{OpenAIError:Lk,APIError:Uk,APIConnectionError:Fk,APIConnectionTimeoutError:Zk,APIUserAbortError:qk,NotFoundError:zk,ConflictError:$k,RateLimitError:Kk,BadRequestError:Hk,AuthenticationError:Gk,InternalServerError:Vk,PermissionDeniedError:Wk,UnprocessableEntityError:Jk}=M;var Qk;(Qk=Bk||(Bk={})).toFile=jA,Qk.fileFromPath=uA,Qk.Page=fE,Qk.CursorPage=pE,Qk.Completions=gE,Qk.Chat=vE,Qk.Embeddings=_E,Qk.Files=bE,Qk.FileObjectsPage=wE,Qk.Images=AE,Qk.Audio=TE,Qk.Moderations=PE,Qk.Models=SE,Qk.ModelsPage=IE,Qk.FineTuning=ME,Qk.Beta=Dk;const Yk=Bk;var Xk=i(8852);function ex(e,t){return t?.[e]||Xk(e)}function tx(e,t,r){const n={};for(const i in e)Object.hasOwn(e,i)&&(n[t(i,r)]=e[i]);return n}function rx(e){return Array.isArray(e)?[...e]:{...e}}function nx(e,t){const r=rx(e);for(const[e,n]of Object.entries(t)){const[t,...i]=e.split(".").reverse();let s=r;for(const e of i.reverse()){if(void 0===s[e])break;s[e]=rx(s[e]),s=s[e]}void 0!==s[t]&&(s[t]={lc:1,type:"secret",id:[n]})}return r}function ix(e){const t=Object.getPrototypeOf(e);return"function"!=typeof e.lc_name||"function"==typeof t.lc_name&&e.lc_name()===t.lc_name()?e.name:e.lc_name()}i(8837);class sx{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,ix(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...t){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof sx||"object"!=typeof this.lc_kwargs||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},r=Object.keys(this.lc_kwargs).reduce(((e,t)=>(e[t]=t in this?this[t]:this.lc_kwargs[t],e)),{});for(let n=Object.getPrototypeOf(this);n;n=Object.getPrototypeOf(n))Object.assign(e,Reflect.get(n,"lc_aliases",this)),Object.assign(t,Reflect.get(n,"lc_secrets",this)),Object.assign(r,Reflect.get(n,"lc_attributes",this));return Object.keys(t).forEach((e=>{let t=this,n=r;const[i,...s]=e.split(".").reverse();for(const e of s.reverse()){if(!(e in t)||void 0===t[e])return;e in n&&void 0!==n[e]||("object"==typeof t[e]&&null!=t[e]?n[e]={}:Array.isArray(t[e])&&(n[e]=[])),t=t[e],n=n[e]}i in t&&void 0!==t[i]&&(n[i]=n[i]||t[i])})),{lc:1,type:"constructor",id:this.lc_id,kwargs:tx(Object.keys(t).length?nx(r,t):r,ex,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function ax(e,t){return"string"==typeof e?"string"==typeof t?e+t:[{type:"text",text:e},...t]:Array.isArray(t)?[...e,...t]:[...e,{type:"text",text:t}]}class ox extends sx{get lc_aliases(){return{additional_kwargs:"additional_kwargs"}}get text(){return"string"==typeof this.content?this.content:""}constructor(e,t){"string"==typeof e&&(e={content:e,additional_kwargs:t}),e.additional_kwargs||(e.additional_kwargs={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}toChunk(){const e=this._getType();if("human"===e)return new dx({...this});if("ai"===e)return new fx({...this});if("system"===e)return new mx({...this});if("function"===e)return new gx({...this});if(vx.isInstance(this))return new bx({...this});throw new Error("Unknown message type.")}}function ux(e){return Array.isArray(e)&&e.every((e=>"number"==typeof e.index))}class cx extends ox{static _mergeAdditionalKwargs(e,t){const r={...e};for(const[e,n]of Object.entries(t))if(void 0===r[e])r[e]=n;else{if(typeof r[e]!=typeof n)throw new Error(`additional_kwargs[${e}] already exists in the message chunk, but with a different type.`);if("string"==typeof r[e])r[e]=r[e]+n;else if(Array.isArray(r[e])||"object"!=typeof r[e]){if("tool_calls"!==e||!ux(r[e])||!ux(n))throw new Error(`additional_kwargs[${e}] already exists in this message chunk.`);for(const t of n)void 0!==r[e]?.[t.index]?r[e]=r[e]?.map(((e,r)=>r!==t.index?e:{...e,...t,function:{name:t.function.name??e.function.name,arguments:(e.function.arguments??"")+(t.function.arguments??"")}})):r[e][t.index]=t}else r[e]=this._mergeAdditionalKwargs(r[e],n)}return r}}class lx extends ox{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class dx extends cx{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(e){return new dx({content:ax(this.content,e.content),additional_kwargs:dx._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class hx extends ox{static lc_name(){return"AIMessage"}_getType(){return"ai"}}class fx extends cx{static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}concat(e){return new fx({content:ax(this.content,e.content),additional_kwargs:fx._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class px extends ox{static lc_name(){return"SystemMessage"}_getType(){return"system"}}class mx extends cx{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(e){return new mx({content:ax(this.content,e.content),additional_kwargs:mx._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs)})}}class gx extends cx{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new gx({content:ax(this.content,e.content),additional_kwargs:gx._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),name:this.name??""})}}class yx extends cx{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new yx({content:ax(this.content,e.content),additional_kwargs:yx._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),tool_call_id:this.tool_call_id})}}class vx extends ox{static lc_name(){return"ChatMessage"}constructor(e,t){"string"==typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return"generic"===e._getType()}}function _x(e){if("string"==typeof e)return new lx(e);if(function(e){return"function"==typeof e?._getType}(e))return e;const[t,r]=e;if("human"===t||"user"===t)return new lx({content:r});if("ai"===t||"assistant"===t)return new hx({content:r});if("system"===t)return new px({content:r});throw new Error("Unable to coerce message from array: only human, AI, or system message coercion is currently supported.")}class bx extends cx{static lc_name(){return"ChatMessageChunk"}constructor(e,t){"string"==typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new bx({content:ax(this.content,e.content),additional_kwargs:bx._mergeAdditionalKwargs(this.additional_kwargs,e.additional_kwargs),role:this.role})}}function wx(e,t="Human",r="AI"){const n=[];for(const i of e){let e;if("human"===i._getType())e=t;else if("ai"===i._getType())e=r;else if("system"===i._getType())e="System";else if("function"===i._getType())e="Function";else if("tool"===i._getType())e="Tool";else{if("generic"!==i._getType())throw new Error(`Got unsupported message type: ${i._getType()}`);e=i.role}const s=i.name?`${i.name}, `:"";n.push(`${e}: ${s}${i.content}`)}return n.join("\n")}const Ax="__run";class Ex{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new Ex({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class kx extends Ex{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new kx({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}const xx=()=>"undefined"!=typeof Deno;let Tx;async function Px(){if(void 0===Tx){const e=(()=>{let e;return e="undefined"!=typeof window&&void 0!==window.document?"browser":"undefined"==typeof process||void 0===process.versions||void 0===process.versions.node||xx()?"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name?"webworker":"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"))?"jsdom":xx()?"deno":"other":"node",e})();Tx={library:"langchain-js",runtime:e}}return Tx}function Sx(e){try{return"undefined"!=typeof process?process.env?.[e]:void 0}catch(e){return}}var Ix="object"==typeof window?window:{},Ox="0123456789abcdef".split(""),Cx=[-2147483648,8388608,32768,128],Nx=[24,16,8,0],Mx=[];function Rx(e){e?(Mx[0]=Mx[16]=Mx[1]=Mx[2]=Mx[3]=Mx[4]=Mx[5]=Mx[6]=Mx[7]=Mx[8]=Mx[9]=Mx[10]=Mx[11]=Mx[12]=Mx[13]=Mx[14]=Mx[15]=0,this.blocks=Mx):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Rx.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===Ix.ArrayBuffer&&(e=new Uint8Array(e));for(var r,n,i=0,s=e.length||0,a=this.blocks;i<s;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)for(n=this.start;i<s&&n<64;++i)a[n>>2]|=e[i]<<Nx[3&n++];else for(n=this.start;i<s&&n<64;++i)(r=e.charCodeAt(i))<128?a[n>>2]|=r<<Nx[3&n++]:r<2048?(a[n>>2]|=(192|r>>6)<<Nx[3&n++],a[n>>2]|=(128|63&r)<<Nx[3&n++]):r<55296||r>=57344?(a[n>>2]|=(224|r>>12)<<Nx[3&n++],a[n>>2]|=(128|r>>6&63)<<Nx[3&n++],a[n>>2]|=(128|63&r)<<Nx[3&n++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++i)),a[n>>2]|=(240|r>>18)<<Nx[3&n++],a[n>>2]|=(128|r>>12&63)<<Nx[3&n++],a[n>>2]|=(128|r>>6&63)<<Nx[3&n++],a[n>>2]|=(128|63&r)<<Nx[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=a[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Rx.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=Cx[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Rx.prototype.hash=function(){var e,t,r=this.h0,n=this.h1,i=this.h2,s=this.h3,a=this.h4,o=this.blocks;for(e=16;e<80;++e)t=o[e-3]^o[e-8]^o[e-14]^o[e-16],o[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)r=(t=(n=(t=(i=(t=(s=(t=(a=(t=r<<5|r>>>27)+(n&i|~n&s)+a+1518500249+o[e]<<0)<<5|a>>>27)+(r&(n=n<<30|n>>>2)|~r&i)+s+1518500249+o[e+1]<<0)<<5|s>>>27)+(a&(r=r<<30|r>>>2)|~a&n)+i+1518500249+o[e+2]<<0)<<5|i>>>27)+(s&(a=a<<30|a>>>2)|~s&r)+n+1518500249+o[e+3]<<0)<<5|n>>>27)+(i&(s=s<<30|s>>>2)|~i&a)+r+1518500249+o[e+4]<<0,i=i<<30|i>>>2;for(;e<40;e+=5)r=(t=(n=(t=(i=(t=(s=(t=(a=(t=r<<5|r>>>27)+(n^i^s)+a+1859775393+o[e]<<0)<<5|a>>>27)+(r^(n=n<<30|n>>>2)^i)+s+1859775393+o[e+1]<<0)<<5|s>>>27)+(a^(r=r<<30|r>>>2)^n)+i+1859775393+o[e+2]<<0)<<5|i>>>27)+(s^(a=a<<30|a>>>2)^r)+n+1859775393+o[e+3]<<0)<<5|n>>>27)+(i^(s=s<<30|s>>>2)^a)+r+1859775393+o[e+4]<<0,i=i<<30|i>>>2;for(;e<60;e+=5)r=(t=(n=(t=(i=(t=(s=(t=(a=(t=r<<5|r>>>27)+(n&i|n&s|i&s)+a-1894007588+o[e]<<0)<<5|a>>>27)+(r&(n=n<<30|n>>>2)|r&i|n&i)+s-1894007588+o[e+1]<<0)<<5|s>>>27)+(a&(r=r<<30|r>>>2)|a&n|r&n)+i-1894007588+o[e+2]<<0)<<5|i>>>27)+(s&(a=a<<30|a>>>2)|s&r|a&r)+n-1894007588+o[e+3]<<0)<<5|n>>>27)+(i&(s=s<<30|s>>>2)|i&a|s&a)+r-1894007588+o[e+4]<<0,i=i<<30|i>>>2;for(;e<80;e+=5)r=(t=(n=(t=(i=(t=(s=(t=(a=(t=r<<5|r>>>27)+(n^i^s)+a-899497514+o[e]<<0)<<5|a>>>27)+(r^(n=n<<30|n>>>2)^i)+s-899497514+o[e+1]<<0)<<5|s>>>27)+(a^(r=r<<30|r>>>2)^n)+i-899497514+o[e+2]<<0)<<5|i>>>27)+(s^(a=a<<30|a>>>2)^r)+n-899497514+o[e+3]<<0)<<5|n>>>27)+(i^(s=s<<30|s>>>2)^a)+r-899497514+o[e+4]<<0,i=i<<30|i>>>2;this.h0=this.h0+r<<0,this.h1=this.h1+n<<0,this.h2=this.h2+i<<0,this.h3=this.h3+s<<0,this.h4=this.h4+a<<0},Rx.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,i=this.h4;return Ox[e>>28&15]+Ox[e>>24&15]+Ox[e>>20&15]+Ox[e>>16&15]+Ox[e>>12&15]+Ox[e>>8&15]+Ox[e>>4&15]+Ox[15&e]+Ox[t>>28&15]+Ox[t>>24&15]+Ox[t>>20&15]+Ox[t>>16&15]+Ox[t>>12&15]+Ox[t>>8&15]+Ox[t>>4&15]+Ox[15&t]+Ox[r>>28&15]+Ox[r>>24&15]+Ox[r>>20&15]+Ox[r>>16&15]+Ox[r>>12&15]+Ox[r>>8&15]+Ox[r>>4&15]+Ox[15&r]+Ox[n>>28&15]+Ox[n>>24&15]+Ox[n>>20&15]+Ox[n>>16&15]+Ox[n>>12&15]+Ox[n>>8&15]+Ox[n>>4&15]+Ox[15&n]+Ox[i>>28&15]+Ox[i>>24&15]+Ox[i>>20&15]+Ox[i>>16&15]+Ox[i>>12&15]+Ox[i>>8&15]+Ox[i>>4&15]+Ox[15&i]},Rx.prototype.toString=Rx.prototype.hex,Rx.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,i=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i]},Rx.prototype.array=Rx.prototype.digest,Rx.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};const jx=(...e)=>{return t=e.join("_"),new Rx(!0).update(t).hex();var t};class Dx{}const Bx=new Map;class Lx extends Dx{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(jx(e,t))??null)}async update(e,t,r){this.cache.set(jx(e,t),r)}static global(){return new Lx(Bx)}}class Ux extends sx{}class Fx extends Ux{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new lx(this.value)]}}class Zx extends Ux{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return wx(this.messages)}toChatMessages(){return this.messages}}var qx=i(8020),zx=i(978);const $x=[400,401,402,403,404,405,406,407,408,409],Kx=e=>{if(e.message.startsWith("Cancel")||e.message.startsWith("TimeoutError")||"TimeoutError"===e.name||e.message.startsWith("AbortError")||"AbortError"===e.name)throw e;if("ECONNABORTED"===e?.code)throw e;const t=e?.response?.status??e?.status;if(t&&$x.includes(+t))throw e;if("insufficient_quota"===e?.error?.code){const t=new Error(e?.message);throw t.name="InsufficientQuotaError",t}};class Hx{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??Kx;const t=zx.default;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add((()=>qx((()=>e(...t).catch((e=>{throw e instanceof Error?e:new Error(e)}))),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0})),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise(((t,r)=>{e.signal?.addEventListener("abort",(()=>{r(new Error("AbortError"))}))}))]):this.call(t,...r)}fetch(...e){return this.call((()=>fetch(...e).then((e=>e.ok?e:Promise.reject(e)))))}}var Gx=i(5766),Vx=Object.defineProperty;function Wx(e,t){return 1===e.length?[t.get(e.join(","))]:function(e,t){let r=Array.from({length:e.length},((e,t)=>({start:t,end:t+1})));for(;r.length>1;){let n=null;for(let i=0;i<r.length-1;i++){const s=e.slice(r[i].start,r[i+1].end),a=t.get(s.join(","));null!=a&&(null==n||a<n[0])&&(n=[a,i])}if(null==n)break;{const e=n[1];r[e]={start:r[e].start,end:r[e+1].end},r.splice(e+1,1)}}return r}(e,t).map((r=>t.get(e.slice(r.start,r.end).join(",")))).filter((e=>null!=e))}var Jx=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(e,t){this.patStr=e.pat_str;const r=e.bpe_ranks.split("\n").filter(Boolean).reduce(((e,t)=>{const[r,n,...i]=t.split(" "),s=Number.parseInt(n,10);return i.forEach(((t,r)=>e[t]=s+r)),e}),{});for(const[e,t]of Object.entries(r)){const r=Gx.toByteArray(e);this.rankMap.set(r.join(","),t),this.textMap.set(t,r)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce(((e,[t,r])=>(e[r]=this.textEncoder.encode(t),e)),{})}encode(e,t=[],r="all"){const n=new RegExp(this.patStr,"ug"),i=Jx.specialTokenRegex(Object.keys(this.specialTokens)),s=[],a=new Set("all"===t?Object.keys(this.specialTokens):t),o=new Set("all"===r?Object.keys(this.specialTokens).filter((e=>!a.has(e))):r);if(o.size>0){const t=Jx.specialTokenRegex([...o]),r=e.match(t);if(null!=r)throw new Error(`The text contains a special token that is not allowed: ${r[0]}`)}let u=0;for(;;){let t=null,r=u;for(;i.lastIndex=r,t=i.exec(e),null!=t&&!a.has(t[0]);)r=t.index+1;const o=t?.index??e.length;for(const t of e.substring(u,o).matchAll(n)){const e=this.textEncoder.encode(t[0]),r=this.rankMap.get(e.join(","));null==r?s.push(...Wx(e,this.rankMap)):s.push(r)}if(null==t)break;let c=this.specialTokens[t[0]];s.push(c),u=t.index+t[0].length}return s}decode(e){const t=[];let r=0;for(let n=0;n<e.length;++n){const i=e[n],s=this.textMap.get(i)??this.inverseSpecialTokens[i];null!=s&&(t.push(s),r+=s.length)}const n=new Uint8Array(r);let i=0;for(const e of t)n.set(e,i),i+=e.length;return this.textDecoder.decode(n)}},Qx=Jx;((e,t,r)=>{((e,t,r)=>{t in e?Vx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"specialTokenRegex",(e=>new RegExp(e.map((e=>function(e){return e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}(e))).join("|"),"g")))})(Qx);const Yx={},Xx=new Hx({}),eT={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let tT;const rT=new Uint8Array(16);function nT(){if(!tT&&(tT="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!tT))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tT(rT)}const iT=[];for(let e=0;e<256;++e)iT.push((e+256).toString(16).slice(1));const sT=function(e,t,r){if(eT.randomUUID&&!t&&!e)return eT.randomUUID();const n=(e=e||{}).random||(e.rng||nT)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return iT[e[t+0]]+iT[e[t+1]]+iT[e[t+2]]+iT[e[t+3]]+"-"+iT[e[t+4]]+iT[e[t+5]]+"-"+iT[e[t+6]]+iT[e[t+7]]+"-"+iT[e[t+8]]+iT[e[t+9]]+"-"+iT[e[t+10]]+iT[e[t+11]]+iT[e[t+12]]+iT[e[t+13]]+iT[e[t+14]]+iT[e[t+15]]}(n)};class aT{}class oT extends aT{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,ix(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:"undefined"==typeof process||"true"!==process.env?.LANGCHAIN_CALLBACKS_BACKGROUND}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever)}copy(){return new this.constructor(this)}toJSON(){return sx.prototype.toJSON.call(this)}toJSONNotImplemented(){return sx.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){return new class extends oT{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:sT()}),Object.assign(this,e)}}}}var uT=i(5811);function cT(e,t){return e&&!Array.isArray(e)&&"object"==typeof e?e:{[t]:e}}class lT extends oT{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}_addChildRun(e,t){e.child_runs.push(t)}async _startTrace(e){const t=(r=e.start_time,n=e.id,`${new Date(r).toISOString().slice(0,-1)}000Z`.replace(/[-:.]/g,"")+n);var r,n;const i={...e};if(void 0!==i.parent_run_id){const e=this.runMap.get(i.parent_run_id);e&&(this._addChildRun(e,i),e.child_execution_order=Math.max(e.child_execution_order,i.child_execution_order),i.trace_id=e.trace_id,void 0!==e.dotted_order&&(i.dotted_order=[e.dotted_order,t].join(".")))}else i.trace_id=i.id,i.dotted_order=t;this.runMap.set(i.id,i),await(this.onRunCreate?.(i))}async _endTrace(e){const t=void 0!==e.parent_run_id&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await(this.onRunUpdate?.(e))}_getExecutionOrder(e){const t=void 0!==e&&this.runMap.get(e);return t?t.child_execution_order+1:1}async handleLLMStart(e,t,r,n,i,s,a,o){const u=this._getExecutionOrder(n),c=Date.now(),l=a?{...i,metadata:a}:i,d={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:t},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:l??{},tags:s||[]};return await this._startTrace(d),await(this.onLLMStart?.(d)),d}async handleChatModelStart(e,t,r,n,i,s,a,o){const u=this._getExecutionOrder(n),c=Date.now(),l=a?{...i,metadata:a}:i,d={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:t},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:l??{},tags:s||[]};return await this._startTrace(d),await(this.onLLMStart?.(d)),d}async handleLLMEnd(e,t){const r=this.runMap.get(t);if(!r||"llm"!==r?.run_type)throw new Error("No LLM run to end.");return r.end_time=Date.now(),r.outputs=e,r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await(this.onLLMEnd?.(r)),await this._endTrace(r),r}async handleLLMError(e,t){const r=this.runMap.get(t);if(!r||"llm"!==r?.run_type)throw new Error("No LLM run to end.");return r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await(this.onLLMError?.(r)),await this._endTrace(r),r}async handleChainStart(e,t,r,n,i,s,a,o){const u=this._getExecutionOrder(n),c=Date.now(),l={id:r,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:t,execution_order:u,child_execution_order:u,run_type:a??"chain",child_runs:[],extra:s?{metadata:s}:{},tags:i||[]};return await this._startTrace(l),await(this.onChainStart?.(l)),l}async handleChainEnd(e,t,r,n,i){const s=this.runMap.get(t);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.outputs=cT(e,"output"),s.events.push({name:"end",time:new Date(s.end_time).toISOString()}),void 0!==i?.inputs&&(s.inputs=cT(i.inputs,"input")),await(this.onChainEnd?.(s)),await this._endTrace(s),s}async handleChainError(e,t,r,n,i){const s=this.runMap.get(t);if(!s)throw new Error("No chain run to end.");return s.end_time=Date.now(),s.error=e.message+(e.stack?`\n\n${e.stack}`:""),s.events.push({name:"error",time:new Date(s.end_time).toISOString()}),void 0!==i?.inputs&&(s.inputs=cT(i.inputs,"input")),await(this.onChainError?.(s)),await this._endTrace(s),s}async handleToolStart(e,t,r,n,i,s,a){const o=this._getExecutionOrder(n),u=Date.now(),c={id:r,name:a??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{input:t},execution_order:o,child_execution_order:o,run_type:"tool",child_runs:[],extra:s?{metadata:s}:{},tags:i||[]};return await this._startTrace(c),await(this.onToolStart?.(c)),c}async handleToolEnd(e,t){const r=this.runMap.get(t);if(!r||"tool"!==r?.run_type)throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await(this.onToolEnd?.(r)),await this._endTrace(r),r}async handleToolError(e,t){const r=this.runMap.get(t);if(!r||"tool"!==r?.run_type)throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await(this.onToolError?.(r)),await this._endTrace(r),r}async handleAgentAction(e,t){const r=this.runMap.get(t);if(!r||"chain"!==r?.run_type)return;const n=r;n.actions=n.actions||[],n.actions.push(e),n.events.push({name:"agent_action",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentAction?.(r))}async handleAgentEnd(e,t){const r=this.runMap.get(t);r&&"chain"===r?.run_type&&(r.events.push({name:"agent_end",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentEnd?.(r)))}async handleRetrieverStart(e,t,r,n,i,s,a){const o=this._getExecutionOrder(n),u=Date.now(),c={id:r,name:a??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{query:t},execution_order:o,child_execution_order:o,run_type:"retriever",child_runs:[],extra:s?{metadata:s}:{},tags:i||[]};return await this._startTrace(c),await(this.onRetrieverStart?.(c)),c}async handleRetrieverEnd(e,t){const r=this.runMap.get(t);if(!r||"retriever"!==r?.run_type)throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await(this.onRetrieverEnd?.(r)),await this._endTrace(r),r}async handleRetrieverError(e,t){const r=this.runMap.get(t);if(!r||"retriever"!==r?.run_type)throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=e.message,r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await(this.onRetrieverError?.(r)),await this._endTrace(r),r}async handleText(e,t){const r=this.runMap.get(t);r&&"chain"===r?.run_type&&(r.events.push({name:"text",time:(new Date).toISOString(),kwargs:{text:e}}),await(this.onText?.(r)))}async handleLLMNewToken(e,t,r,n,i,s){const a=this.runMap.get(r);if(!a||"llm"!==a?.run_type)throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return a.events.push({name:"new_token",time:(new Date).toISOString(),kwargs:{token:e,idx:t,chunk:s?.chunk}}),await(this.onLLMNewToken?.(a,e)),a}}function dT(e,t){return`${e.open}${t}${e.close}`}function hT(e,t){try{return JSON.stringify(e,null,2)}catch(e){return t}}function fT(e){if(!e.end_time)return"";const t=e.end_time-e.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}const{color:pT}=uT;class mT extends lT{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let r=e;for(;r.parent_run_id;){const e=this.runMap.get(r.parent_run_id);if(!e)break;t.push(e),r=e}return t}getBreadcrumbs(e){const t=[...this.getParents(e).reverse(),e].map(((e,t,r)=>{const n=`${e.execution_order}:${e.run_type}:${e.name}`;return t===r.length-1?dT(uT.bold,n):n})).join(" > ");return dT(pT.grey,t)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${dT(pT.green,"[chain/start]")} [${t}] Entering Chain run with input: ${hT(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${dT(pT.cyan,"[chain/end]")} [${t}] [${fT(e)}] Exiting Chain run with output: ${hT(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${dT(pT.red,"[chain/error]")} [${t}] [${fT(e)}] Chain run errored with error: ${hT(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map((e=>e.trim()))}:e.inputs;console.log(`${dT(pT.green,"[llm/start]")} [${t}] Entering LLM run with input: ${hT(r,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${dT(pT.cyan,"[llm/end]")} [${t}] [${fT(e)}] Exiting LLM run with output: ${hT(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${dT(pT.red,"[llm/error]")} [${t}] [${fT(e)}] LLM run errored with error: ${hT(e.error,"[error]")}`)}onToolStart(e){const t=this.getBreadcrumbs(e);console.log(`${dT(pT.green,"[tool/start]")} [${t}] Entering Tool run with input: "${e.inputs.input?.trim()}"`)}onToolEnd(e){const t=this.getBreadcrumbs(e);console.log(`${dT(pT.cyan,"[tool/end]")} [${t}] [${fT(e)}] Exiting Tool run with output: "${e.outputs?.output?.trim()}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${dT(pT.red,"[tool/error]")} [${t}] [${fT(e)}] Tool run errored with error: ${hT(e.error,"[error]")}`)}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log(`${dT(pT.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${hT(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log(`${dT(pT.cyan,"[retriever/end]")} [${t}] [${fT(e)}] Exiting Retriever run with output: ${hT(e.outputs,"[outputs]")}`)}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log(`${dT(pT.red,"[retriever/error]")} [${t}] [${fT(e)}] Retriever run errored with error: ${hT(e.error,"[error]")}`)}onAgentAction(e){const t=e,r=this.getBreadcrumbs(e);console.log(`${dT(pT.blue,"[agent/action]")} [${r}] Agent selected action: ${hT(t.actions[t.actions.length-1],"[action]")}`)}}const gT=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,yT={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let vT;const _T=new Uint8Array(16);function bT(){if(!vT&&(vT="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vT))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vT(_T)}const wT=[];for(let e=0;e<256;++e)wT.push((e+256).toString(16).slice(1));const AT=function(e,t,r){if(yT.randomUUID&&!t&&!e)return yT.randomUUID();const n=(e=e||{}).random||(e.rng||bT)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return function(e,t=0){return wT[e[t+0]]+wT[e[t+1]]+wT[e[t+2]]+wT[e[t+3]]+"-"+wT[e[t+4]]+wT[e[t+5]]+"-"+wT[e[t+6]]+wT[e[t+7]]+"-"+wT[e[t+8]]+wT[e[t+9]]+"-"+wT[e[t+10]]+wT[e[t+11]]+wT[e[t+12]]+wT[e[t+13]]+wT[e[t+14]]+wT[e[t+15]]}(n)},ET=[400,401,403,404,405,406,407,408,409];class kT{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;const t=zx.default;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add((()=>qx((()=>e(...t).catch((e=>{throw e instanceof Error?e:new Error(e)}))),{onFailedAttempt(e){if(e.message.startsWith("Cancel")||e.message.startsWith("TimeoutError")||e.message.startsWith("AbortError"))throw e;if("ECONNABORTED"===e?.code)throw e;const t=e?.response?.status;if(t&&ET.includes(+t))throw e},retries:this.maxRetries,randomize:!0})),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise(((t,r)=>{e.signal?.addEventListener("abort",(()=>{r(new Error("AbortError"))}))}))]):this.call(t,...r)}fetch(...e){return this.call((()=>fetch(...e).then((e=>e.ok?e:Promise.reject(e)))))}}function xT(e){return"function"==typeof e?._getType}function TT(e){const t={type:e._getType(),data:{content:e.content}};return e?.additional_kwargs&&Object.keys(e.additional_kwargs).length>0&&(t.data.additional_kwargs={...e.additional_kwargs}),t}let PT;const ST=()=>"undefined"!=typeof Deno;let IT,OT;function CT(e){try{return"undefined"!=typeof process?process.env?.[e]:void 0}catch(e){return}}const NT=e=>{const t=e.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return"localhost"===t||"127.0.0.1"===t||"::1"===t},MT=async(e,t)=>{const r=await e.text();if(!e.ok)throw new Error(`Failed to ${t}: ${e.status} ${e.statusText} ${r}`)};function RT(e){if(void 0!==e)return e.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}function jT(e){return"true"===CT("LANGCHAIN_HIDE_INPUTS")?{}:e}function DT(e){return"true"===CT("LANGCHAIN_HIDE_OUTPUTS")?{}:e}function BT(e){if("string"!=typeof(t=e)||!gT.test(t))throw new Error(`Invalid UUID: ${e}`);var t}class LT{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null});const t=LT.getDefaultClientConfig();this.apiUrl=RT(e.apiUrl??t.apiUrl)??"",this.apiKey=RT(e.apiKey??t.apiKey),this.webUrl=RT(e.webUrl??t.webUrl),this.validateApiKeyIfHosted(),this.timeout_ms=e.timeout_ms??4e3,this.caller=new kT(e.callerOptions??{})}static getDefaultClientConfig(){const e=CT("LANGCHAIN_API_KEY");return{apiUrl:CT("LANGCHAIN_ENDPOINT")??"https://api.smith.langchain.com",apiKey:e,webUrl:void 0}}validateApiKeyIfHosted(){if(!NT(this.apiUrl)&&!this.apiKey)throw new Error("API key must be provided when using hosted LangSmith API")}getHostUrl(){return this.webUrl?this.webUrl:NT(this.apiUrl)?(this.webUrl="http://localhost","http://localhost"):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com","https://dev.smith.langchain.com"):(this.webUrl="https://smith.langchain.com","https://smith.langchain.com")}get headers(){const e={"User-Agent":`langsmith-js/${UT}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async _getResponse(e,t){const r=t?.toString()??"",n=`${this.apiUrl}${e}?${r}`,i=await this.caller.call(fetch,n,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!i.ok)throw new Error(`Failed to fetch ${e}: ${i.status} ${i.statusText}`);return i}async _get(e,t){return(await this._getResponse(e,t)).json()}async*_getPaginated(e,t=new URLSearchParams){let r=Number(t.get("offset"))||0;const n=Number(t.get("limit"))||100;for(;;){t.set("offset",String(r)),t.set("limit",String(n));const i=`${this.apiUrl}${e}?${t}`,s=await this.caller.call(fetch,i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to fetch ${e}: ${s.status} ${s.statusText}`);const a=await s.json();if(0===a.length)break;if(yield a,a.length<n)break;r+=a.length}}async*_getCursorPaginatedList(e,t=null,r="POST",n="runs"){const i=t?{...t}:{};for(;;){const t=await this.caller.call(fetch,`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),body:JSON.stringify(i)}),s=await t.json();if(!s)break;if(!s[n])break;yield s[n];const a=s.cursors;if(!a)break;if(!a.next)break;i.cursor=a.next}}async createRun(e){const t={...this.headers,"Content-Type":"application/json"},r=e.extra??{},n=await async function(){if(void 0===IT){const e=PT||(PT="undefined"!=typeof window&&void 0!==window.document?"browser":"undefined"==typeof process||void 0===process.versions||void 0===process.versions.node||ST()?"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name?"webworker":"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"))?"jsdom":ST()?"deno":"other":"node",PT),t=function(){if(void 0!==OT)return OT;const e=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(const r of e){const e=CT(r);void 0!==e&&(t[r]=e)}return OT=t,t}();IT={library:"langsmith",runtime:e,sdk:"langsmith-js",sdk_version:UT,...t}}return IT}(),i=e.project_name;delete e.project_name;const s={session_name:i,...e,extra:{...e.extra,runtime:{...n,...r.runtime}}};s.inputs=jT(s.inputs),s.outputs&&(s.outputs=DT(s.outputs));const a=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:t,body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms)});await MT(a,"create run")}async updateRun(e,t){BT(e),t.inputs&&(t.inputs=jT(t.inputs)),t.outputs&&(t.outputs=DT(t.outputs));const r={...this.headers,"Content-Type":"application/json"},n=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:r,body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});await MT(n,"update run")}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){BT(e);let r=await this._get(`/runs/${e}`);return t&&r.child_run_ids&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:t,projectOpts:r}){if(void 0!==t){let e;e=t.session_id?t.session_id:r?.projectName?(await this.readProject({projectName:r?.projectName})).id:r?.projectId?r?.projectId:(await this.readProject({projectName:CT("LANGCHAIN_PROJECT")||"default"})).id;const n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/projects/p/${e}/r/${t.id}?poll=true`}if(void 0!==e){const t=await this.readRun(e);if(!t.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${t.app_path}`}throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const t=await async function(e){const t=[];for await(const r of e)t.push(r);return t}(this.listRuns({id:e.child_run_ids})),r={},n={};t.sort(((e,t)=>(e?.dotted_order??"").localeCompare(t?.dotted_order??"")));for(const e of t){if(null===e.parent_run_id||void 0===e.parent_run_id)throw new Error(`Child run ${e.id} has no parent`);e.parent_run_id in r||(r[e.parent_run_id]=[]),r[e.parent_run_id].push(e),n[e.id]=e}e.child_runs=r[e.id]||[];for(const t in r)t!==e.id&&(n[t].child_runs=r[t]);return e}async*listRuns({projectId:e,projectName:t,parentRunId:r,referenceExampleId:n,startTime:i,executionOrder:s,runType:a,error:o,id:u,query:c,filter:l,limit:d}){let h=e;if(t){if(e)throw new Error("Only one of projectId or projectName may be given");h=(await this.readProject({projectName:t})).id}const f={session:h?[h]:null,run_type:a,reference_example:n,query:c,filter:l,execution_order:s,parent_run:r?[r]:null,start_time:i?i.toISOString():null,error:o,id:u,limit:d};for await(const e of this._getCursorPaginatedList("/runs/query",f))yield*e}async shareRun(e,{shareId:t}={}){const r={run_id:e,share_token:t||AT()};BT(e);const n=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)}),i=await n.json();if(null===i||!("share_token"in i))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${i.share_token}/r`}async unshareRun(e){BT(e);const t=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await MT(t,"unshare run")}async readRunSharedLink(e){BT(e);const t=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)}),r=await t.json();if(null!==r&&"share_token"in r)return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:t}={}){const r=new URLSearchParams({share_token:e});if(void 0!==t)for(const e of t)r.append("id",e);BT(e);const n=await this.caller.call(fetch,`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});return await n.json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id),BT(e);const r=await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)}),n=await r.json();return n.url=`${this.getHostUrl()}/public/${n.share_token}/d`,n}async shareDataset(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id);const r={dataset_id:e};BT(e);const n=await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms)}),i=await n.json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async unshareDataset(e){BT(e);const t=await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await MT(t,"unshare dataset")}async readSharedDataset(e){BT(e);const t=await this.caller.call(fetch,`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});return await t.json()}async createProject({projectName:e,description:t=null,metadata:r=null,upsert:n=!1,projectExtra:i=null,referenceDatasetId:s=null}){const a=n?"?upsert=true":"",o=`${this.apiUrl}/sessions${a}`,u=i||{};r&&(u.metadata=r);const c={name:e,extra:u,description:t};null!==s&&(c.reference_dataset_id=s);const l=await this.caller.call(fetch,o,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms)}),d=await l.json();if(!l.ok)throw new Error(`Failed to create session ${e}: ${l.status} ${l.statusText}`);return d}async updateProject(e,{name:t=null,description:r=null,metadata:n=null,projectExtra:i=null,endTime:s=null}){const a=`${this.apiUrl}/sessions/${e}`;let o=i;n&&(o={...o||{},metadata:n});const u={name:t,extra:o,description:r,end_time:s?new Date(s).toISOString():null},c=await this.caller.call(fetch,a,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms)}),l=await c.json();if(!c.ok)throw new Error(`Failed to update project ${e}: ${c.status} ${c.statusText}`);return l}async readProject({projectId:e,projectName:t}){let r="/sessions";const n=new URLSearchParams;if(void 0!==e&&void 0!==t)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==e)BT(e),r+=`/${e}`;else{if(void 0===t)throw new Error("Must provide projectName or projectId");n.append("name",t)}const i=await this._get(r,n);let s;if(Array.isArray(i)){if(0===i.length)throw new Error(`Project[id=${e}, name=${t}] not found`);s=i[0]}else s=i;return s}async _getTenantId(){if(null!==this._tenantId)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:t,nameContains:r,referenceDatasetId:n,referenceDatasetName:i,referenceFree:s}={}){const a=new URLSearchParams;if(void 0!==e)for(const t of e)a.append("id",t);if(void 0!==t&&a.append("name",t),void 0!==r&&a.append("name_contains",r),void 0!==n)a.append("reference_dataset",n);else if(void 0!==i){const e=await this.readDataset({datasetName:i});a.append("reference_dataset",e.id)}void 0!==s&&a.append("reference_free",s.toString());for await(const e of this._getPaginated("/sessions",a))yield*e}async deleteProject({projectId:e,projectName:t}){let r;if(void 0===e&&void 0===t)throw new Error("Must provide projectName or projectId");if(void 0!==e&&void 0!==t)throw new Error("Must provide either projectName or projectId, not both");r=void 0===e?(await this.readProject({projectName:t})).id:e,BT(r);const n=await this.caller.call(fetch,`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await MT(n,`delete session ${r} (${t})`)}async uploadCsv({csvFile:e,fileName:t,inputKeys:r,outputKeys:n,description:i,dataType:s,name:a}){const o=`${this.apiUrl}/datasets/upload`,u=new FormData;u.append("file",e,t),r.forEach((e=>{u.append("input_keys",e)})),n.forEach((e=>{u.append("output_keys",e)})),i&&u.append("description",i),s&&u.append("data_type",s),a&&u.append("name",a);const c=await this.caller.call(fetch,o,{method:"POST",headers:this.headers,body:u,signal:AbortSignal.timeout(this.timeout_ms)});if(!c.ok){const e=await c.json();if(e.detail&&e.detail.includes("already exists"))throw new Error(`Dataset ${t} already exists`);throw new Error(`Failed to upload CSV: ${c.status} ${c.statusText}`)}return await c.json()}async createDataset(e,{description:t,dataType:r}={}){const n={name:e,description:t};r&&(n.data_type=r);const i=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms)});if(!i.ok){const t=await i.json();if(t.detail&&t.detail.includes("already exists"))throw new Error(`Dataset ${e} already exists`);throw new Error(`Failed to create dataset ${i.status} ${i.statusText}`)}return await i.json()}async readDataset({datasetId:e,datasetName:t}){let r="/datasets";const n=new URLSearchParams({limit:"1"});if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==e)BT(e),r+=`/${e}`;else{if(void 0===t)throw new Error("Must provide datasetName or datasetId");n.append("name",t)}const i=await this._get(r,n);let s;if(Array.isArray(i)){if(0===i.length)throw new Error(`Dataset[id=${e}, name=${t}] not found`);s=i[0]}else s=i;return s}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:t}){if(void 0!==e);else{if(void 0===t)throw new Error("Must provide datasetName or datasetId");e=(await this.readDataset({datasetName:t})).id}const r=await this._getResponse(`/datasets/${e}/openai_ft`);return(await r.text()).trim().split("\n").map((e=>JSON.parse(e)))}async*listDatasets({limit:e=100,offset:t=0,datasetIds:r,datasetName:n,datasetNameContains:i}={}){const s=new URLSearchParams({limit:e.toString(),offset:t.toString()});if(void 0!==r)for(const e of r)s.append("id",e);void 0!==n&&s.append("name",n),void 0!==i&&s.append("name_contains",i);for await(const e of this._getPaginated("/datasets",s))yield*e}async deleteDataset({datasetId:e,datasetName:t}){let r="/datasets",n=e;if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==t&&(n=(await this.readDataset({datasetName:t})).id),void 0===n)throw new Error("Must provide datasetName or datasetId");BT(n),r+=`/${n}`;const i=await this.caller.call(fetch,this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!i.ok)throw new Error(`Failed to delete ${r}: ${i.status} ${i.statusText}`);await i.json()}async createExample(e,t,{datasetId:r,datasetName:n,createdAt:i,exampleId:s}){let a=r;if(void 0===a&&void 0===n)throw new Error("Must provide either datasetName or datasetId");if(void 0!==a&&void 0!==n)throw new Error("Must provide either datasetName or datasetId, not both");void 0===a&&(a=(await this.readDataset({datasetName:n})).id);const o={dataset_id:a,inputs:e,outputs:t,created_at:(i||new Date).toISOString(),id:s},u=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms)});if(!u.ok)throw new Error(`Failed to create example: ${u.status} ${u.statusText}`);return await u.json()}async createLLMExample(e,t,r){return this.createExample({input:e},{output:t},r)}async createChatExample(e,t,r){const n=e.map((e=>xT(e)?TT(e):e)),i=xT(t)?TT(t):t;return this.createExample({input:n},{output:i},r)}async readExample(e){BT(e);const t=`/examples/${e}`;return await this._get(t)}async*listExamples({datasetId:e,datasetName:t,exampleIds:r}={}){let n;if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==e)n=e;else{if(void 0===t)throw new Error("Must provide a datasetName or datasetId");n=(await this.readDataset({datasetName:t})).id}const i=new URLSearchParams({dataset:n});if(void 0!==r)for(const e of r)i.append("id",e);for await(const e of this._getPaginated("/examples",i))yield*e}async deleteExample(e){BT(e);const t=`/examples/${e}`,r=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw new Error(`Failed to delete ${t}: ${r.status} ${r.statusText}`);await r.json()}async updateExample(e,t){BT(e);const r=await this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw new Error(`Failed to update example ${e}: ${r.status} ${r.statusText}`);return await r.json()}async evaluateRun(e,t,{sourceInfo:r,loadChildRuns:n,referenceExample:i}={loadChildRuns:!1}){let s;if("string"==typeof e)s=await this.readRun(e,{loadChildRuns:n});else{if("object"!=typeof e||!("id"in e))throw new Error("Invalid run type: "+typeof e);s=e}null!==s.reference_example_id&&void 0!==s.reference_example_id&&(i=await this.readExample(s.reference_example_id));const a=await t.evaluateRun(s,i);let o=r??{};a.evaluatorInfo&&(o={...o,...a.evaluatorInfo});const u=a.targetRunId??s.id;return await this.createFeedback(u,a.key,{score:a?.score,value:a?.value,comment:a?.comment,correction:a?.correction,sourceInfo:o,feedbackSourceType:"model",sourceRunId:a?.sourceRunId})}async createFeedback(e,t,{score:r,value:n,correction:i,comment:s,sourceInfo:a,feedbackSourceType:o="api",sourceRunId:u,feedbackId:c,eager:l=!1}){const d={type:o??"api",metadata:a??{}};void 0===u||void 0===d?.metadata||d.metadata.__run||(d.metadata.__run={run_id:u}),void 0!==d?.metadata&&void 0!==d.metadata.__run?.run_id&&BT(d.metadata.__run.run_id);const h={id:c??AT(),run_id:e,key:t,score:r,value:n,correction:i,comment:s,feedback_source:d},f=`${this.apiUrl}/feedback`+(l?"/eager":""),p=await this.caller.call(fetch,f,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms)});return await MT(p,"create feedback"),h}async updateFeedback(e,{score:t,value:r,correction:n,comment:i}){const s={};null!=t&&(s.score=t),null!=r&&(s.value=r),null!=n&&(s.correction=n),null!=i&&(s.comment=i),BT(e);const a=await this.caller.call(fetch,`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms)});await MT(a,"update feedback")}async readFeedback(e){BT(e);const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){BT(e);const t=`/feedback/${e}`,r=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!r.ok)throw new Error(`Failed to delete ${t}: ${r.status} ${r.statusText}`);await r.json()}async*listFeedback({runIds:e,feedbackKeys:t,feedbackSourceTypes:r}={}){const n=new URLSearchParams;if(e&&n.append("run",e.join(",")),t)for(const e of t)n.append("key",e);if(r)for(const e of r)n.append("source",e);for await(const e of this._getPaginated("/feedback",n))yield*e}}const UT="0.0.61";class FT extends lT{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:t,projectName:r,client:n}=e;this.projectName=r??Sx("LANGCHAIN_PROJECT")??Sx("LANGCHAIN_SESSION"),this.exampleId=t,this.client=n??new LT({})}async _convertToCreate(e,t=void 0){return{...e,extra:{...e.extra,runtime:await Px()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async _persistRunSingle(e){const t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async _updateRunSingle(e){const t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs};await this.client.updateRun(e.id,t)}async onRetrieverStart(e){await this._persistRunSingle(e)}async onRetrieverEnd(e){await this._updateRunSingle(e)}async onRetrieverError(e){await this._updateRunSingle(e)}async onLLMStart(e){await this._persistRunSingle(e)}async onLLMEnd(e){await this._updateRunSingle(e)}async onLLMError(e){await this._updateRunSingle(e)}async onChainStart(e){await this._persistRunSingle(e)}async onChainEnd(e){await this._updateRunSingle(e)}async onChainError(e){await this._updateRunSingle(e)}async onToolStart(e){await this._persistRunSingle(e)}async onToolEnd(e){await this._updateRunSingle(e)}async onToolError(e){await this._updateRunSingle(e)}}let ZT;async function qT(e,t){!0===t?await e():(void 0===ZT&&(ZT=new(0,zx.default)({autoStart:!0,concurrency:1})),ZT.add(e))}class zT{setHandler(e){return this.setHandlers([e])}}class $T{constructor(e,t,r,n,i,s,a,o){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:o})}async handleText(e){await Promise.all(this.handlers.map((t=>qT((async()=>{try{await(t.handleText?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleText: ${e}`)}}),t.awaitHandlers))))}}class KT extends $T{getChild(e){const t=new WT(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map((t=>qT((async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleRetriever`)}}),t.awaitHandlers))))}async handleRetrieverError(e){await Promise.all(this.handlers.map((t=>qT((async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleRetrieverError: ${e}`)}}),t.awaitHandlers))))}}class HT extends $T{async handleLLMNewToken(e,t,r,n,i,s){await Promise.all(this.handlers.map((r=>qT((async()=>{if(!r.ignoreLLM)try{await(r.handleLLMNewToken?.(e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,s))}catch(e){console.error(`Error in handler ${r.constructor.name}, handleLLMNewToken: ${e}`)}}),r.awaitHandlers))))}async handleLLMError(e){await Promise.all(this.handlers.map((t=>qT((async()=>{if(!t.ignoreLLM)try{await(t.handleLLMError?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleLLMError: ${e}`)}}),t.awaitHandlers))))}async handleLLMEnd(e){await Promise.all(this.handlers.map((t=>qT((async()=>{if(!t.ignoreLLM)try{await(t.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleLLMEnd: ${e}`)}}),t.awaitHandlers))))}}class GT extends $T{getChild(e){const t=new WT(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,r,n,i){await Promise.all(this.handlers.map((t=>qT((async()=>{if(!t.ignoreChain)try{await(t.handleChainError?.(e,this.runId,this._parentRunId,this.tags,i))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleChainError: ${e}`)}}),t.awaitHandlers))))}async handleChainEnd(e,t,r,n,i){await Promise.all(this.handlers.map((t=>qT((async()=>{if(!t.ignoreChain)try{await(t.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,i))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleChainEnd: ${e}`)}}),t.awaitHandlers))))}async handleAgentAction(e){await Promise.all(this.handlers.map((t=>qT((async()=>{if(!t.ignoreAgent)try{await(t.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleAgentAction: ${e}`)}}),t.awaitHandlers))))}async handleAgentEnd(e){await Promise.all(this.handlers.map((t=>qT((async()=>{if(!t.ignoreAgent)try{await(t.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleAgentEnd: ${e}`)}}),t.awaitHandlers))))}}class VT extends $T{getChild(e){const t=new WT(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map((t=>qT((async()=>{if(!t.ignoreAgent)try{await(t.handleToolError?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleToolError: ${e}`)}}),t.awaitHandlers))))}async handleToolEnd(e){await Promise.all(this.handlers.map((t=>qT((async()=>{if(!t.ignoreAgent)try{await(t.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(e){console.error(`Error in handler ${t.constructor.name}, handleToolEnd: ${e}`)}}),t.awaitHandlers))))}}class WT extends zT{constructor(e,t){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=t?.handlers??this.handlers,this.inheritableHandlers=t?.inheritableHandlers??this.inheritableHandlers,this.tags=t?.tags??this.tags,this.inheritableTags=t?.inheritableTags??this.inheritableTags,this.metadata=t?.metadata??this.metadata,this.inheritableMetadata=t?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=e}async handleLLMStart(e,t,r=void 0,n=void 0,i=void 0,s=void 0,a=void 0,o=void 0){return Promise.all(t.map((async t=>{const r=sT();return await Promise.all(this.handlers.map((n=>qT((async()=>{if(!n.ignoreLLM)try{await(n.handleLLMStart?.(e,[t],r,this._parentRunId,i,this.tags,this.metadata,o))}catch(e){console.error(`Error in handler ${n.constructor.name}, handleLLMStart: ${e}`)}}),n.awaitHandlers)))),new HT(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))}async handleChatModelStart(e,t,r=void 0,n=void 0,i=void 0,s=void 0,a=void 0,o=void 0){return Promise.all(t.map((async t=>{const r=sT();return await Promise.all(this.handlers.map((n=>qT((async()=>{if(!n.ignoreLLM)try{if(n.handleChatModelStart)await(n.handleChatModelStart?.(e,[t],r,this._parentRunId,i,this.tags,this.metadata,o));else if(n.handleLLMStart){const s=wx(t);await(n.handleLLMStart?.(e,[s],r,this._parentRunId,i,this.tags,this.metadata,o))}}catch(e){console.error(`Error in handler ${n.constructor.name}, handleLLMStart: ${e}`)}}),n.awaitHandlers)))),new HT(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))}async handleChainStart(e,t,r=sT(),n=void 0,i=void 0,s=void 0,a=void 0){return await Promise.all(this.handlers.map((i=>qT((async()=>{if(!i.ignoreChain)try{await(i.handleChainStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,n,a))}catch(e){console.error(`Error in handler ${i.constructor.name}, handleChainStart: ${e}`)}}),i.awaitHandlers)))),new GT(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,r=sT(),n=void 0,i=void 0,s=void 0,a=void 0){return await Promise.all(this.handlers.map((n=>qT((async()=>{if(!n.ignoreAgent)try{await(n.handleToolStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,a))}catch(e){console.error(`Error in handler ${n.constructor.name}, handleToolStart: ${e}`)}}),n.awaitHandlers)))),new VT(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t,r=sT(),n=void 0,i=void 0,s=void 0,a=void 0){return await Promise.all(this.handlers.map((n=>qT((async()=>{if(!n.ignoreRetriever)try{await(n.handleRetrieverStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,a))}catch(e){console.error(`Error in handler ${n.constructor.name}, handleRetrieverStart: ${e}`)}}),n.awaitHandlers)))),new KT(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter((t=>t!==e)),this.inheritableHandlers=this.inheritableHandlers.filter((t=>t!==e))}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter((t=>!e.includes(t))),this.inheritableTags=this.inheritableTags.filter((t=>!e.includes(t)))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){const r=new WT(this._parentRunId);for(const e of this.handlers){const t=this.inheritableHandlers.includes(e);r.addHandler(e,t)}for(const e of this.tags){const t=this.inheritableTags.includes(e);r.addTags([e],t)}for(const e of Object.keys(this.metadata)){const t=Object.keys(this.inheritableMetadata).includes(e);r.addMetadata({[e]:this.metadata[e]},t)}for(const n of e)r.handlers.filter((e=>"console_callback_handler"===e.name)).some((e=>e.name===n.name))||r.addHandler(n,t);return r}static fromHandlers(e){const t=new this;return t.addHandler(new class extends oT{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:sT()}),Object.assign(this,e)}}),t}static async configure(e,t,r,n,i,s,a){let o;(e||t)&&(Array.isArray(e)||!e?(o=new WT,o.setHandlers(e?.map(JT)??[],!0)):o=e,o=o.copy(Array.isArray(t)?t.map(JT):t?.handlers,!1));const u="true"===Sx("LANGCHAIN_VERBOSE")||a?.verbose,c="true"===Sx("LANGCHAIN_TRACING_V2"),l=c||(Sx("LANGCHAIN_TRACING")??!1);if(u||l){if(o||(o=new WT),u&&!o.handlers.some((e=>e.name===mT.prototype.name))){const e=new mT;o.addHandler(e,!0)}l&&!o.handlers.some((e=>"langchain_tracer"===e.name))&&c&&o.addHandler(await async function(){return new FT}(),!0)}return(r||n)&&o&&(o.addTags(r??[]),o.addTags(n??[],!1)),(i||s)&&o&&(o.addMetadata(i??{}),o.addMetadata(s??{},!1)),o}}function JT(e){return"name"in e?e:oT.fromMethods(e)}const QT=Object.prototype.hasOwnProperty;function YT(e,t){return QT.call(e,t)}function XT(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function eP(e){let t=0;const r=e.length;let n;for(;t<r;){if(n=e.charCodeAt(t),!(n>=48&&n<=57))return!1;t++}return!0}function tP(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(let t=0,r=e.length;t<r;t++)if(tP(e[t]))return!0}else if("object"==typeof e){const r=function(e){if(Array.isArray(e)){const t=new Array(e.length);for(let e=0;e<t.length;e++)t[e]=""+e;return t}if(Object.keys)return Object.keys(e);let t=[];for(let r in e)YT(e,r)&&t.push(r);return t}(e),n=r.length;for(var t=0;t<n;t++)if(tP(e[r[t]]))return!0}return!1}function rP(e,t){const r=[e];for(const e in t){const n="object"==typeof t[e]?JSON.stringify(t[e],null,2):t[e];void 0!==n&&r.push(`${e}: ${n}`)}return r.join("\n")}class nP extends Error{constructor(e,t,r,n,i){super(rP(e,{name:t,index:r,operation:n,tree:i})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.setPrototypeOf(this,new.target.prototype),this.message=rP(e,{name:t,index:r,operation:n,tree:i})}}const iP=nP,sP=XT,aP={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){let n=uP(r,this.path);n&&(n=XT(n));const i=cP(r,{op:"remove",path:this.from}).removed;return cP(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:n}},copy:function(e,t,r){const n=uP(r,this.from);return cP(r,{op:"add",path:this.path,value:XT(n)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:pP(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}};var oP={add:function(e,t,r){return eP(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:aP.move,copy:aP.copy,test:aP.test,_get:aP._get};function uP(e,t){if(""==t)return e;var r={op:"_get",path:t};return cP(e,r),r.value}function cP(e,t,r=!1,n=!0,i=!0,s=0){if(r&&("function"==typeof r?r(t,0,e,t.path):hP(t,0)),""===t.path){let n={newDocument:e};if("add"===t.op)return n.newDocument=t.value,n;if("replace"===t.op)return n.newDocument=t.value,n.removed=e,n;if("move"===t.op||"copy"===t.op)return n.newDocument=uP(e,t.from),"move"===t.op&&(n.removed=e),n;if("test"===t.op){if(n.test=pP(e,t.value),!1===n.test)throw new iP("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return n.newDocument=e,n}if("remove"===t.op)return n.removed=e,n.newDocument=null,n;if("_get"===t.op)return t.value=e,n;if(r)throw new iP("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return n}{n||(e=XT(e));const a=(t.path||"").split("/");let o,u,c,l=e,d=1,h=a.length;for(c="function"==typeof r?r:hP;;){if(u=a[d],u&&-1!=u.indexOf("~")&&(u=u.replace(/~1/g,"/").replace(/~0/g,"~")),i&&("__proto__"==u||"prototype"==u&&d>0&&"constructor"==a[d-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&void 0===o&&(void 0===l[u]?o=a.slice(0,d).join("/"):d==h-1&&(o=t.path),void 0!==o&&c(t,0,e,o)),d++,Array.isArray(l)){if("-"===u)u=l.length;else{if(r&&!eP(u))throw new iP("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);eP(u)&&(u=~~u)}if(d>=h){if(r&&"add"===t.op&&u>l.length)throw new iP("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);const n=oP[t.op].call(t,l,u,e);if(!1===n.test)throw new iP("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return n}}else if(d>=h){const r=aP[t.op].call(t,l,u,e);if(!1===r.test)throw new iP("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return r}if(l=l[u],r&&d<h&&(!l||"object"!=typeof l))throw new iP("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function lP(e,t,r,n=!0,i=!0){if(r&&!Array.isArray(t))throw new iP("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(e=XT(e));const s=new Array(t.length);for(let n=0,a=t.length;n<a;n++)s[n]=cP(e,t[n],r,!0,i,n),e=s[n].newDocument;return s.newDocument=e,s}function dP(e,t,r){const n=cP(e,t);if(!1===n.test)throw new iP("Test operation failed","TEST_OPERATION_FAILED",r,t,e);return n.newDocument}function hP(e,t,r,n){if("object"!=typeof e||null===e||Array.isArray(e))throw new iP("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,r);if(!aP[e.op])throw new iP("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,r);if("string"!=typeof e.path)throw new iP("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,r);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new iP('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,r);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new iP("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new iP("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&tP(e.value))throw new iP("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,r);if(r)if("add"==e.op){var i=e.path.split("/").length,s=n.split("/").length;if(i!==s+1&&i!==s)throw new iP("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,r)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==n)throw new iP("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,r)}else if("move"===e.op||"copy"===e.op){var a=fP([{op:"_get",path:e.from,value:void 0}],r);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new iP("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,r)}}function fP(e,t,r){try{if(!Array.isArray(e))throw new iP("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)lP(XT(t),XT(e),r||!0);else{r=r||hP;for(var n=0;n<e.length;n++)r(e[n],n,t,void 0)}}catch(e){if(e instanceof iP)return e;throw e}}function pP(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n,i,s=Array.isArray(e),a=Array.isArray(t);if(s&&a){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!pP(e[r],t[r]))return!1;return!0}if(s!=a)return!1;var o=Object.keys(e);if((n=o.length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!t.hasOwnProperty(o[r]))return!1;for(r=n;0!=r--;)if(!pP(e[i=o[r]],t[i]))return!1;return!0}return e!=e&&t!=t}new WeakMap;class mP extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}throw e}[Symbol.asyncIterator](){return this}static fromReadableStream(e){const t=e.getReader();return new mP({start:e=>function r(){return t.read().then((({done:t,value:n})=>{if(!t)return e.enqueue(n),r();e.close()}))}(),cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new mP({async pull(t){const{value:r,done:n}=await e.next();n&&t.close(),t.enqueue(r)}})}}function gP(e,t=2){const r=Array.from({length:t},(()=>[]));return r.map((async function*(t){for(;;)if(0===t.length){const t=await e.next();for(const e of r)e.push(t)}else{if(t[0].done)return;yield t.shift().value}}))}function yP(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.concat(t);if("string"==typeof e&&"string"==typeof t)return e+t;if("number"==typeof e&&"number"==typeof t)return e+t;if("concat"in e&&"function"==typeof e.concat)return e.concat(t);if("object"==typeof e&&"object"==typeof t){const r={...e};for(const[e,n]of Object.entries(t))r[e]=e in r?yP(r[e],n):n;return r}throw new Error(`Cannot concat ${typeof e} and ${typeof t}`)}class vP{constructor(e,t){Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e,this.setup=new Promise(((r,n)=>{this.firstResult=e.next(),this.firstResult.then(t).then(r,n)}))}async next(...e){return this.firstResultUsed?this.generator.next(...e):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}}class _P{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops}concat(e){const t=this.ops.concat(e.ops),r=lP({},t);return new bP({ops:t,state:r[r.length-1].newDocument})}}class bP extends _P{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const t=this.ops.concat(e.ops),r=lP(this.state,e.ops);return new bP({ops:t,state:r[r.length-1].newDocument})}}class wP extends lT{constructor(e){super(e),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=mP.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const t=e.tags??[];let r=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(e.run_type)),void 0!==this.includeTags&&(r=r||void 0!==t.find((e=>this.includeTags?.includes(e)))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(e.run_type)),void 0!==this.excludeTags&&(r=r&&t.every((e=>!this.excludeTags?.includes(e)))),r}async*tapOutputIterable(e,t){for await(const r of t){if(e!==this.rootId){const t=this.keyMapByRunId[e];t&&await this.writer.write(new _P({ops:[{op:"add",path:`/logs/${t}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){if(void 0===this.rootId&&(this.rootId=e.id,await this.writer.write(new _P({ops:[{op:"replace",path:"",value:{id:e.id,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;void 0===this.counterMapByRunName[e.name]&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=1===t?e.name:`${e.name}:${t}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};await this.writer.write(new _P({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const t=this.keyMapByRunId[e.id];if(void 0===t)return;const r=[{op:"add",path:`/logs/${t}/final_output`,value:e.outputs}];void 0!==e.end_time&&r.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});const n=new _P({ops:r});await this.writer.write(n)}finally{if(e.id===this.rootId){const t=new _P({ops:[{op:"replace",path:"/final_output",value:e.outputs}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t){const r=this.keyMapByRunId[e.id];if(void 0===r)return;const n=new _P({ops:[{op:"add",path:`/logs/${r}/streamed_output_str/-`,value:t}]});await this.writer.write(n)}}async function AP(e){return WT.configure(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)}function EP(...e){const t=xP();for(const r of e.filter((e=>!!e)))for(const e of Object.keys(r))if("metadata"===e)t[e]={...t[e],...r[e]};else if("tags"===e)t[e]=[...new Set(t[e].concat(r[e]??[]))];else if("configurable"===e)t[e]={...t[e],...r[e]};else if("callbacks"===e){const e=t.callbacks,n=r.callbacks;if(Array.isArray(n))if(e)if(Array.isArray(e))t.callbacks=e.concat(n);else{const r=e.copy();for(const e of n)r.addHandler(JT(e),!0);t.callbacks=r}else t.callbacks=n;else if(n)if(e)if(Array.isArray(e)){const r=n.copy();for(const t of e)r.addHandler(JT(t),!0);t.callbacks=r}else t.callbacks=new WT(n._parentRunId,{handlers:e.handlers.concat(n.handlers),inheritableHandlers:e.inheritableHandlers.concat(n.inheritableHandlers),tags:Array.from(new Set(e.tags.concat(n.tags))),inheritableTags:Array.from(new Set(e.inheritableTags.concat(n.inheritableTags))),metadata:{...e.metadata,...n.metadata}});else t.callbacks=n}else{const n=e;t[n]=r[n]??t[n]}return t}const kP=new Set(["string","number","boolean"]);function xP(e){let t={tags:[],metadata:{},callbacks:void 0,recursionLimit:25};if(e&&(t={...t,...e}),e?.configurable)for(const r of Object.keys(e.configurable))kP.has(typeof e.configurable[r])&&!t.metadata?.[r]&&(t.metadata||(t.metadata={}),t.metadata[r]=e.configurable[r]);return t}function TP(e={},{callbacks:t,maxConcurrency:r,recursionLimit:n,runName:i,configurable:s}={}){const a=xP(e);return void 0!==t&&(delete a.runName,a.callbacks=t),void 0!==n&&(a.recursionLimit=n),void 0!==r&&(a.maxConcurrency=r),void 0!==i&&(a.runName=i),void 0!==s&&(a.configurable={...a.configurable,...s}),a}class PP extends lT{constructor({config:e,onStart:t,onEnd:r,onError:n}){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=t,this.argOnEnd=r,this.argOnError=n}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&(1===this.argOnStart.length?await this.argOnStart(e):2===this.argOnStart.length&&await this.argOnStart(e,this.config)))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&(1===this.argOnError.length?await this.argOnError(e):2===this.argOnError.length&&await this.argOnError(e,this.config)):this.argOnEnd&&(1===this.argOnEnd.length?await this.argOnEnd(e):2===this.argOnEnd.length&&await this.argOnEnd(e,this.config)))}}function SP(e,t){return!e||Array.isArray(e)||e instanceof Date||"object"!=typeof e?{[t]:e}:e}class IP extends sx{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}bind(e){return new OP({bound:this,kwargs:e,config:{}})}map(){return new CP({bound:this})}withRetry(e){return new NP({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt,...e})}withConfig(e){return new OP({bound:this,config:e,kwargs:{}})}withFallbacks(e){return new DP({runnable:this,fallbacks:e.fallbacks})}_getOptionsList(e,t=0){if(Array.isArray(e)){if(e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);return e.map(xP)}return Array.from({length:t},(()=>xP(e)))}async batch(e,t,r){const n=this._getOptionsList(t??{},e.length),i=n[0]?.maxConcurrency??r?.maxConcurrency,s=new Hx({maxConcurrency:i,onFailedAttempt:e=>{throw e}}),a=e.map(((e,t)=>s.call((async()=>{try{return await this.invoke(e,n[t])}catch(e){if(r?.returnExceptions)return e;throw e}}))));return Promise.all(a)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){return mP.fromAsyncGenerator(this._streamIterator(e,t))}_separateRunnableConfigFromCallOptions(e={}){const t=xP({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency}),r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,[t,r]}async _callWithConfig(e,t,r){const n=xP(r),i=await AP(n),s=await(i?.handleChainStart(this.toJSON(),SP(t,"input"),void 0,n?.runType,void 0,void 0,n?.runName??this.getName()));let a;try{a=await e.call(this,t,n,s)}catch(e){throw await(s?.handleChainError(e)),e}return await(s?.handleChainEnd(SP(a,"output"))),a}async _batchWithConfig(e,t,r,n){const i=this._getOptionsList(r??{},t.length),s=await Promise.all(i.map(AP)),a=await Promise.all(s.map(((e,r)=>e?.handleChainStart(this.toJSON(),SP(t[r],"input"),void 0,i[r].runType,void 0,void 0,i[r].runName??this.getName()))));let o;try{o=await e.call(this,t,i,a,n)}catch(e){throw await Promise.all(a.map((t=>t?.handleChainError(e)))),e}return await Promise.all(a.map((e=>e?.handleChainEnd(SP(o,"output"))))),o}async*_transformStreamWithConfig(e,t,r){let n,i,s=!0,a=!0;const o=xP(r),u=await AP(o);let c;try{const r=await async function(e,t,r,...n){const i=new vP(t,r),s=await i.setup;return{output:e(i,s,...n),setup:s}}(t.bind(this),async function*(){for await(const t of e){if(s)if(void 0===n)n=t;else try{n=yP(n,t)}catch{n=void 0,s=!1}yield t}}(),(async()=>u?.handleChainStart(this.toJSON(),{input:""},void 0,o?.runType,void 0,void 0,o?.runName??this.getName())),o);c=r.setup;const l=e=>"log_stream_tracer"===e.name,d=c?.handlers.find(l);let h=r.output;void 0!==d&&void 0!==c&&(h=await d.tapOutputIterable(c.runId,r.output));for await(const e of h)if(yield e,a)if(void 0===i)i=e;else try{i=yP(i,e)}catch{i=void 0,a=!1}}catch(e){throw await(c?.handleChainError(e,void 0,void 0,void 0,{inputs:SP(n,"input")})),e}await(c?.handleChainEnd(i??{},void 0,void 0,void 0,{inputs:SP(n,"input")}))}pipe(e){return new MP({first:this,last:BP(e)})}pick(e){return this.pipe(new UP(e))}assign(e){return this.pipe(new LP(new RP({steps:e})))}async*transform(e,t){let r;for await(const t of e)r=void 0===r?t:yP(r,t);yield*this._streamIterator(r,t)}async*streamLog(e,t,r){const n=new wP({...r,autoClose:!1}),i=xP(t),{callbacks:s}=i;if(void 0===s)i.callbacks=[n];else if(Array.isArray(s))i.callbacks=s.concat([n]);else{const e=s.copy();e.inheritableHandlers.push(n),i.callbacks=e}const a=await this.stream(e,i),o=async function(){try{for await(const e of a){const t=new _P({ops:[{op:"add",path:"/streamed_output/-",value:e}]});await n.writer.write(t)}}finally{await n.writer.close()}}();try{for await(const e of n)yield e}finally{await o}}static isRunnable(e){return!!e&&e.lc_runnable}withListeners({onStart:e,onEnd:t,onError:r}){return new OP({bound:this,config:{},configFactories:[n=>({callbacks:[new PP({config:n,onStart:e,onEnd:t,onError:r})]})]})}}class OP extends IP{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const t=EP(this.config,...e);return EP(t,...this.configFactories?await Promise.all(this.configFactories.map((async e=>await e(t)))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig(t,this.kwargs))}async batch(e,t,r){const n=Array.isArray(t)?await Promise.all(t.map((async e=>this._mergeConfig(e,this.kwargs)))):await this._mergeConfig(t,this.kwargs);return this.bound.batch(e,n,r)}async*_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig(t,this.kwargs))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig(t,this.kwargs))}async*transform(e,t){yield*this.bound.transform(e,await this._mergeConfig(t,this.kwargs))}static isRunnableBinding(e){return e.bound&&IP.isRunnable(e.bound)}withListeners({onStart:e,onEnd:t,onError:r}){return new OP({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[n=>({callbacks:[new PP({config:n,onStart:e,onEnd:t,onError:r})]})]})}}class CP extends IP{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new CP({bound:this.bound.bind(e)})}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async _invoke(e,t,r){return this.bound.batch(e,TP(t,{callbacks:r?.getChild()}))}withListeners({onStart:e,onEnd:t,onError:r}){return new CP({bound:this.bound.withListeners({onStart:e,onEnd:t,onError:r})})}}class NP extends OP{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,r){const n=e>1?`retry:attempt:${e}`:void 0;return TP(t,{callbacks:r?.getChild(n)})}async _invoke(e,t,r){return qx((n=>super.invoke(e,this._patchConfigForRetry(n,t,r))),{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async _batch(e,t,r,n){const i={};try{await qx((async s=>{const a=e.map(((e,t)=>t)).filter((e=>void 0===i[e.toString()]||i[e.toString()]instanceof Error)),o=a.map((t=>e[t])),u=a.map((e=>this._patchConfigForRetry(s,t?.[e],r?.[e]))),c=await super.batch(o,u,{...n,returnExceptions:!0});let l;for(let e=0;e<c.length;e+=1){const t=c[e],r=a[e];t instanceof Error&&void 0===l&&(l=t),i[r.toString()]=t}if(l)throw l;return c}),{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(e){if(!0!==n?.returnExceptions)throw e}return Object.keys(i).sort(((e,t)=>parseInt(e,10)-parseInt(t,10))).map((e=>i[parseInt(e,10)]))}async batch(e,t,r){return this._batchWithConfig(this._batch.bind(this),e,t,r)}}class MP extends IP{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){const r=await AP(t),n=await(r?.handleChainStart(this.toJSON(),SP(e,"input"),void 0,void 0,void 0,void 0,t?.runName));let i,s=e;try{const e=[this.first,...this.middle];for(let r=0;r<e.length;r+=1){const i=e[r];s=await i.invoke(s,TP(t,{callbacks:n?.getChild(`seq:step:${r+1}`)}))}i=await this.last.invoke(s,TP(t,{callbacks:n?.getChild(`seq:step:${this.steps.length}`)}))}catch(e){throw await(n?.handleChainError(e)),e}return await(n?.handleChainEnd(SP(i,"output"))),i}async batch(e,t,r){const n=this._getOptionsList(t??{},e.length),i=await Promise.all(n.map(AP)),s=await Promise.all(i.map(((t,r)=>t?.handleChainStart(this.toJSON(),SP(e[r],"input"),void 0,void 0,void 0,void 0,n[r].runName))));let a=e;try{for(let e=0;e<this.steps.length;e+=1){const t=this.steps[e];a=await t.batch(a,s.map(((t,r)=>{const i=t?.getChild(`seq:step:${e+1}`);return TP(n[r],{callbacks:i})})),r)}}catch(e){throw await Promise.all(s.map((t=>t?.handleChainError(e)))),e}return await Promise.all(s.map((e=>e?.handleChainEnd(SP(a,"output"))))),a}async*_streamIterator(e,t){const r=await AP(t),n=await(r?.handleChainStart(this.toJSON(),SP(e,"input"),void 0,void 0,void 0,void 0,t?.runName)),i=[this.first,...this.middle,this.last];let s,a=!0;try{let r=i[0].transform(async function*(){yield e}(),TP(t,{callbacks:n?.getChild("seq:step:1")}));for(let e=1;e<i.length;e+=1){const s=i[e];r=await s.transform(r,TP(t,{callbacks:n?.getChild(`seq:step:${e+1}`)}))}for await(const t of r)if(yield t,a)if(void 0===s)s=t;else try{s=yP(s,t)}catch(e){s=void 0,a=!1}}catch(e){throw await(n?.handleChainError(e)),e}await(n?.handleChainEnd(SP(s,"output")))}pipe(e){return MP.isRunnableSequence(e)?new MP({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new MP({first:this.first,middle:[...this.middle,this.last],last:BP(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&IP.isRunnable(e)}static from([e,...t],r){return new MP({first:BP(e),middle:t.slice(0,-1).map(BP),last:BP(t[t.length-1]),name:r})}}class RP extends IP{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[t,r]of Object.entries(e.steps))this.steps[t]=BP(r)}static from(e){return new RP({steps:e})}async invoke(e,t){const r=await AP(t),n=await(r?.handleChainStart(this.toJSON(),{input:e},void 0,void 0,void 0,void 0,t?.runName)),i={};try{await Promise.all(Object.entries(this.steps).map((async([r,s])=>{i[r]=await s.invoke(e,TP(t,{callbacks:n?.getChild(`map:key:${r}`)}))})))}catch(e){throw await(n?.handleChainError(e)),e}return await(n?.handleChainEnd(i)),i}async*_transform(e,t,r){const n={...this.steps},i=gP(e,Object.keys(n).length),s=new Map(Object.entries(n).map((([e,n],s)=>{const a=n.transform(i[s],TP(r,{callbacks:t?.getChild(`map:key:${e}`)}));return[e,a.next().then((t=>({key:e,gen:a,result:t})))]})));for(;s.size;){const{key:e,result:t,gen:r}=await Promise.race(s.values());s.delete(e),t.done||(yield{[e]:t.value},s.set(e,r.next().then((t=>({key:e,gen:r,result:t})))))}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){return mP.fromAsyncGenerator(this.transform(async function*(){yield e}(),t))}}class jP extends IP{static lc_name(){return"RunnableLambda"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.func=e.func}static from(e){return new jP({func:e})}async _invoke(e,t,r){let n=await this.func(e,{config:t});if(n&&IP.isRunnable(n)){if(0===t?.recursionLimit)throw new Error("Recursion limit reached.");n=await n.invoke(e,TP(t,{callbacks:r?.getChild(),recursionLimit:(t?.recursionLimit??25)-1}))}return n}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async*_transform(e,t,r){let n;for await(const t of e)if(void 0===n)n=t;else try{n=yP(n,t)}catch(e){n=t}const i=await this.func(n,{config:r});if(i&&IP.isRunnable(i)){if(0===r?.recursionLimit)throw new Error("Recursion limit reached.");const e=await i.stream(n,TP(r,{callbacks:t?.getChild(),recursionLimit:(r?.recursionLimit??25)-1}));for await(const t of e)yield t}else yield i}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){return mP.fromAsyncGenerator(this.transform(async function*(){yield e}(),t))}}class DP extends IP{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,t){const r=await WT.configure(t?.callbacks,void 0,t?.tags,void 0,t?.metadata),n=await(r?.handleChainStart(this.toJSON(),SP(e,"input"),void 0,void 0,void 0,void 0,t?.runName));let i;for(const r of this.runnables())try{const i=await r.invoke(e,TP(t,{callbacks:n?.getChild()}));return await(n?.handleChainEnd(SP(i,"output"))),i}catch(e){void 0===i&&(i=e)}if(void 0===i)throw new Error("No error stored at end of fallback.");throw await(n?.handleChainError(i)),i}async batch(e,t,r){if(r?.returnExceptions)throw new Error("Not implemented.");const n=this._getOptionsList(t??{},e.length),i=await Promise.all(n.map((e=>WT.configure(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)))),s=await Promise.all(i.map(((t,r)=>t?.handleChainStart(this.toJSON(),SP(e[r],"input"),void 0,void 0,void 0,void 0,n[r].runName))));let a;for(const t of this.runnables())try{const i=await t.batch(e,s.map(((e,t)=>TP(n[t],{callbacks:e?.getChild()}))),r);return await Promise.all(s.map(((e,t)=>e?.handleChainEnd(SP(i[t],"output"))))),i}catch(e){void 0===a&&(a=e)}if(!a)throw new Error("No error stored at end of fallbacks.");throw await Promise.all(s.map((e=>e?.handleChainError(a)))),a}}function BP(e){if("function"==typeof e)return new jP({func:e});if(IP.isRunnable(e))return e;if(Array.isArray(e)||"object"!=typeof e)throw new Error("Expected a Runnable, function or object.\nInstead got an unsupported type.");{const t={};for(const[r,n]of Object.entries(e))t[r]=BP(n);return new RP({steps:t})}}class LP extends IP{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof RP&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,t){const r=await this.mapper.invoke(e,t);return{...e,...r}}async*_transform(e,t,r){const n=this.mapper.getStepsKeys(),[i,s]=gP(e),a=this.mapper.transform(s,TP(r,{callbacks:t?.getChild()})),o=a.next();for await(const e of i){if("object"!=typeof e||Array.isArray(e))throw new Error("RunnableAssign can only be used with objects as input, got "+typeof e);const t=Object.fromEntries(Object.entries(e).filter((([e])=>!n.includes(e))));Object.keys(t).length>0&&(yield t)}yield(await o).value;for await(const e of a)yield e}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){return mP.fromAsyncGenerator(this.transform(async function*(){yield e}(),t))}}class UP extends IP{static lc_name(){return"RunnablePick"}constructor(e){("string"==typeof e||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if("string"==typeof this.keys)return e[this.keys];{const t=this.keys.map((t=>[t,e[t]])).filter((e=>void 0!==e[1]));return 0===t.length?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(const t of e){const e=await this._pick(t);void 0!==e&&(yield e)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){return mP.fromAsyncGenerator(this.transform(async function*(){yield e}(),t))}}class FP extends IP{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??!1,this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class ZP extends FP{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...r}){super({callbacks:e??t,...r}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),"object"==typeof r.cache?this.cache=r.cache:r.cache?this.cache=Lx.global():this.cache=void 0,this.caller=new Hx(r??{})}async getNumTokens(e){if("string"!=typeof e)return 0;let t=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await async function(e){return async function(e){return e in Yx||(Yx[e]=Xx.fetch(`https://tiktoken.pages.dev/js/${e}.json`).then((e=>e.json())).then((e=>new Qx(e))).catch((t=>{throw delete Yx[e],t}))),await Yx[e]}(function(e){switch(e){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"text-embedding-ada-002":return"cl100k_base";default:throw new Error("Unknown model")}}(e))}("modelName"in this?(r=this.modelName,r.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":r.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":r.startsWith("gpt-4-32k")?"gpt-4-32k":r.startsWith("gpt-4-")?"gpt-4":r):"gpt2")}catch(e){console.warn("Failed to calculate number of tokens, falling back to approximate count",e)}var r;if(this._encoding)try{t=this._encoding.encode(e).length}catch(e){console.warn("Failed to calculate number of tokens, falling back to approximate count",e)}return t}static _convertInputToPromptValue(e){return"string"==typeof e?new Fx(e):Array.isArray(e)?new Zx(e.map(_x)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall(e){const t={...this._identifyingParams(),...e,_type:this._llmType(),_model:this._modelType()},r=Object.entries(t).filter((([e,t])=>void 0!==t)).map((([e,t])=>`${e}:${JSON.stringify(t)}`)).sort().join(",");return r}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class qP extends ZP{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptions(e){const[t,r]=super._separateRunnableConfigFromCallOptions(e);return r?.timeout&&!r.signal&&(r.signal=AbortSignal.timeout(r.timeout)),[t,r]}async invoke(e,t){const r=qP._convertInputToPromptValue(e);return(await this.generatePrompt([r],t,t?.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,t,r){throw new Error("Not implemented.")}async*_streamIterator(e,t){if(this._streamResponseChunks===qP.prototype._streamResponseChunks)yield this.invoke(e,t);else{const r=qP._convertInputToPromptValue(e).toChatMessages(),[n,i]=this._separateRunnableConfigFromCallOptions(t),s=await WT.configure(n.callbacks,this.callbacks,n.tags,this.tags,n.metadata,this.metadata,{verbose:this.verbose}),a={options:i,invocation_params:this?.invocationParams(i),batch_size:1},o=await(s?.handleChatModelStart(this.toJSON(),[r],void 0,void 0,a,void 0,void 0,n.runName));let u;try{for await(const e of this._streamResponseChunks(r,i,o?.[0]))yield e.message,u=u?u.concat(e):e}catch(e){throw await Promise.all((o??[]).map((t=>t?.handleLLMError(e)))),e}await Promise.all((o??[]).map((e=>e?.handleLLMEnd({generations:[[u]]}))))}}async _generateUncached(e,t,r){const n=e.map((e=>e.map(_x))),i=await WT.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),s={options:t,invocation_params:this?.invocationParams(t),batch_size:1},a=await(i?.handleChatModelStart(this.toJSON(),n,void 0,void 0,s,void 0,void 0,r.runName)),o=await Promise.allSettled(n.map(((e,r)=>this._generate(e,{...t,promptIndex:r},a?.[r])))),u=[],c=[];await Promise.all(o.map((async(e,t)=>{if("fulfilled"===e.status){const r=e.value;return u[t]=r.generations,c[t]=r.llmOutput,a?.[t]?.handleLLMEnd({generations:[r.generations],llmOutput:r.llmOutput})}return await(a?.[t]?.handleLLMError(e.reason)),Promise.reject(e.reason)})));const l={generations:u,llmOutput:c.length?this._combineLLMOutput?.(...c):void 0};return Object.defineProperty(l,Ax,{value:a?{runIds:a?.map((e=>e.runId))}:void 0,configurable:!0}),l}async _generateCached({messages:e,cache:t,llmStringKey:r,parsedOptions:n,handledOptions:i}){const s=e.map((e=>e.map(_x))),a=await WT.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),o={options:n,invocation_params:this?.invocationParams(n),batch_size:1,cached:!0},u=await(a?.handleChatModelStart(this.toJSON(),s,void 0,void 0,o,void 0,void 0,i.runName)),c=[],l=await Promise.allSettled(s.map((async(e,n)=>{const i=qP._convertInputToPromptValue(e).toString(),s=await t.lookup(i,r);return null==s&&c.push(n),s}))),d=l.map(((e,t)=>({result:e,runManager:u?.[t]}))).filter((({result:e})=>"fulfilled"===e.status&&null!=e.value||"rejected"===e.status)),h=[];await Promise.all(d.map((async({result:e,runManager:t},r)=>{if("fulfilled"===e.status){const n=e.value;return h[r]=n,n.length&&await(t?.handleLLMNewToken(n[0].text)),t?.handleLLMEnd({generations:[n]})}return await(t?.handleLLMError(e.reason)),Promise.reject(e.reason)})));const f={generations:h,missingPromptIndices:c};return Object.defineProperty(f,Ax,{value:u?{runIds:u?.map((e=>e.runId))}:void 0,configurable:!0}),f}async generate(e,t,r){let n;n=Array.isArray(t)?{stop:t}:t;const i=e.map((e=>e.map(_x))),[s,a]=this._separateRunnableConfigFromCallOptions(n);if(s.callbacks=s.callbacks??r,!this.cache)return this._generateUncached(i,a,s);const{cache:o}=this,u=this._getSerializedCacheKeyParametersForCall(a),{generations:c,missingPromptIndices:l}=await this._generateCached({messages:i,cache:o,llmStringKey:u,parsedOptions:a,handledOptions:s});let d={};if(l.length>0){const e=await this._generateUncached(l.map((e=>i[e])),a,s);await Promise.all(e.generations.map((async(e,t)=>{const r=l[t];c[r]=e;const n=qP._convertInputToPromptValue(i[r]).toString();return o.update(n,u,e)}))),d=e.llmOutput??{}}return{generations:c,llmOutput:d}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,t,r){const n=e.map((e=>e.toChatMessages()));return this.generate(n,t,r)}async call(e,t,r){return(await this.generate([e.map(_x)],t,r)).generations[0][0].message}async callPrompt(e,t,r){const n=e.toChatMessages();return this.call(n,t,r)}async predictMessages(e,t,r){return this.call(e,t,r)}async predict(e,t,r){const n=new lx(e),i=await this.call([n],t,r);if("string"!=typeof i.content)throw new Error("Cannot use predict when output is not a string.");return i.content}}const zP={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"string",mapStrategy:"entries",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",emailStrategy:"format:email"};var $P,KP;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}($P||($P={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(KP||(KP={}));const HP=$P.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),GP=e=>{switch(typeof e){case"undefined":return HP.undefined;case"string":return HP.string;case"number":return isNaN(e)?HP.nan:HP.number;case"boolean":return HP.boolean;case"function":return HP.function;case"bigint":return HP.bigint;case"symbol":return HP.symbol;case"object":return Array.isArray(e)?HP.array:null===e?HP.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?HP.promise:"undefined"!=typeof Map&&e instanceof Map?HP.map:"undefined"!=typeof Set&&e instanceof Set?HP.set:"undefined"!=typeof Date&&e instanceof Date?HP.date:HP.object;default:return HP.unknown}},VP=$P.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class WP extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){const r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,$P.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}WP.create=e=>new WP(e);const JP=(e,t)=>{let r;switch(e.code){case VP.invalid_type:r=e.received===HP.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case VP.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,$P.jsonStringifyReplacer)}`;break;case VP.unrecognized_keys:r=`Unrecognized key(s) in object: ${$P.joinValues(e.keys,", ")}`;break;case VP.invalid_union:r="Invalid input";break;case VP.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${$P.joinValues(e.options)}`;break;case VP.invalid_enum_value:r=`Invalid enum value. Expected ${$P.joinValues(e.options)}, received '${e.received}'`;break;case VP.invalid_arguments:r="Invalid function arguments";break;case VP.invalid_return_type:r="Invalid function return type";break;case VP.invalid_date:r="Invalid date";break;case VP.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:$P.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case VP.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case VP.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case VP.custom:r="Invalid input";break;case VP.invalid_intersection_types:r="Intersection results could not be merged";break;case VP.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case VP.not_finite:r="Number must be finite";break;default:r=t.defaultError,$P.assertNever(e)}return{message:r}};let QP=JP;function YP(e,t){const r=(e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],a={...i,path:s};let o="";const u=n.filter((e=>!!e)).slice().reverse();for(const e of u)o=e(a,{data:t,defaultError:o}).message;return{...i,path:s,message:i.message||o}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,QP,JP].filter((e=>!!e))});e.common.issues.push(r)}class XP{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return eS;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t)r.push({key:await e.key,value:await e.value});return XP.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:i}=n;if("aborted"===t.status)return eS;if("aborted"===i.status)return eS;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!n.alwaysSet||(r[t.value]=i.value)}return{status:e.value,value:r}}}const eS=Object.freeze({status:"aborted"}),tS=e=>({status:"valid",value:e}),rS=e=>"aborted"===e.status,nS=e=>"dirty"===e.status,iS=e=>"valid"===e.status,sS=e=>"undefined"!=typeof Promise&&e instanceof Promise;var aS;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(aS||(aS={}));class oS{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const uS=(e,t)=>{if(iS(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new WP(e.common.issues);return this._error=t,this._error}}};function cS(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=n?n:t.defaultError}:{message:null!=r?r:t.defaultError},description:i}}class lS{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return GP(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:GP(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new XP,ctx:{common:e.parent.common,data:e.data,parsedType:GP(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(sS(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:GP(e)},i=this._parseSync({data:e,path:n.path,parent:n});return uS(n,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:GP(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(sS(n)?n:Promise.resolve(n));return uS(r,i)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,n)=>{const i=e(t),s=()=>n.addIssue({code:VP.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(s(),!1))):!!i||(s(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1)))}_refinement(e){return new GS({schema:this,typeName:rI.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return VS.create(this,this._def)}nullable(){return WS.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return NS.create(this,this._def)}promise(){return HS.create(this,this._def)}or(e){return jS.create([this,e],this._def)}and(e){return BS.create(this,e,this._def)}transform(e){return new GS({...cS(this._def),schema:this,typeName:rI.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new JS({...cS(this._def),innerType:this,defaultValue:t,typeName:rI.ZodDefault})}brand(){return new XS({typeName:rI.ZodBranded,type:this,...cS(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new QS({...cS(this._def),innerType:this,catchValue:t,typeName:rI.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return eI.create(this,e)}readonly(){return tI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const dS=/^c[^\s-]{8,}$/i,hS=/^[a-z][a-z0-9]*$/,fS=/^[0-9A-HJKMNP-TV-Z]{26}$/,pS=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,mS=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let gS;const yS=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,vS=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;class _S extends lS{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==HP.string){const t=this._getOrReturnCtx(e);return YP(t,{code:VP.invalid_type,expected:HP.string,received:t.parsedType}),eS}const t=new XP;let r;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(r=this._getOrReturnCtx(e,r),YP(r,{code:VP.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(r=this._getOrReturnCtx(e,r),YP(r,{code:VP.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const n=e.data.length>a.value,i=e.data.length<a.value;(n||i)&&(r=this._getOrReturnCtx(e,r),n?YP(r,{code:VP.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):i&&YP(r,{code:VP.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)mS.test(e.data)||(r=this._getOrReturnCtx(e,r),YP(r,{validation:"email",code:VP.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)gS||(gS=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),gS.test(e.data)||(r=this._getOrReturnCtx(e,r),YP(r,{validation:"emoji",code:VP.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)pS.test(e.data)||(r=this._getOrReturnCtx(e,r),YP(r,{validation:"uuid",code:VP.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)dS.test(e.data)||(r=this._getOrReturnCtx(e,r),YP(r,{validation:"cuid",code:VP.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)hS.test(e.data)||(r=this._getOrReturnCtx(e,r),YP(r,{validation:"cuid2",code:VP.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)fS.test(e.data)||(r=this._getOrReturnCtx(e,r),YP(r,{validation:"ulid",code:VP.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch(n){r=this._getOrReturnCtx(e,r),YP(r,{validation:"url",code:VP.invalid_string,message:a.message}),t.dirty()}else"regex"===a.kind?(a.regex.lastIndex=0,a.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),YP(r,{validation:"regex",code:VP.invalid_string,message:a.message}),t.dirty())):"trim"===a.kind?e.data=e.data.trim():"includes"===a.kind?e.data.includes(a.value,a.position)||(r=this._getOrReturnCtx(e,r),YP(r,{code:VP.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty()):"toLowerCase"===a.kind?e.data=e.data.toLowerCase():"toUpperCase"===a.kind?e.data=e.data.toUpperCase():"startsWith"===a.kind?e.data.startsWith(a.value)||(r=this._getOrReturnCtx(e,r),YP(r,{code:VP.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty()):"endsWith"===a.kind?e.data.endsWith(a.value)||(r=this._getOrReturnCtx(e,r),YP(r,{code:VP.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty()):"datetime"===a.kind?((s=a).precision?s.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${s.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${s.precision}}Z$`):0===s.precision?s.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):s.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(r=this._getOrReturnCtx(e,r),YP(r,{code:VP.invalid_string,validation:"datetime",message:a.message}),t.dirty()):"ip"===a.kind?(n=e.data,("v4"===(i=a.version)||!i)&&yS.test(n)||("v6"===i||!i)&&vS.test(n)||(r=this._getOrReturnCtx(e,r),YP(r,{validation:"ip",code:VP.invalid_string,message:a.message}),t.dirty())):$P.assertNever(a);var n,i,s;return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:VP.invalid_string,...aS.errToObj(r)})}_addCheck(e){return new _S({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...aS.errToObj(e)})}url(e){return this._addCheck({kind:"url",...aS.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...aS.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...aS.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...aS.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...aS.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...aS.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...aS.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...aS.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...aS.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...aS.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...aS.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...aS.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...aS.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...aS.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...aS.errToObj(t)})}nonempty(e){return this.min(1,aS.errToObj(e))}trim(){return new _S({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _S({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _S({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function bS(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}_S.create=e=>{var t;return new _S({checks:[],typeName:rI.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...cS(e)})};class wS extends lS{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==HP.number){const t=this._getOrReturnCtx(e);return YP(t,{code:VP.invalid_type,expected:HP.number,received:t.parsedType}),eS}let t;const r=new XP;for(const n of this._def.checks)"int"===n.kind?$P.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),YP(t,{code:VP.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),YP(t,{code:VP.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),YP(t,{code:VP.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==bS(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),YP(t,{code:VP.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),YP(t,{code:VP.not_finite,message:n.message}),r.dirty()):$P.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,aS.toString(t))}gt(e,t){return this.setLimit("min",e,!1,aS.toString(t))}lte(e,t){return this.setLimit("max",e,!0,aS.toString(t))}lt(e,t){return this.setLimit("max",e,!1,aS.toString(t))}setLimit(e,t,r,n){return new wS({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:aS.toString(n)}]})}_addCheck(e){return new wS({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:aS.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:aS.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:aS.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:aS.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:aS.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:aS.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:aS.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:aS.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:aS.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&$P.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}wS.create=e=>new wS({checks:[],typeName:rI.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...cS(e)});class AS extends lS{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==HP.bigint){const t=this._getOrReturnCtx(e);return YP(t,{code:VP.invalid_type,expected:HP.bigint,received:t.parsedType}),eS}let t;const r=new XP;for(const n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),YP(t,{code:VP.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),YP(t,{code:VP.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),YP(t,{code:VP.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):$P.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,aS.toString(t))}gt(e,t){return this.setLimit("min",e,!1,aS.toString(t))}lte(e,t){return this.setLimit("max",e,!0,aS.toString(t))}lt(e,t){return this.setLimit("max",e,!1,aS.toString(t))}setLimit(e,t,r,n){return new AS({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:aS.toString(n)}]})}_addCheck(e){return new AS({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:aS.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:aS.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:aS.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:aS.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:aS.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}AS.create=e=>{var t;return new AS({checks:[],typeName:rI.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...cS(e)})};class ES extends lS{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==HP.boolean){const t=this._getOrReturnCtx(e);return YP(t,{code:VP.invalid_type,expected:HP.boolean,received:t.parsedType}),eS}return tS(e.data)}}ES.create=e=>new ES({typeName:rI.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...cS(e)});class kS extends lS{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==HP.date){const t=this._getOrReturnCtx(e);return YP(t,{code:VP.invalid_type,expected:HP.date,received:t.parsedType}),eS}if(isNaN(e.data.getTime()))return YP(this._getOrReturnCtx(e),{code:VP.invalid_date}),eS;const t=new XP;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),YP(r,{code:VP.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),YP(r,{code:VP.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):$P.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new kS({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:aS.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:aS.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}kS.create=e=>new kS({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:rI.ZodDate,...cS(e)});class xS extends lS{_parse(e){if(this._getType(e)!==HP.symbol){const t=this._getOrReturnCtx(e);return YP(t,{code:VP.invalid_type,expected:HP.symbol,received:t.parsedType}),eS}return tS(e.data)}}xS.create=e=>new xS({typeName:rI.ZodSymbol,...cS(e)});class TS extends lS{_parse(e){if(this._getType(e)!==HP.undefined){const t=this._getOrReturnCtx(e);return YP(t,{code:VP.invalid_type,expected:HP.undefined,received:t.parsedType}),eS}return tS(e.data)}}TS.create=e=>new TS({typeName:rI.ZodUndefined,...cS(e)});class PS extends lS{_parse(e){if(this._getType(e)!==HP.null){const t=this._getOrReturnCtx(e);return YP(t,{code:VP.invalid_type,expected:HP.null,received:t.parsedType}),eS}return tS(e.data)}}PS.create=e=>new PS({typeName:rI.ZodNull,...cS(e)});class SS extends lS{constructor(){super(...arguments),this._any=!0}_parse(e){return tS(e.data)}}SS.create=e=>new SS({typeName:rI.ZodAny,...cS(e)});class IS extends lS{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tS(e.data)}}IS.create=e=>new IS({typeName:rI.ZodUnknown,...cS(e)});class OS extends lS{_parse(e){const t=this._getOrReturnCtx(e);return YP(t,{code:VP.invalid_type,expected:HP.never,received:t.parsedType}),eS}}OS.create=e=>new OS({typeName:rI.ZodNever,...cS(e)});class CS extends lS{_parse(e){if(this._getType(e)!==HP.undefined){const t=this._getOrReturnCtx(e);return YP(t,{code:VP.invalid_type,expected:HP.void,received:t.parsedType}),eS}return tS(e.data)}}CS.create=e=>new CS({typeName:rI.ZodVoid,...cS(e)});class NS extends lS{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==HP.array)return YP(t,{code:VP.invalid_type,expected:HP.array,received:t.parsedType}),eS;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(YP(t,{code:e?VP.too_big:VP.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(YP(t,{code:VP.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(YP(t,{code:VP.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>n.type._parseAsync(new oS(t,e,t.path,r))))).then((e=>XP.mergeArray(r,e)));const i=[...t.data].map(((e,r)=>n.type._parseSync(new oS(t,e,t.path,r))));return XP.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new NS({...this._def,minLength:{value:e,message:aS.toString(t)}})}max(e,t){return new NS({...this._def,maxLength:{value:e,message:aS.toString(t)}})}length(e,t){return new NS({...this._def,exactLength:{value:e,message:aS.toString(t)}})}nonempty(e){return this.min(1,e)}}function MS(e){if(e instanceof RS){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=VS.create(MS(n))}return new RS({...e._def,shape:()=>t})}return e instanceof NS?new NS({...e._def,type:MS(e.element)}):e instanceof VS?VS.create(MS(e.unwrap())):e instanceof WS?WS.create(MS(e.unwrap())):e instanceof LS?LS.create(e.items.map((e=>MS(e)))):e}NS.create=(e,t)=>new NS({type:e,minLength:null,maxLength:null,exactLength:null,typeName:rI.ZodArray,...cS(t)});class RS extends lS{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=$P.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==HP.object){const t=this._getOrReturnCtx(e);return YP(t,{code:VP.invalid_type,expected:HP.object,received:t.parsedType}),eS}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof OS&&"strip"===this._def.unknownKeys))for(const e in r.data)i.includes(e)||s.push(e);const a=[];for(const e of i){const t=n[e],i=r.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new oS(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof OS){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of s)a.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(YP(r,{code:VP.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const n=r.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new oS(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of a){const r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>XP.mergeObjectSync(t,e))):XP.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return aS.errToObj,new RS({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,s,a;const o=null!==(s=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(a=aS.errToObj(e).message)&&void 0!==a?a:o}:{message:o}}}:{}})}strip(){return new RS({...this._def,unknownKeys:"strip"})}passthrough(){return new RS({...this._def,unknownKeys:"passthrough"})}extend(e){return new RS({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new RS({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:rI.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new RS({...this._def,catchall:e})}pick(e){const t={};return $P.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new RS({...this._def,shape:()=>t})}omit(e){const t={};return $P.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new RS({...this._def,shape:()=>t})}deepPartial(){return MS(this)}partial(e){const t={};return $P.objectKeys(this.shape).forEach((r=>{const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()})),new RS({...this._def,shape:()=>t})}required(e){const t={};return $P.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof VS;)e=e._def.innerType;t[r]=e}})),new RS({...this._def,shape:()=>t})}keyof(){return zS($P.objectKeys(this.shape))}}RS.create=(e,t)=>new RS({shape:()=>e,unknownKeys:"strip",catchall:OS.create(),typeName:rI.ZodObject,...cS(t)}),RS.strictCreate=(e,t)=>new RS({shape:()=>e,unknownKeys:"strict",catchall:OS.create(),typeName:rI.ZodObject,...cS(t)}),RS.lazycreate=(e,t)=>new RS({shape:e,unknownKeys:"strip",catchall:OS.create(),typeName:rI.ZodObject,...cS(t)});class jS extends lS{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new WP(e.ctx.common.issues)));return YP(t,{code:VP.invalid_union,unionErrors:r}),eS}));{let e;const n=[];for(const i of r){const r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=n.map((e=>new WP(e)));return YP(t,{code:VP.invalid_union,unionErrors:i}),eS}}get options(){return this._def.options}}function DS(e,t){const r=GP(e),n=GP(t);if(e===t)return{valid:!0,data:e};if(r===HP.object&&n===HP.object){const r=$P.objectKeys(t),n=$P.objectKeys(e).filter((e=>-1!==r.indexOf(e))),i={...e,...t};for(const r of n){const n=DS(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(r===HP.array&&n===HP.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const i=DS(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===HP.date&&n===HP.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}jS.create=(e,t)=>new jS({options:e,typeName:rI.ZodUnion,...cS(t)});class BS extends lS{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(rS(e)||rS(n))return eS;const i=DS(e.value,n.value);return i.valid?((nS(e)||nS(n))&&t.dirty(),{status:t.value,value:i.data}):(YP(r,{code:VP.invalid_intersection_types}),eS)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>n(e,t))):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}BS.create=(e,t,r)=>new BS({left:e,right:t,typeName:rI.ZodIntersection,...cS(r)});class LS extends lS{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==HP.array)return YP(r,{code:VP.invalid_type,expected:HP.array,received:r.parsedType}),eS;if(r.data.length<this._def.items.length)return YP(r,{code:VP.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),eS;!this._def.rest&&r.data.length>this._def.items.length&&(YP(r,{code:VP.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new oS(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(n).then((e=>XP.mergeArray(t,e))):XP.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new LS({...this._def,rest:e})}}LS.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new LS({items:e,typeName:rI.ZodTuple,rest:null,...cS(t)})};class US extends lS{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==HP.map)return YP(r,{code:VP.invalid_type,expected:HP.map,received:r.parsedType}),eS;const n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map((([e,t],s)=>({key:n._parse(new oS(r,e,r.path,[s,"key"])),value:i._parse(new oS(r,t,r.path,[s,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of s){const n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return eS;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of s){const n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return eS;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}US.create=(e,t,r)=>new US({valueType:t,keyType:e,typeName:rI.ZodMap,...cS(r)});class FS extends lS{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==HP.set)return YP(r,{code:VP.invalid_type,expected:HP.set,received:r.parsedType}),eS;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(YP(r,{code:VP.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(YP(r,{code:VP.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const r=new Set;for(const n of e){if("aborted"===n.status)return eS;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const a=[...r.data.values()].map(((e,t)=>i._parse(new oS(r,e,r.path,t))));return r.common.async?Promise.all(a).then((e=>s(e))):s(a)}min(e,t){return new FS({...this._def,minSize:{value:e,message:aS.toString(t)}})}max(e,t){return new FS({...this._def,maxSize:{value:e,message:aS.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}FS.create=(e,t)=>new FS({valueType:e,minSize:null,maxSize:null,typeName:rI.ZodSet,...cS(t)});class ZS extends lS{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ZS.create=(e,t)=>new ZS({getter:e,typeName:rI.ZodLazy,...cS(t)});class qS extends lS{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return YP(t,{received:t.data,code:VP.invalid_literal,expected:this._def.value}),eS}return{status:"valid",value:e.data}}get value(){return this._def.value}}function zS(e,t){return new $S({values:e,typeName:rI.ZodEnum,...cS(t)})}qS.create=(e,t)=>new qS({value:e,typeName:rI.ZodLiteral,...cS(t)});class $S extends lS{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return YP(t,{expected:$P.joinValues(r),received:t.parsedType,code:VP.invalid_type}),eS}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return YP(t,{received:t.data,code:VP.invalid_enum_value,options:r}),eS}return tS(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return $S.create(e)}exclude(e){return $S.create(this.options.filter((t=>!e.includes(t))))}}$S.create=zS;class KS extends lS{_parse(e){const t=$P.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==HP.string&&r.parsedType!==HP.number){const e=$P.objectValues(t);return YP(r,{expected:$P.joinValues(e),received:r.parsedType,code:VP.invalid_type}),eS}if(-1===t.indexOf(e.data)){const e=$P.objectValues(t);return YP(r,{received:r.data,code:VP.invalid_enum_value,options:e}),eS}return tS(e.data)}get enum(){return this._def.values}}KS.create=(e,t)=>new KS({values:e,typeName:rI.ZodNativeEnum,...cS(t)});class HS extends lS{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==HP.promise&&!1===t.common.async)return YP(t,{code:VP.invalid_type,expected:HP.promise,received:t.parsedType}),eS;const r=t.parsedType===HP.promise?t.data:Promise.resolve(t.data);return tS(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}HS.create=(e,t)=>new HS({type:e,typeName:rI.ZodPromise,...cS(t)});class GS extends lS{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===rI.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{YP(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){const e=n.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?eS:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?eS:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!iS(e))return e;const s=n.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>iS(e)?Promise.resolve(n.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}$P.assertNever(n)}}GS.create=(e,t,r)=>new GS({schema:e,typeName:rI.ZodEffects,effect:t,...cS(r)}),GS.createWithPreprocess=(e,t,r)=>new GS({schema:t,effect:{type:"preprocess",transform:e},typeName:rI.ZodEffects,...cS(r)});class VS extends lS{_parse(e){return this._getType(e)===HP.undefined?tS(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}VS.create=(e,t)=>new VS({innerType:e,typeName:rI.ZodOptional,...cS(t)});class WS extends lS{_parse(e){return this._getType(e)===HP.null?tS(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}WS.create=(e,t)=>new WS({innerType:e,typeName:rI.ZodNullable,...cS(t)});class JS extends lS{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===HP.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}JS.create=(e,t)=>new JS({innerType:e,typeName:rI.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...cS(t)});class QS extends lS{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return sS(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new WP(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new WP(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}QS.create=(e,t)=>new QS({innerType:e,typeName:rI.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...cS(t)});class YS extends lS{_parse(e){if(this._getType(e)!==HP.nan){const t=this._getOrReturnCtx(e);return YP(t,{code:VP.invalid_type,expected:HP.nan,received:t.parsedType}),eS}return{status:"valid",value:e.data}}}YS.create=e=>new YS({typeName:rI.ZodNaN,...cS(e)}),Symbol("zod_brand");class XS extends lS{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class eI extends lS{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?eS:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?eS:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eI({in:e,out:t,typeName:rI.ZodPipeline})}}class tI extends lS{_parse(e){const t=this._def.innerType._parse(e);return iS(t)&&(t.value=Object.freeze(t.value)),t}}var rI;function nI(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function iI(e,t,r,n,i){e[t]=r,nI(e,t,n,i)}tI.create=(e,t)=>new tI({innerType:e,typeName:rI.ZodReadonly,...cS(t)}),RS.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(rI||(rI={})),_S.create,wS.create,YS.create,AS.create,ES.create,kS.create,xS.create,TS.create,PS.create,SS.create,IS.create,OS.create,CS.create,NS.create,RS.create,RS.strictCreate,jS.create,BS.create,LS.create,US.create,FS.create,ZS.create,qS.create,$S.create,KS.create,HS.create,GS.create,VS.create,WS.create,GS.createWithPreprocess,eI.create;const sI={cuid:"^[cC][^\\s-]{8,}$",cuid2:"^[a-z][a-z0-9]*$",ulid:"^[0-9A-HJKMNP-TV-Z]{26}$",email:"^(?!\\.)(?!.*\\.\\.)([a-zA-Z0-9_+-\\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\\-]*\\.)+[a-zA-Z]{2,}$",emoji:"^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",uuid:"^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$",ipv4:"^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$",ipv6:"^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$"};function aI(e,t){const r={type:"string"};function n(e){return"escape"===t.patternStrategy?oI(e):e}if(e.checks)for(const i of e.checks)switch(i.kind){case"min":iI(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,i.value):i.value,i.message,t);break;case"max":iI(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,i.value):i.value,i.message,t);break;case"email":switch(t.emailStrategy){case"format:email":uI(r,"email",i.message,t);break;case"format:idn-email":uI(r,"idn-email",i.message,t);break;case"pattern:zod":cI(r,sI.email,i.message,t)}break;case"url":uI(r,"uri",i.message,t);break;case"uuid":uI(r,"uuid",i.message,t);break;case"regex":cI(r,i.regex.source,i.message,t);break;case"cuid":cI(r,sI.cuid,i.message,t);break;case"cuid2":cI(r,sI.cuid2,i.message,t);break;case"startsWith":cI(r,"^"+n(i.value),i.message,t);break;case"endsWith":cI(r,n(i.value)+"$",i.message,t);break;case"datetime":uI(r,"date-time",i.message,t);break;case"length":iI(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,i.value):i.value,i.message,t),iI(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,i.value):i.value,i.message,t);break;case"includes":cI(r,n(i.value),i.message,t);break;case"ip":"v6"!==i.version&&uI(r,"ipv4",i.message,t),"v4"!==i.version&&uI(r,"ipv6",i.message,t);break;case"emoji":cI(r,sI.emoji,i.message,t);break;case"ulid":cI(r,sI.ulid,i.message,t)}return r}const oI=e=>Array.from(e).map((e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`)).join(""),uI=(e,t,r,n)=>{e.format||e.anyOf?.some((e=>e.format))?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):iI(e,"format",t,r,n)},cI=(e,t,r,n)=>{e.pattern||e.allOf?.some((e=>e.pattern))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:t,...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):iI(e,"pattern",t,r,n)};function lI(e,t){if("openApi3"===t.target&&e.keyType?._def.typeName===rI.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce(((r,n)=>({...r,[n]:fI(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??{}})),{}),additionalProperties:!1};const r={type:"object",additionalProperties:fI(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===rI.ZodString&&e.keyType._def.checks?.length){const n=Object.entries(aI(e.keyType._def,t)).reduce(((e,[t,r])=>"type"===t?e:{...e,[t]:r}),{});return{...r,propertyNames:n}}return e.keyType?._def.typeName===rI.ZodEnum?{...r,propertyNames:{enum:e.keyType._def.values}}:r}const dI={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},hI=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map(((e,r)=>fI(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]}))).filter((e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0)));return r.length?{anyOf:r}:void 0};function fI(e,t,r=!1){const n=t.seen.get(e);if(n&&!r){const e=pI(n,t);if(void 0!==e)return e}const i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);const s=gI(e,e.typeName,t);return s&&yI(e,t,s),i.jsonSchema=s,s}const pI=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:mI(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every(((e,r)=>t.currentPath[r]===e))?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):"seen"===t.$refStrategy?{}:void 0}},mI=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},gI=(e,t,r)=>{switch(t){case rI.ZodString:return aI(e,r);case rI.ZodNumber:return function(e,t){const r={type:"number"};if(!e.checks)return r;for(const n of e.checks)switch(n.kind){case"int":r.type="integer",nI(r,"type",n.message,t);break;case"min":"jsonSchema7"===t.target?n.inclusive?iI(r,"minimum",n.value,n.message,t):iI(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),iI(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?iI(r,"maximum",n.value,n.message,t):iI(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),iI(r,"maximum",n.value,n.message,t));break;case"multipleOf":iI(r,"multipleOf",n.value,n.message,t)}return r}(e,r);case rI.ZodObject:return function(e,t){const r={type:"object",...Object.entries(e.shape()).reduce(((e,[r,n])=>{if(void 0===n||void 0===n._def)return e;const i=fI(n._def,{...t,currentPath:[...t.currentPath,"properties",r],propertyPath:[...t.currentPath,"properties",r]});return void 0===i?e:{properties:{...e.properties,[r]:i},required:n.isOptional()?e.required:[...e.required,r]}}),{properties:{},required:[]}),additionalProperties:"ZodNever"===e.catchall._def.typeName?"passthrough"===e.unknownKeys:fI(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0};return r.required.length||delete r.required,r}(e,r);case rI.ZodBigInt:return function(e,t){const r={type:"integer",format:"int64"};if(!e.checks)return r;for(const n of e.checks)switch(n.kind){case"min":"jsonSchema7"===t.target?n.inclusive?iI(r,"minimum",n.value,n.message,t):iI(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),iI(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?iI(r,"maximum",n.value,n.message,t):iI(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),iI(r,"maximum",n.value,n.message,t));break;case"multipleOf":iI(r,"multipleOf",n.value,n.message,t)}return r}(e,r);case rI.ZodBoolean:return{type:"boolean"};case rI.ZodDate:return function(e,t){return"integer"==t.dateStrategy?((e,t)=>{const r={type:"integer",format:"unix-time"};for(const n of e.checks)switch(n.kind){case"min":"jsonSchema7"===t.target&&iI(r,"minimum",n.value,n.message,t);break;case"max":"jsonSchema7"===t.target&&iI(r,"maximum",n.value,n.message,t)}return r})(e,t):{type:"string",format:"date-time"}}(e,r);case rI.ZodUndefined:return{not:{}};case rI.ZodNull:return function(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}(r);case rI.ZodArray:return function(e,t){const r={type:"array"};return e.type?._def?.typeName!==rI.ZodAny&&(r.items=fI(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&iI(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&iI(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(iI(r,"minItems",e.exactLength.value,e.exactLength.message,t),iI(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}(e,r);case rI.ZodUnion:case rI.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return hI(e,t);const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every((e=>e._def.typeName in dI&&(!e._def.checks||!e._def.checks.length)))){const e=r.reduce(((e,t)=>{const r=dI[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e}),[]);return{type:e.length>1?e:e[0]}}if(r.every((e=>"ZodLiteral"===e._def.typeName&&!e.description))){const e=r.reduce(((e,t)=>{const r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}}),[]);if(e.length===r.length){const t=e.filter(((e,t,r)=>r.indexOf(e)===t));return{type:t.length>1?t:t[0],enum:r.reduce(((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value]),[])}}}else if(r.every((e=>"ZodEnum"===e._def.typeName)))return{type:"string",enum:r.reduce(((e,t)=>[...e,...t._def.values.filter((t=>!e.includes(t)))]),[])};return hI(e,t)}(e,r);case rI.ZodIntersection:return function(e,t){const r=[fI(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),fI(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter((e=>!!e));let n="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0;const i=[];return r.forEach((e=>{if("type"in(t=e)&&"string"===t.type||!("allOf"in t)){let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){const{additionalProperties:r,...n}=e;t=n}else n=void 0;i.push(t)}else i.push(...e.allOf),void 0===e.unevaluatedProperties&&(n=void 0);var t})),i.length?{allOf:i,...n}:void 0}(e,r);case rI.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map(((e,r)=>fI(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]}))).reduce(((e,t)=>void 0===t?e:[...e,t]),[]),additionalItems:fI(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map(((e,r)=>fI(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]}))).reduce(((e,t)=>void 0===t?e:[...e,t]),[])}}(e,r);case rI.ZodRecord:return lI(e,r);case rI.ZodLiteral:return function(e,t){const r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}(e,r);case rI.ZodEnum:return function(e){return{type:"string",enum:e.values}}(e);case rI.ZodNativeEnum:return function(e){const t=e.values,r=Object.keys(e.values).filter((e=>"number"!=typeof t[t[e]])).map((e=>t[e])),n=Array.from(new Set(r.map((e=>typeof e))));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}(e);case rI.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:dI[e.innerType._def.typeName],nullable:!0}:{type:[dI[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){const r=fI(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&{...r,nullable:!0}}const r=fI(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}(e,r);case rI.ZodOptional:return((e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return fI(e.innerType._def,t);const r=fI(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}})(e,r);case rI.ZodMap:return function(e,t){return"record"===t.mapStrategy?lI(e,t):{type:"array",maxItems:125,items:{type:"array",items:[fI(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},fI(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}(e,r);case rI.ZodSet:return function(e,t){const r={type:"array",uniqueItems:!0,items:fI(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&iI(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&iI(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}(e,r);case rI.ZodLazy:return fI(e.getter()._def,r);case rI.ZodPromise:return function(e,t){return fI(e.type._def,t)}(e,r);case rI.ZodNaN:case rI.ZodNever:return{not:{}};case rI.ZodEffects:return function(e,t){return"input"===t.effectStrategy?fI(e.schema._def,t):{}}(e,r);case rI.ZodAny:case rI.ZodUnknown:return{};case rI.ZodDefault:return function(e,t){return{...fI(e.innerType._def,t),default:e.defaultValue()}}(e,r);case rI.ZodBranded:return function(e,t){return fI(e.type._def,t)}(e,r);case rI.ZodReadonly:case rI.ZodCatch:return((e,t)=>fI(e.innerType._def,t))(e,r);case rI.ZodPipeline:return((e,t)=>{if("input"===t.pipeStrategy)return fI(e.in._def,t);if("output"===t.pipeStrategy)return fI(e.out._def,t);const r=fI(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[r,fI(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]})].filter((e=>void 0!==e))}})(e,r);case rI.ZodFunction:case rI.ZodVoid:case rI.ZodSymbol:default:return}},yI=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),vI=(e,t)=>{const r=(e=>{const t=(e=>"string"==typeof e?{...zP,name:e}:{...zP,...e})(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map((([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}])))}})(t),n="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce(((e,[t,n])=>({...e,[t]:fI(n._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??{}})),{}):void 0,i="string"==typeof t?t:t?.name,s=fI(e._def,void 0===i?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1)??{},a=void 0===i?n?{...s,[r.definitionPath]:n}:s:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...n,[i]:s}};return"jsonSchema7"===r.target?a.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"===r.target&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),a};function _I(e){return{name:e.name,description:e.description,parameters:vI(e.schema)}}function bI(e){return{type:"function",function:_I(e)}}function wI(e,t){const r=[];for(const[n,i]of Object.entries(e.properties??{}))i.description&&t<2&&r.push(`// ${i.description}`),e.required?.includes(n)?r.push(`${n}: ${AI(i,t)},`):r.push(`${n}?: ${AI(i,t)},`);return r.map((e=>" ".repeat(t)+e)).join("\n")}function AI(e,t){if(void 0!==(r=e).anyOf&&Array.isArray(r.anyOf))return e.anyOf.map((e=>AI(e,t))).join(" | ");var r;switch(e.type){case"string":return e.enum?e.enum.map((e=>`"${e}"`)).join(" | "):"string";case"number":case"integer":return e.enum?e.enum.map((e=>`${e}`)).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",wI(e,t+2),"}"].join("\n");case"array":return e.items?`${AI(e.items,t)}[]`:"any[]";default:return""}}function EI(e){const t=e._getType();switch(t){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":if(!vx.isInstance(e))throw new Error("Invalid generic chat message");return function(e){return"system"!==e.role&&"assistant"!==e.role&&"user"!==e.role&&"function"!==e.role&&"tool"!==e.role&&console.warn(`Unknown message role: ${e.role}`),e.role}(e);default:throw new Error(`Unknown message type: ${t}`)}}function kI(e,t){const r=e.role??t,n=e.content??"";let i;return i=e.function_call?{function_call:e.function_call}:e.tool_calls?{tool_calls:e.tool_calls}:{},"user"===r?new dx({content:n}):"assistant"===r?new fx({content:n,additional_kwargs:i}):"system"===r?new mx({content:n}):"function"===r?new gx({content:n,additional_kwargs:i,name:e.name}):"tool"===r?new yx({content:n,additional_kwargs:i,tool_call_id:e.tool_call_id}):new bx({content:n,role:r})}function xI(e){return e.map((e=>({role:EI(e),content:e.content,name:e.name,function_call:e.additional_kwargs.function_call,tool_calls:e.additional_kwargs.tool_calls,tool_call_id:e.tool_call_id})))}i(5011);class TI extends qP{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,t){if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=e?.openAIApiKey??Sx("OPENAI_API_KEY"),this.azureOpenAIApiKey=e?.azureOpenAIApiKey??Sx("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??Sx("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=e?.azureOpenAIApiDeploymentName??Sx("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??Sx("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??Sx("AZURE_OPENAI_BASE_PATH"),this.organization=e?.configuration?.organization??Sx("OPENAI_ORGANIZATION"),this.modelName=e?.modelName??this.modelName,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.maxTokens=e?.maxTokens,this.logprobs=e?.logprobs,this.topLogprobs=e?.topLogprobs,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stop,this.user=e?.user,this.streaming=e?.streaming??!1,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found");this.openAIApiKey=this.openAIApiKey??""}this.clientConfig={apiKey:this.openAIApiKey,organization:this.organization,baseURL:t?.basePath??e?.configuration?.basePath,dangerouslyAllowBrowser:!0,defaultHeaders:t?.baseOptions?.headers??e?.configuration?.baseOptions?.headers,defaultQuery:t?.baseOptions?.params??e?.configuration?.baseOptions?.params,...t,...e?.configuration}}invocationParams(e){var t;return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:-1===this.maxTokens?void 0:this.maxTokens,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stop,user:this.user,stream:this.streaming,functions:e?.functions,function_call:e?.function_call,tools:(t=e?.tools,void 0!==t&&t.every((e=>Array.isArray(e.lc_namespace)))?e?.tools.map(bI):e?.tools),tool_choice:e?.tool_choice,response_format:e?.response_format,seed:e?.seed,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,t,r){const n=xI(e),i={...this.invocationParams(t),messages:n,stream:!0};let s;const a=await this.completionWithRetry(i,t);for await(const e of a){const n=e?.choices[0];if(!n)continue;const{delta:i}=n;if(!i)continue;const a=kI(i,s);s=i.role??s;const o={prompt:t.promptIndex??0,completion:n.index??0};if("string"!=typeof a.content){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const u=new kx({message:a,text:a.content,generationInfo:o});yield u,r?.handleLLMNewToken(u.text??"",o,void 0,void 0,void 0,{chunk:u})}if(t.signal?.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _generate(e,t,r){const n={},i=this.invocationParams(t),s=xI(e);if(i.stream){const i=this._streamResponseChunks(e,t,r),s={};for await(const e of i){const t=e.generationInfo?.completion??0;void 0===s[t]?s[t]=e:s[t]=s[t].concat(e)}const a=Object.entries(s).sort((([e],[t])=>parseInt(e,10)-parseInt(t,10))).map((([e,t])=>t)),{functions:o,function_call:u}=this.invocationParams(t),c=await this.getEstimatedTokenCountFromPrompt(e,o,u),l=await this.getNumTokensFromGenerations(a);return n.promptTokens=c,n.completionTokens=l,n.totalTokens=c+l,{generations:a,llmOutput:{estimatedTokenUsage:n}}}{const e=await this.completionWithRetry({...i,stream:!1,messages:s},{signal:t?.signal,...t?.options}),{completion_tokens:r,prompt_tokens:o,total_tokens:u}=e?.usage??{};r&&(n.completionTokens=(n.completionTokens??0)+r),o&&(n.promptTokens=(n.promptTokens??0)+o),u&&(n.totalTokens=(n.totalTokens??0)+u);const c=[];for(const t of e?.choices??[]){const e={text:t.message?.content??"",message:(a=t.message??{role:"assistant"},"assistant"===a.role?new hx(a.content||"",{function_call:a.function_call,tool_calls:a.tool_calls}):new vx(a.content||"",a.role??"unknown"))};e.generationInfo={...t.finish_reason?{finish_reason:t.finish_reason}:{},...t.logprobs?{logprobs:t.logprobs}:{}},c.push(e)}return{generations:c,llmOutput:{tokenUsage:n}}}var a}async getEstimatedTokenCountFromPrompt(e,t,r){let n=(await this.getNumTokensFromMessages(e)).totalCount;if(t&&"auto"!==r){const e=function(e){const t=["namespace functions {",""];for(const r of e)r.description&&t.push(`// ${r.description}`),Object.keys(r.parameters.properties??{}).length>0?(t.push(`type ${r.name} = (_: {`),t.push(wI(r.parameters,0)),t.push("}) => any;")):t.push(`type ${r.name} = () => any;`),t.push("");return t.push("} // namespace functions"),t.join("\n")}(t);n+=await this.getNumTokens(e),n+=9}return t&&e.find((e=>"system"===e._getType()))&&(n-=4),"none"===r?n+=1:"object"==typeof r&&(n+=await this.getNumTokens(r.name)+4),n}async getNumTokensFromGenerations(e){return(await Promise.all(e.map((async e=>e.message.additional_kwargs?.function_call?(await this.getNumTokensFromMessages([e.message])).countPerMessage[0]:await this.getNumTokens(e.message.content))))).reduce(((e,t)=>e+t),0)}async getNumTokensFromMessages(e){let t=0,r=0,n=0;"gpt-3.5-turbo-0301"===this.modelName?(r=4,n=-1):(r=3,n=1);const i=await Promise.all(e.map((async e=>{const i=await this.getNumTokens(e.content),s=await this.getNumTokens(EI(e)),a=void 0!==e.name?n+await this.getNumTokens(e.name):0;let o=i+r+s+a;const u=e;return"function"===u._getType()&&(o-=2),u.additional_kwargs?.function_call&&(o+=3),u?.additional_kwargs.function_call?.name&&(o+=await this.getNumTokens(u.additional_kwargs.function_call?.name)),u.additional_kwargs.function_call?.arguments&&(o+=await this.getNumTokens(JSON.stringify(JSON.parse(u.additional_kwargs.function_call?.arguments)))),t+=o,o})));return t+=3,{totalCount:t,countPerMessage:i}}async completionWithRetry(e,t){const r=this._getClientOptions(t);return this.caller.call((async()=>{try{return await this.client.chat.completions.create(e,r)}catch(e){const t=function(e){let t;return e.constructor.name===Zk.name?(t=new Error(e.message),t.name="TimeoutError"):e.constructor.name===qk.name?(t=new Error(e.message),t.name="AbortError"):t=e,t}(e);throw t}}))}_getClientOptions(e){if(!this.client){const e=function(e){const{azureOpenAIApiDeploymentName:t,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:i,baseURL:s}=e;if(n&&i&&t)return`${i}/${t}`;if(n){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!t)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${t}`}return s}({azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL}),t={...this.clientConfig,baseURL:e,timeout:this.timeout,maxRetries:0};t.baseURL||delete t.baseURL,this.client=new Bk(t)}const t={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(t.headers={"api-key":this.azureOpenAIApiKey,...t.headers},t.query={"api-version":this.azureOpenAIApiVersion,...t.query}),t}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce(((e,t)=>(t&&t.tokenUsage&&(e.tokenUsage.completionTokens+=t.tokenUsage.completionTokens??0,e.tokenUsage.promptTokens+=t.tokenUsage.promptTokens??0,e.tokenUsage.totalTokens+=t.tokenUsage.totalTokens??0),e)),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}}function PI(){return new TI({})}function SI(e,t,r){return Uint8Array.from([144+e,t,r])}function II(e,t,r){return Uint8Array.from([128+e,t,r])}function OI(e,t,r){return Uint8Array.from([176+e,t,r])}function CI(e){return e.toISOString()}function NI(){return CI(new Date)}function MI(e){return CI(e).split("T")[0].replace(/-/g,"_")}function RI(){return MI(new Date)}function jI(e){return Number(e)}function DI(){return jI(new Date)}function BI(e,t){return e.getTime()==t.getTime()}function LI(e){return new Date(e.getTime())}function UI(e){return e.toString().split(" ").slice(0,4).join(" ").replace(" ","_")}function FI(e,t){let r=LI(e);switch(t){case"year":r.setMonth(0);case"month":r.setDate(1);case"day":r.setHours(0);case"hour":r.setMinutes(0);case"minute":r.setSeconds(0);case"second":r.setMilliseconds(0);case"millisecond":break;default:return r}return r}function ZI(e,t,r){let n=LI(e);switch(r){case"year":n.setFullYear(n.getFullYear()+t);break;case"month":n.setMonth(n.getMonth()+t);break;case"day":n.setDate(n.getDate()+t);break;case"hour":n.setHours(n.getHours()+t);break;case"minute":n.setMinutes(n.getMinutes()+t);break;case"second":n.setSeconds(n.getSeconds()+t);break;case"millisecond":n.setMilliseconds(n.getMilliseconds()+t);break;default:return n}return n}var qI={"1sec":1e3,"5sec":5e3,"10sec":1e4,"30sec":3e4,"1min":6e4,"2min":12e4,"5min":3e5,"10min":6e5,"30min":18e5,"1hr":36e5,"1day":864e5};const zI=Do({id:"common"});async function $I(e,t){let r=`${e}?${new URLSearchParams(t)}`;return zI(`Querying with url= ${r}`),(await fetch(r,{method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json"},redirect:"follow"})).json()}})();var a=t;for(var o in s)a[o]=s[o];s.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return r[e](s,s.exports,i),s.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};(()=>{i.r(s),i.d(s,{apis:()=>S,common:()=>N,components:()=>I,cryptocurrency:()=>m,umd:()=>C,util:()=>h});var e={};i.r(e),i.d(e,{_speak:()=>W,default_rate:()=>G,finished_speaking:()=>F,finished_utterance:()=>U,get_voice:()=>z,get_voice_by_name:()=>$,get_voices:()=>q,is_speaking:()=>Z,set_default_rate:()=>V,speak:()=>J,speech_que:()=>L,tts:()=>B,voices_ready:()=>K,wait_until_voices_ready:()=>H});var t={};i.r(t),i.d(t,{get_recognition_object:()=>Q});var r={};i.r(r),i.d(r,{audio_context:()=>te,error:()=>he,input_ready:()=>fe,m2f:()=>Y,note_obj_to_midi:()=>ie,note_to_freq:()=>oe,note_to_midi:()=>ae,note_to_note_obj:()=>se,play_note:()=>ue,play_notes:()=>ce,play_notes_delay:()=>le,proceed:()=>pe,success:()=>de,tone:()=>ne});var n={};i.r(n),i.d(n,{audio_primitives:()=>ge,connect:()=>ve,disconnect:()=>_e});var a={};i.r(a),i.d(a,{_recorder:()=>Ae,get_current_data:()=>Se,get_recorder_object:()=>Ee,get_recorder_state:()=>Ie,is_supported:()=>we,pause_recording:()=>Te,resume_recording:()=>Pe,start_recording:()=>ke,stop_recording:()=>xe});var o={};i.r(o),i.d(o,{audio_detector:()=>De,detection_threshold:()=>Re,listeners:()=>Me,media_recorder:()=>a,mic:()=>n,set_detection_threshold:()=>je,start_power:()=>Ne,stop:()=>Be});var u={};i.r(u),i.d(u,{dot_join:()=>qe,full_name:()=>ze,get:()=>Ke,get_header:()=>Ge,get_keys:()=>He,get_t:()=>We,set_storage_header:()=>Ze,store:()=>$e,store_t:()=>Ve});var c={};i.r(c),i.d(c,{RecognitionState:()=>Je,ap:()=>o,initialize_recognition:()=>et,pause_recognition:()=>tt,recognition:()=>Ye,recognition_state:()=>Xe,set_default_tts_rate:()=>ot,set_default_voice_from_name_preference_list:()=>ut,set_default_voice_uri:()=>at,speak:()=>lt,speak_with_rate:()=>dt,speak_with_voice:()=>ct,sr:()=>t,start_recognition:()=>nt,start_recognition_and_detection:()=>st,stop_recognition:()=>rt,stop_recognition_and_detection:()=>it,tts:()=>e});var l={};i.r(l),i.d(l,{WebSocketMaker:()=>ft});var d={};i.r(d),i.d(d,{set_value_by_id:()=>pt});var h={};i.r(h),i.d(h,{add_css:()=>Et,add_script:()=>wt,alert:()=>gt,audio_processing:()=>o,define:()=>bt,dom:()=>d,inject_script:()=>At,is_chrome:()=>yt,is_mobile:()=>vt,sounds:()=>r,speech_recognition:()=>t,tts:()=>e,uuid:()=>_t,voice_interface:()=>c,ws:()=>l});var f={};i.r(f),i.d(f,{basic_spot_kine_socket:()=>Tt,basic_spot_trade_socket:()=>St,spot_kline_socket:()=>xt,spot_trade_socket:()=>Pt});var p={};i.r(p),i.d(p,{buy_beep:()=>Ct,sell_beep:()=>Nt,set_sound_options:()=>Ot,sound_options:()=>It,trade_beeper:()=>Mt});var m={};i.r(m),i.d(m,{binance_listener:()=>p,binance_ws:()=>f});var g={};i.r(g),i.d(g,{load_key_handlers:()=>jt});var y={};i.r(y),i.d(y,{keys:()=>qt,keys_to_notes_1:()=>zt,load_sound_key_handler:()=>Kt,sound_key_handler:()=>$t});var v={};i.r(v),i.d(v,{get_openai:()=>Jt,get_openai_tts_response:()=>Xt,openai_davinci_prompt:()=>er,speak:()=>Qt,text_to_audio:()=>Yt});var _={};i.r(_),i.d(_,{encode_json_to_uint8:()=>rr,get_datagram_writer:()=>nr,get_json_writer:()=>sr,init:()=>tr,write_json_datagram:()=>ir});var b={};i.r(b),i.d(b,{libraries:()=>or,load_all:()=>fr,load_firebase_app:()=>ur,load_firebase_auth:()=>cr,load_firebase_firestore:()=>dr,load_firebase_ui:()=>lr,load_firebase_ui_css:()=>hr});var w={};i.r(w),i.d(w,{loader:()=>b});var A={};i.r(A),i.d(A,{get_midi_writer:()=>pr});var E={};i.r(E),i.d(E,{webtransport:()=>A});var k={};i.r(k),i.d(k,{log_motion:()=>br,log_orientation:()=>wr,motion_handler:()=>Tr,motion_subscribers:()=>vr,orientation_handler:()=>Pr,orientation_subscribers:()=>_r,start_device_motion:()=>Sr,start_device_orientation:()=>Ir,stop_device_motion:()=>Or,stop_device_orientation:()=>Cr,subscribe_to_motion:()=>Ar,subscribe_to_orientation:()=>Er,unsubscribe_motion_id:()=>kr,unsubscribe_orientation_id:()=>xr});var x={};i.r(x),i.d(x,{CACHE_CHECK_INTERVAL:()=>Ur,GET_DB:()=>$r,LOCAL_DB_HANDLE_CACHE:()=>Lr,START_CACHE_CHECK:()=>Vr,STOP_CACHE_CHECK:()=>Wr,cache_check_interval_id:()=>Hr,default_db_header:()=>Zr,default_store_name:()=>Fr,deleteDB:()=>Jr,do_cache_check:()=>Gr,exportDBString:()=>Qr,importFromJson:()=>Yr,log:()=>Dr,set_cache_check_interval:()=>Kr});var T={};i.r(T),i.d(T,{load_bokeh_scripts:()=>tn});var P={};i.r(P),i.d(P,{SoundEventDetector:()=>bn,ctx:()=>nn,data_array:()=>gn,decode_audio_array_buffer:()=>dn,decode_audio_blob:()=>hn,get_audio_context:()=>un,get_audio_stream:()=>cn,get_sampling_rate:()=>ln,get_sound_event_detector:()=>_n,initialize_microphone:()=>vn,mic_callbacks:()=>fn,mic_initialized:()=>yn,register_mic_callback:()=>pn,run_mic_callbacks:()=>mn,sound_event_detector:()=>an,stream:()=>sn});var S={};i.r(S),i.d(S,{bind_sounds_to_keys:()=>y,bokeh:()=>T,db:()=>x,firebase:()=>w,key_presses:()=>g,local_storage:()=>u,midi:()=>E,openai:()=>v,sensor:()=>k,web_audio:()=>P,webtransport:()=>_});var I={};i.r(I);var O={};i.r(O),i.d(O,{adjust_tts_rate:()=>jn,click_input:()=>En,configure_tts:()=>Dn,default_monitoring_interval:()=>Bn,enter_input:()=>kn,finish_stream_handler:()=>Cn,initialize_voice_system:()=>Ln,initialize_voice_system_with_tts:()=>Un,input_area:()=>wn,monitor_responses:()=>Nn,new_text_handler:()=>Sn,set_input:()=>An,speak:()=>On,speech_text_handler:()=>In,start_speech_recognition_and_link_to_input:()=>xn,stop_monitoring:()=>Rn,voice_preference_order:()=>Mn});var C={};i.r(C),i.d(C,{chatgpt:()=>O});var N=i(611);let{asnc:M,fp:R,logger:j}=N,D=j.get_logger({id:"tts"});var B=function(){return window.speechSynthesis},L=[];async function U(){await M.wait_until((()=>!B().speaking),1/0,200)}async function F(){await M.wait_until((()=>!B().speaking&&L.length<1),1/0,200)}function Z(){return B().speaking||L.length>0}function q(){return B().getVoices()}function z(e){let t=B().getVoices().filter((t=>t.voiceURI==e));return t.length>0?t[0]:null}function $(e){let t=B().getVoices().filter((t=>t.name==e));return t.length>0?t[0]:null}function K(){try{return B().getVoices().length>0}catch(e){return!1}}async function H(){await N.asnc.wait_until(K,3e3,200),D("voices_ready")}var G=1;function V(e){G=e,D("Default rate set to: "+e)}async function W(e){let{voiceURI:t,rate:r=G,text:n}=e;if(B().speaking)console.log("Scheduling speech for later."),L.push(e);else{var i=new window.SpeechSynthesisUtterance(n);if(t){let e=z(t);e&&(i.voice=e)}i.rate=r,B().speak(i),await U();let e=L.shift();e?W(e):console.log("done with speech que")}}function J(e){let{voiceURI:t,rate:r=G,text:n}=e;D("Request to speak  =:> "+n),D("With voice =:> "+t),R.map(R.partition(R.split(n," "),20),R.joiner(" ")).forEach((function(t){let r=R.clone(e);r.text=t,W(r)}))}function Q(e={}){let{result_dispatch:t="tidyscripts_web_speech_recognition_result"}=e,{continuous:r=!0,interimResults:n=!1,onStart:i=(()=>{console.log("Recognition started")}),onSoundStart:s=(()=>{console.log("Sound started...")}),onSoundEnd:a=(()=>{console.log("Sound ended...")}),onSpeechStart:o=(()=>{console.log("Speech started...")}),onSpeechEnd:u=(()=>{console.log("Speech ended...")}),onResult:c=function(e){let r=e.results[e.resultIndex][0].transcript;console.log("Recognition result: "+r),window.dispatchEvent(new CustomEvent(t,{detail:r}))},onError:l=(e=>{console.log("Recognition error: "),console.log(e)}),onEnd:d=(()=>{console.log("Recognition ended")}),lang:h="en-US"}=e,f=new window.webkitSpeechRecognition;return f.onresult=c,f.onerror=l,f.onend=d,f.continuous=r,f.interimResults=n,f.onstart=i,f.onsoundstart=s,f.onsoundend=a,f.onspeechstart=o,f.onspeechend=u,f}var Y={12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:27.5,22:29.135,23:30.868,24:32.703,25:34.648,26:36.708,27:38.891,28:41.203,29:43.654,30:46.249,31:48.999,32:51.913,33:55,34:58.27,35:61.735,36:65.406,37:69.296,38:73.416,39:77.782,40:82.407,41:87.307,42:92.499,43:97.999,44:103.826,45:110,46:116.541,47:123.471,48:130.813,49:138.591,50:146.832,51:155.564,52:164.814,53:174.614,54:184.997,55:195.998,56:207.652,57:220,58:233.082,59:246.942,60:261.626,61:277.183,62:293.665,63:311.127,64:329.628,65:349.228,66:369.994,67:391.995,68:415.305,69:440,70:466.164,71:493.883,72:523.251,73:554.365,74:587.33,75:622.254,76:659.255,77:698.457,78:739.989,79:783.991,80:830.609,81:880,82:932.328,83:987.767,84:1046.502,85:1108.731,86:1174.659,87:1244.508,88:1318.51,89:1396.913,90:1479.978,91:1567.982,92:1661.219,93:1760,94:1864.655,95:1975.533,96:2093.005,97:2217.461,98:2349.318,99:2489.016,100:2637.021,101:2793.826,102:2959.956,103:3135.964,104:3322.438,105:3520,106:3729.31,107:3951.066,108:4186.009,109:4434.922,110:4698.637,111:4978.032,112:5274.042,113:5587.652,114:5919.912,115:6271.928,116:6644.876,117:7040,118:7458.62,119:7902.133,120:8372.019,121:8869.845,122:9397.273,123:9956.064,124:10548.083,125:11175.305,126:11839.823,127:12543.855};let{fp:X,asnc:ee}=N;var te=null,re=function(){if(te)return te;{let e=window.AudioContext||window.webkitAudioContext;return te=new e}};async function ne(e){let{type:t="sine",duration:r=600,gain:n=.5,delay:i,freq:s}=e,a=re();var o=a.createOscillator();o.frequency.value=s,o.type=t;var u=a.createGain();if(i){var c=a.createDelay();c.delayTime.value=i,u.connect(c),c.connect(a.destination)}u.gain.value=n,o.connect(u),u.connect(a.destination),o.start(0),await ee.wait(r),o.stop()}function ie(e){let{num:t,mod:r,octave:n}=e,i=function(e){return X.nth([0,0,2,4,5,7,9,11,12],e)}(t)+12*n;return r&&(i+="#"==r?1:-1),i}function se(e){let t=e.split(".");var r=0,n=null,i=null;return t.length>1&&(r=Number(t[1])),t[0].length>1?(n=t[0][0],i=Number(t[0][1])):i=Number(t[0][0]),{num:i,mod:n,octave:r}}function ae(e){return ie(se(e))}function oe(e){return Y[ae(e)]}async function ue(e,t,r){console.log(X.format("note | n= {}, dur={}, k={}",[e,t,r]));let n=r?ae(r):60,i=ae(e),s=Y[String(n+i)],a=t||500;try{await ne({freq:s,duration:a})}catch(e){console.log("Error playing. You likely played a note outside of currently supported range"),console.log(e),console.log("freq + duration:"),console.log({freq:s,duration:a})}}async function ce(e,t,r){e.map((e=>ue(e,t,r)))}async function le(e,t,r,n){for(var i of e)ue(i,r,n),await ee.wait(t)}function de(){ce(["1","3"],400,"3.5")}function he(){ce(["1","b5"],200,"3.5")}function fe(){le(["1","3"],100,100,"3.5")}function pe(){ce(["5.-1"],100,"3.5")}const me=N.logger.get_logger({id:"mic"});var ge={context:null,source:null,processor:null,stream:null,mic_sample_rate:null},ye=function(e,t){return function(r){var n,i,s,a,o;ge.stream=r,ge.context=new window.AudioContext,ge.source=null===(n=ge.context)||void 0===n?void 0:n.createMediaStreamSource(r),ge.processor=null===(i=ge.context)||void 0===i?void 0:i.createScriptProcessor(1024,1,1),null===(s=ge.source)||void 0===s||s.connect(ge.processor),null===(a=ge.processor)||void 0===a||a.connect(null===(o=ge.context)||void 0===o?void 0:o.destination),ge.processor.onaudioprocess=function(r){let n=e(r.inputBuffer.getChannelData(0));const i=new window.CustomEvent(t,{detail:n});window.dispatchEvent(i)};let u=r.getAudioTracks()[0].getSettings().sampleRate;ge.mic_sample_rate=u,me(`Determined sample rate of mic : ${ge.mic_sample_rate}`)}};function ve(e,t){let r=t||"tidyscripts_web_mic";window.navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(ye(e,r))}function _e(){let e=ge.context;e&&e.close(),ge={context:null,source:null,processor:null,stream:null,mic_sample_rate:null}}const be=N.logger.get_logger({id:"media_recorder"});function we(){return!!window.navigator.mediaDevices}var Ae=null;async function Ee(){if(Ae)return Ae;if(!we())return void be("NOT SUPPORTED");let e=await navigator.mediaDevices.getUserMedia({audio:!0});return Ae=new MediaRecorder(e)}async function ke(e,t){let r=await Ee();r.addEventListener("dataavailable",(async function(t){e(await t.data)})),r.start(t),be("Recording started")}async function xe(){(await Ee()).stop(),be("Recording stopped")}async function Te(){(await Ee()).pause(),be("Recording paused")}async function Pe(){(await Ee()).resume(),be("Recording resumed")}async function Se(){return(await Ee()).requestData()}async function Ie(){return(await Ee()).state}let{dsp:Oe,performance:Ce}=N.util;function Ne(){ve((e=>Oe.power(e)),"tidyscripts_web_mic")}var Me=[],Re=1e3;function je(e){Re=e}function De(e,t){Ne(),t&&je(t);var r=0,n=Ce.ms();let i=t=>{let i=t.detail;if(0==r)return void(r=i);let s=i/r*100;Ce.ms()-n>600&&s>Re&&e(),r=i};window.addEventListener("tidyscripts_web_mic",i),Me.push(["tidyscripts_web_mic",i])}function Be(){for(var e of(_e(),Me))window.removeEventListener(e[0],e[1]);Me=[]}let{fp:Le}=N,Ue=function(){return window.localStorage};var Fe="tidyscripts";function Ze(e){Fe=e}function qe(e){return e.join(".")}function ze(e){return qe([Fe,e])}function $e(e,t){Ue()[ze(t)]=JSON.stringify(e)}function Ke(e){let t=Ue()[ze(e)];return t?JSON.parse(t):null}function He(){return Object.keys(Ue())}function Ge(e){let t=He();return Le.filter(t,(t=>t.startsWith(e)))}function Ve(e,t){$e({timestamp:Number(new Date),data:e},t)}function We(e){return Ke(e)}var Je,Qe=N.logger.get_logger({id:"voice_interface"}),Ye=null;!function(e){e.NULL="NULL",e.STOPPED="STOPPED",e.PAUSED="PAUSED",e.LISTENING="LISTENING",e.STOPPING="STOPPING"}(Je||(Je={}));var Xe=Je.NULL;function et(e){rt();let t=(e=e||{}).onEnd;e.onEnd=function(){Xe==Je.STOPPING?(Qe("Recognition stopped"),Xe=Je.STOPPED):(Xe=Je.PAUSED,Qe("Recognition paused")),t&&t()},Ye=Q(e),Xe=Je.PAUSED,De(nt)}function tt(){Ye&&(Ye.abort(),Xe=Je.PAUSED)}function rt(){Ye&&(Qe("Stopping recognition"),Xe=Je.STOPPING,Ye.abort(),Ye=null,Be())}async function nt(){Xe!=Je.LISTENING&&(Z()&&Qe("Wont start recognition while tts active"),Ye?Ye.start():(et(),Qe("Recognition initialized without args")),Xe=Je.LISTENING)}function it(){let e=Re;return tt(),je(1/0),e}function st(e){nt(),je(e)}function at(e){$e("default_voice_uri",e)}function ot(e){V(e)}function ut(e){for(var t of e){let e=$(t);if(e)return at(e.voiceURI),void Qe(`Set default voice to: ${e.name}`)}Qe("Unable to set default voice to any matching name in provided list")}async function ct(e,t,r){if(Ye){let n=it();J({text:e,voiceURI:t,rate:r}),await F(),st(n)}else J({text:e,voiceURI:t,rate:r}),await F()}async function lt(e){ct(e,Ke("default_voice_uri"),G)}async function dt(e,t){ct(e,Ke("default_voice_uri"),t)}let ht=N.logger.get_logger({id:"ws"});function ft(e){var{url:t,handler:r,open:n,error:i,close:s}=e;n=n||(()=>{ht(`ws to ${t} opened`)}),s=s||(()=>{ht(`ws to ${t} closed`)}),i=i||(e=>{ht(`ws to ${t} errored: ${JSON.stringify(e)}`)});let a=new WebSocket(t);return a.onopen=n,a.onclose=s,a.onerror=i,a.onmessage=e=>{r(e.data)},a}function pt(e,t){document.getElementById(e).value=t}let mt=N.logger.get_logger({id:"wutil"});function gt(e){mt("Alerting web page!"),window.alert(e)}function yt(){return/Chrome/.test(window.navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function vt(){return/Mobi/.test(window.navigator.userAgent)}function _t(){var e=new Uint32Array(4);window.crypto.getRandomValues(e);var t=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(r){t++;var n=e[t>>3]>>t%8*4&15;return("x"==r?n:3&n|8).toString(16)}))}async function bt(e,t){window[t]=await e,mt(`Defined ${t} on the window object :)`)}function wt(e){return new Promise(((t,r)=>{const n=window.document.createElement("script");n.setAttribute("src",e),n.addEventListener("load",t),n.addEventListener("error",r),document.body.appendChild(n)}))}function At(e){return new Promise(((t,r)=>{const n=window.document.createElement("script");n.setAttribute("src",e.src);let i=e.attributes;if(i){let e=Object.keys(i);for(let t of e)n.setAttribute(t,i[t])}n.addEventListener("load",t),n.addEventListener("error",r),document.body.appendChild(n)}))}function Et(e){return new Promise(((t,r)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=e,n.media="all",n.addEventListener("load",t),n.addEventListener("error",r),document.getElementsByTagName("head")[0].appendChild(n)}))}let kt=N.logger.get_logger({id:"bws"});function xt(e,t){let{sym:r,handler:n,error:i,close:s,open:a}=e;r=r.toLowerCase();let o=`wss://stream.binance.com:9443/ws/${r}@kline_${t=t||"1m"}`;return kt("Using url for spot kline socket: "+o),ft({url:o,handler:n,error:i,close:s,open:a})}function Tt(e,t){return xt({sym:e,handler:t=t||(e=>{console.log(JSON.parse(e))})})}function Pt(e){let{sym:t,handler:r,error:n,close:i,open:s}=e;t=t.toLowerCase();let a=`wss://stream.binance.com:9443/ws/${t}@aggTrade`;return kt("Using url for spot trade socket: "+a),ft({url:a,handler:r,error:n,close:i,open:s})}function St(e,t){return Pt({sym:e,handler:t=t||(e=>{console.log(JSON.parse(e))})})}var It={freq:{buy:620,sell:580},duration:{buy:30,sell:30}};function Ot(e){It=e}function Ct(e){ne({freq:It.freq.buy,gain:e,duration:It.duration.buy})}function Nt(e){ne({freq:It.freq.sell,gain:e,duration:It.duration.sell})}function Mt(e){return St(e,(function(e){let t=JSON.parse(e),{m:r,p:n,q:i}=t,s=Number(i),a=s>1?1:s;console.log(t),r?Nt(a):Ct(a)}))}let Rt=N.logger.get_logger({id:"key_presses"});function jt(e){window.onkeypress=function(t){Rt("Keypress!");let r=t.key;console.log(r),e[r]&&e[r]()}}N.fp,N.util.debug;let Dt=N.logger.get_logger({id:"key_sounds"}),Bt=N.fp,Lt=N.util.debug;var Ut=["q","w","e","r","t","y","u","i","o","p","["],Ft=["a","s","d","f","g","h","j","k","l",";"],Zt=["z","x","c","v","b","n","m",","],qt={hi:Ut,mid:Ft,lo:Zt};function zt(e){let t=Zt.concat(Ft).concat(Ut),r=0,n={};for(var i of Bt.enumerate(t)){i[0]%7==0&&(r+=1);let e=i[0]%7+1,t=Bt.format("{}.{}",[e,r]);n[i[1]]=t}return n}function $t(e,t=30,r="1.4"){let n={};for(var i of Bt.dict_to_list(e)){let e=i[0],s=i[1];n[e]=function(){Dt(String(s)),ue(String(s),t,r)}}return n}function Kt(e=30,t="1.4"){let r=$t(zt(),e,t);jt(r),Lt.add("km",r)}let{get_json_from_url:Ht}=N,{OpenAI:Gt}=N.apis;var Vt=null;const Wt=N.logger.get_logger({id:"open_ai_web"});function Jt(){if(Vt)return Wt("OpenAI already initialized"),Vt;{Wt("Initializing open api in browser");let e=localStorage.OAAK;if(e)return Vt=new Gt({apiKey:e,dangerouslyAllowBrowser:!0}),Wt("Complete"),Vt;{let e='Unable to find API key; please make sure api key is under "OOAK" in local storage';return Wt(e),window.alert(e),1}}}async function Qt(e){Wt(`Request to speak ${e}`);let t=await Yt(e);return Wt("Retrieved audio data from openai"),Wt("Playing audio and returning data"),t.audio_element.play(),t}async function Yt(e){let t=await Xt(e),r=await t.blob(),n=URL.createObjectURL(r);return{audio_element:new Audio(n),blob:r}}async function Xt(e){let t=Jt();return await t.audio.speech.create({model:"tts-1",voice:"alloy",input:e})}async function er(e,t){return await Ht("https://www.tidyscripts.com/api/openai_davinci",{prompt:e,max_tokens:t})}function tr(e){return new WebTransport(e)}function rr(e){return(new TextEncoder).encode(JSON.stringify(e))}function nr(e){let t=tr(e);return{writer:t.datagrams.writable.getWriter(),transport:t}}async function ir(e,t){let r=rr(t);await e.write(r)}function sr(e){let{writer:t,transport:r}=nr(e);return t.write_json=async function(e){await t.write(rr(e))},t}const ar=N.logger.get_logger({id:"firebase_loader"}),or={app:"https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js",auth:"https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js",firestore:"https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js",ui:"https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js",ui_css:"https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css"};async function ur(){return wt(or.app)}async function cr(){return wt(or.auth)}async function lr(){return wt(or.ui)}async function dr(){return wt(or.firestore)}async function hr(){return Et(or.ui_css)}async function fr(){ar("Loading firebase resources"),await ur(),await Promise.all([cr(),lr(),hr(),dr()]),ar("Done")}function pr(e){let t=nr(e);return t.note_on=function(e,r,n){let i=N.midi_encoder.note_on(e,r,n);t.write(i)},t.note_off=function(e,r,n){let i=Uint8Array.from([128+e,r,n]);t.write(i)},t.control_change=function(e,r,n){let i=N.midi_encoder.control_change(e,r,n);t.write(i)},t}const mr=N.logger.get_logger({id:"sensors"});var gr=!1,yr=!1,vr={},_r={};function br(e){let t="default.motion.logger";Ar(t,(function(e){let{acceleration:t,rotationRate:r}=e,{x:n,y:i,z:s}=t,{alpha:a,beta:o,gamma:u}=r;mr(`x,y,z,alpha,beta,gamma=${n},${i},${s},${a},${o},${u}`)})),window.setTimeout((function(){kr(t)}),1e3*e)}function wr(e){let t="default.orientation.logger";Er(t,(function(e){let{alpha:t,beta:r,gamma:n}=e;mr(`alpha,beta,gamma=${t},${r},${n}`)})),window.setTimeout((function(){xr(t)}),1e3*e)}function Ar(e,t){Sr(),vr[e]&&mr(`WARNING! motion subscription id ${e} has already been used`),vr[e]=t}function Er(e,t){Ir(),_r[e]&&mr(`WARNING! orientation subscription id ${e} has already been used`),_r[e]=t}function kr(e){delete vr[e],mr(`Unsubscribed motion id: ${e}`),N.fp.is_empty_array(N.fp.keys(vr))&&(mr("No more motion subscribers; so listener will be detached"),Or())}function xr(e){delete _r[e],mr(`Unsubscribed orientation id: ${e}`),N.fp.is_empty_array(N.fp.keys(_r))&&(mr("No more orientation subscribers; so listener will be detached"),Cr())}function Tr(e){N.fp.values(vr).map((t=>t(e)))}function Pr(e){N.fp.values(_r).map((t=>t(e)))}function Sr(){gr||(window.addEventListener("devicemotion",Tr),mr("Started listening to device motion (registered handler"),gr=!0)}function Ir(){yr||(window.addEventListener("deviceorientation",Pr),mr("Started listening to device orientation (registered handler"),yr=!0)}function Or(){window.removeEventListener("devicemotion",Tr),gr=!1,mr("Unregistered device motion handler")}function Cr(){window.removeEventListener("deviceorientation",Pr),yr=!1,mr("Unregistered device orientation handler")}const Nr=N.logger.get_logger({id:"idbmod"});class Mr{constructor(e="keyval-store",t="keyval"){this.storeName=t,this._db=null,this._dbp=new Promise(((r,n)=>{let i=this;const s=indexedDB.open(e,1);s.onerror=()=>n(s.error),s.onsuccess=function(){r(s.result),i._db=s.result},s.onupgradeneeded=()=>{Nr(`creating store: ${e},  ${t}`),s.result.createObjectStore(t)}}))}_withIDBStore(e,t){return this._dbp.then((r=>new Promise(((n,i)=>{const s=r.transaction(this.storeName,e);s.oncomplete=()=>n(),s.onabort=s.onerror=()=>i(s.error),t(s.objectStore(this.storeName))}))))}get_db(){return this._db}}let Rr;function jr(){return Rr||(Rr=new Mr),Rr}const Dr=N.logger.get_logger({id:"db"}),Br=N.dates,Lr={};var Ur=5e3;const Fr="main_store",Zr="TIDYSCRIPTS_WEB_";var qr=null,zr=!1;function $r(e,t=!0){if(zr||(Dr("initializing TTL"),zr=!0,qr=$r("TTL")),Lr[e])return t&&Dr(`getting db from local cache: ${e}`),Lr[e];var r=new Mr(Zr+e,Fr);function n(e,t){return function(e,t,r=jr()){return r._withIDBStore("readwrite",(r=>{r.put(t,e)}))}(e,t,r)}let i={store:r,set:n,get:function(e){return function(e,t=jr()){let r;return t._withIDBStore("readonly",(t=>{r=t.get(e)})).then((()=>r.result))}(e,r)},del:function(e){return function(e,t=jr()){return t._withIDBStore("readwrite",(t=>{t.delete(e)}))}(e,r)},keys:function(){return function(e=jr()){const t=[];return e._withIDBStore("readonly",(e=>{(e.openKeyCursor||e.openCursor).call(e).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}})).then((()=>t))}(r)},clear:function(){return function(e=jr()){return e._withIDBStore("readwrite",(e=>{e.clear()}))}(r)},set_with_ttl:async function(t){let{id:r,ttl_ms:i,value:s}=t,a=i+Br.ms_now();Dr(`In db "${e}" setting "${r}" with ttl_ms ${i}, expiration = ${a}`),await n(r,s),await qr.set(a,{db_id:e,del_id:r}),Dr("done setting with ttl \\(^.^)/")},get_db_store:function(){return r},ready:function(){return r._dbp}};return Lr[e]=i,t&&Dr(`getting db: ${e}`),i}function Kr(e){Ur=e,Dr("Updated cache check interval to "+e+" ms")}var Hr=null;async function Gr(){let e=await qr.keys(),t=e.length,r=e.filter((e=>e<Br.ms_now())),n=r.length,i=[];for(var s of r){let{db_id:e,del_id:t}=await qr.get(s),r=$r(e,!1);await r.del(t),await qr.del(s),i.push({db_id:e,del_id:t})}Dr(`CacheCheck |> ${n}/${t} expired:`),n>0&&Dr(i)}function Vr(e){Hr&&(Dr("Already checking, will clear old interval."),Wr()),Kr(e),Hr=setInterval(Gr,Ur)}function Wr(){clearInterval(Hr),Dr("Stopped cache check")}function Jr(e){return window.indexedDB.deleteDatabase(Zr+e)}async function Qr(e){let t=$r(e).get_db_store()._db;return await(r=t,new Promise(((e,t)=>{const n={};if(0===r.objectStoreNames.length)e(JSON.stringify(n));else{const i=r.transaction(r.objectStoreNames,"readonly");i.addEventListener("error",t);for(const t of r.objectStoreNames){const s=[];i.objectStore(t).openCursor().addEventListener("success",(i=>{const a=i.target.result;a?(s.push([a.key,a.value]),a.continue()):(n[t]=s,r.objectStoreNames.length===Object.keys(n).length&&e(JSON.stringify(n)))}))}}})));var r}async function Yr(e,t){let r=$r(e);await r.ready();let n=r.get_db_store()._db;return await(i=n,s=t,new Promise(((e,t)=>{const r=i.transaction(i.objectStoreNames,"readwrite");r.addEventListener("error",t);var n=JSON.parse(s);for(const t of i.objectStoreNames){let i=0;for(const s of n[t]){let[a,o]=s;r.objectStore(t).add(o,a).addEventListener("success",(()=>{i++,i===n[t].length&&(delete n[t],0===Object.keys(n).length&&e("ok"))}))}}})));var i,s}const Xr=N.logger.get_logger({id:"bokeh"});var en=!1;async function tn(){if(window.Bokeh)return void Xr("Bokeh is already loaded! Skipping load for now...");if(en)return void Xr("Bokeh is already loading! Skipping load for now...");en=!0;let e="3.0.0",t=[`https://cdn.bokeh.org/bokeh/release/bokeh-${e}.min.js`,`https://cdn.bokeh.org/bokeh/release/bokeh-widgets-${e}.min.js`,`https://cdn.bokeh.org/bokeh/release/bokeh-tables-${e}.min.js`,`https://cdn.bokeh.org/bokeh/release/bokeh-api-${e}.min.js`,`https://cdn.bokeh.org/bokeh/release/bokeh-gl-${e}.min.js`,`https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-${e}.min.js`];for(var r of(Xr("Loading scripts"),t))Xr(`Loading ${r}`),await At({src:r,attributes:{crossorigin:"anonymous"}});Xr("Done")}const rn=N.util.dsp;var nn=null,sn=null,an=null;const on=N.logger.get_logger({id:"web_audio"});async function un(){return nn||(nn=new window.AudioContext,sn=await window.navigator.mediaDevices.getUserMedia({audio:!0}),nn)}async function cn(){return sn||(await un(),await window.navigator.mediaDevices.getUserMedia({audio:!0}))}async function ln(){return(await cn()).getAudioTracks()[0].getSettings().sampleRate}async function dn(e){let t=await un();return await t.decodeAudioData(e)}async function hn(e){return await dn(await e.arrayBuffer())}var fn={};function pn(e,t){fn[e]=t}function mn(e){Object.keys(fn).length>0&&N.fp.apply_function_dictionary_to_object(fn,e)}var gn,yn=!1;async function vn(){if(yn)return on("mic already initialized");let e=await un(),t=await cn(),r=e.createMediaStreamSource(t),n=e.createAnalyser();n.fftSize=2048,gn=new Float32Array(n.frequencyBinCount),r.connect(n),yn=!0,function e(){requestAnimationFrame(e),n.getFloatTimeDomainData(gn),mn(gn)}()}async function _n(e){if(await vn(),an)return on("sound event detector already initialized"),an;let t={threshold:.2,margin:600,audio_buffer_size:gn.length,register_fn:pn},r=Object.assign(t,e);return an=new bn(r),await an.init(),an}class bn extends window.EventTarget{constructor(e){super();let{threshold:t,margin:r,register_fn:n,audio_buffer_size:i}=e;this.threshold=t,this.margin=r,this.register_fn=n,this.log=N.logger.get_logger({id:"snd_evt"}),this.sampling_rate=48e3,this.audio_buffer_size=i,this.tmp_buffer=[],this.tmp_buffer_max_length=10,this.event_buffer=[],this.recording_event=!1,this.event_start_time=0}async init(){let e=this;this.register_fn("SED",(function(t){e.handle_data(t)})),this.log("Linked sound event detector to audio source"),this.sampling_rate=await ln(),this.log(`Got sampling rate ${this.sampling_rate}`);let t=this.num_buffers_to_cover_margin();this.log(`To track a margin of ${this.margin} ms, tmp_buffer will need to hold ${t} audio_buffers of size ${this.audio_buffer_size} samples`),this.tmp_buffer_max_length=t,this.tmp_buffer=N.fp.range(0,t).map((e=>new Float32Array(this.audio_buffer_size)))}handle_data(e){this.tmp_buffer.shift(),this.tmp_buffer.push(e),this.recording_event&&this.event_buffer.push(e),this.analyze_tmp_buffer()}analyze_tmp_buffer(){let e=this.tmp_buffer;if(this.recording_event){if(N.fp.all_true(e.map((e=>rn.mean_abs(e)<this.threshold)))){this.log("Detected quiet while recording event..."),this.recording_event=!1;let e=rn.flat_float32_array(this.event_buffer),t=new window.Event("sound_event_ended",{data:e,sampling_rate:this.sampling_rate,duration:this.samples_to_ms(e.length),event_start_time:this.event_start_time});this.dispatchEvent(t),this.event_buffer=[],this.log("Completed and dispatched event.")}}else if(N.fp.all_true(e.map((e=>rn.mean_abs(e)>this.threshold)))){this.log("Detected event start");let e=new window.Event("sound_event_started");this.dispatchEvent(e),this.recording_event=!0,this.event_start_time=N.util.unix_timestamp_ms()}}samples_to_ms(e){return 1e3*e/this.sampling_rate}ms_to_samples(e){return e*this.sampling_rate/1e3}num_buffers_to_cover_margin(){let e=this.ms_to_samples(this.margin);return Math.ceil(e/this.audio_buffer_size)}}function wn(){return document.querySelector("textarea")}function An(e){wn().value=e}function En(){wn().parentElement.querySelector("button").click()}function kn(e){An(e),En()}function xn(){window.addEventListener("tidyscripts_web_speech_recognition_result",(function(e){kn(e.detail)})),et()}var Tn=null,Pn="";function Sn(e){console.log("new text:"+e)}function In(e){lt(e)}function On(e){lt(e)}function Cn(){console.log("finished stream"),et()}function Nn(e,t){let r=e;Tn=window.setInterval((function(){let e=document.querySelector(".result-streaming");if(e){let r=e.innerText,n=r.replace(Pn,"");t?In(n):Sn(n),Pn=r}else if(""==Pn);else{let e=N.fp.last(Array.from(document.querySelectorAll("div.markdown"))).innerText.replace(Pn,"");t?In(e):Sn(e),Pn="",Cn()}}),r)}var Mn=["Google UK English Female","Google UK English Male","Google UK English","Karen","Rishi"];function Rn(){window.clearInterval(Tn)}function jn(e){ot(e)}async function Dn(){await H(),ot(1.3),ut(Mn)}var Bn=2e3;async function Ln(){xn(),await Dn(),Nn(Bn,!1)}async function Un(){xn(),await Dn(),Nn(Bn,!0)}})();var a=t;for(var o in s)a[o]=s[o];s.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n);var e=r(499);window.tsw=e})(),n})()));